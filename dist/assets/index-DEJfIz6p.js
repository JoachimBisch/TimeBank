var Pk=Object.defineProperty;var Rk=(t,e,n)=>e in t?Pk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Sn=(t,e,n)=>Rk(t,typeof e!="symbol"?e+"":e,n);function Nk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Dk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $w={exports:{}},Sd={},zw={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ll=Symbol.for("react.element"),Ok=Symbol.for("react.portal"),Vk=Symbol.for("react.fragment"),Mk=Symbol.for("react.strict_mode"),Lk=Symbol.for("react.profiler"),jk=Symbol.for("react.provider"),Fk=Symbol.for("react.context"),Uk=Symbol.for("react.forward_ref"),Bk=Symbol.for("react.suspense"),$k=Symbol.for("react.memo"),zk=Symbol.for("react.lazy"),By=Symbol.iterator;function Wk(t){return t===null||typeof t!="object"?null:(t=By&&t[By]||t["@@iterator"],typeof t=="function"?t:null)}var Ww={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qw=Object.assign,Hw={};function Oa(t,e,n){this.props=t,this.context=e,this.refs=Hw,this.updater=n||Ww}Oa.prototype.isReactComponent={};Oa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kw(){}Kw.prototype=Oa.prototype;function qm(t,e,n){this.props=t,this.context=e,this.refs=Hw,this.updater=n||Ww}var Hm=qm.prototype=new Kw;Hm.constructor=qm;qw(Hm,Oa.prototype);Hm.isPureReactComponent=!0;var $y=Array.isArray,Gw=Object.prototype.hasOwnProperty,Km={current:null},Qw={key:!0,ref:!0,__self:!0,__source:!0};function Yw(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Gw.call(e,r)&&!Qw.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var u=Array(o),c=0;c<o;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Ll,type:t,key:i,ref:a,props:s,_owner:Km.current}}function qk(t,e){return{$$typeof:Ll,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ll}function Hk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zy=/\/+/g;function Ph(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Hk(""+t.key):e.toString(36)}function Xu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ll:case Ok:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Ph(a,0):r,$y(s)?(n="",t!=null&&(n=t.replace(zy,"$&/")+"/"),Xu(s,e,n,"",function(c){return c})):s!=null&&(Gm(s)&&(s=qk(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(zy,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",$y(t))for(var o=0;o<t.length;o++){i=t[o];var u=r+Ph(i,o);a+=Xu(i,e,n,u,s)}else if(u=Wk(t),typeof u=="function")for(t=u.call(t),o=0;!(i=t.next()).done;)i=i.value,u=r+Ph(i,o++),a+=Xu(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function bu(t,e,n){if(t==null)return t;var r=[],s=0;return Xu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Kk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},Ju={transition:null},Gk={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Ju,ReactCurrentOwner:Km};function Zw(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:bu,forEach:function(t,e,n){bu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bu(t,function(){e++}),e},toArray:function(t){return bu(t,function(e){return e})||[]},only:function(t){if(!Gm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Oa;ge.Fragment=Vk;ge.Profiler=Lk;ge.PureComponent=qm;ge.StrictMode=Mk;ge.Suspense=Bk;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gk;ge.act=Zw;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qw({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Km.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(u in e)Gw.call(e,u)&&!Qw.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var c=0;c<u;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Ll,type:t.type,key:s,ref:i,props:r,_owner:a}};ge.createContext=function(t){return t={$$typeof:Fk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jk,_context:t},t.Consumer=t};ge.createElement=Yw;ge.createFactory=function(t){var e=Yw.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:Uk,render:t}};ge.isValidElement=Gm;ge.lazy=function(t){return{$$typeof:zk,_payload:{_status:-1,_result:t},_init:Kk}};ge.memo=function(t,e){return{$$typeof:$k,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Ju.transition;Ju.transition={};try{t()}finally{Ju.transition=e}};ge.unstable_act=Zw;ge.useCallback=function(t,e){return qt.current.useCallback(t,e)};ge.useContext=function(t){return qt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return qt.current.useEffect(t,e)};ge.useId=function(){return qt.current.useId()};ge.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return qt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};ge.useRef=function(t){return qt.current.useRef(t)};ge.useState=function(t){return qt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return qt.current.useTransition()};ge.version="18.3.1";zw.exports=ge;var M=zw.exports;const Ft=Dk(M),Qk=Nk({__proto__:null,default:Ft},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yk=M,Zk=Symbol.for("react.element"),Xk=Symbol.for("react.fragment"),Jk=Object.prototype.hasOwnProperty,eS=Yk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tS={key:!0,ref:!0,__self:!0,__source:!0};function Xw(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Jk.call(e,r)&&!tS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Zk,type:t,key:i,ref:a,props:s,_owner:eS.current}}Sd.Fragment=Xk;Sd.jsx=Xw;Sd.jsxs=Xw;$w.exports=Sd;var f=$w.exports,Jw={exports:{}},dn={},eE={exports:{}},tE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ie){var de=G.length;G.push(ie);e:for(;0<de;){var Ve=de-1>>>1,Ce=G[Ve];if(0<s(Ce,ie))G[Ve]=ie,G[de]=Ce,de=Ve;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ie=G[0],de=G.pop();if(de!==ie){G[0]=de;e:for(var Ve=0,Ce=G.length,ze=Ce>>>1;Ve<ze;){var fn=2*(Ve+1)-1,In=G[fn],Jt=fn+1,mn=G[Jt];if(0>s(In,de))Jt<Ce&&0>s(mn,In)?(G[Ve]=mn,G[Jt]=de,Ve=Jt):(G[Ve]=In,G[fn]=de,Ve=fn);else if(Jt<Ce&&0>s(mn,de))G[Ve]=mn,G[Jt]=de,Ve=Jt;else break e}}return ie}function s(G,ie){var de=G.sortIndex-ie.sortIndex;return de!==0?de:G.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var u=[],c=[],h=1,p=null,g=3,w=!1,A=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var ie=n(c);ie!==null;){if(ie.callback===null)r(c);else if(ie.startTime<=G)r(c),ie.sortIndex=ie.expirationTime,e(u,ie);else break;ie=n(c)}}function O(G){if(C=!1,E(G),!A)if(n(u)!==null)A=!0,yt(U);else{var ie=n(c);ie!==null&&Ye(O,ie.startTime-G)}}function U(G,ie){A=!1,C&&(C=!1,T(v),v=-1),w=!0;var de=g;try{for(E(ie),p=n(u);p!==null&&(!(p.expirationTime>ie)||G&&!R());){var Ve=p.callback;if(typeof Ve=="function"){p.callback=null,g=p.priorityLevel;var Ce=Ve(p.expirationTime<=ie);ie=t.unstable_now(),typeof Ce=="function"?p.callback=Ce:p===n(u)&&r(u),E(ie)}else r(u);p=n(u)}if(p!==null)var ze=!0;else{var fn=n(c);fn!==null&&Ye(O,fn.startTime-ie),ze=!1}return ze}finally{p=null,g=de,w=!1}}var $=!1,k=null,v=-1,I=5,S=-1;function R(){return!(t.unstable_now()-S<I)}function P(){if(k!==null){var G=t.unstable_now();S=G;var ie=!0;try{ie=k(!0,G)}finally{ie?x():($=!1,k=null)}}else $=!1}var x;if(typeof _=="function")x=function(){_(P)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Be=ke.port2;ke.port1.onmessage=P,x=function(){Be.postMessage(null)}}else x=function(){N(P,0)};function yt(G){k=G,$||($=!0,x())}function Ye(G,ie){v=N(function(){G(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){A||w||(A=!0,yt(U))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var de=g;g=ie;try{return G()}finally{g=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ie){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var de=g;g=G;try{return ie()}finally{g=de}},t.unstable_scheduleCallback=function(G,ie,de){var Ve=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ve+de:Ve):de=Ve,G){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=de+Ce,G={id:h++,callback:ie,priorityLevel:G,startTime:de,expirationTime:Ce,sortIndex:-1},de>Ve?(G.sortIndex=de,e(c,G),n(u)===null&&G===n(c)&&(C?(T(v),v=-1):C=!0,Ye(O,de-Ve))):(G.sortIndex=Ce,e(u,G),A||w||(A=!0,yt(U))),G},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(G){var ie=g;return function(){var de=g;g=ie;try{return G.apply(this,arguments)}finally{g=de}}}})(tE);eE.exports=tE;var nS=eE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rS=M,un=nS;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nE=new Set,Qo={};function _i(t,e){ha(t,e),ha(t+"Capture",e)}function ha(t,e){for(Qo[t]=e,t=0;t<e.length;t++)nE.add(e[t])}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vf=Object.prototype.hasOwnProperty,sS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wy={},qy={};function iS(t){return vf.call(qy,t)?!0:vf.call(Wy,t)?!1:sS.test(t)?qy[t]=!0:(Wy[t]=!0,!1)}function aS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oS(t,e,n,r){if(e===null||typeof e>"u"||aS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qm=/[\-:]([a-z])/g;function Ym(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qm,Ym);It[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qm,Ym);It[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qm,Ym);It[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zm(t,e,n,r){var s=It.hasOwnProperty(e)?It[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oS(e,n,s,r)&&(n=null),r||s===null?iS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mr=rS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pu=Symbol.for("react.element"),Fi=Symbol.for("react.portal"),Ui=Symbol.for("react.fragment"),Xm=Symbol.for("react.strict_mode"),wf=Symbol.for("react.profiler"),rE=Symbol.for("react.provider"),sE=Symbol.for("react.context"),Jm=Symbol.for("react.forward_ref"),Ef=Symbol.for("react.suspense"),xf=Symbol.for("react.suspense_list"),ep=Symbol.for("react.memo"),qr=Symbol.for("react.lazy"),iE=Symbol.for("react.offscreen"),Hy=Symbol.iterator;function co(t){return t===null||typeof t!="object"?null:(t=Hy&&t[Hy]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Rh;function xo(t){if(Rh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rh=e&&e[1]||""}return`
`+Rh+t}var Nh=!1;function Dh(t,e){if(!t||Nh)return"";Nh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=o);break}}}finally{Nh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xo(t):""}function lS(t){switch(t.tag){case 5:return xo(t.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 2:case 15:return t=Dh(t.type,!1),t;case 11:return t=Dh(t.type.render,!1),t;case 1:return t=Dh(t.type,!0),t;default:return""}}function Tf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ui:return"Fragment";case Fi:return"Portal";case wf:return"Profiler";case Xm:return"StrictMode";case Ef:return"Suspense";case xf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sE:return(t.displayName||"Context")+".Consumer";case rE:return(t._context.displayName||"Context")+".Provider";case Jm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ep:return e=t.displayName||null,e!==null?e:Tf(t.type)||"Memo";case qr:e=t._payload,t=t._init;try{return Tf(t(e))}catch{}}return null}function uS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tf(e);case 8:return e===Xm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _s(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cS(t){var e=aE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ru(t){t._valueTracker||(t._valueTracker=cS(t))}function oE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=aE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function If(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ky(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_s(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lE(t,e){e=e.checked,e!=null&&Zm(t,"checked",e,!1)}function kf(t,e){lE(t,e);var n=_s(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sf(t,e.type,_s(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sf(t,e,n){(e!=="number"||xc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var To=Array.isArray;function ea(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_s(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Af(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(To(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_s(n)}}function uE(t,e){var n=_s(e.value),r=_s(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nu,dE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nu=Nu||document.createElement("div"),Nu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Do={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dS=["Webkit","ms","Moz","O"];Object.keys(Do).forEach(function(t){dS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Do[e]=Do[t]})});function hE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Do.hasOwnProperty(t)&&Do[t]?(""+e).trim():e+"px"}function fE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var hS=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bf(t,e){if(e){if(hS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Pf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rf=null;function tp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nf=null,ta=null,na=null;function Zy(t){if(t=Ul(t)){if(typeof Nf!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Rd(e),Nf(t.stateNode,t.type,e))}}function mE(t){ta?na?na.push(t):na=[t]:ta=t}function pE(){if(ta){var t=ta,e=na;if(na=ta=null,Zy(t),e)for(t=0;t<e.length;t++)Zy(e[t])}}function gE(t,e){return t(e)}function yE(){}var Oh=!1;function _E(t,e,n){if(Oh)return t(e,n);Oh=!0;try{return gE(t,e,n)}finally{Oh=!1,(ta!==null||na!==null)&&(yE(),pE())}}function Zo(t,e){var n=t.stateNode;if(n===null)return null;var r=Rd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Df=!1;if(Ar)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Df=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Df=!1}function fS(t,e,n,r,s,i,a,o,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Oo=!1,Tc=null,Ic=!1,Of=null,mS={onError:function(t){Oo=!0,Tc=t}};function pS(t,e,n,r,s,i,a,o,u){Oo=!1,Tc=null,fS.apply(mS,arguments)}function gS(t,e,n,r,s,i,a,o,u){if(pS.apply(this,arguments),Oo){if(Oo){var c=Tc;Oo=!1,Tc=null}else throw Error(W(198));Ic||(Ic=!0,Of=c)}}function vi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xy(t){if(vi(t)!==t)throw Error(W(188))}function yS(t){var e=t.alternate;if(!e){if(e=vi(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Xy(s),t;if(i===r)return Xy(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function wE(t){return t=yS(t),t!==null?EE(t):null}function EE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=EE(t);if(e!==null)return e;t=t.sibling}return null}var xE=un.unstable_scheduleCallback,Jy=un.unstable_cancelCallback,_S=un.unstable_shouldYield,vS=un.unstable_requestPaint,tt=un.unstable_now,wS=un.unstable_getCurrentPriorityLevel,np=un.unstable_ImmediatePriority,TE=un.unstable_UserBlockingPriority,kc=un.unstable_NormalPriority,ES=un.unstable_LowPriority,IE=un.unstable_IdlePriority,Ad=null,Zn=null;function xS(t){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Ad,t,void 0,(t.current.flags&128)===128)}catch{}}var Dn=Math.clz32?Math.clz32:kS,TS=Math.log,IS=Math.LN2;function kS(t){return t>>>=0,t===0?32:31-(TS(t)/IS|0)|0}var Du=64,Ou=4194304;function Io(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=Io(o):(i&=a,i!==0&&(r=Io(i)))}else a=n&~s,a!==0?r=Io(a):i!==0&&(r=Io(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Dn(e),s=1<<n,r|=t[n],e&=~s;return r}function SS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Dn(i),o=1<<a,u=s[a];u===-1?(!(o&n)||o&r)&&(s[a]=SS(o,e)):u<=e&&(t.expiredLanes|=o),i&=~o}}function Vf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kE(){var t=Du;return Du<<=1,!(Du&4194240)&&(Du=64),t}function Vh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function jl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dn(e),t[e]=n}function CS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Dn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function rp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Dn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Re=0;function SE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var AE,sp,CE,bE,PE,Mf=!1,Vu=[],is=null,as=null,os=null,Xo=new Map,Jo=new Map,Kr=[],bS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e_(t,e){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(e.pointerId)}}function fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ul(e),e!==null&&sp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function PS(t,e,n,r,s){switch(e){case"focusin":return is=fo(is,t,e,n,r,s),!0;case"dragenter":return as=fo(as,t,e,n,r,s),!0;case"mouseover":return os=fo(os,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Xo.set(i,fo(Xo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Jo.set(i,fo(Jo.get(i)||null,t,e,n,r,s)),!0}return!1}function RE(t){var e=Gs(t.target);if(e!==null){var n=vi(e);if(n!==null){if(e=n.tag,e===13){if(e=vE(n),e!==null){t.blockedOn=e,PE(t.priority,function(){CE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ec(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rf=r,n.target.dispatchEvent(r),Rf=null}else return e=Ul(n),e!==null&&sp(e),t.blockedOn=n,!1;e.shift()}return!0}function t_(t,e,n){ec(t)&&n.delete(e)}function RS(){Mf=!1,is!==null&&ec(is)&&(is=null),as!==null&&ec(as)&&(as=null),os!==null&&ec(os)&&(os=null),Xo.forEach(t_),Jo.forEach(t_)}function mo(t,e){t.blockedOn===e&&(t.blockedOn=null,Mf||(Mf=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,RS)))}function el(t){function e(s){return mo(s,t)}if(0<Vu.length){mo(Vu[0],t);for(var n=1;n<Vu.length;n++){var r=Vu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(is!==null&&mo(is,t),as!==null&&mo(as,t),os!==null&&mo(os,t),Xo.forEach(e),Jo.forEach(e),n=0;n<Kr.length;n++)r=Kr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kr.length&&(n=Kr[0],n.blockedOn===null);)RE(n),n.blockedOn===null&&Kr.shift()}var ra=Mr.ReactCurrentBatchConfig,Ac=!0;function NS(t,e,n,r){var s=Re,i=ra.transition;ra.transition=null;try{Re=1,ip(t,e,n,r)}finally{Re=s,ra.transition=i}}function DS(t,e,n,r){var s=Re,i=ra.transition;ra.transition=null;try{Re=4,ip(t,e,n,r)}finally{Re=s,ra.transition=i}}function ip(t,e,n,r){if(Ac){var s=Lf(t,e,n,r);if(s===null)qh(t,e,r,Cc,n),e_(t,r);else if(PS(s,t,e,n,r))r.stopPropagation();else if(e_(t,r),e&4&&-1<bS.indexOf(t)){for(;s!==null;){var i=Ul(s);if(i!==null&&AE(i),i=Lf(t,e,n,r),i===null&&qh(t,e,r,Cc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qh(t,e,r,null,n)}}var Cc=null;function Lf(t,e,n,r){if(Cc=null,t=tp(r),t=Gs(t),t!==null)if(e=vi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cc=t,null}function NE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wS()){case np:return 1;case TE:return 4;case kc:case ES:return 16;case IE:return 536870912;default:return 16}default:return 16}}var ts=null,ap=null,tc=null;function DE(){if(tc)return tc;var t,e=ap,n=e.length,r,s="value"in ts?ts.value:ts.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return tc=s.slice(t,1<r?1-r:void 0)}function nc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mu(){return!0}function n_(){return!1}function hn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Mu:n_,this.isPropagationStopped=n_,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mu)},persist:function(){},isPersistent:Mu}),e}var Va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},op=hn(Va),Fl=Ge({},Va,{view:0,detail:0}),OS=hn(Fl),Mh,Lh,po,Cd=Ge({},Fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==po&&(po&&t.type==="mousemove"?(Mh=t.screenX-po.screenX,Lh=t.screenY-po.screenY):Lh=Mh=0,po=t),Mh)},movementY:function(t){return"movementY"in t?t.movementY:Lh}}),r_=hn(Cd),VS=Ge({},Cd,{dataTransfer:0}),MS=hn(VS),LS=Ge({},Fl,{relatedTarget:0}),jh=hn(LS),jS=Ge({},Va,{animationName:0,elapsedTime:0,pseudoElement:0}),FS=hn(jS),US=Ge({},Va,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BS=hn(US),$S=Ge({},Va,{data:0}),s_=hn($S),zS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qS[t])?!!e[t]:!1}function lp(){return HS}var KS=Ge({},Fl,{key:function(t){if(t.key){var e=zS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lp,charCode:function(t){return t.type==="keypress"?nc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GS=hn(KS),QS=Ge({},Cd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i_=hn(QS),YS=Ge({},Fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lp}),ZS=hn(YS),XS=Ge({},Va,{propertyName:0,elapsedTime:0,pseudoElement:0}),JS=hn(XS),eA=Ge({},Cd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tA=hn(eA),nA=[9,13,27,32],up=Ar&&"CompositionEvent"in window,Vo=null;Ar&&"documentMode"in document&&(Vo=document.documentMode);var rA=Ar&&"TextEvent"in window&&!Vo,OE=Ar&&(!up||Vo&&8<Vo&&11>=Vo),a_=" ",o_=!1;function VE(t,e){switch(t){case"keyup":return nA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ME(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bi=!1;function sA(t,e){switch(t){case"compositionend":return ME(e);case"keypress":return e.which!==32?null:(o_=!0,a_);case"textInput":return t=e.data,t===a_&&o_?null:t;default:return null}}function iA(t,e){if(Bi)return t==="compositionend"||!up&&VE(t,e)?(t=DE(),tc=ap=ts=null,Bi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return OE&&e.locale!=="ko"?null:e.data;default:return null}}var aA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aA[t.type]:e==="textarea"}function LE(t,e,n,r){mE(r),e=bc(e,"onChange"),0<e.length&&(n=new op("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mo=null,tl=null;function oA(t){GE(t,0)}function bd(t){var e=Wi(t);if(oE(e))return t}function lA(t,e){if(t==="change")return e}var jE=!1;if(Ar){var Fh;if(Ar){var Uh="oninput"in document;if(!Uh){var u_=document.createElement("div");u_.setAttribute("oninput","return;"),Uh=typeof u_.oninput=="function"}Fh=Uh}else Fh=!1;jE=Fh&&(!document.documentMode||9<document.documentMode)}function c_(){Mo&&(Mo.detachEvent("onpropertychange",FE),tl=Mo=null)}function FE(t){if(t.propertyName==="value"&&bd(tl)){var e=[];LE(e,tl,t,tp(t)),_E(oA,e)}}function uA(t,e,n){t==="focusin"?(c_(),Mo=e,tl=n,Mo.attachEvent("onpropertychange",FE)):t==="focusout"&&c_()}function cA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bd(tl)}function dA(t,e){if(t==="click")return bd(e)}function hA(t,e){if(t==="input"||t==="change")return bd(e)}function fA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ln=typeof Object.is=="function"?Object.is:fA;function nl(t,e){if(Ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!vf.call(e,s)||!Ln(t[s],e[s]))return!1}return!0}function d_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h_(t,e){var n=d_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=d_(n)}}function UE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?UE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BE(){for(var t=window,e=xc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xc(t.document)}return e}function cp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mA(t){var e=BE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&UE(n.ownerDocument.documentElement,n)){if(r!==null&&cp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=h_(n,i);var a=h_(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pA=Ar&&"documentMode"in document&&11>=document.documentMode,$i=null,jf=null,Lo=null,Ff=!1;function f_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ff||$i==null||$i!==xc(r)||(r=$i,"selectionStart"in r&&cp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lo&&nl(Lo,r)||(Lo=r,r=bc(jf,"onSelect"),0<r.length&&(e=new op("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$i)))}function Lu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zi={animationend:Lu("Animation","AnimationEnd"),animationiteration:Lu("Animation","AnimationIteration"),animationstart:Lu("Animation","AnimationStart"),transitionend:Lu("Transition","TransitionEnd")},Bh={},$E={};Ar&&($E=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function Pd(t){if(Bh[t])return Bh[t];if(!zi[t])return t;var e=zi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $E)return Bh[t]=e[n];return t}var zE=Pd("animationend"),WE=Pd("animationiteration"),qE=Pd("animationstart"),HE=Pd("transitionend"),KE=new Map,m_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(t,e){KE.set(t,e),_i(e,[t])}for(var $h=0;$h<m_.length;$h++){var zh=m_[$h],gA=zh.toLowerCase(),yA=zh[0].toUpperCase()+zh.slice(1);bs(gA,"on"+yA)}bs(zE,"onAnimationEnd");bs(WE,"onAnimationIteration");bs(qE,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(HE,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_i("onBeforeInput",["compositionend","keypress","textInput","paste"]);_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_A=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function p_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gS(r,e,void 0,t),t.currentTarget=null}function GE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==i&&s.isPropagationStopped())break e;p_(s,o,c),i=u}else for(a=0;a<r.length;a++){if(o=r[a],u=o.instance,c=o.currentTarget,o=o.listener,u!==i&&s.isPropagationStopped())break e;p_(s,o,c),i=u}}}if(Ic)throw t=Of,Ic=!1,Of=null,t}function je(t,e){var n=e[Wf];n===void 0&&(n=e[Wf]=new Set);var r=t+"__bubble";n.has(r)||(QE(e,t,2,!1),n.add(r))}function Wh(t,e,n){var r=0;e&&(r|=4),QE(n,t,r,e)}var ju="_reactListening"+Math.random().toString(36).slice(2);function rl(t){if(!t[ju]){t[ju]=!0,nE.forEach(function(n){n!=="selectionchange"&&(_A.has(n)||Wh(n,!1,t),Wh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ju]||(e[ju]=!0,Wh("selectionchange",!1,e))}}function QE(t,e,n,r){switch(NE(e)){case 1:var s=NS;break;case 4:s=DS;break;default:s=ip}n=s.bind(null,e,n,t),s=void 0,!Df||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Gs(o),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}o=o.parentNode}}r=r.return}_E(function(){var c=i,h=tp(n),p=[];e:{var g=KE.get(t);if(g!==void 0){var w=op,A=t;switch(t){case"keypress":if(nc(n)===0)break e;case"keydown":case"keyup":w=GS;break;case"focusin":A="focus",w=jh;break;case"focusout":A="blur",w=jh;break;case"beforeblur":case"afterblur":w=jh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=r_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=MS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=ZS;break;case zE:case WE:case qE:w=FS;break;case HE:w=JS;break;case"scroll":w=OS;break;case"wheel":w=tA;break;case"copy":case"cut":case"paste":w=BS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=i_}var C=(e&4)!==0,N=!C&&t==="scroll",T=C?g!==null?g+"Capture":null:g;C=[];for(var _=c,E;_!==null;){E=_;var O=E.stateNode;if(E.tag===5&&O!==null&&(E=O,T!==null&&(O=Zo(_,T),O!=null&&C.push(sl(_,O,E)))),N)break;_=_.return}0<C.length&&(g=new w(g,A,null,n,h),p.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==Rf&&(A=n.relatedTarget||n.fromElement)&&(Gs(A)||A[Cr]))break e;if((w||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,w?(A=n.relatedTarget||n.toElement,w=c,A=A?Gs(A):null,A!==null&&(N=vi(A),A!==N||A.tag!==5&&A.tag!==6)&&(A=null)):(w=null,A=c),w!==A)){if(C=r_,O="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(C=i_,O="onPointerLeave",T="onPointerEnter",_="pointer"),N=w==null?g:Wi(w),E=A==null?g:Wi(A),g=new C(O,_+"leave",w,n,h),g.target=N,g.relatedTarget=E,O=null,Gs(h)===c&&(C=new C(T,_+"enter",A,n,h),C.target=E,C.relatedTarget=N,O=C),N=O,w&&A)t:{for(C=w,T=A,_=0,E=C;E;E=Ni(E))_++;for(E=0,O=T;O;O=Ni(O))E++;for(;0<_-E;)C=Ni(C),_--;for(;0<E-_;)T=Ni(T),E--;for(;_--;){if(C===T||T!==null&&C===T.alternate)break t;C=Ni(C),T=Ni(T)}C=null}else C=null;w!==null&&g_(p,g,w,C,!1),A!==null&&N!==null&&g_(p,N,A,C,!0)}}e:{if(g=c?Wi(c):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var U=lA;else if(l_(g))if(jE)U=hA;else{U=cA;var $=uA}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(U=dA);if(U&&(U=U(t,c))){LE(p,U,n,h);break e}$&&$(t,g,c),t==="focusout"&&($=g._wrapperState)&&$.controlled&&g.type==="number"&&Sf(g,"number",g.value)}switch($=c?Wi(c):window,t){case"focusin":(l_($)||$.contentEditable==="true")&&($i=$,jf=c,Lo=null);break;case"focusout":Lo=jf=$i=null;break;case"mousedown":Ff=!0;break;case"contextmenu":case"mouseup":case"dragend":Ff=!1,f_(p,n,h);break;case"selectionchange":if(pA)break;case"keydown":case"keyup":f_(p,n,h)}var k;if(up)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Bi?VE(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(OE&&n.locale!=="ko"&&(Bi||v!=="onCompositionStart"?v==="onCompositionEnd"&&Bi&&(k=DE()):(ts=h,ap="value"in ts?ts.value:ts.textContent,Bi=!0)),$=bc(c,v),0<$.length&&(v=new s_(v,t,null,n,h),p.push({event:v,listeners:$}),k?v.data=k:(k=ME(n),k!==null&&(v.data=k)))),(k=rA?sA(t,n):iA(t,n))&&(c=bc(c,"onBeforeInput"),0<c.length&&(h=new s_("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:c}),h.data=k))}GE(p,e)})}function sl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Zo(t,n),i!=null&&r.unshift(sl(t,i,s)),i=Zo(t,e),i!=null&&r.push(sl(t,i,s))),t=t.return}return r}function Ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function g_(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,u=o.alternate,c=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&c!==null&&(o=c,s?(u=Zo(n,i),u!=null&&a.unshift(sl(n,u,o))):s||(u=Zo(n,i),u!=null&&a.push(sl(n,u,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var vA=/\r\n?/g,wA=/\u0000|\uFFFD/g;function y_(t){return(typeof t=="string"?t:""+t).replace(vA,`
`).replace(wA,"")}function Fu(t,e,n){if(e=y_(e),y_(t)!==e&&n)throw Error(W(425))}function Pc(){}var Uf=null,Bf=null;function $f(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zf=typeof setTimeout=="function"?setTimeout:void 0,EA=typeof clearTimeout=="function"?clearTimeout:void 0,__=typeof Promise=="function"?Promise:void 0,xA=typeof queueMicrotask=="function"?queueMicrotask:typeof __<"u"?function(t){return __.resolve(null).then(t).catch(TA)}:zf;function TA(t){setTimeout(function(){throw t})}function Hh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),el(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);el(e)}function ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function v_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ma=Math.random().toString(36).slice(2),qn="__reactFiber$"+Ma,il="__reactProps$"+Ma,Cr="__reactContainer$"+Ma,Wf="__reactEvents$"+Ma,IA="__reactListeners$"+Ma,kA="__reactHandles$"+Ma;function Gs(t){var e=t[qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cr]||n[qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=v_(t);t!==null;){if(n=t[qn])return n;t=v_(t)}return e}t=n,n=t.parentNode}return null}function Ul(t){return t=t[qn]||t[Cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Rd(t){return t[il]||null}var qf=[],qi=-1;function Ps(t){return{current:t}}function Ue(t){0>qi||(t.current=qf[qi],qf[qi]=null,qi--)}function Me(t,e){qi++,qf[qi]=t.current,t.current=e}var vs={},Vt=Ps(vs),Yt=Ps(!1),ri=vs;function fa(t,e){var n=t.type.contextTypes;if(!n)return vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Zt(t){return t=t.childContextTypes,t!=null}function Rc(){Ue(Yt),Ue(Vt)}function w_(t,e,n){if(Vt.current!==vs)throw Error(W(168));Me(Vt,e),Me(Yt,n)}function YE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,uS(t)||"Unknown",s));return Ge({},n,r)}function Nc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vs,ri=Vt.current,Me(Vt,t),Me(Yt,Yt.current),!0}function E_(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=YE(t,e,ri),r.__reactInternalMemoizedMergedChildContext=t,Ue(Yt),Ue(Vt),Me(Vt,t)):Ue(Yt),Me(Yt,n)}var gr=null,Nd=!1,Kh=!1;function ZE(t){gr===null?gr=[t]:gr.push(t)}function SA(t){Nd=!0,ZE(t)}function Rs(){if(!Kh&&gr!==null){Kh=!0;var t=0,e=Re;try{var n=gr;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gr=null,Nd=!1}catch(s){throw gr!==null&&(gr=gr.slice(t+1)),xE(np,Rs),s}finally{Re=e,Kh=!1}}return null}var Hi=[],Ki=0,Dc=null,Oc=0,gn=[],yn=0,si=null,vr=1,wr="";function zs(t,e){Hi[Ki++]=Oc,Hi[Ki++]=Dc,Dc=t,Oc=e}function XE(t,e,n){gn[yn++]=vr,gn[yn++]=wr,gn[yn++]=si,si=t;var r=vr;t=wr;var s=32-Dn(r)-1;r&=~(1<<s),n+=1;var i=32-Dn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,vr=1<<32-Dn(e)+s|n<<s|r,wr=i+t}else vr=1<<i|n<<s|r,wr=t}function dp(t){t.return!==null&&(zs(t,1),XE(t,1,0))}function hp(t){for(;t===Dc;)Dc=Hi[--Ki],Hi[Ki]=null,Oc=Hi[--Ki],Hi[Ki]=null;for(;t===si;)si=gn[--yn],gn[yn]=null,wr=gn[--yn],gn[yn]=null,vr=gn[--yn],gn[yn]=null}var an=null,rn=null,$e=!1,Pn=null;function JE(t,e){var n=_n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function x_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,an=t,rn=ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,an=t,rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=si!==null?{id:vr,overflow:wr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,an=t,rn=null,!0):!1;default:return!1}}function Hf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kf(t){if($e){var e=rn;if(e){var n=e;if(!x_(t,e)){if(Hf(t))throw Error(W(418));e=ls(n.nextSibling);var r=an;e&&x_(t,e)?JE(r,n):(t.flags=t.flags&-4097|2,$e=!1,an=t)}}else{if(Hf(t))throw Error(W(418));t.flags=t.flags&-4097|2,$e=!1,an=t}}}function T_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function Uu(t){if(t!==an)return!1;if(!$e)return T_(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$f(t.type,t.memoizedProps)),e&&(e=rn)){if(Hf(t))throw e0(),Error(W(418));for(;e;)JE(t,e),e=ls(e.nextSibling)}if(T_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rn=ls(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rn=null}}else rn=an?ls(t.stateNode.nextSibling):null;return!0}function e0(){for(var t=rn;t;)t=ls(t.nextSibling)}function ma(){rn=an=null,$e=!1}function fp(t){Pn===null?Pn=[t]:Pn.push(t)}var AA=Mr.ReactCurrentBatchConfig;function go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Bu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I_(t){var e=t._init;return e(t._payload)}function t0(t){function e(T,_){if(t){var E=T.deletions;E===null?(T.deletions=[_],T.flags|=16):E.push(_)}}function n(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function r(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function s(T,_){return T=hs(T,_),T.index=0,T.sibling=null,T}function i(T,_,E){return T.index=E,t?(E=T.alternate,E!==null?(E=E.index,E<_?(T.flags|=2,_):E):(T.flags|=2,_)):(T.flags|=1048576,_)}function a(T){return t&&T.alternate===null&&(T.flags|=2),T}function o(T,_,E,O){return _===null||_.tag!==6?(_=ef(E,T.mode,O),_.return=T,_):(_=s(_,E),_.return=T,_)}function u(T,_,E,O){var U=E.type;return U===Ui?h(T,_,E.props.children,O,E.key):_!==null&&(_.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===qr&&I_(U)===_.type)?(O=s(_,E.props),O.ref=go(T,_,E),O.return=T,O):(O=uc(E.type,E.key,E.props,null,T.mode,O),O.ref=go(T,_,E),O.return=T,O)}function c(T,_,E,O){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=tf(E,T.mode,O),_.return=T,_):(_=s(_,E.children||[]),_.return=T,_)}function h(T,_,E,O,U){return _===null||_.tag!==7?(_=ei(E,T.mode,O,U),_.return=T,_):(_=s(_,E),_.return=T,_)}function p(T,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ef(""+_,T.mode,E),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Pu:return E=uc(_.type,_.key,_.props,null,T.mode,E),E.ref=go(T,null,_),E.return=T,E;case Fi:return _=tf(_,T.mode,E),_.return=T,_;case qr:var O=_._init;return p(T,O(_._payload),E)}if(To(_)||co(_))return _=ei(_,T.mode,E,null),_.return=T,_;Bu(T,_)}return null}function g(T,_,E,O){var U=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return U!==null?null:o(T,_,""+E,O);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Pu:return E.key===U?u(T,_,E,O):null;case Fi:return E.key===U?c(T,_,E,O):null;case qr:return U=E._init,g(T,_,U(E._payload),O)}if(To(E)||co(E))return U!==null?null:h(T,_,E,O,null);Bu(T,E)}return null}function w(T,_,E,O,U){if(typeof O=="string"&&O!==""||typeof O=="number")return T=T.get(E)||null,o(_,T,""+O,U);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Pu:return T=T.get(O.key===null?E:O.key)||null,u(_,T,O,U);case Fi:return T=T.get(O.key===null?E:O.key)||null,c(_,T,O,U);case qr:var $=O._init;return w(T,_,E,$(O._payload),U)}if(To(O)||co(O))return T=T.get(E)||null,h(_,T,O,U,null);Bu(_,O)}return null}function A(T,_,E,O){for(var U=null,$=null,k=_,v=_=0,I=null;k!==null&&v<E.length;v++){k.index>v?(I=k,k=null):I=k.sibling;var S=g(T,k,E[v],O);if(S===null){k===null&&(k=I);break}t&&k&&S.alternate===null&&e(T,k),_=i(S,_,v),$===null?U=S:$.sibling=S,$=S,k=I}if(v===E.length)return n(T,k),$e&&zs(T,v),U;if(k===null){for(;v<E.length;v++)k=p(T,E[v],O),k!==null&&(_=i(k,_,v),$===null?U=k:$.sibling=k,$=k);return $e&&zs(T,v),U}for(k=r(T,k);v<E.length;v++)I=w(k,T,v,E[v],O),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?v:I.key),_=i(I,_,v),$===null?U=I:$.sibling=I,$=I);return t&&k.forEach(function(R){return e(T,R)}),$e&&zs(T,v),U}function C(T,_,E,O){var U=co(E);if(typeof U!="function")throw Error(W(150));if(E=U.call(E),E==null)throw Error(W(151));for(var $=U=null,k=_,v=_=0,I=null,S=E.next();k!==null&&!S.done;v++,S=E.next()){k.index>v?(I=k,k=null):I=k.sibling;var R=g(T,k,S.value,O);if(R===null){k===null&&(k=I);break}t&&k&&R.alternate===null&&e(T,k),_=i(R,_,v),$===null?U=R:$.sibling=R,$=R,k=I}if(S.done)return n(T,k),$e&&zs(T,v),U;if(k===null){for(;!S.done;v++,S=E.next())S=p(T,S.value,O),S!==null&&(_=i(S,_,v),$===null?U=S:$.sibling=S,$=S);return $e&&zs(T,v),U}for(k=r(T,k);!S.done;v++,S=E.next())S=w(k,T,v,S.value,O),S!==null&&(t&&S.alternate!==null&&k.delete(S.key===null?v:S.key),_=i(S,_,v),$===null?U=S:$.sibling=S,$=S);return t&&k.forEach(function(P){return e(T,P)}),$e&&zs(T,v),U}function N(T,_,E,O){if(typeof E=="object"&&E!==null&&E.type===Ui&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Pu:e:{for(var U=E.key,$=_;$!==null;){if($.key===U){if(U=E.type,U===Ui){if($.tag===7){n(T,$.sibling),_=s($,E.props.children),_.return=T,T=_;break e}}else if($.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===qr&&I_(U)===$.type){n(T,$.sibling),_=s($,E.props),_.ref=go(T,$,E),_.return=T,T=_;break e}n(T,$);break}else e(T,$);$=$.sibling}E.type===Ui?(_=ei(E.props.children,T.mode,O,E.key),_.return=T,T=_):(O=uc(E.type,E.key,E.props,null,T.mode,O),O.ref=go(T,_,E),O.return=T,T=O)}return a(T);case Fi:e:{for($=E.key;_!==null;){if(_.key===$)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(T,_.sibling),_=s(_,E.children||[]),_.return=T,T=_;break e}else{n(T,_);break}else e(T,_);_=_.sibling}_=tf(E,T.mode,O),_.return=T,T=_}return a(T);case qr:return $=E._init,N(T,_,$(E._payload),O)}if(To(E))return A(T,_,E,O);if(co(E))return C(T,_,E,O);Bu(T,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(T,_.sibling),_=s(_,E),_.return=T,T=_):(n(T,_),_=ef(E,T.mode,O),_.return=T,T=_),a(T)):n(T,_)}return N}var pa=t0(!0),n0=t0(!1),Vc=Ps(null),Mc=null,Gi=null,mp=null;function pp(){mp=Gi=Mc=null}function gp(t){var e=Vc.current;Ue(Vc),t._currentValue=e}function Gf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sa(t,e){Mc=t,mp=Gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function wn(t){var e=t._currentValue;if(mp!==t)if(t={context:t,memoizedValue:e,next:null},Gi===null){if(Mc===null)throw Error(W(308));Gi=t,Mc.dependencies={lanes:0,firstContext:t}}else Gi=Gi.next=t;return e}var Qs=null;function yp(t){Qs===null?Qs=[t]:Qs.push(t)}function r0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,yp(e)):(n.next=s.next,s.next=n),e.interleaved=n,br(t,r)}function br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hr=!1;function _p(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function us(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,br(t,n)}return s=r.interleaved,s===null?(e.next=e,yp(r)):(e.next=s.next,s.next=e),r.interleaved=e,br(t,n)}function rc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rp(t,n)}}function k_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lc(t,e,n,r){var s=t.updateQueue;Hr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var u=o,c=u.next;u.next=null,a===null?i=c:a.next=c,a=u;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;a=0,h=c=u=null,o=i;do{var g=o.lane,w=o.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var A=t,C=o;switch(g=e,w=n,C.tag){case 1:if(A=C.payload,typeof A=="function"){p=A.call(w,p,g);break e}p=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=C.payload,g=typeof A=="function"?A.call(w,p,g):A,g==null)break e;p=Ge({},p,g);break e;case 2:Hr=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[o]:g.push(o))}else w={eventTime:w,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=w,u=p):h=h.next=w,a|=g;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;g=o,o=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(u=p),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ai|=a,t.lanes=a,t.memoizedState=p}}function S_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var Bl={},Xn=Ps(Bl),al=Ps(Bl),ol=Ps(Bl);function Ys(t){if(t===Bl)throw Error(W(174));return t}function vp(t,e){switch(Me(ol,e),Me(al,t),Me(Xn,Bl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cf(e,t)}Ue(Xn),Me(Xn,e)}function ga(){Ue(Xn),Ue(al),Ue(ol)}function i0(t){Ys(ol.current);var e=Ys(Xn.current),n=Cf(e,t.type);e!==n&&(Me(al,t),Me(Xn,n))}function wp(t){al.current===t&&(Ue(Xn),Ue(al))}var He=Ps(0);function jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gh=[];function Ep(){for(var t=0;t<Gh.length;t++)Gh[t]._workInProgressVersionPrimary=null;Gh.length=0}var sc=Mr.ReactCurrentDispatcher,Qh=Mr.ReactCurrentBatchConfig,ii=0,Ke=null,ct=null,mt=null,Fc=!1,jo=!1,ll=0,CA=0;function bt(){throw Error(W(321))}function xp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ln(t[n],e[n]))return!1;return!0}function Tp(t,e,n,r,s,i){if(ii=i,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sc.current=t===null||t.memoizedState===null?NA:DA,t=n(r,s),jo){i=0;do{if(jo=!1,ll=0,25<=i)throw Error(W(301));i+=1,mt=ct=null,e.updateQueue=null,sc.current=OA,t=n(r,s)}while(jo)}if(sc.current=Uc,e=ct!==null&&ct.next!==null,ii=0,mt=ct=Ke=null,Fc=!1,e)throw Error(W(300));return t}function Ip(){var t=ll!==0;return ll=0,t}function zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ke.memoizedState=mt=t:mt=mt.next=t,mt}function En(){if(ct===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=mt===null?Ke.memoizedState:mt.next;if(e!==null)mt=e,ct=t;else{if(t===null)throw Error(W(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?Ke.memoizedState=mt=t:mt=mt.next=t}return mt}function ul(t,e){return typeof e=="function"?e(t):e}function Yh(t){var e=En(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,u=null,c=i;do{var h=c.lane;if((ii&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(o=u=p,a=r):u=u.next=p,Ke.lanes|=h,ai|=h}c=c.next}while(c!==null&&c!==i);u===null?a=r:u.next=o,Ln(r,e.memoizedState)||(Qt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ke.lanes|=i,ai|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zh(t){var e=En(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Ln(i,e.memoizedState)||(Qt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function a0(){}function o0(t,e){var n=Ke,r=En(),s=e(),i=!Ln(r.memoizedState,s);if(i&&(r.memoizedState=s,Qt=!0),r=r.queue,kp(c0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,cl(9,u0.bind(null,n,r,s,e),void 0,null),gt===null)throw Error(W(349));ii&30||l0(n,e,s)}return s}function l0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function u0(t,e,n,r){e.value=n,e.getSnapshot=r,d0(e)&&h0(t)}function c0(t,e,n){return n(function(){d0(e)&&h0(t)})}function d0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ln(t,n)}catch{return!0}}function h0(t){var e=br(t,1);e!==null&&On(e,t,1,-1)}function A_(t){var e=zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:t},e.queue=t,t=t.dispatch=RA.bind(null,Ke,t),[e.memoizedState,t]}function cl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function f0(){return En().memoizedState}function ic(t,e,n,r){var s=zn();Ke.flags|=t,s.memoizedState=cl(1|e,n,void 0,r===void 0?null:r)}function Dd(t,e,n,r){var s=En();r=r===void 0?null:r;var i=void 0;if(ct!==null){var a=ct.memoizedState;if(i=a.destroy,r!==null&&xp(r,a.deps)){s.memoizedState=cl(e,n,i,r);return}}Ke.flags|=t,s.memoizedState=cl(1|e,n,i,r)}function C_(t,e){return ic(8390656,8,t,e)}function kp(t,e){return Dd(2048,8,t,e)}function m0(t,e){return Dd(4,2,t,e)}function p0(t,e){return Dd(4,4,t,e)}function g0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function y0(t,e,n){return n=n!=null?n.concat([t]):null,Dd(4,4,g0.bind(null,e,t),n)}function Sp(){}function _0(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v0(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function w0(t,e,n){return ii&21?(Ln(n,e)||(n=kE(),Ke.lanes|=n,ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function bA(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=Qh.transition;Qh.transition={};try{t(!1),e()}finally{Re=n,Qh.transition=r}}function E0(){return En().memoizedState}function PA(t,e,n){var r=ds(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},x0(t))T0(e,n);else if(n=r0(t,e,n,r),n!==null){var s=zt();On(n,t,r,s),I0(n,e,r)}}function RA(t,e,n){var r=ds(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(x0(t))T0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Ln(o,a)){var u=e.interleaved;u===null?(s.next=s,yp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=r0(t,e,s,r),n!==null&&(s=zt(),On(n,t,r,s),I0(n,e,r))}}function x0(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function T0(t,e){jo=Fc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function I0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rp(t,n)}}var Uc={readContext:wn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},NA={readContext:wn,useCallback:function(t,e){return zn().memoizedState=[t,e===void 0?null:e],t},useContext:wn,useEffect:C_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ic(4194308,4,g0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ic(4194308,4,t,e)},useInsertionEffect:function(t,e){return ic(4,2,t,e)},useMemo:function(t,e){var n=zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=PA.bind(null,Ke,t),[r.memoizedState,t]},useRef:function(t){var e=zn();return t={current:t},e.memoizedState=t},useState:A_,useDebugValue:Sp,useDeferredValue:function(t){return zn().memoizedState=t},useTransition:function(){var t=A_(!1),e=t[0];return t=bA.bind(null,t[1]),zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ke,s=zn();if($e){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),gt===null)throw Error(W(349));ii&30||l0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,C_(c0.bind(null,r,i,t),[t]),r.flags|=2048,cl(9,u0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=zn(),e=gt.identifierPrefix;if($e){var n=wr,r=vr;n=(r&~(1<<32-Dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ll++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},DA={readContext:wn,useCallback:_0,useContext:wn,useEffect:kp,useImperativeHandle:y0,useInsertionEffect:m0,useLayoutEffect:p0,useMemo:v0,useReducer:Yh,useRef:f0,useState:function(){return Yh(ul)},useDebugValue:Sp,useDeferredValue:function(t){var e=En();return w0(e,ct.memoizedState,t)},useTransition:function(){var t=Yh(ul)[0],e=En().memoizedState;return[t,e]},useMutableSource:a0,useSyncExternalStore:o0,useId:E0,unstable_isNewReconciler:!1},OA={readContext:wn,useCallback:_0,useContext:wn,useEffect:kp,useImperativeHandle:y0,useInsertionEffect:m0,useLayoutEffect:p0,useMemo:v0,useReducer:Zh,useRef:f0,useState:function(){return Zh(ul)},useDebugValue:Sp,useDeferredValue:function(t){var e=En();return ct===null?e.memoizedState=t:w0(e,ct.memoizedState,t)},useTransition:function(){var t=Zh(ul)[0],e=En().memoizedState;return[t,e]},useMutableSource:a0,useSyncExternalStore:o0,useId:E0,unstable_isNewReconciler:!1};function Cn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Od={isMounted:function(t){return(t=t._reactInternals)?vi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=zt(),s=ds(t),i=kr(r,s);i.payload=e,n!=null&&(i.callback=n),e=us(t,i,s),e!==null&&(On(e,t,s,r),rc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=zt(),s=ds(t),i=kr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=us(t,i,s),e!==null&&(On(e,t,s,r),rc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),r=ds(t),s=kr(n,r);s.tag=2,e!=null&&(s.callback=e),e=us(t,s,r),e!==null&&(On(e,t,r,n),rc(e,t,r))}};function b_(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!nl(n,r)||!nl(s,i):!0}function k0(t,e,n){var r=!1,s=vs,i=e.contextType;return typeof i=="object"&&i!==null?i=wn(i):(s=Zt(e)?ri:Vt.current,r=e.contextTypes,i=(r=r!=null)?fa(t,s):vs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Od,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function P_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Od.enqueueReplaceState(e,e.state,null)}function Yf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_p(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=wn(i):(i=Zt(e)?ri:Vt.current,s.context=fa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Qf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Od.enqueueReplaceState(s,s.state,null),Lc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ya(t,e){try{var n="",r=e;do n+=lS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Xh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VA=typeof WeakMap=="function"?WeakMap:Map;function S0(t,e,n){n=kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$c||($c=!0,om=r),Zf(t,e)},n}function A0(t,e,n){n=kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Zf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Zf(t,e),typeof r!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function R_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new VA;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=QA.bind(null,t,e,n),e.then(t,t))}function N_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function D_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kr(-1,1),e.tag=2,us(n,e,1))),n.lanes|=1),t)}var MA=Mr.ReactCurrentOwner,Qt=!1;function Ut(t,e,n,r){e.child=t===null?n0(e,null,n,r):pa(e,t.child,n,r)}function O_(t,e,n,r,s){n=n.render;var i=e.ref;return sa(e,s),r=Tp(t,e,n,r,i,s),n=Ip(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):($e&&n&&dp(e),e.flags|=1,Ut(t,e,r,s),e.child)}function V_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Op(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,C0(t,e,i,r,s)):(t=uc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:nl,n(a,r)&&t.ref===e.ref)return Pr(t,e,s)}return e.flags|=1,t=hs(i,r),t.ref=e.ref,t.return=e,e.child=t}function C0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(nl(i,r)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Pr(t,e,s)}return Xf(t,e,n,r,s)}function b0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Yi,nn),nn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(Yi,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Me(Yi,nn),nn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Me(Yi,nn),nn|=r;return Ut(t,e,s,n),e.child}function P0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xf(t,e,n,r,s){var i=Zt(n)?ri:Vt.current;return i=fa(e,i),sa(e,s),n=Tp(t,e,n,r,i,s),r=Ip(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):($e&&r&&dp(e),e.flags|=1,Ut(t,e,n,s),e.child)}function M_(t,e,n,r,s){if(Zt(n)){var i=!0;Nc(e)}else i=!1;if(sa(e,s),e.stateNode===null)ac(t,e),k0(e,n,r),Yf(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=wn(c):(c=Zt(n)?ri:Vt.current,c=fa(e,c));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||u!==c)&&P_(e,a,r,c),Hr=!1;var g=e.memoizedState;a.state=g,Lc(e,r,a,s),u=e.memoizedState,o!==r||g!==u||Yt.current||Hr?(typeof h=="function"&&(Qf(e,n,h,r),u=e.memoizedState),(o=Hr||b_(e,n,o,r,g,u,c))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,s0(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Cn(e.type,o),a.props=c,p=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=wn(u):(u=Zt(n)?ri:Vt.current,u=fa(e,u));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||g!==u)&&P_(e,a,r,u),Hr=!1,g=e.memoizedState,a.state=g,Lc(e,r,a,s);var A=e.memoizedState;o!==p||g!==A||Yt.current||Hr?(typeof w=="function"&&(Qf(e,n,w,r),A=e.memoizedState),(c=Hr||b_(e,n,c,r,g,A,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,A,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,A,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),a.props=r,a.state=A,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Jf(t,e,n,r,i,s)}function Jf(t,e,n,r,s,i){P0(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&E_(e,n,!1),Pr(t,e,i);r=e.stateNode,MA.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=pa(e,t.child,null,i),e.child=pa(e,null,o,i)):Ut(t,e,o,i),e.memoizedState=r.state,s&&E_(e,n,!0),e.child}function R0(t){var e=t.stateNode;e.pendingContext?w_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&w_(t,e.context,!1),vp(t,e.containerInfo)}function L_(t,e,n,r,s){return ma(),fp(s),e.flags|=256,Ut(t,e,n,r),e.child}var em={dehydrated:null,treeContext:null,retryLane:0};function tm(t){return{baseLanes:t,cachePool:null,transitions:null}}function N0(t,e,n){var r=e.pendingProps,s=He.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Me(He,s&1),t===null)return Kf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ld(a,r,0,null),t=ei(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=tm(n),e.memoizedState=em,t):Ap(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return LA(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=hs(s,u),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=hs(o,i):(i=ei(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?tm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=em,r}return i=t.child,t=i.sibling,r=hs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ap(t,e){return e=Ld({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $u(t,e,n,r){return r!==null&&fp(r),pa(e,t.child,null,n),t=Ap(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LA(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Xh(Error(W(422))),$u(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ld({mode:"visible",children:r.children},s,0,null),i=ei(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&pa(e,t.child,null,a),e.child.memoizedState=tm(a),e.memoizedState=em,i);if(!(e.mode&1))return $u(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(W(419)),r=Xh(i,r,void 0),$u(t,e,a,r)}if(o=(a&t.childLanes)!==0,Qt||o){if(r=gt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,br(t,s),On(r,t,s,-1))}return Dp(),r=Xh(Error(W(421))),$u(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=YA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,rn=ls(s.nextSibling),an=e,$e=!0,Pn=null,t!==null&&(gn[yn++]=vr,gn[yn++]=wr,gn[yn++]=si,vr=t.id,wr=t.overflow,si=e),e=Ap(e,r.children),e.flags|=4096,e)}function j_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gf(t.return,e,n)}function Jh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function D0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ut(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j_(t,n,e);else if(t.tag===19)j_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(He,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&jc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&jc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jh(e,!0,n,null,i);break;case"together":Jh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ac(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=hs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jA(t,e,n){switch(e.tag){case 3:R0(e),ma();break;case 5:i0(e);break;case 1:Zt(e.type)&&Nc(e);break;case 4:vp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Me(Vc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?N0(t,e,n):(Me(He,He.current&1),t=Pr(t,e,n),t!==null?t.sibling:null);Me(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return D0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Me(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,b0(t,e,n)}return Pr(t,e,n)}var O0,nm,V0,M0;O0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nm=function(){};V0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ys(Xn.current);var i=null;switch(n){case"input":s=If(t,s),r=If(t,r),i=[];break;case"select":s=Ge({},s,{value:void 0}),r=Ge({},r,{value:void 0}),i=[];break;case"textarea":s=Af(t,s),r=Af(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pc)}bf(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Qo.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==o&&(u!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Qo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&je("scroll",t),i||o===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};M0=function(t,e,n,r){n!==r&&(e.flags|=4)};function yo(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function FA(t,e,n){var r=e.pendingProps;switch(hp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return Zt(e.type)&&Rc(),Pt(e),null;case 3:return r=e.stateNode,ga(),Ue(Yt),Ue(Vt),Ep(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(cm(Pn),Pn=null))),nm(t,e),Pt(e),null;case 5:wp(e);var s=Ys(ol.current);if(n=e.type,t!==null&&e.stateNode!=null)V0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Pt(e),null}if(t=Ys(Xn.current),Uu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[qn]=e,r[il]=i,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<ko.length;s++)je(ko[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Ky(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":Qy(r,i),je("invalid",r)}bf(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Fu(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Fu(r.textContent,o,t),s=["children",""+o]):Qo.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&je("scroll",r)}switch(n){case"input":Ru(r),Gy(r,i,!0);break;case"textarea":Ru(r),Yy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Pc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[qn]=e,t[il]=r,O0(t,e,!1,!1),e.stateNode=t;e:{switch(a=Pf(n,r),n){case"dialog":je("cancel",t),je("close",t),s=r;break;case"iframe":case"object":case"embed":je("load",t),s=r;break;case"video":case"audio":for(s=0;s<ko.length;s++)je(ko[s],t);s=r;break;case"source":je("error",t),s=r;break;case"img":case"image":case"link":je("error",t),je("load",t),s=r;break;case"details":je("toggle",t),s=r;break;case"input":Ky(t,r),s=If(t,r),je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ge({},r,{value:void 0}),je("invalid",t);break;case"textarea":Qy(t,r),s=Af(t,r),je("invalid",t);break;default:s=r}bf(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var u=o[i];i==="style"?fE(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&dE(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Yo(t,u):typeof u=="number"&&Yo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&je("scroll",t):u!=null&&Zm(t,i,u,a))}switch(n){case"input":Ru(t),Gy(t,r,!1);break;case"textarea":Ru(t),Yy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_s(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ea(t,!!r.multiple,i,!1):r.defaultValue!=null&&ea(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Pc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)M0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Ys(ol.current),Ys(Xn.current),Uu(e)){if(r=e.stateNode,n=e.memoizedProps,r[qn]=e,(i=r.nodeValue!==n)&&(t=an,t!==null))switch(t.tag){case 3:Fu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qn]=e,e.stateNode=r}return Pt(e),null;case 13:if(Ue(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&rn!==null&&e.mode&1&&!(e.flags&128))e0(),ma(),e.flags|=98560,i=!1;else if(i=Uu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[qn]=e}else ma(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),i=!1}else Pn!==null&&(cm(Pn),Pn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?dt===0&&(dt=3):Dp())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return ga(),nm(t,e),t===null&&rl(e.stateNode.containerInfo),Pt(e),null;case 10:return gp(e.type._context),Pt(e),null;case 17:return Zt(e.type)&&Rc(),Pt(e),null;case 19:if(Ue(He),i=e.memoizedState,i===null)return Pt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)yo(i,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=jc(t),a!==null){for(e.flags|=128,yo(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(He,He.current&1|2),e.child}t=t.sibling}i.tail!==null&&tt()>_a&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304)}else{if(!r)if(t=jc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!$e)return Pt(e),null}else 2*tt()-i.renderingStartTime>_a&&n!==1073741824&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=tt(),e.sibling=null,n=He.current,Me(He,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return Np(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nn&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function UA(t,e){switch(hp(e),e.tag){case 1:return Zt(e.type)&&Rc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ga(),Ue(Yt),Ue(Vt),Ep(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wp(e),null;case 13:if(Ue(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));ma()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(He),null;case 4:return ga(),null;case 10:return gp(e.type._context),null;case 22:case 23:return Np(),null;case 24:return null;default:return null}}var zu=!1,Dt=!1,BA=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Qi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function rm(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var F_=!1;function $A(t,e){if(Uf=Ac,t=BE(),cp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,u=-1,c=0,h=0,p=t,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(o=a+s),p!==i||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++c===s&&(o=a),g===i&&++h===r&&(u=a),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bf={focusedElem:t,selectionRange:n},Ac=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var C=A.memoizedProps,N=A.memoizedState,T=e.stateNode,_=T.getSnapshotBeforeUpdate(e.elementType===e.type?C:Cn(e.type,C),N);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(O){Xe(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return A=F_,F_=!1,A}function Fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&rm(e,n,i)}s=s.next}while(s!==r)}}function Vd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function L0(t){var e=t.alternate;e!==null&&(t.alternate=null,L0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qn],delete e[il],delete e[Wf],delete e[IA],delete e[kA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function j0(t){return t.tag===5||t.tag===3||t.tag===4}function U_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||j0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function im(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pc));else if(r!==4&&(t=t.child,t!==null))for(im(t,e,n),t=t.sibling;t!==null;)im(t,e,n),t=t.sibling}function am(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(am(t,e,n),t=t.sibling;t!==null;)am(t,e,n),t=t.sibling}var vt=null,bn=!1;function Br(t,e,n){for(n=n.child;n!==null;)F0(t,e,n),n=n.sibling}function F0(t,e,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Ad,n)}catch{}switch(n.tag){case 5:Dt||Qi(n,e);case 6:var r=vt,s=bn;vt=null,Br(t,e,n),vt=r,bn=s,vt!==null&&(bn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(bn?(t=vt,n=n.stateNode,t.nodeType===8?Hh(t.parentNode,n):t.nodeType===1&&Hh(t,n),el(t)):Hh(vt,n.stateNode));break;case 4:r=vt,s=bn,vt=n.stateNode.containerInfo,bn=!0,Br(t,e,n),vt=r,bn=s;break;case 0:case 11:case 14:case 15:if(!Dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&rm(n,e,a),s=s.next}while(s!==r)}Br(t,e,n);break;case 1:if(!Dt&&(Qi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Xe(n,e,o)}Br(t,e,n);break;case 21:Br(t,e,n);break;case 22:n.mode&1?(Dt=(r=Dt)||n.memoizedState!==null,Br(t,e,n),Dt=r):Br(t,e,n);break;default:Br(t,e,n)}}function B_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BA),e.forEach(function(r){var s=ZA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function An(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:vt=o.stateNode,bn=!1;break e;case 3:vt=o.stateNode.containerInfo,bn=!0;break e;case 4:vt=o.stateNode.containerInfo,bn=!0;break e}o=o.return}if(vt===null)throw Error(W(160));F0(i,a,s),vt=null,bn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Xe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U0(e,t),e=e.sibling}function U0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(An(e,t),$n(t),r&4){try{Fo(3,t,t.return),Vd(3,t)}catch(C){Xe(t,t.return,C)}try{Fo(5,t,t.return)}catch(C){Xe(t,t.return,C)}}break;case 1:An(e,t),$n(t),r&512&&n!==null&&Qi(n,n.return);break;case 5:if(An(e,t),$n(t),r&512&&n!==null&&Qi(n,n.return),t.flags&32){var s=t.stateNode;try{Yo(s,"")}catch(C){Xe(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&lE(s,i),Pf(o,a);var c=Pf(o,i);for(a=0;a<u.length;a+=2){var h=u[a],p=u[a+1];h==="style"?fE(s,p):h==="dangerouslySetInnerHTML"?dE(s,p):h==="children"?Yo(s,p):Zm(s,h,p,c)}switch(o){case"input":kf(s,i);break;case"textarea":uE(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?ea(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?ea(s,!!i.multiple,i.defaultValue,!0):ea(s,!!i.multiple,i.multiple?[]:"",!1))}s[il]=i}catch(C){Xe(t,t.return,C)}}break;case 6:if(An(e,t),$n(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){Xe(t,t.return,C)}}break;case 3:if(An(e,t),$n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{el(e.containerInfo)}catch(C){Xe(t,t.return,C)}break;case 4:An(e,t),$n(t);break;case 13:An(e,t),$n(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pp=tt())),r&4&&B_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Dt=(c=Dt)||h,An(e,t),Dt=c):An(e,t),$n(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(p=ee=h;ee!==null;){switch(g=ee,w=g.child,g.tag){case 0:case 11:case 14:case 15:Fo(4,g,g.return);break;case 1:Qi(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(C){Xe(r,n,C)}}break;case 5:Qi(g,g.return);break;case 22:if(g.memoizedState!==null){z_(p);continue}}w!==null?(w.return=g,ee=w):z_(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=hE("display",a))}catch(C){Xe(t,t.return,C)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(C){Xe(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:An(e,t),$n(t),r&4&&B_(t);break;case 21:break;default:An(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(j0(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Yo(s,""),r.flags&=-33);var i=U_(t);am(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=U_(t);im(t,o,a);break;default:throw Error(W(161))}}catch(u){Xe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zA(t,e,n){ee=t,B0(t)}function B0(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||zu;if(!a){var o=s.alternate,u=o!==null&&o.memoizedState!==null||Dt;o=zu;var c=Dt;if(zu=a,(Dt=u)&&!c)for(ee=s;ee!==null;)a=ee,u=a.child,a.tag===22&&a.memoizedState!==null?W_(s):u!==null?(u.return=a,ee=u):W_(s);for(;i!==null;)ee=i,B0(i),i=i.sibling;ee=s,zu=o,Dt=c}$_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):$_(t)}}function $_(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||Vd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Cn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&S_(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}S_(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&el(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Dt||e.flags&512&&sm(e)}catch(g){Xe(e,e.return,g)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function z_(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function W_(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vd(4,e)}catch(u){Xe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Xe(e,s,u)}}var i=e.return;try{sm(e)}catch(u){Xe(e,i,u)}break;case 5:var a=e.return;try{sm(e)}catch(u){Xe(e,a,u)}}}catch(u){Xe(e,e.return,u)}if(e===t){ee=null;break}var o=e.sibling;if(o!==null){o.return=e.return,ee=o;break}ee=e.return}}var WA=Math.ceil,Bc=Mr.ReactCurrentDispatcher,Cp=Mr.ReactCurrentOwner,vn=Mr.ReactCurrentBatchConfig,Te=0,gt=null,at=null,xt=0,nn=0,Yi=Ps(0),dt=0,dl=null,ai=0,Md=0,bp=0,Uo=null,Gt=null,Pp=0,_a=1/0,pr=null,$c=!1,om=null,cs=null,Wu=!1,ns=null,zc=0,Bo=0,lm=null,oc=-1,lc=0;function zt(){return Te&6?tt():oc!==-1?oc:oc=tt()}function ds(t){return t.mode&1?Te&2&&xt!==0?xt&-xt:AA.transition!==null?(lc===0&&(lc=kE()),lc):(t=Re,t!==0||(t=window.event,t=t===void 0?16:NE(t.type)),t):1}function On(t,e,n,r){if(50<Bo)throw Bo=0,lm=null,Error(W(185));jl(t,n,r),(!(Te&2)||t!==gt)&&(t===gt&&(!(Te&2)&&(Md|=n),dt===4&&Gr(t,xt)),Xt(t,r),n===1&&Te===0&&!(e.mode&1)&&(_a=tt()+500,Nd&&Rs()))}function Xt(t,e){var n=t.callbackNode;AS(t,e);var r=Sc(t,t===gt?xt:0);if(r===0)n!==null&&Jy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jy(n),e===1)t.tag===0?SA(q_.bind(null,t)):ZE(q_.bind(null,t)),xA(function(){!(Te&6)&&Rs()}),n=null;else{switch(SE(r)){case 1:n=np;break;case 4:n=TE;break;case 16:n=kc;break;case 536870912:n=IE;break;default:n=kc}n=Q0(n,$0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $0(t,e){if(oc=-1,lc=0,Te&6)throw Error(W(327));var n=t.callbackNode;if(ia()&&t.callbackNode!==n)return null;var r=Sc(t,t===gt?xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wc(t,r);else{e=r;var s=Te;Te|=2;var i=W0();(gt!==t||xt!==e)&&(pr=null,_a=tt()+500,Js(t,e));do try{KA();break}catch(o){z0(t,o)}while(!0);pp(),Bc.current=i,Te=s,at!==null?e=0:(gt=null,xt=0,e=dt)}if(e!==0){if(e===2&&(s=Vf(t),s!==0&&(r=s,e=um(t,s))),e===1)throw n=dl,Js(t,0),Gr(t,r),Xt(t,tt()),n;if(e===6)Gr(t,r);else{if(s=t.current.alternate,!(r&30)&&!qA(s)&&(e=Wc(t,r),e===2&&(i=Vf(t),i!==0&&(r=i,e=um(t,i))),e===1))throw n=dl,Js(t,0),Gr(t,r),Xt(t,tt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Ws(t,Gt,pr);break;case 3:if(Gr(t,r),(r&130023424)===r&&(e=Pp+500-tt(),10<e)){if(Sc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=zf(Ws.bind(null,t,Gt,pr),e);break}Ws(t,Gt,pr);break;case 4:if(Gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Dn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WA(r/1960))-r,10<r){t.timeoutHandle=zf(Ws.bind(null,t,Gt,pr),r);break}Ws(t,Gt,pr);break;case 5:Ws(t,Gt,pr);break;default:throw Error(W(329))}}}return Xt(t,tt()),t.callbackNode===n?$0.bind(null,t):null}function um(t,e){var n=Uo;return t.current.memoizedState.isDehydrated&&(Js(t,e).flags|=256),t=Wc(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&cm(e)),t}function cm(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function qA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ln(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(t,e){for(e&=~bp,e&=~Md,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dn(e),r=1<<n;t[n]=-1,e&=~r}}function q_(t){if(Te&6)throw Error(W(327));ia();var e=Sc(t,0);if(!(e&1))return Xt(t,tt()),null;var n=Wc(t,e);if(t.tag!==0&&n===2){var r=Vf(t);r!==0&&(e=r,n=um(t,r))}if(n===1)throw n=dl,Js(t,0),Gr(t,e),Xt(t,tt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ws(t,Gt,pr),Xt(t,tt()),null}function Rp(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(_a=tt()+500,Nd&&Rs())}}function oi(t){ns!==null&&ns.tag===0&&!(Te&6)&&ia();var e=Te;Te|=1;var n=vn.transition,r=Re;try{if(vn.transition=null,Re=1,t)return t()}finally{Re=r,vn.transition=n,Te=e,!(Te&6)&&Rs()}}function Np(){nn=Yi.current,Ue(Yi)}function Js(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,EA(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(hp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rc();break;case 3:ga(),Ue(Yt),Ue(Vt),Ep();break;case 5:wp(r);break;case 4:ga();break;case 13:Ue(He);break;case 19:Ue(He);break;case 10:gp(r.type._context);break;case 22:case 23:Np()}n=n.return}if(gt=t,at=t=hs(t.current,null),xt=nn=e,dt=0,dl=null,bp=Md=ai=0,Gt=Uo=null,Qs!==null){for(e=0;e<Qs.length;e++)if(n=Qs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Qs=null}return t}function z0(t,e){do{var n=at;try{if(pp(),sc.current=Uc,Fc){for(var r=Ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Fc=!1}if(ii=0,mt=ct=Ke=null,jo=!1,ll=0,Cp.current=null,n===null||n.return===null){dt=1,dl=e,at=null;break}e:{var i=t,a=n.return,o=n,u=e;if(e=xt,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=o,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=N_(a);if(w!==null){w.flags&=-257,D_(w,a,o,i,e),w.mode&1&&R_(i,c,e),e=w,u=c;var A=e.updateQueue;if(A===null){var C=new Set;C.add(u),e.updateQueue=C}else A.add(u);break e}else{if(!(e&1)){R_(i,c,e),Dp();break e}u=Error(W(426))}}else if($e&&o.mode&1){var N=N_(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),D_(N,a,o,i,e),fp(ya(u,o));break e}}i=u=ya(u,o),dt!==4&&(dt=2),Uo===null?Uo=[i]:Uo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=S0(i,u,e);k_(i,T);break e;case 1:o=u;var _=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(cs===null||!cs.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=A0(i,o,e);k_(i,O);break e}}i=i.return}while(i!==null)}H0(n)}catch(U){e=U,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function W0(){var t=Bc.current;return Bc.current=Uc,t===null?Uc:t}function Dp(){(dt===0||dt===3||dt===2)&&(dt=4),gt===null||!(ai&268435455)&&!(Md&268435455)||Gr(gt,xt)}function Wc(t,e){var n=Te;Te|=2;var r=W0();(gt!==t||xt!==e)&&(pr=null,Js(t,e));do try{HA();break}catch(s){z0(t,s)}while(!0);if(pp(),Te=n,Bc.current=r,at!==null)throw Error(W(261));return gt=null,xt=0,dt}function HA(){for(;at!==null;)q0(at)}function KA(){for(;at!==null&&!_S();)q0(at)}function q0(t){var e=G0(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?H0(t):at=e,Cp.current=null}function H0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=UA(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,at=null;return}}else if(n=FA(n,e,nn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);dt===0&&(dt=5)}function Ws(t,e,n){var r=Re,s=vn.transition;try{vn.transition=null,Re=1,GA(t,e,n,r)}finally{vn.transition=s,Re=r}return null}function GA(t,e,n,r){do ia();while(ns!==null);if(Te&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(CS(t,i),t===gt&&(at=gt=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wu||(Wu=!0,Q0(kc,function(){return ia(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vn.transition,vn.transition=null;var a=Re;Re=1;var o=Te;Te|=4,Cp.current=null,$A(t,n),U0(n,t),mA(Bf),Ac=!!Uf,Bf=Uf=null,t.current=n,zA(n),vS(),Te=o,Re=a,vn.transition=i}else t.current=n;if(Wu&&(Wu=!1,ns=t,zc=s),i=t.pendingLanes,i===0&&(cs=null),xS(n.stateNode),Xt(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($c)throw $c=!1,t=om,om=null,t;return zc&1&&t.tag!==0&&ia(),i=t.pendingLanes,i&1?t===lm?Bo++:(Bo=0,lm=t):Bo=0,Rs(),null}function ia(){if(ns!==null){var t=SE(zc),e=vn.transition,n=Re;try{if(vn.transition=null,Re=16>t?16:t,ns===null)var r=!1;else{if(t=ns,ns=null,zc=0,Te&6)throw Error(W(331));var s=Te;for(Te|=4,ee=t.current;ee!==null;){var i=ee,a=i.child;if(ee.flags&16){var o=i.deletions;if(o!==null){for(var u=0;u<o.length;u++){var c=o[u];for(ee=c;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:Fo(8,h,i)}var p=h.child;if(p!==null)p.return=h,ee=p;else for(;ee!==null;){h=ee;var g=h.sibling,w=h.return;if(L0(h),h===c){ee=null;break}if(g!==null){g.return=w,ee=g;break}ee=w}}}var A=i.alternate;if(A!==null){var C=A.child;if(C!==null){A.child=null;do{var N=C.sibling;C.sibling=null,C=N}while(C!==null)}}ee=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ee=a;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fo(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,ee=T;break e}ee=i.return}}var _=t.current;for(ee=_;ee!==null;){a=ee;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,ee=E;else e:for(a=_;ee!==null;){if(o=ee,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Vd(9,o)}}catch(U){Xe(o,o.return,U)}if(o===a){ee=null;break e}var O=o.sibling;if(O!==null){O.return=o.return,ee=O;break e}ee=o.return}}if(Te=s,Rs(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Ad,t)}catch{}r=!0}return r}finally{Re=n,vn.transition=e}}return!1}function H_(t,e,n){e=ya(n,e),e=S0(t,e,1),t=us(t,e,1),e=zt(),t!==null&&(jl(t,1,e),Xt(t,e))}function Xe(t,e,n){if(t.tag===3)H_(t,t,n);else for(;e!==null;){if(e.tag===3){H_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cs===null||!cs.has(r))){t=ya(n,t),t=A0(e,t,1),e=us(e,t,1),t=zt(),e!==null&&(jl(e,1,t),Xt(e,t));break}}e=e.return}}function QA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(xt&n)===n&&(dt===4||dt===3&&(xt&130023424)===xt&&500>tt()-Pp?Js(t,0):bp|=n),Xt(t,e)}function K0(t,e){e===0&&(t.mode&1?(e=Ou,Ou<<=1,!(Ou&130023424)&&(Ou=4194304)):e=1);var n=zt();t=br(t,e),t!==null&&(jl(t,e,n),Xt(t,n))}function YA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),K0(t,n)}function ZA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),K0(t,n)}var G0;G0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,jA(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,$e&&e.flags&1048576&&XE(e,Oc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ac(t,e),t=e.pendingProps;var s=fa(e,Vt.current);sa(e,n),s=Tp(null,e,r,t,s,n);var i=Ip();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zt(r)?(i=!0,Nc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_p(e),s.updater=Od,e.stateNode=s,s._reactInternals=e,Yf(e,r,t,n),e=Jf(null,e,r,!0,i,n)):(e.tag=0,$e&&i&&dp(e),Ut(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ac(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=JA(r),t=Cn(r,t),s){case 0:e=Xf(null,e,r,t,n);break e;case 1:e=M_(null,e,r,t,n);break e;case 11:e=O_(null,e,r,t,n);break e;case 14:e=V_(null,e,r,Cn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),Xf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),M_(t,e,r,s,n);case 3:e:{if(R0(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,s0(t,e),Lc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ya(Error(W(423)),e),e=L_(t,e,r,n,s);break e}else if(r!==s){s=ya(Error(W(424)),e),e=L_(t,e,r,n,s);break e}else for(rn=ls(e.stateNode.containerInfo.firstChild),an=e,$e=!0,Pn=null,n=n0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ma(),r===s){e=Pr(t,e,n);break e}Ut(t,e,r,n)}e=e.child}return e;case 5:return i0(e),t===null&&Kf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,$f(r,s)?a=null:i!==null&&$f(r,i)&&(e.flags|=32),P0(t,e),Ut(t,e,a,n),e.child;case 6:return t===null&&Kf(e),null;case 13:return N0(t,e,n);case 4:return vp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pa(e,null,r,n):Ut(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),O_(t,e,r,s,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Me(Vc,r._currentValue),r._currentValue=a,i!==null)if(Ln(i.value,a)){if(i.children===s.children&&!Yt.current){e=Pr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=kr(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Gf(i.return,n,e),o.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(W(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Gf(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ut(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,sa(e,n),s=wn(s),r=r(s),e.flags|=1,Ut(t,e,r,n),e.child;case 14:return r=e.type,s=Cn(r,e.pendingProps),s=Cn(r.type,s),V_(t,e,r,s,n);case 15:return C0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),ac(t,e),e.tag=1,Zt(r)?(t=!0,Nc(e)):t=!1,sa(e,n),k0(e,r,s),Yf(e,r,s,n),Jf(null,e,r,!0,t,n);case 19:return D0(t,e,n);case 22:return b0(t,e,n)}throw Error(W(156,e.tag))};function Q0(t,e){return xE(t,e)}function XA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,e,n,r){return new XA(t,e,n,r)}function Op(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JA(t){if(typeof t=="function")return Op(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jm)return 11;if(t===ep)return 14}return 2}function hs(t,e){var n=t.alternate;return n===null?(n=_n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function uc(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Op(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ui:return ei(n.children,s,i,e);case Xm:a=8,s|=8;break;case wf:return t=_n(12,n,e,s|2),t.elementType=wf,t.lanes=i,t;case Ef:return t=_n(13,n,e,s),t.elementType=Ef,t.lanes=i,t;case xf:return t=_n(19,n,e,s),t.elementType=xf,t.lanes=i,t;case iE:return Ld(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rE:a=10;break e;case sE:a=9;break e;case Jm:a=11;break e;case ep:a=14;break e;case qr:a=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=_n(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ei(t,e,n,r){return t=_n(7,t,r,e),t.lanes=n,t}function Ld(t,e,n,r){return t=_n(22,t,r,e),t.elementType=iE,t.lanes=n,t.stateNode={isHidden:!1},t}function ef(t,e,n){return t=_n(6,t,null,e),t.lanes=n,t}function tf(t,e,n){return e=_n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function e1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vh(0),this.expirationTimes=Vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vp(t,e,n,r,s,i,a,o,u){return t=new e1(t,e,n,o,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=_n(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_p(i),t}function t1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Y0(t){if(!t)return vs;t=t._reactInternals;e:{if(vi(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Zt(n))return YE(t,n,e)}return e}function Z0(t,e,n,r,s,i,a,o,u){return t=Vp(n,r,!0,t,s,i,a,o,u),t.context=Y0(null),n=t.current,r=zt(),s=ds(n),i=kr(r,s),i.callback=e??null,us(n,i,s),t.current.lanes=s,jl(t,s,r),Xt(t,r),t}function jd(t,e,n,r){var s=e.current,i=zt(),a=ds(s);return n=Y0(n),e.context===null?e.context=n:e.pendingContext=n,e=kr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=us(s,e,a),t!==null&&(On(t,s,a,i),rc(t,s,a)),a}function qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function K_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mp(t,e){K_(t,e),(t=t.alternate)&&K_(t,e)}var X0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lp(t){this._internalRoot=t}Fd.prototype.render=Lp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));jd(t,e,null,null)};Fd.prototype.unmount=Lp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oi(function(){jd(null,t,null,null)}),e[Cr]=null}};function Fd(t){this._internalRoot=t}Fd.prototype.unstable_scheduleHydration=function(t){if(t){var e=bE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kr.length&&e!==0&&e<Kr[n].priority;n++);Kr.splice(n,0,t),n===0&&RE(t)}};function jp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ud(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G_(){}function n1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=qc(a);i.call(c)}}var a=Z0(e,r,t,0,null,!1,!1,"",G_);return t._reactRootContainer=a,t[Cr]=a.current,rl(t.nodeType===8?t.parentNode:t),oi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=qc(u);o.call(c)}}var u=Vp(t,0,!1,null,null,!1,!1,"",G_);return t._reactRootContainer=u,t[Cr]=u.current,rl(t.nodeType===8?t.parentNode:t),oi(function(){jd(e,u,n,r)}),u}function Bd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var u=qc(a);o.call(u)}}jd(e,a,t,s)}else a=n1(n,e,t,s,r);return qc(a)}AE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Io(e.pendingLanes);n!==0&&(rp(e,n|1),Xt(e,tt()),!(Te&6)&&(_a=tt()+500,Rs()))}break;case 13:oi(function(){var r=br(t,1);if(r!==null){var s=zt();On(r,t,1,s)}}),Mp(t,1)}};sp=function(t){if(t.tag===13){var e=br(t,134217728);if(e!==null){var n=zt();On(e,t,134217728,n)}Mp(t,134217728)}};CE=function(t){if(t.tag===13){var e=ds(t),n=br(t,e);if(n!==null){var r=zt();On(n,t,e,r)}Mp(t,e)}};bE=function(){return Re};PE=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};Nf=function(t,e,n){switch(e){case"input":if(kf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Rd(r);if(!s)throw Error(W(90));oE(r),kf(r,s)}}}break;case"textarea":uE(t,n);break;case"select":e=n.value,e!=null&&ea(t,!!n.multiple,e,!1)}};gE=Rp;yE=oi;var r1={usingClientEntryPoint:!1,Events:[Ul,Wi,Rd,mE,pE,Rp]},_o={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s1={bundleType:_o.bundleType,version:_o.version,rendererPackageName:_o.rendererPackageName,rendererConfig:_o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wE(t),t===null?null:t.stateNode},findFiberByHostInstance:_o.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qu.isDisabled&&qu.supportsFiber)try{Ad=qu.inject(s1),Zn=qu}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r1;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jp(e))throw Error(W(200));return t1(t,e,null,n)};dn.createRoot=function(t,e){if(!jp(t))throw Error(W(299));var n=!1,r="",s=X0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Vp(t,1,!1,null,null,n,!1,r,s),t[Cr]=e.current,rl(t.nodeType===8?t.parentNode:t),new Lp(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=wE(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return oi(t)};dn.hydrate=function(t,e,n){if(!Ud(e))throw Error(W(200));return Bd(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!jp(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=X0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Z0(e,null,t,1,n??null,s,!1,i,a),t[Cr]=e.current,rl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Fd(e)};dn.render=function(t,e,n){if(!Ud(e))throw Error(W(200));return Bd(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!Ud(t))throw Error(W(40));return t._reactRootContainer?(oi(function(){Bd(null,null,t,!1,function(){t._reactRootContainer=null,t[Cr]=null})}),!0):!1};dn.unstable_batchedUpdates=Rp;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ud(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Bd(t,e,n,!1,r)};dn.version="18.3.1-next-f1338f8080-20240426";function J0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J0)}catch(t){console.error(t)}}J0(),Jw.exports=dn;var i1=Jw.exports,ex,Q_=i1;ex=Q_.createRoot,Q_.hydrateRoot;/**
 * @remix-run/router v1.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hl.apply(this,arguments)}var rs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rs||(rs={}));const Y_="popstate";function a1(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return dm("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Hc(s)}return l1(e,n,null,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function o1(){return Math.random().toString(36).substr(2,8)}function Z_(t,e){return{usr:t.state,key:t.key,idx:e}}function dm(t,e,n,r){return n===void 0&&(n=null),hl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?La(e):e,{state:n,key:e&&e.key||r||o1()})}function Hc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function La(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function l1(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=rs.Pop,u=null,c=h();c==null&&(c=0,a.replaceState(hl({},a.state,{idx:c}),""));function h(){return(a.state||{idx:null}).idx}function p(){o=rs.Pop;let N=h(),T=N==null?null:N-c;c=N,u&&u({action:o,location:C.location,delta:T})}function g(N,T){o=rs.Push;let _=dm(C.location,N,T);c=h()+1;let E=Z_(_,c),O=C.createHref(_);try{a.pushState(E,"",O)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(O)}i&&u&&u({action:o,location:C.location,delta:1})}function w(N,T){o=rs.Replace;let _=dm(C.location,N,T);c=h();let E=Z_(_,c),O=C.createHref(_);a.replaceState(E,"",O),i&&u&&u({action:o,location:C.location,delta:0})}function A(N){let T=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof N=="string"?N:Hc(N);return _=_.replace(/ $/,"%20"),nt(T,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,T)}let C={get action(){return o},get location(){return t(s,a)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Y_,p),u=N,()=>{s.removeEventListener(Y_,p),u=null}},createHref(N){return e(s,N)},createURL:A,encodeLocation(N){let T=A(N);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:g,replace:w,go(N){return a.go(N)}};return C}var X_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(X_||(X_={}));function u1(t,e,n){return n===void 0&&(n="/"),c1(t,e,n)}function c1(t,e,n,r){let s=typeof e=="string"?La(e):e,i=Fp(s.pathname||"/",n);if(i==null)return null;let a=nx(t);d1(a);let o=null;for(let u=0;o==null&&u<a.length;++u){let c=T1(i);o=w1(a[u],c)}return o}function nx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let u={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(nt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=fs([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&(nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),nx(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:_1(c,i.index),routesMeta:h})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let u of rx(i.path))s(i,a,u)}),e}function rx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=rx(r.join("/")),o=[];return o.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&o.push(...a),o.map(u=>t.startsWith("/")&&u===""?"/":u)}function d1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:v1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const h1=/^:[\w-]+$/,f1=3,m1=2,p1=1,g1=10,y1=-2,J_=t=>t==="*";function _1(t,e){let n=t.split("/"),r=n.length;return n.some(J_)&&(r+=y1),e&&(r+=m1),n.filter(s=>!J_(s)).reduce((s,i)=>s+(h1.test(i)?f1:i===""?p1:g1),r)}function v1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function w1(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let u=r[o],c=o===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=E1({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),g=u.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:fs([i,p.pathname]),pathnameBase:A1(fs([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=fs([i,p.pathnameBase]))}return a}function E1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=x1(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,h,p)=>{let{paramName:g,isOptional:w}=h;if(g==="*"){let C=o[p]||"";a=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const A=o[p];return w&&!A?c[g]=void 0:c[g]=(A||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function x1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),tx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,u)=>(r.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function T1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Fp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function I1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?La(t):t;return{pathname:n?n.startsWith("/")?n:k1(n,e):e,search:C1(r),hash:b1(s)}}function k1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function nf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function S1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Up(t,e){let n=S1(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Bp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=La(t):(s=hl({},t),nt(!s.pathname||!s.pathname.includes("?"),nf("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),nf("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),nf("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}o=p>=0?e[p]:"/"}let u=I1(s,o),c=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const fs=t=>t.join("/").replace(/\/\/+/g,"/"),A1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),C1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,b1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function P1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sx=["post","put","patch","delete"];new Set(sx);const R1=["get",...sx];new Set(R1);/**
 * React Router v6.28.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fl(){return fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fl.apply(this,arguments)}const $p=M.createContext(null),N1=M.createContext(null),Ns=M.createContext(null),$d=M.createContext(null),Ds=M.createContext({outlet:null,matches:[],isDataRoute:!1}),ix=M.createContext(null);function D1(t,e){let{relative:n}=e===void 0?{}:e;ja()||nt(!1);let{basename:r,navigator:s}=M.useContext(Ns),{hash:i,pathname:a,search:o}=ox(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:fs([r,a])),s.createHref({pathname:u,search:o,hash:i})}function ja(){return M.useContext($d)!=null}function $l(){return ja()||nt(!1),M.useContext($d).location}function ax(t){M.useContext(Ns).static||M.useLayoutEffect(t)}function Fa(){let{isDataRoute:t}=M.useContext(Ds);return t?H1():O1()}function O1(){ja()||nt(!1);let t=M.useContext($p),{basename:e,future:n,navigator:r}=M.useContext(Ns),{matches:s}=M.useContext(Ds),{pathname:i}=$l(),a=JSON.stringify(Up(s,n.v7_relativeSplatPath)),o=M.useRef(!1);return ax(()=>{o.current=!0}),M.useCallback(function(c,h){if(h===void 0&&(h={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let p=Bp(c,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:fs([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,a,i,t])}function ox(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Ns),{matches:s}=M.useContext(Ds),{pathname:i}=$l(),a=JSON.stringify(Up(s,r.v7_relativeSplatPath));return M.useMemo(()=>Bp(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function V1(t,e){return M1(t,e)}function M1(t,e,n,r){ja()||nt(!1);let{navigator:s}=M.useContext(Ns),{matches:i}=M.useContext(Ds),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=$l(),h;if(e){var p;let N=typeof e=="string"?La(e):e;u==="/"||(p=N.pathname)!=null&&p.startsWith(u)||nt(!1),h=N}else h=c;let g=h.pathname||"/",w=g;if(u!=="/"){let N=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(N.length).join("/")}let A=u1(t,{pathname:w}),C=B1(A&&A.map(N=>Object.assign({},N,{params:Object.assign({},o,N.params),pathname:fs([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:fs([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,n,r);return e&&C?M.createElement($d.Provider,{value:{location:fl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:rs.Pop}},C):C}function L1(){let t=q1(),e=P1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:s},n):null,null)}const j1=M.createElement(L1,null);class F1 extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Ds.Provider,{value:this.props.routeContext},M.createElement(ix.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function U1(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext($p);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Ds.Provider,{value:e},r)}function B1(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);h>=0||nt(!1),a=a.slice(0,Math.min(a.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:g,errors:w}=n,A=p.route.loader&&g[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||A){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((h,p,g)=>{let w,A=!1,C=null,N=null;n&&(w=o&&p.route.id?o[p.route.id]:void 0,C=p.route.errorElement||j1,u&&(c<0&&g===0?(A=!0,N=null):c===g&&(A=!0,N=p.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,g+1)),_=()=>{let E;return w?E=C:A?E=N:p.route.Component?E=M.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=h,M.createElement(U1,{match:p,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?M.createElement(F1,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):_()},null)}var lx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(lx||{}),Kc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Kc||{});function $1(t){let e=M.useContext($p);return e||nt(!1),e}function z1(t){let e=M.useContext(N1);return e||nt(!1),e}function W1(t){let e=M.useContext(Ds);return e||nt(!1),e}function ux(t){let e=W1(),n=e.matches[e.matches.length-1];return n.route.id||nt(!1),n.route.id}function q1(){var t;let e=M.useContext(ix),n=z1(Kc.UseRouteError),r=ux(Kc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function H1(){let{router:t}=$1(lx.UseNavigateStable),e=ux(Kc.UseNavigateStable),n=M.useRef(!1);return ax(()=>{n.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,fl({fromRouteId:e},i)))},[t,e])}const ev={};function K1(t,e){ev[e]||(ev[e]=!0,console.warn(e))}const tv=(t,e,n)=>K1(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function G1(t,e){(t==null?void 0:t.v7_startTransition)===void 0&&tv("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(t==null?void 0:t.v7_relativeSplatPath)===void 0&&tv("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Q1(t){let{to:e,replace:n,state:r,relative:s}=t;ja()||nt(!1);let{future:i,static:a}=M.useContext(Ns),{matches:o}=M.useContext(Ds),{pathname:u}=$l(),c=Fa(),h=Bp(e,Up(o,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(h);return M.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:s}),[c,p,s,n,r]),null}function qs(t){nt(!1)}function Y1(t){let{basename:e="/",children:n=null,location:r,navigationType:s=rs.Pop,navigator:i,static:a=!1,future:o}=t;ja()&&nt(!1);let u=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:u,navigator:i,static:a,future:fl({v7_relativeSplatPath:!1},o)}),[u,o,i,a]);typeof r=="string"&&(r=La(r));let{pathname:h="/",search:p="",hash:g="",state:w=null,key:A="default"}=r,C=M.useMemo(()=>{let N=Fp(h,u);return N==null?null:{location:{pathname:N,search:p,hash:g,state:w,key:A},navigationType:s}},[u,h,p,g,w,A,s]);return C==null?null:M.createElement(Ns.Provider,{value:c},M.createElement($d.Provider,{children:n,value:C}))}function Z1(t){let{children:e,location:n}=t;return V1(hm(e),n)}new Promise(()=>{});function hm(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){n.push.apply(n,hm(r.props.children,i));return}r.type!==qs&&nt(!1),!r.props.index||!r.props.children||nt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=hm(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.28.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fm(){return fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fm.apply(this,arguments)}function X1(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function J1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eC(t,e){return t.button===0&&(!e||e==="_self")&&!J1(t)}const tC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nC="6";try{window.__reactRouterVersion=nC}catch{}const rC="startTransition",nv=Qk[rC];function sC(t){let{basename:e,children:n,future:r,window:s}=t,i=M.useRef();i.current==null&&(i.current=a1({window:s,v5Compat:!0}));let a=i.current,[o,u]=M.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},h=M.useCallback(p=>{c&&nv?nv(()=>u(p)):u(p)},[u,c]);return M.useLayoutEffect(()=>a.listen(h),[a,h]),M.useEffect(()=>G1(r),[r]),M.createElement(Y1,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const iC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yr=M.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:u,to:c,preventScrollReset:h,viewTransition:p}=e,g=X1(e,tC),{basename:w}=M.useContext(Ns),A,C=!1;if(typeof c=="string"&&aC.test(c)&&(A=c,iC))try{let E=new URL(window.location.href),O=c.startsWith("//")?new URL(E.protocol+c):new URL(c),U=Fp(O.pathname,w);O.origin===E.origin&&U!=null?c=U+O.search+O.hash:C=!0}catch{}let N=D1(c,{relative:s}),T=oC(c,{replace:a,state:o,target:u,preventScrollReset:h,relative:s,viewTransition:p});function _(E){r&&r(E),E.defaultPrevented||T(E)}return M.createElement("a",fm({},g,{href:A||N,onClick:C||i?r:_,ref:n,target:u}))});var rv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rv||(rv={}));var sv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sv||(sv={}));function oC(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,u=Fa(),c=$l(),h=ox(t,{relative:a});return M.useCallback(p=>{if(eC(p,n)){p.preventDefault();let g=r!==void 0?r:Hc(c)===Hc(h);u(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,u,h,r,s,n,t,i,a,o])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),St=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:u,...c},h)=>M.createElement("svg",{ref:h,...lC,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${uC(t)}`,o].join(" "),...c},[...e.map(([p,g])=>M.createElement(p,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=St("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=St("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=St("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=St("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=St("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=St("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=St("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=St("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=St("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=St("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=St("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=St("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=St("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=St("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=St("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=St("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=St("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var av={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_C=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],o=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},gx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=i>>2,p=(i&3)<<4|o>>4;let g=(o&15)<<2|c>>6,w=c&63;u||(w=64,a||(g=64)),r.push(n[h],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(px(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_C(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||p==null)throw new vC;const g=i<<2|o>>4;if(r.push(g),c!==64){const w=o<<4&240|c>>2;if(r.push(w),p!==64){const A=c<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wC=function(t){const e=px(t);return gx.encodeByteArray(e,!0)},Gc=function(t){return wC(t).replace(/\./g,"")},yx=function(t){try{return gx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=()=>EC().__FIREBASE_DEFAULTS__,TC=()=>{if(typeof process>"u"||typeof av>"u")return;const t=av.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},IC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yx(t[1]);return e&&JSON.parse(e)},Wd=()=>{try{return xC()||TC()||IC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_x=t=>{var e,n;return(n=(e=Wd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vx=t=>{const e=_x(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wx=()=>{var t;return(t=Wd())===null||t===void 0?void 0:t.config},Ex=t=>{var e;return(e=Wd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gc(JSON.stringify(n)),Gc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function CC(){var t;const e=(t=Wd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NC(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DC(){return!CC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OC(){try{return typeof indexedDB=="object"}catch{return!1}}function VC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="FirebaseError";class ur extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MC,Object.setPrototypeOf(this,ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zl.prototype.create)}}class zl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?LC(i,r):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new ur(s,o,r)}}function LC(t,e){return t.replace(jC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const jC=/\{\$([^}]+)}/g;function FC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(ov(i)&&ov(a)){if(!Qc(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ov(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function So(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ao(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UC(t,e){const n=new BC(t,e);return n.subscribe.bind(n)}class BC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$C(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=rf),s.error===void 0&&(s.error=rf),s.complete===void 0&&(s.complete=rf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $C(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){return t&&t._delegate?t._delegate:t}class ws{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qC(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);r===o&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WC(t){return t===Hs?void 0:t}function qC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const KC={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},GC=ve.INFO,QC={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},YC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=QC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wp{constructor(e){this.name=e,this._logLevel=GC,this._logHandler=YC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const ZC=(t,e)=>e.some(n=>t instanceof n);let lv,uv;function XC(){return lv||(lv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JC(){return uv||(uv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xx=new WeakMap,mm=new WeakMap,Tx=new WeakMap,sf=new WeakMap,qp=new WeakMap;function eb(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ms(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&xx.set(n,t)}).catch(()=>{}),qp.set(e,t),e}function tb(t){if(mm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});mm.set(t,e)}let pm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Tx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ms(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nb(t){pm=t(pm)}function rb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(af(this),e,...n);return Tx.set(r,e.sort?e.sort():[e]),ms(r)}:JC().includes(t)?function(...e){return t.apply(af(this),e),ms(xx.get(this))}:function(...e){return ms(t.apply(af(this),e))}}function sb(t){return typeof t=="function"?rb(t):(t instanceof IDBTransaction&&tb(t),ZC(t,XC())?new Proxy(t,pm):t)}function ms(t){if(t instanceof IDBRequest)return eb(t);if(sf.has(t))return sf.get(t);const e=sb(t);return e!==t&&(sf.set(t,e),qp.set(e,t)),e}const af=t=>qp.get(t);function ib(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=ms(a);return r&&a.addEventListener("upgradeneeded",u=>{r(ms(a.result),u.oldVersion,u.newVersion,ms(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),o.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const ab=["get","getKey","getAll","getAllKeys","count"],ob=["put","add","delete","clear"],of=new Map;function cv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(of.get(e))return of.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ob.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ab.includes(n)))return;const i=async function(a,...o){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&u.done]))[0]};return of.set(e,i),i}nb(t=>({...t,get:(e,n,r)=>cv(e,n)||t.get(e,n,r),has:(e,n)=>!!cv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ub(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ub(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gm="@firebase/app",dv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Wp("@firebase/app"),cb="@firebase/app-compat",db="@firebase/analytics-compat",hb="@firebase/analytics",fb="@firebase/app-check-compat",mb="@firebase/app-check",pb="@firebase/auth",gb="@firebase/auth-compat",yb="@firebase/database",_b="@firebase/data-connect",vb="@firebase/database-compat",wb="@firebase/functions",Eb="@firebase/functions-compat",xb="@firebase/installations",Tb="@firebase/installations-compat",Ib="@firebase/messaging",kb="@firebase/messaging-compat",Sb="@firebase/performance",Ab="@firebase/performance-compat",Cb="@firebase/remote-config",bb="@firebase/remote-config-compat",Pb="@firebase/storage",Rb="@firebase/storage-compat",Nb="@firebase/firestore",Db="@firebase/vertexai-preview",Ob="@firebase/firestore-compat",Vb="firebase",Mb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="[DEFAULT]",Lb={[gm]:"fire-core",[cb]:"fire-core-compat",[hb]:"fire-analytics",[db]:"fire-analytics-compat",[mb]:"fire-app-check",[fb]:"fire-app-check-compat",[pb]:"fire-auth",[gb]:"fire-auth-compat",[yb]:"fire-rtdb",[_b]:"fire-data-connect",[vb]:"fire-rtdb-compat",[wb]:"fire-fn",[Eb]:"fire-fn-compat",[xb]:"fire-iid",[Tb]:"fire-iid-compat",[Ib]:"fire-fcm",[kb]:"fire-fcm-compat",[Sb]:"fire-perf",[Ab]:"fire-perf-compat",[Cb]:"fire-rc",[bb]:"fire-rc-compat",[Pb]:"fire-gcs",[Rb]:"fire-gcs-compat",[Nb]:"fire-fst",[Ob]:"fire-fst-compat",[Db]:"fire-vertex","fire-js":"fire-js",[Vb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new Map,jb=new Map,_m=new Map;function hv(t,e){try{t.container.addComponent(e)}catch(n){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function li(t){const e=t.name;if(_m.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;_m.set(e,t);for(const n of Yc.values())hv(n,t);for(const n of jb.values())hv(n,t);return!0}function qd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ps=new zl("app","Firebase",Fb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=Mb;function Ix(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ym,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ps.create("bad-app-name",{appName:String(s)});if(n||(n=wx()),!n)throw ps.create("no-options");const i=Yc.get(s);if(i){if(Qc(n,i.options)&&Qc(r,i.config))return i;throw ps.create("duplicate-app",{appName:s})}const a=new HC(s);for(const u of _m.values())a.addComponent(u);const o=new Ub(n,r,a);return Yc.set(s,o),o}function Hp(t=ym){const e=Yc.get(t);if(!e&&t===ym&&wx())return Ix();if(!e)throw ps.create("no-app",{appName:t});return e}function Jn(t,e,n){var r;let s=(r=Lb[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(o.join(" "));return}li(new ws(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="firebase-heartbeat-database",$b=1,ml="firebase-heartbeat-store";let lf=null;function kx(){return lf||(lf=ib(Bb,$b,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ml)}catch(n){console.warn(n)}}}}).catch(t=>{throw ps.create("idb-open",{originalErrorMessage:t.message})})),lf}async function zb(t){try{const n=(await kx()).transaction(ml),r=await n.objectStore(ml).get(Sx(t));return await n.done,r}catch(e){if(e instanceof ur)Rr.warn(e.message);else{const n=ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(n.message)}}}async function fv(t,e){try{const r=(await kx()).transaction(ml,"readwrite");await r.objectStore(ml).put(e,Sx(t)),await r.done}catch(n){if(n instanceof ur)Rr.warn(n.message);else{const r=ps.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rr.warn(r.message)}}}function Sx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=1024,qb=30*24*60*60*1e3;class Hb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Gb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=qb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mv(),{heartbeatsToSend:r,unsentEntries:s}=Kb(this._heartbeatsCache.heartbeats),i=Gc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Rr.warn(n),""}}}function mv(){return new Date().toISOString().substring(0,10)}function Kb(t,e=Wb){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),pv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),pv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Gb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OC()?VC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function pv(t){return Gc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){li(new ws("platform-logger",e=>new lb(e),"PRIVATE")),li(new ws("heartbeat",e=>new Hb(e),"PRIVATE")),Jn(gm,dv,t),Jn(gm,dv,"esm2017"),Jn("fire-js","")}Qb("");var Yb="firebase",Zb="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn(Yb,Zb,"app");function Kp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Ax(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Xb=Ax,Cx=new zl("auth","Firebase",Ax());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Wp("@firebase/auth");function Jb(t,...e){Zc.logLevel<=ve.WARN&&Zc.warn(`Auth (${Ua}): ${t}`,...e)}function cc(t,...e){Zc.logLevel<=ve.ERROR&&Zc.error(`Auth (${Ua}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,...e){throw Gp(t,...e)}function er(t,...e){return Gp(t,...e)}function bx(t,e,n){const r=Object.assign(Object.assign({},Xb()),{[e]:n});return new zl("auth","Firebase",r).create(e,{appName:t.name})}function Sr(t){return bx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Cx.create(t,...e)}function ue(t,e,...n){if(!t)throw Gp(e,...n)}function Er(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cc(e),new Error(e)}function Nr(t,e){t||Er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eP(){return gv()==="http:"||gv()==="https:"}function gv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eP()||PC()||"connection"in navigator)?navigator.onLine:!0}function nP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.shortDelay=e,this.longDelay=n,Nr(n>e,"Short delay should be less than long delay!"),this.isMobile=AC()||RC()}get(){return tP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t,e){Nr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=new ql(3e4,6e4);function Os(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vs(t,e,n,r,s={}){return Rx(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const o=Wl(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return bC()||(c.referrerPolicy="no-referrer"),Px.fetch()(Nx(t,t.config.apiHost,n,o),c)})}async function Rx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},rP),e);try{const s=new aP(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Hu(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[u,c]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Hu(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Hu(t,"user-disabled",a);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw bx(t,h,c);jn(t,h)}}catch(s){if(s instanceof ur)throw s;jn(t,"network-request-failed",{message:String(s)})}}async function Hl(t,e,n,r,s={}){const i=await Vs(t,e,n,r,s);return"mfaPendingCredential"in i&&jn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Nx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Qp(t.config,s):`${t.config.apiScheme}://${s}`}function iP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(er(this.auth,"network-request-failed")),sP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=er(t,e,r);return s.customData._tokenResponse=n,s}function yv(t){return t!==void 0&&t.enterprise!==void 0}class oP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function lP(t,e){return Vs(t,"GET","/v2/recaptchaConfig",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(t,e){return Vs(t,"POST","/v1/accounts:delete",e)}async function Dx(t,e){return Vs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cP(t,e=!1){const n=Je(t),r=await n.getIdToken(e),s=Yp(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:$o(uf(s.auth_time)),issuedAtTime:$o(uf(s.iat)),expirationTime:$o(uf(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function uf(t){return Number(t)*1e3}function Yp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{const s=yx(n);return s?JSON.parse(s):(cc("Failed to decode base64 JWT payload"),null)}catch(s){return cc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function _v(t){const e=Yp(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ur&&dP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$o(this.lastLoginAt),this.creationTime=$o(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await pl(t,Dx(n,{idToken:r}));ue(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ox(i.providerUserInfo):[],o=mP(t.providerData,a),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),h=u?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new wm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function fP(t){const e=Je(t);await Xc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mP(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ox(t){return t.map(e=>{var{providerId:n}=e,r=Kp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(t,e){const n=await Rx(t,{},async()=>{const r=Wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=Nx(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Px.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gP(t,e){return Vs(t,"POST","/v2/accounts:revokeToken",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_v(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=_v(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await pP(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new aa;return r&&(ue(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return Er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Kp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await pl(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cP(this,e)}reload(){return fP(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Sr(this.auth));const e=await this.getIdToken();return await pl(this,uP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,o,u,c,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,A=(a=n.photoURL)!==null&&a!==void 0?a:void 0,C=(o=n.tenantId)!==null&&o!==void 0?o:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:O,isAnonymous:U,providerData:$,stsTokenManager:k}=n;ue(E&&k,e,"internal-error");const v=aa.fromJSON(this.name,k);ue(typeof E=="string",e,"internal-error"),$r(p,e.name),$r(g,e.name),ue(typeof O=="boolean",e,"internal-error"),ue(typeof U=="boolean",e,"internal-error"),$r(w,e.name),$r(A,e.name),$r(C,e.name),$r(N,e.name),$r(T,e.name),$r(_,e.name);const I=new xr({uid:E,auth:e,email:g,emailVerified:O,displayName:p,isAnonymous:U,photoURL:A,phoneNumber:w,tenantId:C,stsTokenManager:v,createdAt:T,lastLoginAt:_});return $&&Array.isArray($)&&(I.providerData=$.map(S=>Object.assign({},S))),N&&(I._redirectEventId=N),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new aa;s.updateFromServerResponse(n);const i=new xr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Xc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ox(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new aa;o.updateFromIdToken(r);const u=new xr({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new wm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Map;function Tr(t){Nr(t instanceof Function,"Expected a class definition");let e=vv.get(t);return e?(Nr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Vx.type="NONE";const wv=Vx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t,e,n){return`firebase:${t}:${e}:${n}`}class oa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=dc(this.userKey,s.apiKey,i),this.fullPersistenceKey=dc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new oa(Tr(wv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Tr(wv);const a=dc(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const h=await c._get(a);if(h){const p=xr._fromJSON(e,h);c!==i&&(o=p),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new oa(i,e,r):(i=u[0],o&&await i._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new oa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Bx(e))return"Blackberry";if($x(e))return"Webos";if(Lx(e))return"Safari";if((e.includes("chrome/")||jx(e))&&!e.includes("edge/"))return"Chrome";if(Ux(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Mx(t=Mt()){return/firefox\//i.test(t)}function Lx(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jx(t=Mt()){return/crios\//i.test(t)}function Fx(t=Mt()){return/iemobile/i.test(t)}function Ux(t=Mt()){return/android/i.test(t)}function Bx(t=Mt()){return/blackberry/i.test(t)}function $x(t=Mt()){return/webos/i.test(t)}function Zp(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yP(t=Mt()){var e;return Zp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _P(){return NC()&&document.documentMode===10}function zx(t=Mt()){return Zp(t)||Ux(t)||$x(t)||Bx(t)||/windows phone/i.test(t)||Fx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t,e=[]){let n;switch(t){case"Browser":n=Ev(Mt());break;case"Worker":n=`${Ev(Mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ua}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,o)=>{try{const u=e(i);a(u)}catch(u){o(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(t,e={}){return Vs(t,"GET","/v2/passwordPolicy",Os(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=6;class xP{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:EP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,o;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xv(this),this.idTokenSubscription=new xv(this),this.beforeStateQueue=new vP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Tr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await oa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Dx(this,{idToken:e}),r=await xr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===o)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Sr(this));const n=e?Je(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Sr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wP(this),n=new xP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Tr(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await oa.create(this,[Tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Jb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function wi(t){return Je(t)}class xv{constructor(e){this.auth=e,this.observer=null,this.addObserver=UC(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IP(t){Hd=t}function qx(t){return Hd.loadJS(t)}function kP(){return Hd.recaptchaEnterpriseScript}function SP(){return Hd.gapiScript}function AP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const CP="recaptcha-enterprise",bP="NO_RECAPTCHA";class PP{constructor(e){this.type=CP,this.auth=wi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{lP(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new oP(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(u=>{o(u)})})}function s(i,a,o){const u=window.grecaptcha;yv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(bP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(o=>{if(!n&&yv(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=kP();u.length!==0&&(u+=o),qx(u).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function Tv(t,e,n,r=!1){const s=new PP(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Em(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Tv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Tv(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t,e){const n=qd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Qc(i,e??{}))return s;jn(s,"already-initialized")}return n.initialize({options:e})}function NP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Tr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DP(t,e,n){const r=wi(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Hx(e),{host:a,port:o}=OP(e),u=o===null?"":`:${o}`;r.config.emulator={url:`${i}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),VP()}function Hx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OP(t){const e=Hx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Iv(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Iv(a)}}}function Iv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Er("not implemented")}_getIdTokenResponse(e){return Er("not implemented")}_linkToIdToken(e,n){return Er("not implemented")}_getReauthenticationResolver(e){return Er("not implemented")}}async function MP(t,e){return Vs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(t,e){return Hl(t,"POST","/v1/accounts:signInWithPassword",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(t,e){return Hl(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}async function FP(t,e){return Hl(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends Xp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new gl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Em(e,n,"signInWithPassword",LP);case"emailLink":return jP(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Em(e,r,"signUpPassword",MP);case"emailLink":return FP(e,{idToken:n,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(t,e){return Hl(t,"POST","/v1/accounts:signInWithIdp",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="http://localhost";class ui extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Kp(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new ui(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return la(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,la(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,la(e,n)}buildRequest(){const e={requestUri:UP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $P(t){const e=So(Ao(t)).link,n=e?So(Ao(e)).deep_link_id:null,r=So(Ao(t)).deep_link_id;return(r?So(Ao(r)).link:null)||r||n||e||t}class Jp{constructor(e){var n,r,s,i,a,o;const u=So(Ao(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=BP((s=u.mode)!==null&&s!==void 0?s:null);ue(c&&h&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=u.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=$P(e);try{return new Jp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.providerId=Ba.PROVIDER_ID}static credential(e,n){return gl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jp.parseLink(n);return ue(r,"argument-error"),gl._fromEmailAndCode(e,r.code,r.tenantId)}}Ba.PROVIDER_ID="password";Ba.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ba.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Kx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Kl{constructor(){super("facebook.com")}static credential(e){return ui._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ui._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yr.credential(n,r)}catch{return null}}}Yr.GOOGLE_SIGN_IN_METHOD="google.com";Yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Kl{constructor(){super("github.com")}static credential(e){return ui._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.GITHUB_SIGN_IN_METHOD="github.com";Zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Kl{constructor(){super("twitter.com")}static credential(e,n){return ui._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(t,e){return Hl(t,"POST","/v1/accounts:signUp",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await xr._fromIdTokenResponse(e,r,s),a=kv(r);return new ci({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=kv(r);return new ci({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function kv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends ur{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Jc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Jc(e,n,r,s)}}function Gx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Jc._fromErrorAndOperation(t,i,e,r):i})}async function WP(t,e,n=!1){const r=await pl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ci._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(t,e,n=!1){const{auth:r}=t;if(Qn(r.app))return Promise.reject(Sr(r));const s="reauthenticate";try{const i=await pl(t,Gx(r,s,e,t),n);ue(i.idToken,r,"internal-error");const a=Yp(i.idToken);ue(a,r,"internal-error");const{sub:o}=a;return ue(t.uid===o,r,"user-mismatch"),ci._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&jn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(t,e,n=!1){if(Qn(t.app))return Promise.reject(Sr(t));const r="signIn",s=await Gx(t,r,e),i=await ci._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function HP(t,e){return Qx(wi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(t){const e=wi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function KP(t,e,n){if(Qn(t.app))return Promise.reject(Sr(t));const r=wi(t),a=await Em(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Yx(t),u}),o=await ci._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function GP(t,e,n){return Qn(t.app)?Promise.reject(Sr(t)):HP(Je(t),Ba.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Yx(t),r})}function QP(t,e,n,r){return Je(t).onIdTokenChanged(e,n,r)}function YP(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function ZP(t){return Je(t).signOut()}const ed="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ed,"1"),this.storage.removeItem(ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=1e3,JP=10;class Xx extends Zx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);_P()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,JP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xx.type="LOCAL";const eR=Xx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx extends Zx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Jx.type="SESSION";const eT=Jx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Kd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(a).map(async c=>c(n.origin,i)),u=await tR(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,u)=>{const c=eg("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(g.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function rR(t){tr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function sR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aR(){return tT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="firebaseLocalStorageDb",oR=1,td="firebaseLocalStorage",rT="fbase_key";class Gl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gd(t,e){return t.transaction([td],e?"readwrite":"readonly").objectStore(td)}function lR(){const t=indexedDB.deleteDatabase(nT);return new Gl(t).toPromise()}function xm(){const t=indexedDB.open(nT,oR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(td,{keyPath:rT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(td)?e(r):(r.close(),await lR(),e(await xm()))})})}async function Sv(t,e,n){const r=Gd(t,!0).put({[rT]:e,value:n});return new Gl(r).toPromise()}async function uR(t,e){const n=Gd(t,!1).get(e),r=await new Gl(n).toPromise();return r===void 0?null:r.value}function Av(t,e){const n=Gd(t,!0).delete(e);return new Gl(n).toPromise()}const cR=800,dR=3;class sT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>dR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kd._getInstance(aR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sR(),!this.activeServiceWorker)return;this.sender=new nR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xm();return await Sv(e,ed,"1"),await Av(e,ed),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Sv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Av(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Gd(s,!1).getAll();return new Gl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sT.type="LOCAL";const hR=sT;new ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t,e){return e?Tr(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends Xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return la(e,this._buildIdpRequest())}_linkToIdToken(e,n){return la(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return la(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mR(t){return Qx(t.auth,new tg(t),t.bypassAuthState)}function pR(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),qP(n,new tg(t),t.bypassAuthState)}async function gR(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),WP(n,new tg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mR;case"linkViaPopup":case"linkViaRedirect":return gR;case"reauthViaPopup":case"reauthViaRedirect":return pR;default:jn(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new ql(2e3,1e4);class Zi extends iT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Zi.currentPopupAction&&Zi.currentPopupAction.cancel(),Zi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yR.get())};e()}}Zi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="pendingRedirect",hc=new Map;class vR extends iT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hc.get(this.auth._key());if(!e){try{const r=await wR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hc.set(this.auth._key(),e)}return this.bypassAuthState||hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wR(t,e){const n=TR(e),r=xR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ER(t,e){hc.set(t._key(),e)}function xR(t){return Tr(t._redirectPersistence)}function TR(t){return dc(_R,t.config.apiKey,t.name)}async function IR(t,e,n=!1){if(Qn(t.app))return Promise.reject(Sr(t));const r=wi(t),s=fR(r,e),a=await new vR(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=10*60*1e3;class SR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!aT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(er(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cv(e))}saveEventToCache(e){this.cachedEventUids.add(Cv(e)),this.lastProcessedEventTime=Date.now()}}function Cv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e={}){return Vs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PR=/^https?/;async function RR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CR(t);for(const n of e)try{if(NR(n))return}catch{}jn(t,"unauthorized-domain")}function NR(t){const e=vm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!PR.test(n))return!1;if(bR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new ql(3e4,6e4);function bv(){const t=tr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OR(t){return new Promise((e,n)=>{var r,s,i;function a(){bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bv(),n(er(t,"network-request-failed"))},timeout:DR.get()})}if(!((s=(r=tr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=tr().gapi)===null||i===void 0)&&i.load)a();else{const o=AP("iframefcb");return tr()[o]=()=>{gapi.load?a():n(er(t,"network-request-failed"))},qx(`${SP()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw fc=null,e})}let fc=null;function VR(t){return fc=fc||OR(t),fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new ql(5e3,15e3),LR="__/auth/iframe",jR="emulator/auth/iframe",FR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BR(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qp(e,jR):`https://${t.config.authDomain}/${LR}`,r={apiKey:e.apiKey,appName:t.name,v:Ua},s=UR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Wl(r).slice(1)}`}async function $R(t){const e=await VR(t),n=tr().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:BR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=er(t,"network-request-failed"),o=tr().setTimeout(()=>{i(a)},MR.get());function u(){tr().clearTimeout(o),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WR=500,qR=600,HR="_blank",KR="http://localhost";class Pv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GR(t,e,n,r=WR,s=qR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const u=Object.assign(Object.assign({},zR),{width:r.toString(),height:s.toString(),top:i,left:a}),c=Mt().toLowerCase();n&&(o=jx(c)?HR:n),Mx(c)&&(e=e||KR,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[w,A])=>`${g}${w}=${A},`,"");if(yP(c)&&o!=="_self")return QR(e||"",o),new Pv(null);const p=window.open(e||"",o,h);ue(p,t,"popup-blocked");try{p.focus()}catch{}return new Pv(p)}function QR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="__/auth/handler",ZR="emulator/auth/handler",XR=encodeURIComponent("fac");async function Rv(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ua,eventId:s};if(e instanceof Kx){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",FC(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof Kl){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const u=await t._getAppCheckToken(),c=u?`#${XR}=${encodeURIComponent(u)}`:"";return`${JR(t)}?${Wl(o).slice(1)}${c}`}function JR({config:t}){return t.emulator?Qp(t,ZR):`https://${t.authDomain}/${YR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="webStorageSupport";class eN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eT,this._completeRedirectFn=IR,this._overrideRedirectResult=ER}async _openPopup(e,n,r,s){var i;Nr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Rv(e,n,r,vm(),s);return GR(e,a,eg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Rv(e,n,r,vm(),s);return rR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Nr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $R(e),r=new SR(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cf,{type:cf},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[cf];a!==void 0&&n(!!a),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zx()||Lx()||Zp()}}const tN=eN;var Nv="@firebase/auth",Dv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sN(t){li(new ws("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;ue(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wx(t)},c=new TP(r,s,i,u);return NP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),li(new ws("auth-internal",e=>{const n=wi(e.getProvider("auth").getImmediate());return(r=>new nN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jn(Nv,Dv,rN(t)),Jn(Nv,Dv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=5*60,aN=Ex("authIdTokenMaxAge")||iN;let Ov=null;const oN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>aN)return;const s=n==null?void 0:n.token;Ov!==s&&(Ov=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lN(t=Hp()){const e=qd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RP(t,{popupRedirectResolver:tN,persistence:[hR,eR,eT]}),r=Ex("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=oN(i.toString());YP(n,a,()=>a(n.currentUser)),QP(n,o=>a(o))}}const s=_x("auth");return s&&DP(n,`http://${s}`),n}function uN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}IP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=er("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",uN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sN("Browser");var Vv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ti,oT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,v){function I(){}I.prototype=v.prototype,k.D=v.prototype,k.prototype=new I,k.prototype.constructor=k,k.C=function(S,R,P){for(var x=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)x[ke-2]=arguments[ke];return v.prototype[R].apply(S,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,v,I){I||(I=0);var S=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)S[R]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(R=0;16>R;++R)S[R]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=k.g[0],I=k.g[1],R=k.g[2];var P=k.g[3],x=v+(P^I&(R^P))+S[0]+3614090360&4294967295;v=I+(x<<7&4294967295|x>>>25),x=P+(R^v&(I^R))+S[1]+3905402710&4294967295,P=v+(x<<12&4294967295|x>>>20),x=R+(I^P&(v^I))+S[2]+606105819&4294967295,R=P+(x<<17&4294967295|x>>>15),x=I+(v^R&(P^v))+S[3]+3250441966&4294967295,I=R+(x<<22&4294967295|x>>>10),x=v+(P^I&(R^P))+S[4]+4118548399&4294967295,v=I+(x<<7&4294967295|x>>>25),x=P+(R^v&(I^R))+S[5]+1200080426&4294967295,P=v+(x<<12&4294967295|x>>>20),x=R+(I^P&(v^I))+S[6]+2821735955&4294967295,R=P+(x<<17&4294967295|x>>>15),x=I+(v^R&(P^v))+S[7]+4249261313&4294967295,I=R+(x<<22&4294967295|x>>>10),x=v+(P^I&(R^P))+S[8]+1770035416&4294967295,v=I+(x<<7&4294967295|x>>>25),x=P+(R^v&(I^R))+S[9]+2336552879&4294967295,P=v+(x<<12&4294967295|x>>>20),x=R+(I^P&(v^I))+S[10]+4294925233&4294967295,R=P+(x<<17&4294967295|x>>>15),x=I+(v^R&(P^v))+S[11]+2304563134&4294967295,I=R+(x<<22&4294967295|x>>>10),x=v+(P^I&(R^P))+S[12]+1804603682&4294967295,v=I+(x<<7&4294967295|x>>>25),x=P+(R^v&(I^R))+S[13]+4254626195&4294967295,P=v+(x<<12&4294967295|x>>>20),x=R+(I^P&(v^I))+S[14]+2792965006&4294967295,R=P+(x<<17&4294967295|x>>>15),x=I+(v^R&(P^v))+S[15]+1236535329&4294967295,I=R+(x<<22&4294967295|x>>>10),x=v+(R^P&(I^R))+S[1]+4129170786&4294967295,v=I+(x<<5&4294967295|x>>>27),x=P+(I^R&(v^I))+S[6]+3225465664&4294967295,P=v+(x<<9&4294967295|x>>>23),x=R+(v^I&(P^v))+S[11]+643717713&4294967295,R=P+(x<<14&4294967295|x>>>18),x=I+(P^v&(R^P))+S[0]+3921069994&4294967295,I=R+(x<<20&4294967295|x>>>12),x=v+(R^P&(I^R))+S[5]+3593408605&4294967295,v=I+(x<<5&4294967295|x>>>27),x=P+(I^R&(v^I))+S[10]+38016083&4294967295,P=v+(x<<9&4294967295|x>>>23),x=R+(v^I&(P^v))+S[15]+3634488961&4294967295,R=P+(x<<14&4294967295|x>>>18),x=I+(P^v&(R^P))+S[4]+3889429448&4294967295,I=R+(x<<20&4294967295|x>>>12),x=v+(R^P&(I^R))+S[9]+568446438&4294967295,v=I+(x<<5&4294967295|x>>>27),x=P+(I^R&(v^I))+S[14]+3275163606&4294967295,P=v+(x<<9&4294967295|x>>>23),x=R+(v^I&(P^v))+S[3]+4107603335&4294967295,R=P+(x<<14&4294967295|x>>>18),x=I+(P^v&(R^P))+S[8]+1163531501&4294967295,I=R+(x<<20&4294967295|x>>>12),x=v+(R^P&(I^R))+S[13]+2850285829&4294967295,v=I+(x<<5&4294967295|x>>>27),x=P+(I^R&(v^I))+S[2]+4243563512&4294967295,P=v+(x<<9&4294967295|x>>>23),x=R+(v^I&(P^v))+S[7]+1735328473&4294967295,R=P+(x<<14&4294967295|x>>>18),x=I+(P^v&(R^P))+S[12]+2368359562&4294967295,I=R+(x<<20&4294967295|x>>>12),x=v+(I^R^P)+S[5]+4294588738&4294967295,v=I+(x<<4&4294967295|x>>>28),x=P+(v^I^R)+S[8]+2272392833&4294967295,P=v+(x<<11&4294967295|x>>>21),x=R+(P^v^I)+S[11]+1839030562&4294967295,R=P+(x<<16&4294967295|x>>>16),x=I+(R^P^v)+S[14]+4259657740&4294967295,I=R+(x<<23&4294967295|x>>>9),x=v+(I^R^P)+S[1]+2763975236&4294967295,v=I+(x<<4&4294967295|x>>>28),x=P+(v^I^R)+S[4]+1272893353&4294967295,P=v+(x<<11&4294967295|x>>>21),x=R+(P^v^I)+S[7]+4139469664&4294967295,R=P+(x<<16&4294967295|x>>>16),x=I+(R^P^v)+S[10]+3200236656&4294967295,I=R+(x<<23&4294967295|x>>>9),x=v+(I^R^P)+S[13]+681279174&4294967295,v=I+(x<<4&4294967295|x>>>28),x=P+(v^I^R)+S[0]+3936430074&4294967295,P=v+(x<<11&4294967295|x>>>21),x=R+(P^v^I)+S[3]+3572445317&4294967295,R=P+(x<<16&4294967295|x>>>16),x=I+(R^P^v)+S[6]+76029189&4294967295,I=R+(x<<23&4294967295|x>>>9),x=v+(I^R^P)+S[9]+3654602809&4294967295,v=I+(x<<4&4294967295|x>>>28),x=P+(v^I^R)+S[12]+3873151461&4294967295,P=v+(x<<11&4294967295|x>>>21),x=R+(P^v^I)+S[15]+530742520&4294967295,R=P+(x<<16&4294967295|x>>>16),x=I+(R^P^v)+S[2]+3299628645&4294967295,I=R+(x<<23&4294967295|x>>>9),x=v+(R^(I|~P))+S[0]+4096336452&4294967295,v=I+(x<<6&4294967295|x>>>26),x=P+(I^(v|~R))+S[7]+1126891415&4294967295,P=v+(x<<10&4294967295|x>>>22),x=R+(v^(P|~I))+S[14]+2878612391&4294967295,R=P+(x<<15&4294967295|x>>>17),x=I+(P^(R|~v))+S[5]+4237533241&4294967295,I=R+(x<<21&4294967295|x>>>11),x=v+(R^(I|~P))+S[12]+1700485571&4294967295,v=I+(x<<6&4294967295|x>>>26),x=P+(I^(v|~R))+S[3]+2399980690&4294967295,P=v+(x<<10&4294967295|x>>>22),x=R+(v^(P|~I))+S[10]+4293915773&4294967295,R=P+(x<<15&4294967295|x>>>17),x=I+(P^(R|~v))+S[1]+2240044497&4294967295,I=R+(x<<21&4294967295|x>>>11),x=v+(R^(I|~P))+S[8]+1873313359&4294967295,v=I+(x<<6&4294967295|x>>>26),x=P+(I^(v|~R))+S[15]+4264355552&4294967295,P=v+(x<<10&4294967295|x>>>22),x=R+(v^(P|~I))+S[6]+2734768916&4294967295,R=P+(x<<15&4294967295|x>>>17),x=I+(P^(R|~v))+S[13]+1309151649&4294967295,I=R+(x<<21&4294967295|x>>>11),x=v+(R^(I|~P))+S[4]+4149444226&4294967295,v=I+(x<<6&4294967295|x>>>26),x=P+(I^(v|~R))+S[11]+3174756917&4294967295,P=v+(x<<10&4294967295|x>>>22),x=R+(v^(P|~I))+S[2]+718787259&4294967295,R=P+(x<<15&4294967295|x>>>17),x=I+(P^(R|~v))+S[9]+3951481745&4294967295,k.g[0]=k.g[0]+v&4294967295,k.g[1]=k.g[1]+(R+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+R&4294967295,k.g[3]=k.g[3]+P&4294967295}r.prototype.u=function(k,v){v===void 0&&(v=k.length);for(var I=v-this.blockSize,S=this.B,R=this.h,P=0;P<v;){if(R==0)for(;P<=I;)s(this,k,P),P+=this.blockSize;if(typeof k=="string"){for(;P<v;)if(S[R++]=k.charCodeAt(P++),R==this.blockSize){s(this,S),R=0;break}}else for(;P<v;)if(S[R++]=k[P++],R==this.blockSize){s(this,S),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var v=1;v<k.length-8;++v)k[v]=0;var I=8*this.o;for(v=k.length-8;v<k.length;++v)k[v]=I&255,I/=256;for(this.u(k),k=Array(16),v=I=0;4>v;++v)for(var S=0;32>S;S+=8)k[I++]=this.g[v]>>>S&255;return k};function i(k,v){var I=o;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=v(k)}function a(k,v){this.h=v;for(var I=[],S=!0,R=k.length-1;0<=R;R--){var P=k[R]|0;S&&P==v||(I[R]=P,S=!1)}this.g=I}var o={};function u(k){return-128<=k&&128>k?i(k,function(v){return new a([v|0],0>v?-1:0)}):new a([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return p;if(0>k)return N(c(-k));for(var v=[],I=1,S=0;k>=I;S++)v[S]=k/I|0,I*=4294967296;return new a(v,0)}function h(k,v){if(k.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(k.charAt(0)=="-")return N(h(k.substring(1),v));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(v,8)),S=p,R=0;R<k.length;R+=8){var P=Math.min(8,k.length-R),x=parseInt(k.substring(R,R+P),v);8>P?(P=c(Math.pow(v,P)),S=S.j(P).add(c(x))):(S=S.j(I),S=S.add(c(x)))}return S}var p=u(0),g=u(1),w=u(16777216);t=a.prototype,t.m=function(){if(C(this))return-N(this).m();for(var k=0,v=1,I=0;I<this.g.length;I++){var S=this.i(I);k+=(0<=S?S:4294967296+S)*v,v*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A(this))return"0";if(C(this))return"-"+N(this).toString(k);for(var v=c(Math.pow(k,6)),I=this,S="";;){var R=O(I,v).g;I=T(I,R.j(v));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(k);if(I=R,A(I))return P+S;for(;6>P.length;)P="0"+P;S=P+S}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function A(k){if(k.h!=0)return!1;for(var v=0;v<k.g.length;v++)if(k.g[v]!=0)return!1;return!0}function C(k){return k.h==-1}t.l=function(k){return k=T(this,k),C(k)?-1:A(k)?0:1};function N(k){for(var v=k.g.length,I=[],S=0;S<v;S++)I[S]=~k.g[S];return new a(I,~k.h).add(g)}t.abs=function(){return C(this)?N(this):this},t.add=function(k){for(var v=Math.max(this.g.length,k.g.length),I=[],S=0,R=0;R<=v;R++){var P=S+(this.i(R)&65535)+(k.i(R)&65535),x=(P>>>16)+(this.i(R)>>>16)+(k.i(R)>>>16);S=x>>>16,P&=65535,x&=65535,I[R]=x<<16|P}return new a(I,I[I.length-1]&-2147483648?-1:0)};function T(k,v){return k.add(N(v))}t.j=function(k){if(A(this)||A(k))return p;if(C(this))return C(k)?N(this).j(N(k)):N(N(this).j(k));if(C(k))return N(this.j(N(k)));if(0>this.l(w)&&0>k.l(w))return c(this.m()*k.m());for(var v=this.g.length+k.g.length,I=[],S=0;S<2*v;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<k.g.length;R++){var P=this.i(S)>>>16,x=this.i(S)&65535,ke=k.i(R)>>>16,Be=k.i(R)&65535;I[2*S+2*R]+=x*Be,_(I,2*S+2*R),I[2*S+2*R+1]+=P*Be,_(I,2*S+2*R+1),I[2*S+2*R+1]+=x*ke,_(I,2*S+2*R+1),I[2*S+2*R+2]+=P*ke,_(I,2*S+2*R+2)}for(S=0;S<v;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=v;S<2*v;S++)I[S]=0;return new a(I,0)};function _(k,v){for(;(k[v]&65535)!=k[v];)k[v+1]+=k[v]>>>16,k[v]&=65535,v++}function E(k,v){this.g=k,this.h=v}function O(k,v){if(A(v))throw Error("division by zero");if(A(k))return new E(p,p);if(C(k))return v=O(N(k),v),new E(N(v.g),N(v.h));if(C(v))return v=O(k,N(v)),new E(N(v.g),v.h);if(30<k.g.length){if(C(k)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,S=v;0>=S.l(k);)I=U(I),S=U(S);var R=$(I,1),P=$(S,1);for(S=$(S,2),I=$(I,2);!A(S);){var x=P.add(S);0>=x.l(k)&&(R=R.add(I),P=x),S=$(S,1),I=$(I,1)}return v=T(k,R.j(v)),new E(R,v)}for(R=p;0<=k.l(v);){for(I=Math.max(1,Math.floor(k.m()/v.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),P=c(I),x=P.j(v);C(x)||0<x.l(k);)I-=S,P=c(I),x=P.j(v);A(P)&&(P=g),R=R.add(P),k=T(k,x)}return new E(R,k)}t.A=function(k){return O(this,k).h},t.and=function(k){for(var v=Math.max(this.g.length,k.g.length),I=[],S=0;S<v;S++)I[S]=this.i(S)&k.i(S);return new a(I,this.h&k.h)},t.or=function(k){for(var v=Math.max(this.g.length,k.g.length),I=[],S=0;S<v;S++)I[S]=this.i(S)|k.i(S);return new a(I,this.h|k.h)},t.xor=function(k){for(var v=Math.max(this.g.length,k.g.length),I=[],S=0;S<v;S++)I[S]=this.i(S)^k.i(S);return new a(I,this.h^k.h)};function U(k){for(var v=k.g.length+1,I=[],S=0;S<v;S++)I[S]=k.i(S)<<1|k.i(S-1)>>>31;return new a(I,k.h)}function $(k,v){var I=v>>5;v%=32;for(var S=k.g.length-I,R=[],P=0;P<S;P++)R[P]=0<v?k.i(P+I)>>>v|k.i(P+I+1)<<32-v:k.i(P+I);return new a(R,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,oT=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,ti=a}).apply(typeof Vv<"u"?Vv:typeof self<"u"?self:typeof window<"u"?window:{});var Ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lT,Co,uT,mc,Tm,cT,dT,hT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,m){return l==Array.prototype||l==Object.prototype||(l[d]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ku=="object"&&Ku];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,d){if(d)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var D=l[y];if(!(D in m))break e;m=m[D]}l=l[l.length-1],y=m[l],d=d(y),d!=y&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}function i(l,d){l instanceof String&&(l+="");var m=0,y=!1,D={next:function(){if(!y&&m<l.length){var L=m++;return{value:d(L,l[L]),done:!1}}return y=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(l){return l||function(){return i(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function u(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function c(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,m){return l.call.apply(l.bind,arguments)}function p(l,d,m){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,y),l.apply(d,D)}}return function(){return l.apply(d,arguments)}}function g(l,d,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function w(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function A(l,d){function m(){}m.prototype=d.prototype,l.aa=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(y,D,L){for(var H=Array(arguments.length-2),De=2;De<arguments.length;De++)H[De-2]=arguments[De];return d.prototype[D].apply(y,H)}}function C(l){const d=l.length;if(0<d){const m=Array(d);for(let y=0;y<d;y++)m[y]=l[y];return m}return[]}function N(l,d){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(u(y)){const D=l.length||0,L=y.length||0;l.length=D+L;for(let H=0;H<L;H++)l[D+H]=y[H]}else l.push(y)}}class T{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(l){return/^[\s\xa0]*$/.test(l)}function E(){var l=o.navigator;return l&&(l=l.userAgent)?l:""}function O(l){return O[" "](l),l}O[" "]=function(){};var U=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function $(l,d,m){for(const y in l)d.call(m,l[y],y,l)}function k(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function v(l){const d={};for(const m in l)d[m]=l[m];return d}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,d){let m,y;for(let D=1;D<arguments.length;D++){y=arguments[D];for(m in y)l[m]=y[m];for(let L=0;L<I.length;L++)m=I[L],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function R(l){var d=1;l=l.split(":");const m=[];for(;0<d&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function P(l){o.setTimeout(()=>{throw l},0)}function x(){var l=ie;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class ke{constructor(){this.h=this.g=null}add(d,m){const y=Be.get();y.set(d,m),this.h?this.h.next=y:this.g=y,this.h=y}}var Be=new T(()=>new yt,l=>l.reset());class yt{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Ye,G=!1,ie=new ke,de=()=>{const l=o.Promise.resolve(void 0);Ye=()=>{l.then(Ve)}};var Ve=()=>{for(var l;l=x();){try{l.h.call(l.g)}catch(m){P(m)}var d=Be;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}G=!1};function Ce(){this.s=this.s,this.C=this.C}Ce.prototype.s=!1,Ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ze(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}ze.prototype.h=function(){this.defaultPrevented=!0};var fn=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};o.addEventListener("test",m,d),o.removeEventListener("test",m,d)}catch{}return l}();function In(l,d){if(ze.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(U){e:{try{O(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Jt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&In.aa.h.call(this)}}A(In,ze);var Jt={2:"touch",3:"pen",4:"mouse"};In.prototype.h=function(){In.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var mn="closure_listenable_"+(1e6*Math.random()|0),Ga=0;function cu(l,d,m,y,D){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!y,this.ha=D,this.key=++Ga,this.da=this.fa=!1}function Ti(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ls(l){this.src=l,this.g={},this.h=0}Ls.prototype.add=function(l,d,m,y,D){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var H=Ii(l,d,y,D);return-1<H?(d=l[H],m||(d.fa=!1)):(d=new cu(d,this.src,L,!!y,D),d.fa=m,l.push(d)),d};function Qa(l,d){var m=d.type;if(m in l.g){var y=l.g[m],D=Array.prototype.indexOf.call(y,d,void 0),L;(L=0<=D)&&Array.prototype.splice.call(y,D,1),L&&(Ti(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Ii(l,d,m,y){for(var D=0;D<l.length;++D){var L=l[D];if(!L.da&&L.listener==d&&L.capture==!!m&&L.ha==y)return D}return-1}var ki="closure_lm_"+(1e6*Math.random()|0),du={};function mh(l,d,m,y,D){if(Array.isArray(d)){for(var L=0;L<d.length;L++)mh(l,d[L],m,y,D);return null}return m=me(m),l&&l[mn]?l.K(d,m,c(y)?!!y.capture:!1,D):Qg(l,d,m,!1,y,D)}function Qg(l,d,m,y,D,L){if(!d)throw Error("Invalid event type");var H=c(D)?!!D.capture:!!D,De=q(l);if(De||(l[ki]=De=new Ls(l)),m=De.add(d,m,y,H,L),m.proxy)return m;if(y=b(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)fn||(D=H),D===void 0&&(D=!1),l.addEventListener(d.toString(),y,D);else if(l.attachEvent)l.attachEvent(Y(d.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function b(){function l(m){return d.call(l.src,l.listener,m)}const d=K;return l}function V(l,d,m,y,D){if(Array.isArray(d))for(var L=0;L<d.length;L++)V(l,d[L],m,y,D);else y=c(y)?!!y.capture:!!y,m=me(m),l&&l[mn]?(l=l.i,d=String(d).toString(),d in l.g&&(L=l.g[d],m=Ii(L,m,y,D),-1<m&&(Ti(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete l.g[d],l.h--)))):l&&(l=q(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Ii(d,m,y,D)),(m=-1<l?d[l]:null)&&j(m))}function j(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[mn])Qa(d.i,l);else{var m=l.type,y=l.proxy;d.removeEventListener?d.removeEventListener(m,y,l.capture):d.detachEvent?d.detachEvent(Y(m),y):d.addListener&&d.removeListener&&d.removeListener(y),(m=q(d))?(Qa(m,l),m.h==0&&(m.src=null,d[ki]=null)):Ti(l)}}}function Y(l){return l in du?du[l]:du[l]="on"+l}function K(l,d){if(l.da)l=!0;else{d=new In(d,this);var m=l.listener,y=l.ha||l.src;l.fa&&j(l),l=m.call(y,d)}return l}function q(l){return l=l[ki],l instanceof Ls?l:null}var re="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(l){return typeof l=="function"?l:(l[re]||(l[re]=function(d){return l.handleEvent(d)}),l[re])}function _e(){Ce.call(this),this.i=new Ls(this),this.M=this,this.F=null}A(_e,Ce),_e.prototype[mn]=!0,_e.prototype.removeEventListener=function(l,d,m,y){V(this,l,d,m,y)};function we(l,d){var m,y=l.F;if(y)for(m=[];y;y=y.F)m.push(y);if(l=l.M,y=d.type||d,typeof d=="string")d=new ze(d,l);else if(d instanceof ze)d.target=d.target||l;else{var D=d;d=new ze(y,l),S(d,D)}if(D=!0,m)for(var L=m.length-1;0<=L;L--){var H=d.g=m[L];D=en(H,y,!0,d)&&D}if(H=d.g=l,D=en(H,y,!0,d)&&D,D=en(H,y,!1,d)&&D,m)for(L=0;L<m.length;L++)H=d.g=m[L],D=en(H,y,!1,d)&&D}_e.prototype.N=function(){if(_e.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var m=l.g[d],y=0;y<m.length;y++)Ti(m[y]);delete l.g[d],l.h--}}this.F=null},_e.prototype.K=function(l,d,m,y){return this.i.add(String(l),d,!1,m,y)},_e.prototype.L=function(l,d,m,y){return this.i.add(String(l),d,!0,m,y)};function en(l,d,m,y){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,L=0;L<d.length;++L){var H=d[L];if(H&&!H.da&&H.capture==m){var De=H.listener,_t=H.ha||H.src;H.fa&&Qa(l.i,H),D=De.call(_t,y)!==!1&&D}}return D&&!y.defaultPrevented}function hu(l,d,m){if(typeof l=="function")m&&(l=g(l,m));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:o.setTimeout(l,d||0)}function Si(l){l.g=hu(()=>{l.g=null,l.i&&(l.i=!1,Si(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class Ya extends Ce{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Si(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function js(l){Ce.call(this),this.h=l,this.g={}}A(js,Ce);var Za=[];function fu(l){$(l.g,function(d,m){this.g.hasOwnProperty(m)&&j(d)},l),l.g={}}js.prototype.N=function(){js.aa.N.call(this),fu(this)},js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ai=o.JSON.stringify,ik=o.JSON.parse,ak=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function ph(){}ph.prototype.h=null;function Yg(l){return l.h||(l.h=l.i())}function Zg(){}var Xa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gh(){ze.call(this,"d")}A(gh,ze);function yh(){ze.call(this,"c")}A(yh,ze);var Fs={},Xg=null;function mu(){return Xg=Xg||new _e}Fs.La="serverreachability";function Jg(l){ze.call(this,Fs.La,l)}A(Jg,ze);function Ja(l){const d=mu();we(d,new Jg(d))}Fs.STAT_EVENT="statevent";function ey(l,d){ze.call(this,Fs.STAT_EVENT,l),this.stat=d}A(ey,ze);function jt(l){const d=mu();we(d,new ey(d,l))}Fs.Ma="timingevent";function ty(l,d){ze.call(this,Fs.Ma,l),this.size=d}A(ty,ze);function eo(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},d)}function to(){this.g=!0}to.prototype.xa=function(){this.g=!1};function ok(l,d,m,y,D,L){l.info(function(){if(l.g)if(L)for(var H="",De=L.split("&"),_t=0;_t<De.length;_t++){var Se=De[_t].split("=");if(1<Se.length){var At=Se[0];Se=Se[1];var Ct=At.split("_");H=2<=Ct.length&&Ct[1]=="type"?H+(At+"="+Se+"&"):H+(At+"=redacted&")}}else H=null;else H=L;return"XMLHTTP REQ ("+y+") [attempt "+D+"]: "+d+`
`+m+`
`+H})}function lk(l,d,m,y,D,L,H){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+D+"]: "+d+`
`+m+`
`+L+" "+H})}function Ci(l,d,m,y){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+ck(l,m)+(y?" "+y:"")})}function uk(l,d){l.info(function(){return"TIMEOUT: "+d})}to.prototype.info=function(){};function ck(l,d){if(!l.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var y=m[l];if(!(2>y.length)){var D=y[1];if(Array.isArray(D)&&!(1>D.length)){var L=D[0];if(L!="noop"&&L!="stop"&&L!="close")for(var H=1;H<D.length;H++)D[H]=""}}}}return Ai(m)}catch{return d}}var pu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ny={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_h;function gu(){}A(gu,ph),gu.prototype.g=function(){return new XMLHttpRequest},gu.prototype.i=function(){return{}},_h=new gu;function jr(l,d,m,y){this.j=l,this.i=d,this.l=m,this.R=y||1,this.U=new js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ry}function ry(){this.i=null,this.g="",this.h=!1}var sy={},vh={};function wh(l,d,m){l.L=1,l.v=wu(dr(d)),l.m=m,l.P=!0,iy(l,null)}function iy(l,d){l.F=Date.now(),yu(l),l.A=dr(l.v);var m=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),vy(m.i,"t",y),l.C=0,m=l.j.J,l.h=new ry,l.g=Ly(l.j,m?d:null,!l.m),0<l.O&&(l.M=new Ya(g(l.Y,l,l.g),l.O)),d=l.U,m=l.g,y=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(Za[0]=D.toString()),D=Za);for(var L=0;L<D.length;L++){var H=mh(m,D[L],y||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),Ja(),ok(l.i,l.u,l.A,l.l,l.R,l.m)}jr.prototype.ca=function(l){l=l.target;const d=this.M;d&&hr(l)==3?d.j():this.Y(l)},jr.prototype.Y=function(l){try{if(l==this.g)e:{const Ct=hr(this.g);var d=this.g.Ba();const Ri=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||Sy(this.g)))){this.J||Ct!=4||d==7||(d==8||0>=Ri?Ja(3):Ja(2)),Eh(this);var m=this.g.Z();this.X=m;t:if(ay(this)){var y=Sy(this.g);l="";var D=y.length,L=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Us(this),no(this);var H="";break t}this.h.i=new o.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,l+=this.h.i.decode(y[d],{stream:!(L&&d==D-1)});y.length=0,this.h.g+=l,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=m==200,lk(this.i,this.u,this.A,this.l,this.R,Ct,m),this.o){if(this.T&&!this.K){t:{if(this.g){var De,_t=this.g;if((De=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(De)){var Se=De;break t}}Se=null}if(m=Se)Ci(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xh(this,m);else{this.o=!1,this.s=3,jt(12),Us(this),no(this);break e}}if(this.P){m=!0;let kn;for(;!this.J&&this.C<H.length;)if(kn=dk(this,H),kn==vh){Ct==4&&(this.s=4,jt(14),m=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==sy){this.s=4,jt(15),Ci(this.i,this.l,H,"[Invalid Chunk]"),m=!1;break}else Ci(this.i,this.l,kn,null),xh(this,kn);if(ay(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||H.length!=0||this.h.h||(this.s=1,jt(16),m=!1),this.o=this.o&&m,!m)Ci(this.i,this.l,H,"[Invalid Chunked Response]"),Us(this),no(this);else if(0<H.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Ch(At),At.M=!0,jt(11))}}else Ci(this.i,this.l,H,null),xh(this,H);Ct==4&&Us(this),this.o&&!this.J&&(Ct==4?Dy(this.j,this):(this.o=!1,yu(this)))}else Ck(this.g),m==400&&0<H.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),Us(this),no(this)}}}catch{}finally{}};function ay(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function dk(l,d){var m=l.C,y=d.indexOf(`
`,m);return y==-1?vh:(m=Number(d.substring(m,y)),isNaN(m)?sy:(y+=1,y+m>d.length?vh:(d=d.slice(y,y+m),l.C=y+m,d)))}jr.prototype.cancel=function(){this.J=!0,Us(this)};function yu(l){l.S=Date.now()+l.I,oy(l,l.I)}function oy(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=eo(g(l.ba,l),d)}function Eh(l){l.B&&(o.clearTimeout(l.B),l.B=null)}jr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(uk(this.i,this.A),this.L!=2&&(Ja(),jt(17)),Us(this),this.s=2,no(this)):oy(this,this.S-l)};function no(l){l.j.G==0||l.J||Dy(l.j,l)}function Us(l){Eh(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,fu(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function xh(l,d){try{var m=l.j;if(m.G!=0&&(m.g==l||Th(m.h,l))){if(!l.K&&Th(m.h,l)&&m.G==3){try{var y=m.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var D=y;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Su(m),Iu(m);else break e;Ah(m),jt(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=eo(g(m.Za,m),6e3));if(1>=cy(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else $s(m,11)}else if((l.K||m.g==l)&&Su(m),!_(d))for(D=m.Da.g.parse(d),d=0;d<D.length;d++){let Se=D[d];if(m.T=Se[0],Se=Se[1],m.G==2)if(Se[0]=="c"){m.K=Se[1],m.ia=Se[2];const At=Se[3];At!=null&&(m.la=At,m.j.info("VER="+m.la));const Ct=Se[4];Ct!=null&&(m.Aa=Ct,m.j.info("SVER="+m.Aa));const Ri=Se[5];Ri!=null&&typeof Ri=="number"&&0<Ri&&(y=1.5*Ri,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const kn=l.g;if(kn){const Cu=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cu){var L=y.h;L.g||Cu.indexOf("spdy")==-1&&Cu.indexOf("quic")==-1&&Cu.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Ih(L,L.h),L.h=null))}if(y.D){const bh=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;bh&&(y.ya=bh,Le(y.I,y.D,bh))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var H=l;if(y.qa=My(y,y.J?y.ia:null,y.W),H.K){dy(y.h,H);var De=H,_t=y.L;_t&&(De.I=_t),De.B&&(Eh(De),yu(De)),y.g=H}else Ry(y);0<m.i.length&&ku(m)}else Se[0]!="stop"&&Se[0]!="close"||$s(m,7);else m.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?$s(m,7):Sh(m):Se[0]!="noop"&&m.l&&m.l.ta(Se),m.v=0)}}Ja(4)}catch{}}var hk=class{constructor(l,d){this.g=l,this.map=d}};function ly(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uy(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function cy(l){return l.h?1:l.g?l.g.size:0}function Th(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Ih(l,d){l.g?l.g.add(d):l.h=d}function dy(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}ly.prototype.cancel=function(){if(this.i=hy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function hy(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.D);return d}return C(l.i)}function fk(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var d=[],m=l.length,y=0;y<m;y++)d.push(l[y]);return d}d=[],m=0;for(y in l)d[m++]=l[y];return d}function mk(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var d=[];l=l.length;for(var m=0;m<l;m++)d.push(m);return d}d=[],m=0;for(const y in l)d[m++]=y;return d}}}function fy(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var m=mk(l),y=fk(l),D=y.length,L=0;L<D;L++)d.call(void 0,y[L],m&&m[L],l)}var my=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pk(l,d){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var y=l[m].indexOf("="),D=null;if(0<=y){var L=l[m].substring(0,y);D=l[m].substring(y+1)}else L=l[m];d(L,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Bs(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Bs){this.h=l.h,_u(this,l.j),this.o=l.o,this.g=l.g,vu(this,l.s),this.l=l.l;var d=l.i,m=new io;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),py(this,m),this.m=l.m}else l&&(d=String(l).match(my))?(this.h=!1,_u(this,d[1]||"",!0),this.o=ro(d[2]||""),this.g=ro(d[3]||"",!0),vu(this,d[4]),this.l=ro(d[5]||"",!0),py(this,d[6]||"",!0),this.m=ro(d[7]||"")):(this.h=!1,this.i=new io(null,this.h))}Bs.prototype.toString=function(){var l=[],d=this.j;d&&l.push(so(d,gy,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(so(d,gy,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(so(m,m.charAt(0)=="/"?_k:yk,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",so(m,wk)),l.join("")};function dr(l){return new Bs(l)}function _u(l,d,m){l.j=m?ro(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function vu(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function py(l,d,m){d instanceof io?(l.i=d,Ek(l.i,l.h)):(m||(d=so(d,vk)),l.i=new io(d,l.h))}function Le(l,d,m){l.i.set(d,m)}function wu(l){return Le(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ro(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function so(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,gk),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function gk(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var gy=/[#\/\?@]/g,yk=/[#\?:]/g,_k=/[#\?]/g,vk=/[#\?@]/g,wk=/#/g;function io(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Fr(l){l.g||(l.g=new Map,l.h=0,l.i&&pk(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=io.prototype,t.add=function(l,d){Fr(this),this.i=null,l=bi(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function yy(l,d){Fr(l),d=bi(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function _y(l,d){return Fr(l),d=bi(l,d),l.g.has(d)}t.forEach=function(l,d){Fr(this),this.g.forEach(function(m,y){m.forEach(function(D){l.call(d,D,y,this)},this)},this)},t.na=function(){Fr(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let y=0;y<d.length;y++){const D=l[y];for(let L=0;L<D.length;L++)m.push(d[y])}return m},t.V=function(l){Fr(this);let d=[];if(typeof l=="string")_y(this,l)&&(d=d.concat(this.g.get(bi(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)d=d.concat(l[m])}return d},t.set=function(l,d){return Fr(this),this.i=null,l=bi(this,l),_y(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function vy(l,d,m){yy(l,d),0<m.length&&(l.i=null,l.g.set(bi(l,d),C(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var y=d[m];const L=encodeURIComponent(String(y)),H=this.V(y);for(y=0;y<H.length;y++){var D=L;H[y]!==""&&(D+="="+encodeURIComponent(String(H[y]))),l.push(D)}}return this.i=l.join("&")};function bi(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Ek(l,d){d&&!l.j&&(Fr(l),l.i=null,l.g.forEach(function(m,y){var D=y.toLowerCase();y!=D&&(yy(this,y),vy(this,D,m))},l)),l.j=d}function xk(l,d){const m=new to;if(o.Image){const y=new Image;y.onload=w(Ur,m,"TestLoadImage: loaded",!0,d,y),y.onerror=w(Ur,m,"TestLoadImage: error",!1,d,y),y.onabort=w(Ur,m,"TestLoadImage: abort",!1,d,y),y.ontimeout=w(Ur,m,"TestLoadImage: timeout",!1,d,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else d(!1)}function Tk(l,d){const m=new to,y=new AbortController,D=setTimeout(()=>{y.abort(),Ur(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:y.signal}).then(L=>{clearTimeout(D),L.ok?Ur(m,"TestPingServer: ok",!0,d):Ur(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Ur(m,"TestPingServer: error",!1,d)})}function Ur(l,d,m,y,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),y(m)}catch{}}function Ik(){this.g=new ak}function kk(l,d,m){const y=m||"";try{fy(l,function(D,L){let H=D;c(D)&&(H=Ai(D)),d.push(y+L+"="+encodeURIComponent(H))})}catch(D){throw d.push(y+"type="+encodeURIComponent("_badmap")),D}}function Eu(l){this.l=l.Ub||null,this.j=l.eb||!1}A(Eu,ph),Eu.prototype.g=function(){return new xu(this.l,this.j)},Eu.prototype.i=function(l){return function(){return l}}({});function xu(l,d){_e.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(xu,_e),t=xu.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,oo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||o).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ao(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,oo(this)),this.g&&(this.readyState=3,oo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wy(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function wy(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?ao(this):oo(this),this.readyState==3&&wy(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ao(this))},t.Qa=function(l){this.g&&(this.response=l,ao(this))},t.ga=function(){this.g&&ao(this)};function ao(l){l.readyState=4,l.l=null,l.j=null,l.v=null,oo(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function oo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ey(l){let d="";return $(l,function(m,y){d+=y,d+=":",d+=m,d+=`\r
`}),d}function kh(l,d,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=Ey(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Le(l,d,m))}function Ze(l){_e.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ze,_e);var Sk=/^https?$/i,Ak=["POST","PUT"];t=Ze.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_h.g(),this.v=this.o?Yg(this.o):Yg(_h),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(L){xy(this,L);return}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var D in y)m.set(D,y[D]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const L of y.keys())m.set(L,y.get(L));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),D=o.FormData&&l instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Ak,d,void 0))||y||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,H]of m)this.g.setRequestHeader(L,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ky(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){xy(this,L)}};function xy(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Ty(l),Tu(l)}function Ty(l){l.A||(l.A=!0,we(l,"complete"),we(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,we(this,"complete"),we(this,"abort"),Tu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tu(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Iy(this):this.bb())},t.bb=function(){Iy(this)};function Iy(l){if(l.h&&typeof a<"u"&&(!l.v[1]||hr(l)!=4||l.Z()!=2)){if(l.u&&hr(l)==4)hu(l.Ea,0,l);else if(we(l,"readystatechange"),hr(l)==4){l.h=!1;try{const H=l.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var y;if(y=H===0){var D=String(l.D).match(my)[1]||null;!D&&o.self&&o.self.location&&(D=o.self.location.protocol.slice(0,-1)),y=!Sk.test(D?D.toLowerCase():"")}m=y}if(m)we(l,"complete"),we(l,"success");else{l.m=6;try{var L=2<hr(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",Ty(l)}}finally{Tu(l)}}}}function Tu(l,d){if(l.g){ky(l);const m=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||we(l,"ready");try{m.onreadystatechange=y}catch{}}}function ky(l){l.I&&(o.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function hr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),ik(d)}};function Sy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ck(l){const d={};l=(l.g&&2<=hr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(_(l[y]))continue;var m=R(l[y]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=d[D]||[];d[D]=L,L.push(m)}k(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function Ay(l){this.Aa=0,this.i=[],this.j=new to,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lo("baseRetryDelayMs",5e3,l),this.cb=lo("retryDelaySeedMs",1e4,l),this.Wa=lo("forwardChannelMaxRetries",2,l),this.wa=lo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ly(l&&l.concurrentRequestLimit),this.Da=new Ik,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ay.prototype,t.la=8,t.G=1,t.connect=function(l,d,m,y){jt(0),this.W=l,this.H=d||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=My(this,null,this.W),ku(this)};function Sh(l){if(Cy(l),l.G==3){var d=l.U++,m=dr(l.I);if(Le(m,"SID",l.K),Le(m,"RID",d),Le(m,"TYPE","terminate"),uo(l,m),d=new jr(l,l.j,d),d.L=2,d.v=wu(dr(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&o.Image&&(new Image().src=d.v,m=!0),m||(d.g=Ly(d.j,null),d.g.ea(d.v)),d.F=Date.now(),yu(d)}Vy(l)}function Iu(l){l.g&&(Ch(l),l.g.cancel(),l.g=null)}function Cy(l){Iu(l),l.u&&(o.clearTimeout(l.u),l.u=null),Su(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&o.clearTimeout(l.s),l.s=null)}function ku(l){if(!uy(l.h)&&!l.s){l.s=!0;var d=l.Ga;Ye||de(),G||(Ye(),G=!0),ie.add(d,l),l.B=0}}function bk(l,d){return cy(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=eo(g(l.Ga,l,d),Oy(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new jr(this,this.j,l);let L=this.o;if(this.S&&(L?(L=v(L),S(L,this.S)):L=this.S),this.m!==null||this.O||(D.H=L,L=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Py(this,D,d),m=dr(this.I),Le(m,"RID",l),Le(m,"CVER",22),this.D&&Le(m,"X-HTTP-Session-Id",this.D),uo(this,m),L&&(this.O?d="headers="+encodeURIComponent(String(Ey(L)))+"&"+d:this.m&&kh(m,this.m,L)),Ih(this.h,D),this.Ua&&Le(m,"TYPE","init"),this.P?(Le(m,"$req",d),Le(m,"SID","null"),D.T=!0,wh(D,m,null)):wh(D,m,d),this.G=2}}else this.G==3&&(l?by(this,l):this.i.length==0||uy(this.h)||by(this))};function by(l,d){var m;d?m=d.l:m=l.U++;const y=dr(l.I);Le(y,"SID",l.K),Le(y,"RID",m),Le(y,"AID",l.T),uo(l,y),l.m&&l.o&&kh(y,l.m,l.o),m=new jr(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Py(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ih(l.h,m),wh(m,y,d)}function uo(l,d){l.H&&$(l.H,function(m,y){Le(d,y,m)}),l.l&&fy({},function(m,y){Le(d,y,m)})}function Py(l,d,m){m=Math.min(l.i.length,m);var y=l.l?g(l.l.Na,l.l,l):null;e:{var D=l.i;let L=-1;for(;;){const H=["count="+m];L==-1?0<m?(L=D[0].g,H.push("ofs="+L)):L=0:H.push("ofs="+L);let De=!0;for(let _t=0;_t<m;_t++){let Se=D[_t].g;const At=D[_t].map;if(Se-=L,0>Se)L=Math.max(0,D[_t].g-100),De=!1;else try{kk(At,H,"req"+Se+"_")}catch{y&&y(At)}}if(De){y=H.join("&");break e}}}return l=l.i.splice(0,m),d.D=l,y}function Ry(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Ye||de(),G||(Ye(),G=!0),ie.add(d,l),l.v=0}}function Ah(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=eo(g(l.Fa,l),Oy(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Ny(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=eo(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Iu(this),Ny(this))};function Ch(l){l.A!=null&&(o.clearTimeout(l.A),l.A=null)}function Ny(l){l.g=new jr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=dr(l.qa);Le(d,"RID","rpc"),Le(d,"SID",l.K),Le(d,"AID",l.T),Le(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Le(d,"TO",l.ja),Le(d,"TYPE","xmlhttp"),uo(l,d),l.m&&l.o&&kh(d,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=wu(dr(d)),m.m=null,m.P=!0,iy(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Iu(this),Ah(this),jt(19))};function Su(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Dy(l,d){var m=null;if(l.g==d){Su(l),Ch(l),l.g=null;var y=2}else if(Th(l.h,d))m=d.D,dy(l.h,d),y=1;else return;if(l.G!=0){if(d.o)if(y==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var D=l.B;y=mu(),we(y,new ty(y,m)),ku(l)}else Ry(l);else if(D=d.s,D==3||D==0&&0<d.X||!(y==1&&bk(l,d)||y==2&&Ah(l)))switch(m&&0<m.length&&(d=l.h,d.i=d.i.concat(m)),D){case 1:$s(l,5);break;case 4:$s(l,10);break;case 3:$s(l,6);break;default:$s(l,2)}}}function Oy(l,d){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*d}function $s(l,d){if(l.j.info("Error code "+d),d==2){var m=g(l.fb,l),y=l.Xa;const D=!y;y=new Bs(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||_u(y,"https"),wu(y),D?xk(y.toString(),m):Tk(y.toString(),m)}else jt(2);l.G=0,l.l&&l.l.sa(d),Vy(l),Cy(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Vy(l){if(l.G=0,l.ka=[],l.l){const d=hy(l.h);(d.length!=0||l.i.length!=0)&&(N(l.ka,d),N(l.ka,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.ra()}}function My(l,d,m){var y=m instanceof Bs?dr(m):new Bs(m);if(y.g!="")d&&(y.g=d+"."+y.g),vu(y,y.s);else{var D=o.location;y=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var L=new Bs(null);y&&_u(L,y),d&&(L.g=d),D&&vu(L,D),m&&(L.l=m),y=L}return m=l.D,d=l.ya,m&&d&&Le(y,m,d),Le(y,"VER",l.la),uo(l,y),y}function Ly(l,d,m){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Ze(new Eu({eb:m})):new Ze(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jy(){}t=jy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Au(){}Au.prototype.g=function(l,d){return new tn(l,d)};function tn(l,d){_e.call(this),this.g=new Ay(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!_(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Pi(this)}A(tn,_e),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Sh(this.g)},tn.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Ai(l),l=m);d.i.push(new hk(d.Ya++,l)),d.G==3&&ku(d)},tn.prototype.N=function(){this.g.l=null,delete this.j,Sh(this.g),delete this.g,tn.aa.N.call(this)};function Fy(l){gh.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}A(Fy,gh);function Uy(){yh.call(this),this.status=1}A(Uy,yh);function Pi(l){this.g=l}A(Pi,jy),Pi.prototype.ua=function(){we(this.g,"a")},Pi.prototype.ta=function(l){we(this.g,new Fy(l))},Pi.prototype.sa=function(l){we(this.g,new Uy)},Pi.prototype.ra=function(){we(this.g,"b")},Au.prototype.createWebChannel=Au.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,hT=function(){return new Au},dT=function(){return mu()},cT=Fs,Tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pu.NO_ERROR=0,pu.TIMEOUT=8,pu.HTTP_ERROR=6,mc=pu,ny.COMPLETE="complete",uT=ny,Zg.EventType=Xa,Xa.OPEN="a",Xa.CLOSE="b",Xa.ERROR="c",Xa.MESSAGE="d",_e.prototype.listen=_e.prototype.K,Co=Zg,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,lT=Ze}).apply(typeof Ku<"u"?Ku:typeof self<"u"?self:typeof window<"u"?window:{});const Mv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $a="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new Wp("@firebase/firestore");function vo(){return di.logLevel}function te(t,...e){if(di.logLevel<=ve.DEBUG){const n=e.map(ng);di.debug(`Firestore (${$a}): ${t}`,...n)}}function Dr(t,...e){if(di.logLevel<=ve.ERROR){const n=e.map(ng);di.error(`Firestore (${$a}): ${t}`,...n)}}function va(t,...e){if(di.logLevel<=ve.WARN){const n=e.map(ng);di.warn(`Firestore (${$a}): ${t}`,...n)}}function ng(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${$a}) INTERNAL ASSERTION FAILED: `+t;throw Dr(e),new Error(e)}function Ie(t,e){t||ae()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class dN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hN{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new nr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new nr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},o=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>o(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?o(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new nr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new fT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Nt(e)}}class fN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new fN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,te("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new pN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=yN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function wa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return be.fromMillis(Date.now())}static fromDate(e){return be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new be(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new be(0,0))}static max(){return new le(new be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends yl{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const _N=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends yl{construct(e,n,r){return new Et(e,n,r)}static isValidIdentifier(e){return _N.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(r+=o,s++):(i(),s++)}if(i(),a)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Oe.fromString(e))}static fromName(e){return new se(Oe.fromString(e).popFirst(5))}static empty(){return new se(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Oe(e.slice()))}}function vN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new be(n+1,0):new be(n,r));return new Es(s,se.empty(),e)}function wN(t){return new Es(t.readTime,t.key,-1)}class Es{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Es(le.min(),se.empty(),-1)}static max(){return new Es(le.max(),se.empty(),-1)}}function EN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==xN)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,a=new Array(i);let o=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{a[c]=h,++o,o===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function IN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}rg.oe=-1;function Zl(t){return t==null}function nd(t){return t===0&&1/t==-1/0}function kN(t){return typeof t=="number"&&Number.isInteger(t)&&!nd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ei(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??wt.RED,this.left=s??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new wt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,s,i){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jv(this.data.getIterator())}getIteratorFrom(e){return new jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new sn([])}unionWith(e){let n=new Tt(Et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new gT("Invalid base64 string: "+i):i}}(e);return new kt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const SN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=SN.exec(t);if(Ie(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hi(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ig(t){const e=t.mapValue.fields.__previous_value__;return sg(e)?ig(e):e}function _l(t){const e=xs(t.mapValue.fields.__local_write_time__.timestampValue);return new be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,r,s,i,a,o,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=u,this.useFetchStreams=c}}class vl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new vl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sg(t)?4:bN(t)?9007199254740991:CN(t)?10:11:ae()}function ir(t,e){if(t===e)return!0;const n=fi(t);if(n!==fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _l(t).isEqual(_l(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=xs(s.timestampValue),o=xs(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return hi(s.bytesValue).isEqual(hi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return et(s.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(s.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return et(s.integerValue)===et(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=et(s.doubleValue),o=et(i.doubleValue);return a===o?nd(a)===nd(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return wa(t.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(Lv(a)!==Lv(o))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(o[u]===void 0||!ir(a[u],o[u])))return!1;return!0}(t,e);default:return ae()}}function wl(t,e){return(t.values||[]).find(n=>ir(n,e))!==void 0}function Ea(t,e){if(t===e)return 0;const n=fi(t),r=fi(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=et(i.integerValue||i.doubleValue),u=et(a.integerValue||a.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(t,e);case 3:return Fv(t.timestampValue,e.timestampValue);case 4:return Fv(_l(t),_l(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(i,a){const o=hi(i),u=hi(a);return o.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),u=a.split("/");for(let c=0;c<o.length&&c<u.length;c++){const h=Ae(o[c],u[c]);if(h!==0)return h}return Ae(o.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=Ae(et(i.latitude),et(a.latitude));return o!==0?o:Ae(et(i.longitude),et(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Uv(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,u,c,h;const p=i.fields||{},g=a.fields||{},w=(o=p.value)===null||o===void 0?void 0:o.arrayValue,A=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=Ae(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0);return C!==0?C:Uv(w,A)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Qu.mapValue&&a===Qu.mapValue)return 0;if(i===Qu.mapValue)return 1;if(a===Qu.mapValue)return-1;const o=i.fields||{},u=Object.keys(o),c=a.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=Ae(u[p],h[p]);if(g!==0)return g;const w=Ea(o[u[p]],c[h[p]]);if(w!==0)return w}return Ae(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Fv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=xs(t),r=xs(e),s=Ae(n.seconds,r.seconds);return s!==0?s:Ae(n.nanos,r.nanos)}function Uv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ea(n[s],r[s]);if(i)return i}return Ae(n.length,r.length)}function xa(t){return Im(t)}function Im(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Im(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Im(n.fields[a])}`;return s+"}"}(t.mapValue):ae()}function Bv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function km(t){return!!t&&"integerValue"in t}function ag(t){return!!t&&"arrayValue"in t}function $v(t){return!!t&&"nullValue"in t}function zv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pc(t){return!!t&&"mapValue"in t}function CN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function zo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ei(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.value=e}static empty(){return new $t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zo(n)}setAll(e){let n=Et.emptyPath(),r={},s=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=o.popLast()}a?r[o.lastSegment()]=zo(a):s.push(o.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());pc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ei(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new $t(zo(this.value))}}function yT(t){const e=[];return Ei(t.fields,(n,r)=>{const s=new Et([n]);if(pc(r)){const i=yT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,s,i,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new pt(e,0,le.min(),le.min(),le.min(),$t.empty(),0)}static newFoundDocument(e,n,r,s){return new pt(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new pt(e,2,n,le.min(),le.min(),$t.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,le.min(),le.min(),$t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n){this.position=e,this.inclusive=n}}function Wv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=se.comparator(se.fromName(a.referenceValue),n.key):r=Ea(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function qv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ir(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n="asc"){this.field=e,this.dir=n}}function PN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{}class ot extends _T{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new NN(e,n,r):n==="array-contains"?new VN(e,r):n==="in"?new MN(e,r):n==="not-in"?new LN(e,r):n==="array-contains-any"?new jN(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DN(e,r):new ON(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ea(n,this.value)):n!==null&&fi(this.value)===fi(n)&&this.matchesComparison(Ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends _T{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Fn(e,n)}matches(e){return vT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vT(t){return t.op==="and"}function wT(t){return RN(t)&&vT(t)}function RN(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function Sm(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+xa(t.value);if(wT(t))return t.filters.map(e=>Sm(e)).join(",");{const e=t.filters.map(n=>Sm(n)).join(",");return`${t.op}(${e})`}}function ET(t,e){return t instanceof ot?function(r,s){return s instanceof ot&&r.op===s.op&&r.field.isEqual(s.field)&&ir(r.value,s.value)}(t,e):t instanceof Fn?function(r,s){return s instanceof Fn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,o)=>i&&ET(a,s.filters[o]),!0):!1}(t,e):void ae()}function xT(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${xa(n.value)}`}(t):t instanceof Fn?function(n){return n.op.toString()+" {"+n.getFilters().map(xT).join(" ,")+"}"}(t):"Filter"}class NN extends ot{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class DN extends ot{constructor(e,n){super(e,"in",n),this.keys=TT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ON extends ot{constructor(e,n){super(e,"not-in",n),this.keys=TT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function TT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class VN extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ag(n)&&wl(n.arrayValue,this.value)}}class MN extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wl(this.value.arrayValue,n)}}class LN extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wl(this.value.arrayValue,n)}}class jN extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ag(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n=null,r=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function Hv(t,e=null,n=[],r=[],s=null,i=null,a=null){return new FN(t,e,n,r,s,i,a)}function og(t){const e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Zl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xa(r)).join(",")),e.ue=n}return e.ue}function lg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ET(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qv(t.startAt,e.startAt)&&qv(t.endAt,e.endAt)}function Am(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n=null,r=[],s=[],i=null,a="F",o=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function UN(t,e,n,r,s,i,a,o){return new Xl(t,e,n,r,s,i,a,o)}function ug(t){return new Xl(t)}function Kv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function IT(t){return t.collectionGroup!==null}function Wo(t){const e=he(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Tt(Et.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new sd(i,r))}),n.has(Et.keyField().canonicalString())||e.ce.push(new sd(Et.keyField(),r))}return e.ce}function rr(t){const e=he(t);return e.le||(e.le=BN(e,Wo(t))),e.le}function BN(t,e){if(t.limitType==="F")return Hv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new sd(s.field,i)});const n=t.endAt?new rd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rd(t.startAt.position,t.startAt.inclusive):null;return Hv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cm(t,e){const n=t.filters.concat([e]);return new Xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bm(t,e,n){return new Xl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qd(t,e){return lg(rr(t),rr(e))&&t.limitType===e.limitType}function kT(t){return`${og(rr(t))}|lt:${t.limitType}`}function Vi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>xT(s)).join(", ")}]`),Zl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>xa(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>xa(s)).join(",")),`Target(${r})`}(rr(t))}; limitType=${t.limitType})`}function Yd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Wo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,o,u){const c=Wv(a,o,u);return a.inclusive?c<=0:c<0}(r.startAt,Wo(r),s)||r.endAt&&!function(a,o,u){const c=Wv(a,o,u);return a.inclusive?c>=0:c>0}(r.endAt,Wo(r),s))}(t,e)}function $N(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ST(t){return(e,n)=>{let r=!1;for(const s of Wo(t)){const i=zN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zN(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(i,a,o){const u=a.data.field(i),c=o.data.field(i);return u!==null&&c!==null?Ea(u,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return pT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new Qe(se.comparator);function Or(){return WN}const AT=new Qe(se.comparator);function bo(...t){let e=AT;for(const n of t)e=e.insert(n.key,n);return e}function CT(t){let e=AT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zs(){return qo()}function bT(){return qo()}function qo(){return new za(t=>t.toString(),(t,e)=>t.isEqual(e))}const qN=new Qe(se.comparator),HN=new Tt(se.comparator);function ye(...t){let e=HN;for(const n of t)e=e.add(n);return e}const KN=new Tt(Ae);function GN(){return KN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nd(e)?"-0":e}}function PT(t){return{integerValue:""+t}}function QN(t,e){return kN(e)?PT(e):cg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(){this._=void 0}}function YN(t,e,n){return t instanceof id?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&sg(i)&&(i=ig(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof El?NT(t,e):t instanceof xl?DT(t,e):function(s,i){const a=RT(s,i),o=Gv(a)+Gv(s.Pe);return km(a)&&km(s.Pe)?PT(o):cg(s.serializer,o)}(t,e)}function ZN(t,e,n){return t instanceof El?NT(t,e):t instanceof xl?DT(t,e):n}function RT(t,e){return t instanceof ad?function(r){return km(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class id extends Zd{}class El extends Zd{constructor(e){super(),this.elements=e}}function NT(t,e){const n=OT(e);for(const r of t.elements)n.some(s=>ir(s,r))||n.push(r);return{arrayValue:{values:n}}}class xl extends Zd{constructor(e){super(),this.elements=e}}function DT(t,e){let n=OT(e);for(const r of t.elements)n=n.filter(s=>!ir(s,r));return{arrayValue:{values:n}}}class ad extends Zd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Gv(t){return et(t.integerValue||t.doubleValue)}function OT(t){return ag(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function XN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof El&&s instanceof El||r instanceof xl&&s instanceof xl?wa(r.elements,s.elements,ir):r instanceof ad&&s instanceof ad?ir(r.Pe,s.Pe):r instanceof id&&s instanceof id}(t.transform,e.transform)}class JN{constructor(e,n){this.version=e,this.transformResults=n}}class lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lt}static exists(e){return new lt(void 0,e)}static updateTime(e){return new lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xd{}function VT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new eu(t.key,lt.none()):new Jl(t.key,t.data,lt.none());{const n=t.data,r=$t.empty();let s=new Tt(Et.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Ms(t.key,r,new sn(s.toArray()),lt.none())}}function eD(t,e,n){t instanceof Jl?function(s,i,a){const o=s.value.clone(),u=Yv(s.fieldTransforms,i,a.transformResults);o.setAll(u),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ms?function(s,i,a){if(!gc(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=Yv(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(MT(s)),u.setAll(o),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ho(t,e,n,r){return t instanceof Jl?function(i,a,o,u){if(!gc(i.precondition,a))return o;const c=i.value.clone(),h=Zv(i.fieldTransforms,u,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ms?function(i,a,o,u){if(!gc(i.precondition,a))return o;const c=Zv(i.fieldTransforms,u,a),h=a.data;return h.setAll(MT(i)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,a,o){return gc(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function tD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=RT(r.transform,s||null);i!=null&&(n===null&&(n=$t.empty()),n.set(r.field,i))}return n||null}function Qv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&wa(r,s,(i,a)=>XN(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Jl extends Xd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ms extends Xd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function MT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Yv(t,e,n){const r=new Map;Ie(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);r.set(i.field,ZN(a,o,n[s]))}return r}function Zv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,YN(i,a,e))}return r}class eu extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LT extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&eD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ho(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ho(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bT();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(s.key)?null:o;const u=VT(a,o);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&wa(this.mutations,e.mutations,(n,r)=>Qv(n,r))&&wa(this.baseMutations,e.baseMutations,(n,r)=>Qv(n,r))}}class dg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length);let s=function(){return qN}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new dg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Ee;function jT(t){switch(t){default:return ae();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function FT(t){if(t===void 0)return Dr("GRPC error has no .code"),F.UNKNOWN;switch(t){case st.OK:return F.OK;case st.CANCELLED:return F.CANCELLED;case st.UNKNOWN:return F.UNKNOWN;case st.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case st.INTERNAL:return F.INTERNAL;case st.UNAVAILABLE:return F.UNAVAILABLE;case st.UNAUTHENTICATED:return F.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case st.NOT_FOUND:return F.NOT_FOUND;case st.ALREADY_EXISTS:return F.ALREADY_EXISTS;case st.PERMISSION_DENIED:return F.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case st.ABORTED:return F.ABORTED;case st.OUT_OF_RANGE:return F.OUT_OF_RANGE;case st.UNIMPLEMENTED:return F.UNIMPLEMENTED;case st.DATA_LOSS:return F.DATA_LOSS;default:return ae()}}(Ee=st||(st={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=new ti([4294967295,4294967295],0);function Xv(t){const e=iD().encode(t),n=new oT;return n.update(e),new Uint8Array(n.digest())}function Jv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ti([n,r],0),new ti([s,i],0)]}class hg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Po(`Invalid padding: ${n}`);if(r<0)throw new Po(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Po(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Po(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ti.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ti.fromNumber(r)));return s.compare(aD)===1&&(s=new ti([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Xv(e),[r,s]=Jv(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new hg(i,s,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const n=Xv(e),[r,s]=Jv(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Po extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Jd(le.min(),s,new Qe(Ae),Or(),ye())}}class tu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tu(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class UT{constructor(e,n){this.targetId=e,this.me=n}}class BT{constructor(e,n,r=kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ew{constructor(){this.fe=0,this.ge=nw(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ae()}}),new tu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=nw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oD{constructor(e){this.Le=e,this.Be=new Map,this.ke=Or(),this.qe=tw(),this.Qe=new Qe(Ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Am(i))if(r===0){const a=new se(i.path);this.Ue(n,a,pt.newNoDocument(a,le.min()))}else Ie(r===1);else{const a=this.Ye(n);if(a!==r){const o=this.Ze(e),u=o?this.Xe(o,e,a):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,o;try{a=hi(r).toUint8Array()}catch(u){if(u instanceof gT)return va("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{o=new hg(a,s,i)}catch(u){return va(u instanceof Po?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Am(o.target)){const u=new se(o.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,pt.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ye();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Jd(e,n,this.Qe,this.ke,r);return this.ke=Or(),this.qe=tw(),this.Qe=new Qe(Ae),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ew,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Tt(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ew),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function tw(){return new Qe(se.comparator)}function nw(){return new Qe(se.comparator)}const lD={asc:"ASCENDING",desc:"DESCENDING"},uD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cD={and:"AND",or:"OR"};class dD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pm(t,e){return t.useProto3Json||Zl(e)?e:{value:e}}function od(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $T(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hD(t,e){return od(t,e.toTimestamp())}function on(t){return Ie(!!t),le.fromTimestamp(function(n){const r=xs(n);return new be(r.seconds,r.nanos)}(t))}function fg(t,e){return Rm(t,e).canonicalString()}function Rm(t,e){const n=function(s){return new Oe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zT(t){const e=Oe.fromString(t);return Ie(QT(e)),e}function ld(t,e){return fg(t.databaseId,e.path)}function Ko(t,e){const n=zT(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(qT(n))}function WT(t,e){return fg(t.databaseId,e)}function fD(t){const e=zT(t);return e.length===4?Oe.emptyPath():qT(e)}function Nm(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qT(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rw(t,e,n){return{name:ld(t,e),fields:n.value.mapValue.fields}}function mD(t,e){return"found"in e?function(r,s){Ie(!!s.found),s.found.name,s.found.updateTime;const i=Ko(r,s.found.name),a=on(s.found.updateTime),o=s.found.createTime?on(s.found.createTime):le.min(),u=new $t({mapValue:{fields:s.found.fields}});return pt.newFoundDocument(i,a,o,u)}(t,e):"missing"in e?function(r,s){Ie(!!s.missing),Ie(!!s.readTime);const i=Ko(r,s.missing),a=on(s.readTime);return pt.newNoDocument(i,a)}(t,e):ae()}function pD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(Ie(h===void 0||typeof h=="string"),kt.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array),kt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const h=c.code===void 0?F.UNKNOWN:FT(c.code);return new Z(h,c.message||"")}(a);n=new BT(r,s,i,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ko(t,r.document.name),i=on(r.document.updateTime),a=r.document.createTime?on(r.document.createTime):le.min(),o=new $t({mapValue:{fields:r.document.fields}}),u=pt.newFoundDocument(s,i,a,o),c=r.targetIds||[],h=r.removedTargetIds||[];n=new yc(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ko(t,r.document),i=r.readTime?on(r.readTime):le.min(),a=pt.newNoDocument(s,i),o=r.removedTargetIds||[];n=new yc([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ko(t,r.document),i=r.removedTargetIds||[];n=new yc([],i,s,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new sD(s,i),o=r.targetId;n=new UT(o,a)}}return n}function HT(t,e){let n;if(e instanceof Jl)n={update:rw(t,e.key,e.value)};else if(e instanceof eu)n={delete:ld(t,e.key)};else if(e instanceof Ms)n={update:rw(t,e.key,e.data),updateMask:ID(e.fieldMask)};else{if(!(e instanceof LT))return ae();n={verify:ld(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const o=a.transform;if(o instanceof id)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof El)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof xl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ad)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:hD(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae()}(t,e.precondition)),n}function gD(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?on(s.updateTime):on(i);return a.isEqual(le.min())&&(a=on(i)),new JN(a,s.transformResults||[])}(n,e))):[]}function yD(t,e){return{documents:[WT(t,e.path)]}}function _D(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WT(t,s);const i=function(c){if(c.length!==0)return GT(Fn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:Mi(g.field),direction:ED(g.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Pm(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function vD(t){let e=fD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const g=KT(p);return g instanceof Fn&&wT(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(A){return new sd(Li(A.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let o=null;n.limit&&(o=function(p){let g;return g=typeof p=="object"?p.value:p,Zl(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new rd(w,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,w=p.values||[];return new rd(w,g)}(n.endAt)),UN(e,s,a,i,o,"F",u,c)}function wD(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Li(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Li(n.unaryFilter.field);return ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Li(n.unaryFilter.field);return ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Li(n.unaryFilter.field);return ot.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return ot.create(Li(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fn.create(n.compositeFilter.filters.map(r=>KT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function ED(t){return lD[t]}function xD(t){return uD[t]}function TD(t){return cD[t]}function Mi(t){return{fieldPath:t.canonicalString()}}function Li(t){return Et.fromServerFormat(t.fieldPath)}function GT(t){return t instanceof ot?function(n){if(n.op==="=="){if(zv(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NAN"}};if($v(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zv(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NOT_NAN"}};if($v(n.value))return{unaryFilter:{field:Mi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mi(n.field),op:xD(n.op),value:n.value}}}(t):t instanceof Fn?function(n){const r=n.getFilters().map(s=>GT(s));return r.length===1?r[0]:{compositeFilter:{op:TD(n.op),filters:r}}}(t):ae()}function ID(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r,s,i=le.min(),a=le.min(),o=kt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=u}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.ct=e}}function SD(t){const e=vD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this.un=new CD}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Es.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class CD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Tt(Oe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Tt(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ta(0)}static kn(){return new Ta(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.changes=new za(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ho(r.mutation,s,sn.empty(),be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const s=Zs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=bo();return i.forEach((o,u)=>{a=a.insert(o,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,s){let i=Or();const a=qo(),o=function(){return qo()}();return n.forEach((u,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Ms)?i=i.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),Ho(h.mutation,c,h.mutation.getFieldMask(),be.now())):a.set(c.key,sn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>a.set(c,h)),n.forEach((c,h)=>{var p;return o.set(c,new PD(h,(p=a.get(c))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,n){const r=qo();let s=new Qe((a,o)=>a-o),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||sn.empty();h=o.applyToLocalView(c,h),r.set(u,h);const p=(s.get(o.batchId)||ye()).add(u);s=s.insert(o.batchId,p)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const u=o.getNext(),c=u.key,h=u.value,p=bT();h.forEach(g=>{if(!i.has(g)){const w=VT(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,p))}return B.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return se.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):IT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(Zs());let o=-1,u=i;return a.next(c=>B.forEach(c,(h,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,ye())).next(h=>({batchId:o,changes:CT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let s=bo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=bo();return this.indexManager.getCollectionParents(e,i).next(o=>B.forEach(o,u=>{const c=function(p,g){return new Xl(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,pt.newInvalidDocument(h)))});let o=bo();return a.forEach((u,c)=>{const h=i.get(u);h!==void 0&&Ho(h.mutation,c,sn.empty(),be.now()),Yd(n,c)&&(o=o.insert(u,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:on(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:SD(s.bundledQuery),readTime:on(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.overlays=new Qe(se.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zs();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=Zs(),i=n.length+1,a=new se(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const u=o.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Qe((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Zs(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=Zs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=s)););return B.resolve(o)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new rD(n,r));let i=this.Ir.get(n);i===void 0&&(i=ye(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.Tr=new Tt(ft.Er),this.dr=new Tt(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new Oe([])),r=new ft(n,e),s=new ft(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Oe([])),r=new ft(n,e),s=new ft(n,e+1);let i=ye();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Ae(e.wr,n.wr)}static Ar(e,n){return Ae(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Tt(ft.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new nD(i,n,r,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new ft(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const o=this.Dr(a.wr);i.push(o)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(Ae);return n.forEach(s=>{const i=new ft(s,0),a=new ft(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{r=r.add(o.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;se.isDocumentKey(i)||(i=i.child(""));const a=new ft(new se(i),0);let o=new Tt(Ae);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(u.wr)),!0)},a),B.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,s=>{const i=new ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ft(n,0),s=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.Mr=e,this.docs=function(){return new Qe(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=Or();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():pt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Or();const a=n.path,o=new se(a.child("")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||EN(wN(h),r)<=0||(s.has(h.key)||Yd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ae()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LD(this)}getSize(e){return B.resolve(this.size)}}class LD extends bD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.persistence=e,this.Nr=new za(n=>og(n),lg),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mg,this.targetCount=0,this.kr=Ta.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ta(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new rg(0),this.Kr=!1,this.Kr=!0,this.$r=new OD,this.referenceDelegate=e(this),this.Ur=new jD(this),this.indexManager=new AD,this.remoteDocumentCache=function(s){return new MD(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new kD(n),this.Gr=new ND(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new VD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const s=new UD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class UD extends TN{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Jr=new mg,this.Yr=null}static Zr(e){return new pg(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const s=se.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ye(),s=ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new gg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return DC()?8:IN(Mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new BD;return this.Xi(e,n,a).next(o=>{if(i.result=o,this.zi)return this.es(e,n,a,o.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(vo()<=ve.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Vi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(vo()<=ve.DEBUG&&te("QueryEngine","Query:",Vi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(vo()<=ve.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Vi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(n))):B.resolve())}Yi(e,n){if(Kv(n))return B.resolve(null);let r=rr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=bm(n,null,"F"),r=rr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ye(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,o);return this.ns(n,c,a,u.readTime)?this.Yi(e,bm(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,s){return Kv(n)||s.isEqual(le.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?B.resolve(null):(vo()<=ve.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vi(n)),this.rs(e,a,n,vN(s,-1)).next(o=>o))})}ts(e,n){let r=new Tt(ST(e));return n.forEach((s,i)=>{Yd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return vo()<=ve.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Vi(n)),this.Ji.getDocumentsMatchingQuery(e,n,Es.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Qe(Ae),this._s=new za(i=>og(i),lg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function WD(t,e,n,r){return new zD(t,e,n,r)}async function YT(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],o=[];let u=ye();for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function qD(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,u,c,h){const p=c.batch,g=p.keys();let w=B.resolve();return g.forEach(A=>{w=w.next(()=>h.getEntry(u,A)).next(C=>{const N=c.docVersions.get(A);Ie(N!==null),C.version.compareTo(N)<0&&(p.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),h.addEntry(C)))})}),w.next(()=>o.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let u=ye();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(u=u.add(o.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ZT(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function HD(t,e){const n=he(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const o=[];e.targetChanges.forEach((h,p)=>{const g=s.get(p);if(!g)return;o.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(kt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),s=s.insert(p,w),function(C,N,T){return C.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,w,h)&&o.push(n.Ur.updateTargetData(i,w))});let u=Or(),c=ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),o.push(KD(i,a,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(le.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));o.push(h)}return B.waitFor(o).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.os=s,i))}function KD(t,e,n){let r=ye(),s=ye();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Or();return n.forEach((o,u)=>{const c=i.get(o);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(o,u.readTime),a=a.insert(o,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(o,u)):te("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function GD(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function QD(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new ss(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Dm(t,e,n){const r=he(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Yl(a))throw a;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function sw(t,e,n){const r=he(t);let s=le.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,h){const p=he(u),g=p._s.get(h);return g!==void 0?B.resolve(p.os.get(g)):p.Ur.getTargetData(c,h)}(r,a,rr(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:le.min(),n?i:ye())).next(o=>(YD(r,$N(e),o),{documents:o,Ts:i})))}function YD(t,e,n){let r=t.us.get(e)||le.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class iw{constructor(){this.activeTargetIds=GN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZD{constructor(){this.so=new iw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new iw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function df(){return Yu===null?Yu=function(){return 268435456+Math.round(2147483648*Math.random())}():Yu++,"0x"+Yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class tO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const o=df(),u=this.xo(n,r.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${o}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(n,u,c,s).then(h=>(te("RestConnection",`Received RPC '${n}' ${o}: `,h),h),h=>{throw va("RestConnection",`RPC '${n}' ${o} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(n,r,s,i,a,o){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$a}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=JD[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=df();return new Promise((a,o)=>{const u=new lT;u.setWithCredentials(!0),u.listenOnce(uT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case mc.NO_ERROR:const h=u.getResponseJson();te(Rt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),a(h);break;case mc.TIMEOUT:te(Rt,`RPC '${e}' ${i} timed out`),o(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const p=u.getStatus();if(te(Rt,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const A=function(N){const T=N.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(T)>=0?T:F.UNKNOWN}(w.status);o(new Z(A,w.message))}else o(new Z(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Z(F.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{te(Rt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);te(Rt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=df(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hT(),o=dT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");te(Rt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const p=a.createWebChannel(h,u);let g=!1,w=!1;const A=new eO({Io:N=>{w?te(Rt,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(g||(te(Rt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),te(Rt,`RPC '${e}' stream ${s} sending:`,N),p.send(N))},To:()=>p.close()}),C=(N,T,_)=>{N.listen(T,E=>{try{_(E)}catch(O){setTimeout(()=>{throw O},0)}})};return C(p,Co.EventType.OPEN,()=>{w||(te(Rt,`RPC '${e}' stream ${s} transport opened.`),A.yo())}),C(p,Co.EventType.CLOSE,()=>{w||(w=!0,te(Rt,`RPC '${e}' stream ${s} transport closed`),A.So())}),C(p,Co.EventType.ERROR,N=>{w||(w=!0,va(Rt,`RPC '${e}' stream ${s} transport errored:`,N),A.So(new Z(F.UNAVAILABLE,"The operation could not be completed")))}),C(p,Co.EventType.MESSAGE,N=>{var T;if(!w){const _=N.data[0];Ie(!!_);const E=_,O=E.error||((T=E[0])===null||T===void 0?void 0:T.error);if(O){te(Rt,`RPC '${e}' stream ${s} received error:`,O);const U=O.status;let $=function(I){const S=st[I];if(S!==void 0)return FT(S)}(U),k=O.message;$===void 0&&($=F.INTERNAL,k="Unknown error status: "+U+" with message "+O.message),w=!0,A.So(new Z($,k)),p.close()}else te(Rt,`RPC '${e}' stream ${s} received:`,_),A.bo(_)}}),C(o,cT.STAT_EVENT,N=>{N.stat===Tm.PROXY?te(Rt,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Tm.NOPROXY&&te(Rt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function hf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t){return new dD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,n,r,s,i,a,o,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new yg(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Dr(n.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nO extends XT{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=pD(this.serializer,e),r=function(i){if(!("targetChange"in i))return le.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?le.min():a.readTime?on(a.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Nm(this.serializer),n.addTarget=function(i,a){let o;const u=a.target;if(o=Am(u)?{documents:yD(i,u)}:{query:_D(i,u)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=$T(i,a.resumeToken);const c=Pm(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(le.min())>0){o.readTime=od(i,a.snapshotVersion.toTimestamp());const c=Pm(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=wD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Nm(this.serializer),n.removeTarget=e,this.a_(n)}}class rO extends XT{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=gD(e.writeResults,e.commitTime),r=on(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Nm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>HT(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Rm(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,Rm(n,r),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(F.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class iO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Dr(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{xi(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=he(u);c.L_.add(4),await nu(c),c.q_.set("Unknown"),c.L_.delete(4),await th(c)}(this))})}),this.q_=new iO(r,s)}}async function th(t){if(xi(t))for(const e of t.B_)await e(!0)}async function nu(t){for(const e of t.B_)await e(!1)}function JT(t,e){const n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Eg(n)?wg(n):Wa(n).r_()&&vg(n,e))}function _g(t,e){const n=he(t),r=Wa(n);n.N_.delete(e),r.r_()&&eI(n,e),n.N_.size===0&&(r.r_()?r.o_():xi(n)&&n.q_.set("Unknown"))}function vg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wa(t).A_(e)}function eI(t,e){t.Q_.xe(e),Wa(t).R_(e)}function wg(t){t.Q_=new oD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Wa(t).start(),t.q_.v_()}function Eg(t){return xi(t)&&!Wa(t).n_()&&t.N_.size>0}function xi(t){return he(t).L_.size===0}function tI(t){t.Q_=void 0}async function oO(t){t.q_.set("Online")}async function lO(t){t.N_.forEach((e,n)=>{vg(t,e)})}async function uO(t,e){tI(t),Eg(t)?(t.q_.M_(e),wg(t)):t.q_.set("Unknown")}async function cO(t,e,n){if(t.q_.set("Online"),e instanceof BT&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ud(t,r)}else if(e instanceof yc?t.Q_.Ke(e):e instanceof UT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const r=await ZT(t.localStore);n.compareTo(r)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(u.resumeToken,a))}}),o.targetMismatches.forEach((u,c)=>{const h=i.N_.get(u);if(!h)return;i.N_.set(u,h.withResumeToken(kt.EMPTY_BYTE_STRING,h.snapshotVersion)),eI(i,u);const p=new ss(h.target,u,c,h.sequenceNumber);vg(i,p)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await ud(t,r)}}async function ud(t,e,n){if(!Yl(e))throw e;t.L_.add(1),await nu(t),t.q_.set("Offline"),n||(n=()=>ZT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await th(t)})}function nI(t,e){return e().catch(n=>ud(t,n,e))}async function nh(t){const e=he(t),n=Ts(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;dO(e);)try{const s=await GD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,hO(e,s)}catch(s){await ud(e,s)}rI(e)&&sI(e)}function dO(t){return xi(t)&&t.O_.length<10}function hO(t,e){t.O_.push(e);const n=Ts(t);n.r_()&&n.V_&&n.m_(e.mutations)}function rI(t){return xi(t)&&!Ts(t).n_()&&t.O_.length>0}function sI(t){Ts(t).start()}async function fO(t){Ts(t).p_()}async function mO(t){const e=Ts(t);for(const n of t.O_)e.m_(n.mutations)}async function pO(t,e,n){const r=t.O_.shift(),s=dg.from(r,e,n);await nI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await nh(t)}async function gO(t,e){e&&Ts(t).V_&&await async function(r,s){if(function(a){return jT(a)&&a!==F.ABORTED}(s.code)){const i=r.O_.shift();Ts(r).s_(),await nI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await nh(r)}}(t,e),rI(t)&&sI(t)}async function ow(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=xi(n);n.L_.add(3),await nu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await th(n)}async function yO(t,e){const n=he(t);e?(n.L_.delete(2),await th(n)):e||(n.L_.add(2),await nu(n),n.q_.set("Unknown"))}function Wa(t){return t.K_||(t.K_=function(n,r,s){const i=he(n);return i.w_(),new nO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:oO.bind(null,t),Ro:lO.bind(null,t),mo:uO.bind(null,t),d_:cO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Eg(t)?wg(t):t.q_.set("Unknown")):(await t.K_.stop(),tI(t))})),t.K_}function Ts(t){return t.U_||(t.U_=function(n,r,s){const i=he(n);return i.w_(),new rO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fO.bind(null,t),mo:gO.bind(null,t),f_:mO.bind(null,t),g_:pO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await nh(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,o=new xg(e,n,a,s,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tg(t,e){if(Dr("AsyncQueue",`${e}: ${t}`),Yl(t))return new Z(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=bo(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new ua(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ua;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.W_=new Qe(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ia{constructor(e,n,r,s,i,a,o,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Ia(e,n,ua.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vO{constructor(){this.queries=uw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=uw(),i.forEach((a,o)=>{for(const u of o.j_)u.onError(r)})})(this,new Z(F.ABORTED,"Firestore shutting down"))}}function uw(){return new za(t=>kT(t),Qd)}async function iI(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new _O,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const o=Tg(a,`Initialization of query '${Vi(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Ig(n)}async function aI(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wO(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(r=!0);a.z_=s}}r&&Ig(n)}function EO(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Ig(t){t.Y_.forEach(e=>{e.next()})}var Om,cw;(cw=Om||(Om={})).ea="default",cw.Cache="cache";class oI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.key=e}}class uI{constructor(e){this.key=e}}class xO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=ST(e),this.Ra=new ua(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new lw,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,o=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const g=s.get(h),w=Yd(this.query,p)?p:null,A=!!g&&this.mutatedKeys.has(g.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let N=!1;g&&w?g.data.isEqual(w.data)?A!==C&&(r.track({type:3,doc:w}),N=!0):this.ga(g,w)||(r.track({type:2,doc:w}),N=!0,(u&&this.Aa(w,u)>0||c&&this.Aa(w,c)<0)&&(o=!0)):!g&&w?(r.track({type:0,doc:w}),N=!0):g&&!w&&(r.track({type:1,doc:g}),N=!0,(u||c)&&(o=!0)),N&&(w?(a=a.add(w),i=C?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:a,fa:r,ns:o,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((h,p)=>function(w,A){const C=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return C(w)-C(A)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),s=s!=null&&s;const o=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,a.length!==0||c?{snapshot:new Ia(this.query,e.Ra,i,a,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new lw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new uI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new lI(r))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ia.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class TO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IO{constructor(e){this.key=e,this.va=!1}}class kO{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new za(o=>kT(o),Qd),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(se.comparator),this.Na=new Map,this.La=new mg,this.Ba={},this.ka=new Map,this.qa=Ta.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function SO(t,e,n=!0){const r=pI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await cI(r,e,n,!0),s}async function AO(t,e){const n=pI(t);await cI(n,e,!0,!1)}async function cI(t,e,n,r){const s=await QD(t.localStore,rr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await CO(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&JT(t.remoteStore,s),o}async function CO(t,e,n,r,s){t.Ka=(p,g,w)=>async function(C,N,T,_){let E=N.view.ma(T);E.ns&&(E=await sw(C.localStore,N.query,!1).then(({documents:k})=>N.view.ma(k,E)));const O=_&&_.targetChanges.get(N.targetId),U=_&&_.targetMismatches.get(N.targetId)!=null,$=N.view.applyChanges(E,C.isPrimaryClient,O,U);return hw(C,N.targetId,$.wa),$.snapshot}(t,p,g,w);const i=await sw(t.localStore,e,!0),a=new xO(e,i.Ts),o=a.ma(i.documents),u=tu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,u);hw(t,n,c.wa);const h=new TO(e,n,a);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function bO(t,e,n){const r=he(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!Qd(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Dm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_g(r.remoteStore,s.targetId),Vm(r,s.targetId)}).catch(Ql)):(Vm(r,s.targetId),await Dm(r.localStore,s.targetId,!0))}async function PO(t,e){const n=he(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_g(n.remoteStore,r.targetId))}async function RO(t,e,n){const r=jO(t);try{const s=await function(a,o){const u=he(a),c=be.now(),h=o.reduce((w,A)=>w.add(A.key),ye());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let A=Or(),C=ye();return u.cs.getEntries(w,h).next(N=>{A=N,A.forEach((T,_)=>{_.isValidDocument()||(C=C.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,A)).next(N=>{p=N;const T=[];for(const _ of o){const E=tD(_,p.get(_.key).overlayedDocument);E!=null&&T.push(new Ms(_.key,E,yT(E.value.mapValue),lt.exists(!0)))}return u.mutationQueue.addMutationBatch(w,c,T,o)}).next(N=>{g=N;const T=N.applyToLocalDocumentSet(p,C);return u.documentOverlayCache.saveOverlays(w,N.batchId,T)})}).then(()=>({batchId:g.batchId,changes:CT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,o,u){let c=a.Ba[a.currentUser.toKey()];c||(c=new Qe(Ae)),c=c.insert(o,u),a.Ba[a.currentUser.toKey()]=c}(r,s.batchId,n),await ru(r,s.changes),await nh(r.remoteStore)}catch(s){const i=Tg(s,"Failed to persist write");n.reject(i)}}async function dI(t,e){const n=he(t);try{const r=await HD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Ie(a.va):s.removedDocuments.size>0&&(Ie(a.va),a.va=!1))}),await ru(n,r,e)}catch(r){await Ql(r)}}function dw(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const u=he(a);u.onlineState=o;let c=!1;u.queries.forEach((h,p)=>{for(const g of p.j_)g.Z_(o)&&(c=!0)}),c&&Ig(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NO(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Qe(se.comparator);a=a.insert(i,pt.newNoDocument(i,le.min()));const o=ye().add(i),u=new Jd(le.min(),new Map,new Qe(Ae),a,o);await dI(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),kg(r)}else await Dm(r.localStore,e,!1).then(()=>Vm(r,e,n)).catch(Ql)}async function DO(t,e){const n=he(t),r=e.batch.batchId;try{const s=await qD(n.localStore,e);fI(n,r,null),hI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ru(n,s)}catch(s){await Ql(s)}}async function OO(t,e,n){const r=he(t);try{const s=await function(a,o){const u=he(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,o).next(p=>(Ie(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,o)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);fI(r,e,n),hI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ru(r,s)}catch(s){await Ql(s)}}function hI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function fI(t,e,n){const r=he(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Vm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||mI(t,r)})}function mI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_g(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),kg(t))}function hw(t,e,n){for(const r of n)r instanceof lI?(t.La.addReference(r.key,e),VO(t,r)):r instanceof uI?(te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||mI(t,r.key)):ae()}function VO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(te("SyncEngine","New document in limbo: "+n),t.xa.add(r),kg(t))}function kg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Oe.fromString(e)),r=t.qa.next();t.Na.set(r,new IO(n)),t.Oa=t.Oa.insert(n,r),JT(t.remoteStore,new ss(rr(ug(n.path)),r,"TargetPurposeLimboResolution",rg.oe))}}async function ru(t,e,n){const r=he(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,u)=>{a.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){s.push(c);const p=gg.Wi(u.targetId,c);i.push(p)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,c){const h=he(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(c,g=>B.forEach(g.$i,w=>h.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>B.forEach(g.Ui,w=>h.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!Yl(p))throw p;te("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const w=h.os.get(g),A=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(A);h.os=h.os.insert(g,C)}}}(r.localStore,i))}async function MO(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await YT(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(u=>{u.reject(new Z(F.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ru(n,r.hs)}}function LO(t,e){const n=he(t),r=n.Na.get(e);if(r&&r.va)return ye().add(r.key);{let s=ye();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const o=n.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function pI(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NO.bind(null,e),e.Ca.d_=wO.bind(null,e.eventManager),e.Ca.$a=EO.bind(null,e.eventManager),e}function jO(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OO.bind(null,e),e}class cd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return WD(this.persistence,new $D,e.initialUser,this.serializer)}Ga(e){return new FD(pg.Zr,this.serializer)}Wa(e){return new ZD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cd.provider={build:()=>new cd};class Mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MO.bind(null,this.syncEngine),await yO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vO}()}createDatastore(e){const n=eh(e.databaseInfo.databaseId),r=function(i){return new tO(i)}(e.databaseInfo);return function(i,a,o,u){return new sO(i,a,o,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,o){return new aO(r,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>dw(this.syncEngine,n,0),function(){return aw.D()?new aw:new XD}())}createSyncEngine(e,n){return function(s,i,a,o,u,c,h){const p=new kO(s,i,a,o,u,c);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=he(s);te("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await nu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Z(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const a=he(s),o={documents:i.map(p=>ld(a.serializer,p))},u=await a.Lo("BatchGetDocuments",a.serializer.databaseId,Oe.emptyPath(),o,i.length),c=new Map;u.forEach(p=>{const g=mD(a.serializer,p);c.set(g.key.toString(),g)});const h=[];return i.forEach(p=>{const g=c.get(p.toString());Ie(!!g),h.push(g)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new eu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=se.fromPath(r);this.mutations.push(new LT(s,this.precondition(s)))}),await async function(r,s){const i=he(r),a={writes:s.map(o=>HT(i.serializer,o))};await i.Mo("Commit",i.serializer.databaseId,Oe.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ae();n=le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Z(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(le.min())?lt.exists(!1):lt.updateTime(n):lt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(le.min()))throw new Z(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lt.updateTime(n)}return lt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new yg(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new FO(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Zl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!jT(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Nt.UNAUTHENTICATED,this.clientId=mT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{te("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(te("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ff(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await YT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $O(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ow(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>ow(e.remoteStore,s)),t._onlineComponents=e}async function $O(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await ff(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;va("Error using user provided cache. Falling back to memory cache: "+n),await ff(t,new cd)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await ff(t,new cd);return t._offlineComponents}async function Sg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await fw(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await fw(t,new Mm))),t._onlineComponents}function zO(t){return Sg(t).then(e=>e.syncEngine)}function WO(t){return Sg(t).then(e=>e.datastore)}async function yI(t){const e=await Sg(t),n=e.eventManager;return n.onListen=SO.bind(null,e.syncEngine),n.onUnlisten=bO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PO.bind(null,e.syncEngine),n}function qO(t,e,n={}){const r=new nr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,u,c){const h=new gI({next:g=>{h.Za(),a.enqueueAndForget(()=>aI(i,p));const w=g.docs.has(o);!w&&g.fromCache?c.reject(new Z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?c.reject(new Z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new oI(ug(o.path),h,{includeMetadataChanges:!0,_a:!0});return iI(i,p)}(await yI(t),t.asyncQueue,e,n,r)),r.promise}function HO(t,e,n={}){const r=new nr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,u,c){const h=new gI({next:g=>{h.Za(),a.enqueueAndForget(()=>aI(i,p)),g.fromCache&&u.source==="server"?c.reject(new Z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new oI(o,h,{includeMetadataChanges:!0,_a:!0});return iI(i,p)}(await yI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t,e,n){if(!n)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KO(t,e,n,r){if(e===!0&&r===!0)throw new Z(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pw(t){if(!se.isDocumentKey(t))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gw(t){if(se.isDocumentKey(t))throw new Z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rh(t);throw new Z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_I((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cN;switch(r.type){case"firstParty":return new mN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mw.get(n);r&&(te("ComponentProvider","Removing Datastore"),mw.delete(n),r.terminate())}(this),Promise.resolve()}}function GO(t,e,n,r={}){var s;const i=(t=cn(t,sh))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let o,u;if(typeof r.mockUserToken=="string")o=r.mockUserToken,u=Nt.MOCK_USER;else{o=SC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Nt(c)}t._authCredentials=new dN(new fT(o,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qa(this.firestore,e,this._query)}}class Ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class gs extends qa{constructor(e,n,r){super(e,n,ug(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new se(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function Vn(t,e,...n){if(t=Je(t),vI("collection","path",e),t instanceof sh){const r=Oe.fromString(e,...n);return gw(r),new gs(t,null,r)}{if(!(t instanceof Ot||t instanceof gs))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return gw(r),new gs(t.firestore,null,r)}}function xn(t,e,...n){if(t=Je(t),arguments.length===1&&(e=mT.newId()),vI("doc","path",e),t instanceof sh){const r=Oe.fromString(e,...n);return pw(r),new Ot(t,null,new se(r))}{if(!(t instanceof Ot||t instanceof gs))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return pw(r),new Ot(t.firestore,t instanceof gs?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new yg(this,"async_queue_retry"),this.Vu=()=>{const r=hf();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=hf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=hf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yl(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw Dr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=xg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Lr extends sh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new _w,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _w(e),this._firestoreClient=void 0,await e}}}function QO(t,e){const n=typeof t=="object"?t:Hp(),r=typeof t=="string"?t:"(default)",s=qd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vx("firestore");i&&GO(s,...i)}return s}function su(t){if(t._terminated)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YO(t),t._firestoreClient}function YO(t){var e,n,r;const s=t._freezeSettings(),i=function(o,u,c,h){return new AN(o,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,_I(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new BO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const u=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mi(kt.fromBase64String(e))}catch(n){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mi(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=/^__.*__$/;class XO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jl(e,this.data,n,this.fieldTransforms)}}class wI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function EI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Pg{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Pg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return dd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(EI(this.Cu)&&ZO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class JO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||eh(e)}Qu(e,n,r,s=!1){return new Pg({Cu:e,methodName:n,qu:r,path:Et.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ka(t){const e=t._freezeSettings(),n=eh(t._databaseId);return new JO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ih(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Dg("Data must be an object, but it was:",a,r);const o=xI(r,a);let u,c;if(i.merge)u=new sn(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const g=Lm(e,p,n);if(!a.contains(g))throw new Z(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);II(h,g)||h.push(g)}u=new sn(h),c=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=a.fieldTransforms;return new XO(new $t(o),u,c)}class ah extends Ag{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ah}}function Rg(t,e,n,r){const s=t.Qu(1,e,n);Dg("Data must be an object, but it was:",s,r);const i=[],a=$t.empty();Ei(r,(u,c)=>{const h=Og(e,u,n);c=Je(c);const p=s.Nu(h);if(c instanceof ah)i.push(h);else{const g=iu(c,p);g!=null&&(i.push(h),a.set(h,g))}});const o=new sn(i);return new wI(a,o,s.fieldTransforms)}function Ng(t,e,n,r,s,i){const a=t.Qu(1,e,n),o=[Lm(e,r,n)],u=[s];if(i.length%2!=0)throw new Z(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)o.push(Lm(e,i[g])),u.push(i[g+1]);const c=[],h=$t.empty();for(let g=o.length-1;g>=0;--g)if(!II(c,o[g])){const w=o[g];let A=u[g];A=Je(A);const C=a.Nu(w);if(A instanceof ah)c.push(w);else{const N=iu(A,C);N!=null&&(c.push(w),h.set(w,N))}}const p=new sn(c);return new wI(h,p,a.fieldTransforms)}function e2(t,e,n,r=!1){return iu(n,t.Qu(r?4:3,e))}function iu(t,e){if(TI(t=Je(t)))return Dg("Unsupported field value:",e,t),xI(t,e);if(t instanceof Ag)return function(r,s){if(!EI(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const o of r){let u=iu(o,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=be.fromDate(r);return{timestampValue:od(s.serializer,i)}}if(r instanceof be){const i=new be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:od(s.serializer,i)}}if(r instanceof Cg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mi)return{bytesValue:$T(s.serializer,r._byteString)};if(r instanceof Ot){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof bg)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Bu("VectorValues must only contain numeric values.");return cg(o.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${rh(r)}`)}(t,e)}function xI(t,e){const n={};return pT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(t,(r,s)=>{const i=iu(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function TI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof be||t instanceof Cg||t instanceof mi||t instanceof Ot||t instanceof Ag||t instanceof bg)}function Dg(t,e,n){if(!TI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=rh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Lm(t,e,n){if((e=Je(e))instanceof Ha)return e._internalPath;if(typeof e=="string")return Og(t,e);throw dd("Field path arguments must be of type string or ",t,!1,void 0,n)}const t2=new RegExp("[~\\*/\\[\\]]");function Og(t,e,n){if(e.search(t2)>=0)throw dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ha(...e.split("."))._internalPath}catch{throw dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dd(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new Z(F.INVALID_ARGUMENT,o+t+u)}function II(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class n2 extends hd{data(){return super.data()}}function Vg(t,e){return typeof e=="string"?Og(t,e):e instanceof Ha?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mg{}class s2 extends Mg{}function ka(t,e,...n){let r=[];e instanceof Mg&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof Lg).length,o=i.filter(u=>u instanceof oh).length;if(a>1||a>0&&o>0)throw new Z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class oh extends s2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new oh(e,n,r)}_apply(e){const n=this._parse(e);return kI(e._query,n),new qa(e.firestore,e.converter,Cm(e._query,n))}_parse(e){const n=Ka(e.firestore);return function(i,a,o,u,c,h,p){let g;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ww(p,h);const w=[];for(const A of p)w.push(vw(u,i,A));g={arrayValue:{values:w}}}else g=vw(u,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ww(p,h),g=e2(o,a,p,h==="in"||h==="not-in");return ot.create(c,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ys(t,e,n){const r=e,s=Vg("where",t);return oh._create(s,r,n)}class Lg extends Mg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const u of o)kI(a,u),a=Cm(a,u)}(e._query,n),new qa(e.firestore,e.converter,Cm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function vw(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new Z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IT(e)&&n.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!se.isDocumentKey(r))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bv(t,new se(r))}if(n instanceof Ot)return Bv(t,n._key);throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rh(n)}.`)}function ww(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kI(t,e){const n=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SI{convertValue(e,n="none"){switch(fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ei(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>et(a.doubleValue));return new bg(i)}convertGeoPoint(e){return new Cg(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ig(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_l(e));default:return null}}convertTimestamp(e){const n=xs(e);return new be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);Ie(QT(r));const s=new vl(r.get(1),r.get(3)),i=new se(r.popFirst(5));return s.isEqual(n)||Dr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class i2 extends SI{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jg extends hd{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Vg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _c extends jg{data(e={}){return super.data(e)}}class a2{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _c(this._firestore,this._userDataWriter,r.key,r,new Xi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const u=new _c(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Xi(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const u=new _c(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Xi(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:o2(o.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function o2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){t=cn(t,Ot);const e=cn(t.firestore,Lr);return qO(su(e),t._key).then(n=>d2(e,t,n))}class Fg extends SI{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function Sa(t){t=cn(t,qa);const e=cn(t.firestore,Lr),n=su(e),r=new Fg(e);return r2(t._query),HO(n,t._query).then(s=>new a2(e,r,t,s))}function u2(t,e,n){t=cn(t,Ot);const r=cn(t.firestore,Lr),s=lh(t.converter,e,n);return ou(r,[ih(Ka(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,lt.none())])}function Ug(t,e,n,...r){t=cn(t,Ot);const s=cn(t.firestore,Lr),i=Ka(s);let a;return a=typeof(e=Je(e))=="string"||e instanceof Ha?Ng(i,"updateDoc",t._key,e,n,r):Rg(i,"updateDoc",t._key,e),ou(s,[a.toMutation(t._key,lt.exists(!0))])}function c2(t){return ou(cn(t.firestore,Lr),[new eu(t._key,lt.none())])}function au(t,e){const n=cn(t.firestore,Lr),r=xn(t),s=lh(t.converter,e);return ou(n,[ih(Ka(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,lt.exists(!1))]).then(()=>r)}function ou(t,e){return function(r,s){const i=new nr;return r.asyncQueue.enqueueAndForget(async()=>RO(await zO(r),s,i)),i.promise}(su(t),e)}function d2(t,e,n){const r=n.docs.get(e._key),s=new Fg(t);return new jg(t,s,e._key,r,new Xi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ka(e)}set(e,n,r){this._verifyNotCommitted();const s=Jr(e,this._firestore),i=lh(s.converter,n,r),a=ih(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,lt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Jr(e,this._firestore);let a;return a=typeof(n=Je(n))=="string"||n instanceof Ha?Ng(this._dataReader,"WriteBatch.update",i._key,n,r,s):Rg(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,lt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Jr(e,this._firestore);return this._mutations=this._mutations.concat(new eu(n._key,lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jr(t,e){if((t=Je(t)).firestore!==e)throw new Z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2 extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ka(n)}get(n){const r=Jr(n,this._firestore),s=new i2(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return ae();const a=i[0];if(a.isFoundDocument())return new hd(this._firestore,s,a.key,a,r.converter);if(a.isNoDocument())return new hd(this._firestore,s,r._key,null,r.converter);throw ae()})}set(n,r,s){const i=Jr(n,this._firestore),a=lh(i.converter,r,s),o=ih(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(n,r,s,...i){const a=Jr(n,this._firestore);let o;return o=typeof(r=Je(r))=="string"||r instanceof Ha?Ng(this._dataReader,"Transaction.update",a._key,r,s,i):Rg(this._dataReader,"Transaction.update",a._key,r),this._transaction.update(a._key,o),this}delete(n){const r=Jr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Jr(e,this._firestore),r=new Fg(this._firestore);return super.get(e).then(s=>new jg(this._firestore,r,n._key,s._document,new Xi(!1,!1),n.converter))}}function AI(t,e,n){t=cn(t,Lr);const r=Object.assign(Object.assign({},h2),n);return function(i){if(i.maxAttempts<1)throw new Z(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,o){const u=new nr;return i.asyncQueue.enqueueAndForget(async()=>{const c=await WO(i);new UO(i.asyncQueue,c,o,a,u).au()}),u.promise}(su(t),s=>e(new m2(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t){return su(t=cn(t,Lr)),new f2(t,e=>ou(t,e))}(function(e,n=!0){(function(s){$a=s})(Ua),li(new ws("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),o=new Lr(new hN(r.getProvider("auth-internal")),new gN(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vl(c.options.projectId,h)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Jn(Mv,"4.7.3",e),Jn(Mv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="us-central1";class y2{constructor(e,n,r,s,i=jm,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new g2(n,r,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=jm}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function _2(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const Ew="@firebase/functions",xw="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="auth-internal",w2="app-check-internal",E2="messaging-internal";function x2(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),a=r.getProvider(v2),o=r.getProvider(E2),u=r.getProvider(w2);return new y2(i,a,o,u,s,t)};li(new ws(CI,n,"PUBLIC").setMultipleInstances(!0)),Jn(Ew,xw,e),Jn(Ew,xw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t=Hp(),e=jm){const r=qd(Je(t),CI).getImmediate({identifier:e}),s=vx("functions");return s&&I2(r,...s),r}function I2(t,e,n){_2(Je(t),e,n)}x2(fetch.bind(self));const k2={apiKey:"AIzaSyCUVNvXtXyS73aX0VU8EP0M47QIhOoJi8k",authDomain:"timebank-122bc.firebaseapp.com",projectId:"timebank-122bc",storageBucket:"timebank-122bc.firebasestorage.app",messagingSenderId:"331743621517",appId:"1:331743621517:web:8d8a6174b14d4fe852cdc4",measurementId:"G-0VQDE01RZ5"},Bg=Ix(k2),uh=lN(Bg),Fe=QO(Bg);T2(Bg);class S2{constructor(){Sn(this,"COLLECTION","users");Sn(this,"cache",new Map);Sn(this,"CACHE_TTL",5*60*1e3)}async getUserProfile(e){if(!e)return null;try{const n=this.cache.get(e);if(n&&Date.now()-n.timestamp<this.CACHE_TTL)return n.data;const r=xn(Fe,this.COLLECTION,e),s=await l2(r);if(s.exists()){const i={id:s.id,...s.data()};return this.cache.set(e,{data:i,timestamp:Date.now()}),i}return null}catch(n){throw console.error("Error getting user profile:",n),n}}async createInitialUserProfile(e,n){if(!e||!n.email)throw new Error("UserId and email are required");try{const r=xn(Fe,this.COLLECTION,e),s={email:n.email,firstName:n.firstName,lastName:n.lastName,timeBalance:3,rating:5,ratingCount:1,exchangedHours:0,exchangesCount:0,skills:[],createdAt:new Date().toISOString()};await u2(r,s),this.cache.set(e,{data:{id:e,...s},timestamp:Date.now()})}catch(r){throw console.error("Error creating user profile:",r),r}}clearCache(e){e?this.cache.delete(e):this.cache.clear()}}const Aa=new S2;function Tn(){const[t,e]=M.useState(null),[n,r]=M.useState(null),[s,i]=M.useState(!0),[a,o]=M.useState(null);return M.useEffect(()=>{const u=uh.onAuthStateChanged(async c=>{e(c);try{if(c){const h=await Aa.getUserProfile(c.uid);r(h),o(null)}else r(null)}catch(h){console.error("Error loading user profile:",h),o("Unable to load user profile")}finally{i(!1)}});return()=>u()},[]),{user:t,userProfile:n,loading:s,error:a}}class A2 extends Error{constructor(e){super(e),this.name="AuthError"}}class C2{constructor(){Sn(this,"auth");this.auth=uh}async register(e,n,r){try{const s=await KP(this.auth,e,n);return await Aa.createInitialUserProfile(s.user.uid,{email:e,firstName:r.firstName,lastName:r.lastName}),s}catch(s){throw console.error("Registration error:",s),this.handleAuthError(s)}}async login(e,n){try{return await GP(this.auth,e,n)}catch(r){throw console.error("Login error:",r),this.handleAuthError(r)}}async logout(){try{await ZP(this.auth),Aa.clearCache()}catch(e){throw console.error("Logout error:",e),this.handleAuthError(e)}}getCurrentUser(){return this.auth.currentUser}handleAuthError(e){const n=e==null?void 0:e.code,s={"auth/email-already-in-use":"Cette adresse email est déjà utilisée","auth/invalid-email":"Adresse email invalide","auth/operation-not-allowed":"Opération non autorisée","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractères","auth/user-disabled":"Ce compte a été désactivé","auth/user-not-found":"Aucun compte ne correspond à cette adresse email","auth/wrong-password":"Mot de passe incorrect","auth/too-many-requests":"Trop de tentatives. Veuillez réessayer plus tard","auth/network-request-failed":"Erreur de connexion. Vérifiez votre connexion internet"}[n]||"Une erreur est survenue lors de l'authentification";return new A2(s)}}const Fm=new C2,b2=()=>{const{user:t,userProfile:e}=Tn(),n=Fa(),r=async()=>{try{await Fm.logout(),n("/login")}catch(s){console.error("Logout error:",s)}};return f.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-sm border-b border-gray-200",children:f.jsx("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between items-center h-16",children:[f.jsxs(yr,{to:"/",className:"flex items-center group",children:[f.jsx(lr,{className:"w-8 h-8 text-black group-hover:text-gray-700"}),f.jsx("span",{className:"ml-2 text-xl font-bold",children:"TimeBank"})]}),f.jsx("div",{className:"flex items-center space-x-6",children:t?f.jsxs(f.Fragment,{children:[f.jsxs(yr,{to:"/dashboard",className:"text-gray-600 hover:text-black transition-colors",children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),f.jsx(yr,{to:"/availability",className:"text-gray-600 hover:text-black transition-colors",children:f.jsx(hC,{className:"w-5 h-5"})}),f.jsx(yr,{to:"/experiences",className:"text-gray-600 hover:text-black transition-colors",children:f.jsx(dx,{className:"w-5 h-5"})}),f.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-black rounded-full hover:bg-gray-900 transition-colors",children:"Déconnexion"})]}):f.jsxs(f.Fragment,{children:[f.jsx(yr,{to:"/login",className:"text-gray-600 hover:text-black transition-colors",children:"Connexion"}),f.jsx(yr,{to:"/register",className:"px-4 py-2 text-sm font-medium text-white bg-black rounded-full hover:bg-gray-900 transition-colors",children:"S'inscrire"})]})})]})})})},P2=()=>f.jsx("section",{id:"features",className:"py-24 bg-white",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-16",children:[f.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Comment ça marche ?"}),f.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Découvrez une nouvelle façon de valoriser votre temps et vos compétences"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-purple-50 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto",children:f.jsx(lr,{className:"w-8 h-8 text-purple-600"})}),f.jsx("h3",{className:"text-2xl font-bold text-center",children:"Gagnez du temps"}),f.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Transformez votre temps en opportunité. Démarrez avec 3 heures de crédit offerts et proposez vos compétences uniques à la communauté. Chaque heure que vous partagez est une heure gagnée pour découvrir, apprendre ou bénéficier des talents d'autres utilisateurs."})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-blue-50 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto",children:f.jsx(gC,{className:"w-8 h-8 text-blue-600"})}),f.jsx("h3",{className:"text-2xl font-bold text-center",children:"Échangez vos talents"}),f.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Valorisez ce que vous savez faire. Réservez des expériences enrichissantes ou échangez vos compétences avec d'autres membres grâce à un système transparent et équitable. Avec TimeBank, chaque échange est une opportunité de créer du lien et d'accéder à de nouvelles passions."})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-pink-50 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto",children:f.jsx(hx,{className:"w-8 h-8 text-pink-600"})}),f.jsx("h3",{className:"text-2xl font-bold text-center",children:"Développez votre potentiel"}),f.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Apprenez, partagez, évoluez. Enrichissez vos connaissances, explorez vos passions et bâtissez des relations fortes au sein d'une communauté collaborative. Avec TimeBank, le savoir et l'entraide deviennent vos nouvelles monnaies."})]})]}),f.jsx("div",{className:"mt-16 text-center",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Transformez chaque minute en apprentissage.",f.jsx("br",{}),"Transformez chaque échange en expérience."]}),f.jsx(yr,{to:"/register",className:"inline-block px-8 py-3 text-lg font-medium text-white bg-black rounded-full hover:bg-gray-900 transition-all duration-200",children:"Rejoignez TimeBank"})]})})]})}),R2=[{name:"Michelle Obama",role:"Leadership Coach",image:"https://tse4.mm.bing.net/th?id=OIP.lCZmDiDHR2N-hEnS8Al_WAHaE7&pid=Api",quote:"Sharing knowledge is the greatest form of empowerment"},{name:"Elon Musk",role:"Tech Mentor",image:"https://cms.qz.com/wp-content/uploads/2017/06/rtr3fy5u.jpg?quality=75&strip=all&w=1200&h=630&crop=1",quote:"Innovation happens when minds connect"},{name:"Emma Watson",role:"Literature Expert",image:"https://upload.wikimedia.org/wikipedia/commons/b/b9/Steve_Jobs_Headshot_2010-CROP.jpg",quote:"Books are just the beginning of learning"},{name:"Gordon Ramsay",role:"Culinary Master",image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=400&h=400&fit=crop",quote:"Cooking is about passion, not just recipes"}],N2=()=>f.jsx("section",{className:"py-24 bg-gray-50",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-16",children:[f.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Join Our Community of Exceptional Timebankers"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Learn from and exchange with remarkable individuals who share their expertise"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:R2.map(t=>f.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[f.jsx("div",{className:"aspect-square",children:f.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h3",{className:"text-lg font-semibold",children:t.name}),f.jsx(fx,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"})]}),f.jsx("p",{className:"text-sm text-gray-500 mb-4",children:t.role}),f.jsxs("p",{className:"text-gray-600 italic",children:['"',t.quote,'"']})]})]},t.name))}),f.jsx("div",{className:"mt-16 text-center",children:f.jsx("p",{className:"text-sm text-gray-500",children:"* Celebrity profiles are for illustration purposes only"})})]})}),D2=()=>{const{user:t}=Tn();return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 via-white to-gray-100"}),f.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[f.jsx("div",{className:"absolute w-[500px] h-[500px] -top-48 -left-48 bg-gray-200/50 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),f.jsx("div",{className:"absolute w-[500px] h-[500px] -bottom-48 -right-48 bg-gray-300/50 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),f.jsx("div",{className:"absolute w-[500px] h-[500px] top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gray-100/50 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"})]}),f.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"inline-flex items-center space-x-2 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 floating",children:[f.jsx(hx,{className:"w-5 h-5 text-gray-700"}),f.jsx("span",{className:"text-sm font-medium bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent",children:"Redéfinissez la valeur de votre temps"})]}),f.jsxs("h1",{className:"text-6xl sm:text-7xl font-bold tracking-tight",children:[f.jsx("span",{className:"block mb-2",children:"Le Temps est"}),f.jsx("span",{className:"block bg-gradient-to-r from-gray-700 via-gray-800 to-gray-900 bg-clip-text text-transparent",children:"Votre Nouvelle Monnaie"})]}),f.jsx("p",{className:"mt-6 text-xl text-gray-600 max-w-3xl mx-auto",children:"Échangez vos compétences et services dans une économie collaborative basée sur le temps. Découvrez un nouveau mode d'échange où chaque minute compte."}),f.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-center gap-4",children:[f.jsxs(yr,{to:t?"/dashboard":"/register",className:"group relative inline-flex items-center justify-center px-8 py-3 text-lg font-medium text-white bg-gradient-to-r from-gray-700 to-gray-900 rounded-full hover:from-gray-800 hover:to-black transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[t?"Accéder au tableau de bord":"Commencer maintenant",f.jsx(dC,{className:"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),f.jsx(yr,{to:"/experiences",className:"inline-flex items-center justify-center px-8 py-3 text-lg font-medium text-gray-900 bg-white/90 backdrop-blur-sm rounded-full hover:bg-white transition-all duration-300 shadow-md hover:shadow-lg",children:"Découvrir les expériences"})]})]}),f.jsx("div",{className:"mt-20 grid grid-cols-1 sm:grid-cols-3 gap-8",children:[{value:"10K+",label:"Utilisateurs actifs"},{value:"50K+",label:"Heures échangées"},{value:"1000+",label:"Compétences partagées"}].map(({value:e,label:n})=>f.jsxs("div",{className:"glass-card p-8 hover:scale-105 transition-transform duration-300",children:[f.jsx("p",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent",children:e}),f.jsx("p",{className:"mt-2 text-gray-600",children:n})]},n))})]})]}),f.jsx(N2,{}),f.jsx(P2,{})]})};var lu=t=>t.type==="checkbox",Xs=t=>t instanceof Date,Bt=t=>t==null;const bI=t=>typeof t=="object";var rt=t=>!Bt(t)&&!Array.isArray(t)&&bI(t)&&!Xs(t),O2=t=>rt(t)&&t.target?lu(t.target)?t.target.checked:t.target.value:t,V2=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,M2=(t,e)=>t.has(V2(e)),L2=t=>{const e=t.constructor&&t.constructor.prototype;return rt(e)&&e.hasOwnProperty("isPrototypeOf")},$g=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function pn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!($g&&(t instanceof Blob||r))&&(n||rt(t)))if(e=n?[]:{},!n&&!L2(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=pn(t[s]));else return t;return e}var ch=t=>Array.isArray(t)?t.filter(Boolean):[],it=t=>t===void 0,J=(t,e,n)=>{if(!e||!rt(t))return n;const r=ch(e.split(/[,[\].]+?/)).reduce((s,i)=>Bt(s)?s:s[i],t);return it(r)||r===t?it(t[e])?n:t[e]:r},Wn=t=>typeof t=="boolean",zg=t=>/^\w*$/.test(t),PI=t=>ch(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ne=(t,e,n)=>{let r=-1;const s=zg(e)?[e]:PI(e),i=s.length,a=i-1;for(;++r<i;){const o=s[r];let u=n;if(r!==a){const c=t[o];u=rt(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=u,t=t[o]}return t};const Tw={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Rn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},fr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Ft.createContext(null);var j2=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const a=i;return e._proxyFormState[a]!==Rn.all&&(e._proxyFormState[a]=!r||Rn.all),t[a]}});return s},Kt=t=>rt(t)&&!Object.keys(t).length,F2=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return Kt(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(a=>e[a]===Rn.all)},vc=t=>Array.isArray(t)?t:[t];function U2(t){const e=Ft.useRef(t);e.current=t,Ft.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var Yn=t=>typeof t=="string",B2=(t,e,n,r,s)=>Yn(t)?(r&&e.watch.add(t),J(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),J(n,i))):(r&&(e.watchAll=!0),n),RI=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Iw=t=>({isOnSubmit:!t||t===Rn.onSubmit,isOnBlur:t===Rn.onBlur,isOnChange:t===Rn.onChange,isOnAll:t===Rn.all,isOnTouch:t===Rn.onTouched}),kw=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Go=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=J(t,s);if(i){const{_f:a,...o}=i;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],s)&&!r)return!0;if(a.ref&&e(a.ref,a.name)&&!r)return!0;if(Go(o,e))break}else if(rt(o)&&Go(o,e))break}}};var $2=(t,e,n)=>{const r=vc(J(t,n));return Ne(r,"root",e[n]),Ne(t,n,r),t},Wg=t=>t.type==="file",Hn=t=>typeof t=="function",fd=t=>{if(!$g)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},wc=t=>Yn(t),qg=t=>t.type==="radio",md=t=>t instanceof RegExp;const Sw={value:!1,isValid:!1},Aw={value:!0,isValid:!0};var NI=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!it(t[0].attributes.value)?it(t[0].value)||t[0].value===""?Aw:{value:t[0].value,isValid:!0}:Aw:Sw}return Sw};const Cw={isValid:!1,value:null};var DI=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Cw):Cw;function bw(t,e,n="validate"){if(wc(t)||Array.isArray(t)&&t.every(wc)||Wn(t)&&!t)return{type:n,message:wc(t)?t:"",ref:e}}var Di=t=>rt(t)&&!md(t)?t:{value:t,message:""},Pw=async(t,e,n,r,s,i)=>{const{ref:a,refs:o,required:u,maxLength:c,minLength:h,min:p,max:g,pattern:w,validate:A,name:C,valueAsNumber:N,mount:T}=t._f,_=J(n,C);if(!T||e.has(C))return{};const E=o?o[0]:a,O=P=>{s&&E.reportValidity&&(E.setCustomValidity(Wn(P)?"":P||""),E.reportValidity())},U={},$=qg(a),k=lu(a),v=$||k,I=(N||Wg(a))&&it(a.value)&&it(_)||fd(a)&&a.value===""||_===""||Array.isArray(_)&&!_.length,S=RI.bind(null,C,r,U),R=(P,x,ke,Be=fr.maxLength,yt=fr.minLength)=>{const Ye=P?x:ke;U[C]={type:P?Be:yt,message:Ye,ref:a,...S(P?Be:yt,Ye)}};if(i?!Array.isArray(_)||!_.length:u&&(!v&&(I||Bt(_))||Wn(_)&&!_||k&&!NI(o).isValid||$&&!DI(o).isValid)){const{value:P,message:x}=wc(u)?{value:!!u,message:u}:Di(u);if(P&&(U[C]={type:fr.required,message:x,ref:E,...S(fr.required,x)},!r))return O(x),U}if(!I&&(!Bt(p)||!Bt(g))){let P,x;const ke=Di(g),Be=Di(p);if(!Bt(_)&&!isNaN(_)){const yt=a.valueAsNumber||_&&+_;Bt(ke.value)||(P=yt>ke.value),Bt(Be.value)||(x=yt<Be.value)}else{const yt=a.valueAsDate||new Date(_),Ye=de=>new Date(new Date().toDateString()+" "+de),G=a.type=="time",ie=a.type=="week";Yn(ke.value)&&_&&(P=G?Ye(_)>Ye(ke.value):ie?_>ke.value:yt>new Date(ke.value)),Yn(Be.value)&&_&&(x=G?Ye(_)<Ye(Be.value):ie?_<Be.value:yt<new Date(Be.value))}if((P||x)&&(R(!!P,ke.message,Be.message,fr.max,fr.min),!r))return O(U[C].message),U}if((c||h)&&!I&&(Yn(_)||i&&Array.isArray(_))){const P=Di(c),x=Di(h),ke=!Bt(P.value)&&_.length>+P.value,Be=!Bt(x.value)&&_.length<+x.value;if((ke||Be)&&(R(ke,P.message,x.message),!r))return O(U[C].message),U}if(w&&!I&&Yn(_)){const{value:P,message:x}=Di(w);if(md(P)&&!_.match(P)&&(U[C]={type:fr.pattern,message:x,ref:a,...S(fr.pattern,x)},!r))return O(x),U}if(A){if(Hn(A)){const P=await A(_,n),x=bw(P,E);if(x&&(U[C]={...x,...S(fr.validate,x.message)},!r))return O(x.message),U}else if(rt(A)){let P={};for(const x in A){if(!Kt(P)&&!r)break;const ke=bw(await A[x](_,n),E,x);ke&&(P={...ke,...S(x,ke.message)},O(ke.message),r&&(U[C]=P))}if(!Kt(P)&&(U[C]={ref:E,...P},!r))return U}}return O(!0),U};function z2(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=it(t)?r++:t[e[r++]];return t}function W2(t){for(const e in t)if(t.hasOwnProperty(e)&&!it(t[e]))return!1;return!0}function ut(t,e){const n=Array.isArray(e)?e:zg(e)?[e]:PI(e),r=n.length===1?t:z2(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(rt(r)&&Kt(r)||Array.isArray(r)&&W2(r))&&ut(t,n.slice(0,-1)),t}var mf=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},Um=t=>Bt(t)||!bI(t);function es(t,e){if(Um(t)||Um(e))return t===e;if(Xs(t)&&Xs(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const a=e[s];if(Xs(i)&&Xs(a)||rt(i)&&rt(a)||Array.isArray(i)&&Array.isArray(a)?!es(i,a):i!==a)return!1}}return!0}var OI=t=>t.type==="select-multiple",q2=t=>qg(t)||lu(t),pf=t=>fd(t)&&t.isConnected,VI=t=>{for(const e in t)if(Hn(t[e]))return!0;return!1};function pd(t,e={}){const n=Array.isArray(t);if(rt(t)||n)for(const r in t)Array.isArray(t[r])||rt(t[r])&&!VI(t[r])?(e[r]=Array.isArray(t[r])?[]:{},pd(t[r],e[r])):Bt(t[r])||(e[r]=!0);return e}function MI(t,e,n){const r=Array.isArray(t);if(rt(t)||r)for(const s in t)Array.isArray(t[s])||rt(t[s])&&!VI(t[s])?it(e)||Um(n[s])?n[s]=Array.isArray(t[s])?pd(t[s],[]):{...pd(t[s])}:MI(t[s],Bt(e)?{}:e[s],n[s]):n[s]=!es(t[s],e[s]);return n}var wo=(t,e)=>MI(t,e,pd(e)),LI=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>it(t)?t:e?t===""?NaN:t&&+t:n&&Yn(t)?new Date(t):r?r(t):t;function gf(t){const e=t.ref;return Wg(e)?e.files:qg(e)?DI(t.refs).value:OI(e)?[...e.selectedOptions].map(({value:n})=>n):lu(e)?NI(t.refs).value:LI(it(e.value)?t.ref.value:e.value,t)}var H2=(t,e,n,r)=>{const s={};for(const i of t){const a=J(e,i);a&&Ne(s,i,a._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Eo=t=>it(t)?t:md(t)?t.source:rt(t)?md(t.value)?t.value.source:t.value:t;const Rw="AsyncFunction";var K2=t=>!!t&&!!t.validate&&!!(Hn(t.validate)&&t.validate.constructor.name===Rw||rt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Rw)),G2=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function Nw(t,e,n){const r=J(t,n);if(r||zg(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),a=J(e,i),o=J(t,i);if(a&&!Array.isArray(a)&&n!==i)return{name:n};if(o&&o.type)return{name:i,error:o};s.pop()}return{name:n}}var Q2=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,Y2=(t,e)=>!ch(J(t,e)).length&&ut(t,e);const Z2={mode:Rn.onSubmit,reValidateMode:Rn.onChange,shouldFocusError:!0};function X2(t={}){let e={...Z2,...t},n={submitCount:0,isDirty:!1,isLoading:Hn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=rt(e.defaultValues)||rt(e.values)?pn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:pn(s),a={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,c=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={values:mf(),array:mf(),state:mf()},g=Iw(e.mode),w=Iw(e.reValidateMode),A=e.criteriaMode===Rn.all,C=b=>V=>{clearTimeout(c),c=setTimeout(b,V)},N=async b=>{if(!e.disabled&&(h.isValid||b)){const V=e.resolver?Kt((await v()).errors):await S(r,!0);V!==n.isValid&&p.state.next({isValid:V})}},T=(b,V)=>{!e.disabled&&(h.isValidating||h.validatingFields)&&((b||Array.from(o.mount)).forEach(j=>{j&&(V?Ne(n.validatingFields,j,V):ut(n.validatingFields,j))}),p.state.next({validatingFields:n.validatingFields,isValidating:!Kt(n.validatingFields)}))},_=(b,V=[],j,Y,K=!0,q=!0)=>{if(Y&&j&&!e.disabled){if(a.action=!0,q&&Array.isArray(J(r,b))){const re=j(J(r,b),Y.argA,Y.argB);K&&Ne(r,b,re)}if(q&&Array.isArray(J(n.errors,b))){const re=j(J(n.errors,b),Y.argA,Y.argB);K&&Ne(n.errors,b,re),Y2(n.errors,b)}if(h.touchedFields&&q&&Array.isArray(J(n.touchedFields,b))){const re=j(J(n.touchedFields,b),Y.argA,Y.argB);K&&Ne(n.touchedFields,b,re)}h.dirtyFields&&(n.dirtyFields=wo(s,i)),p.state.next({name:b,isDirty:P(b,V),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ne(i,b,V)},E=(b,V)=>{Ne(n.errors,b,V),p.state.next({errors:n.errors})},O=b=>{n.errors=b,p.state.next({errors:n.errors,isValid:!1})},U=(b,V,j,Y)=>{const K=J(r,b);if(K){const q=J(i,b,it(j)?J(s,b):j);it(q)||Y&&Y.defaultChecked||V?Ne(i,b,V?q:gf(K._f)):Be(b,q),a.mount&&N()}},$=(b,V,j,Y,K)=>{let q=!1,re=!1;const me={name:b};if(!e.disabled){const _e=!!(J(r,b)&&J(r,b)._f&&J(r,b)._f.disabled);if(!j||Y){h.isDirty&&(re=n.isDirty,n.isDirty=me.isDirty=P(),q=re!==me.isDirty);const we=_e||es(J(s,b),V);re=!!(!_e&&J(n.dirtyFields,b)),we||_e?ut(n.dirtyFields,b):Ne(n.dirtyFields,b,!0),me.dirtyFields=n.dirtyFields,q=q||h.dirtyFields&&re!==!we}if(j){const we=J(n.touchedFields,b);we||(Ne(n.touchedFields,b,j),me.touchedFields=n.touchedFields,q=q||h.touchedFields&&we!==j)}q&&K&&p.state.next(me)}return q?me:{}},k=(b,V,j,Y)=>{const K=J(n.errors,b),q=h.isValid&&Wn(V)&&n.isValid!==V;if(e.delayError&&j?(u=C(()=>E(b,j)),u(e.delayError)):(clearTimeout(c),u=null,j?Ne(n.errors,b,j):ut(n.errors,b)),(j?!es(K,j):K)||!Kt(Y)||q){const re={...Y,...q&&Wn(V)?{isValid:V}:{},errors:n.errors,name:b};n={...n,...re},p.state.next(re)}},v=async b=>{T(b,!0);const V=await e.resolver(i,e.context,H2(b||o.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return T(b),V},I=async b=>{const{errors:V}=await v(b);if(b)for(const j of b){const Y=J(V,j);Y?Ne(n.errors,j,Y):ut(n.errors,j)}else n.errors=V;return V},S=async(b,V,j={valid:!0})=>{for(const Y in b){const K=b[Y];if(K){const{_f:q,...re}=K;if(q){const me=o.array.has(q.name),_e=K._f&&K2(K._f);_e&&h.validatingFields&&T([Y],!0);const we=await Pw(K,o.disabled,i,A,e.shouldUseNativeValidation&&!V,me);if(_e&&h.validatingFields&&T([Y]),we[q.name]&&(j.valid=!1,V))break;!V&&(J(we,q.name)?me?$2(n.errors,we,q.name):Ne(n.errors,q.name,we[q.name]):ut(n.errors,q.name))}!Kt(re)&&await S(re,V,j)}}return j.valid},R=()=>{for(const b of o.unMount){const V=J(r,b);V&&(V._f.refs?V._f.refs.every(j=>!pf(j)):!pf(V._f.ref))&&Jt(b)}o.unMount=new Set},P=(b,V)=>!e.disabled&&(b&&V&&Ne(i,b,V),!es(Ve(),s)),x=(b,V,j)=>B2(b,o,{...a.mount?i:it(V)?s:Yn(b)?{[b]:V}:V},j,V),ke=b=>ch(J(a.mount?i:s,b,e.shouldUnregister?J(s,b,[]):[])),Be=(b,V,j={})=>{const Y=J(r,b);let K=V;if(Y){const q=Y._f;q&&(!q.disabled&&Ne(i,b,LI(V,q)),K=fd(q.ref)&&Bt(V)?"":V,OI(q.ref)?[...q.ref.options].forEach(re=>re.selected=K.includes(re.value)):q.refs?lu(q.ref)?q.refs.length>1?q.refs.forEach(re=>(!re.defaultChecked||!re.disabled)&&(re.checked=Array.isArray(K)?!!K.find(me=>me===re.value):K===re.value)):q.refs[0]&&(q.refs[0].checked=!!K):q.refs.forEach(re=>re.checked=re.value===K):Wg(q.ref)?q.ref.value="":(q.ref.value=K,q.ref.type||p.values.next({name:b,values:{...i}})))}(j.shouldDirty||j.shouldTouch)&&$(b,K,j.shouldTouch,j.shouldDirty,!0),j.shouldValidate&&de(b)},yt=(b,V,j)=>{for(const Y in V){const K=V[Y],q=`${b}.${Y}`,re=J(r,q);(o.array.has(b)||rt(K)||re&&!re._f)&&!Xs(K)?yt(q,K,j):Be(q,K,j)}},Ye=(b,V,j={})=>{const Y=J(r,b),K=o.array.has(b),q=pn(V);Ne(i,b,q),K?(p.array.next({name:b,values:{...i}}),(h.isDirty||h.dirtyFields)&&j.shouldDirty&&p.state.next({name:b,dirtyFields:wo(s,i),isDirty:P(b,q)})):Y&&!Y._f&&!Bt(q)?yt(b,q,j):Be(b,q,j),kw(b,o)&&p.state.next({...n}),p.values.next({name:a.mount?b:void 0,values:{...i}})},G=async b=>{a.mount=!0;const V=b.target;let j=V.name,Y=!0;const K=J(r,j),q=()=>V.type?gf(K._f):O2(b),re=me=>{Y=Number.isNaN(me)||Xs(me)&&isNaN(me.getTime())||es(me,J(i,j,me))};if(K){let me,_e;const we=q(),en=b.type===Tw.BLUR||b.type===Tw.FOCUS_OUT,hu=!G2(K._f)&&!e.resolver&&!J(n.errors,j)&&!K._f.deps||Q2(en,J(n.touchedFields,j),n.isSubmitted,w,g),Si=kw(j,o,en);Ne(i,j,we),en?(K._f.onBlur&&K._f.onBlur(b),u&&u(0)):K._f.onChange&&K._f.onChange(b);const Ya=$(j,we,en,!1),js=!Kt(Ya)||Si;if(!en&&p.values.next({name:j,type:b.type,values:{...i}}),hu)return h.isValid&&(e.mode==="onBlur"&&en?N():en||N()),js&&p.state.next({name:j,...Si?{}:Ya});if(!en&&Si&&p.state.next({...n}),e.resolver){const{errors:Za}=await v([j]);if(re(we),Y){const fu=Nw(n.errors,r,j),Ai=Nw(Za,r,fu.name||j);me=Ai.error,j=Ai.name,_e=Kt(Za)}}else T([j],!0),me=(await Pw(K,o.disabled,i,A,e.shouldUseNativeValidation))[j],T([j]),re(we),Y&&(me?_e=!1:h.isValid&&(_e=await S(r,!0)));Y&&(K._f.deps&&de(K._f.deps),k(j,_e,me,Ya))}},ie=(b,V)=>{if(J(n.errors,V)&&b.focus)return b.focus(),1},de=async(b,V={})=>{let j,Y;const K=vc(b);if(e.resolver){const q=await I(it(b)?b:K);j=Kt(q),Y=b?!K.some(re=>J(q,re)):j}else b?(Y=(await Promise.all(K.map(async q=>{const re=J(r,q);return await S(re&&re._f?{[q]:re}:re)}))).every(Boolean),!(!Y&&!n.isValid)&&N()):Y=j=await S(r);return p.state.next({...!Yn(b)||h.isValid&&j!==n.isValid?{}:{name:b},...e.resolver||!b?{isValid:j}:{},errors:n.errors}),V.shouldFocus&&!Y&&Go(r,ie,b?K:o.mount),Y},Ve=b=>{const V={...a.mount?i:s};return it(b)?V:Yn(b)?J(V,b):b.map(j=>J(V,j))},Ce=(b,V)=>({invalid:!!J((V||n).errors,b),isDirty:!!J((V||n).dirtyFields,b),error:J((V||n).errors,b),isValidating:!!J(n.validatingFields,b),isTouched:!!J((V||n).touchedFields,b)}),ze=b=>{b&&vc(b).forEach(V=>ut(n.errors,V)),p.state.next({errors:b?n.errors:{}})},fn=(b,V,j)=>{const Y=(J(r,b,{_f:{}})._f||{}).ref,K=J(n.errors,b)||{},{ref:q,message:re,type:me,..._e}=K;Ne(n.errors,b,{..._e,...V,ref:Y}),p.state.next({name:b,errors:n.errors,isValid:!1}),j&&j.shouldFocus&&Y&&Y.focus&&Y.focus()},In=(b,V)=>Hn(b)?p.values.subscribe({next:j=>b(x(void 0,V),j)}):x(b,V,!0),Jt=(b,V={})=>{for(const j of b?vc(b):o.mount)o.mount.delete(j),o.array.delete(j),V.keepValue||(ut(r,j),ut(i,j)),!V.keepError&&ut(n.errors,j),!V.keepDirty&&ut(n.dirtyFields,j),!V.keepTouched&&ut(n.touchedFields,j),!V.keepIsValidating&&ut(n.validatingFields,j),!e.shouldUnregister&&!V.keepDefaultValue&&ut(s,j);p.values.next({values:{...i}}),p.state.next({...n,...V.keepDirty?{isDirty:P()}:{}}),!V.keepIsValid&&N()},mn=({disabled:b,name:V,field:j,fields:Y})=>{(Wn(b)&&a.mount||b||o.disabled.has(V))&&(b?o.disabled.add(V):o.disabled.delete(V),$(V,gf(j?j._f:J(Y,V)._f),!1,!1,!0))},Ga=(b,V={})=>{let j=J(r,b);const Y=Wn(V.disabled)||Wn(e.disabled);return Ne(r,b,{...j||{},_f:{...j&&j._f?j._f:{ref:{name:b}},name:b,mount:!0,...V}}),o.mount.add(b),j?mn({field:j,disabled:Wn(V.disabled)?V.disabled:e.disabled,name:b}):U(b,!0,V.value),{...Y?{disabled:V.disabled||e.disabled}:{},...e.progressive?{required:!!V.required,min:Eo(V.min),max:Eo(V.max),minLength:Eo(V.minLength),maxLength:Eo(V.maxLength),pattern:Eo(V.pattern)}:{},name:b,onChange:G,onBlur:G,ref:K=>{if(K){Ga(b,V),j=J(r,b);const q=it(K.value)&&K.querySelectorAll&&K.querySelectorAll("input,select,textarea")[0]||K,re=q2(q),me=j._f.refs||[];if(re?me.find(_e=>_e===q):q===j._f.ref)return;Ne(r,b,{_f:{...j._f,...re?{refs:[...me.filter(pf),q,...Array.isArray(J(s,b))?[{}]:[]],ref:{type:q.type,name:b}}:{ref:q}}}),U(b,!1,void 0,q)}else j=J(r,b,{}),j._f&&(j._f.mount=!1),(e.shouldUnregister||V.shouldUnregister)&&!(M2(o.array,b)&&a.action)&&o.unMount.add(b)}}},cu=()=>e.shouldFocusError&&Go(r,ie,o.mount),Ti=b=>{Wn(b)&&(p.state.next({disabled:b}),Go(r,(V,j)=>{const Y=J(r,j);Y&&(V.disabled=Y._f.disabled||b,Array.isArray(Y._f.refs)&&Y._f.refs.forEach(K=>{K.disabled=Y._f.disabled||b}))},0,!1))},Ls=(b,V)=>async j=>{let Y;j&&(j.preventDefault&&j.preventDefault(),j.persist&&j.persist());let K=pn(i);if(o.disabled.size)for(const q of o.disabled)Ne(K,q,void 0);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:q,values:re}=await v();n.errors=q,K=re}else await S(r);if(ut(n.errors,"root"),Kt(n.errors)){p.state.next({errors:{}});try{await b(K,j)}catch(q){Y=q}}else V&&await V({...n.errors},j),cu(),setTimeout(cu);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Kt(n.errors)&&!Y,submitCount:n.submitCount+1,errors:n.errors}),Y)throw Y},Qa=(b,V={})=>{J(r,b)&&(it(V.defaultValue)?Ye(b,pn(J(s,b))):(Ye(b,V.defaultValue),Ne(s,b,pn(V.defaultValue))),V.keepTouched||ut(n.touchedFields,b),V.keepDirty||(ut(n.dirtyFields,b),n.isDirty=V.defaultValue?P(b,pn(J(s,b))):P()),V.keepError||(ut(n.errors,b),h.isValid&&N()),p.state.next({...n}))},Ii=(b,V={})=>{const j=b?pn(b):s,Y=pn(j),K=Kt(b),q=K?s:Y;if(V.keepDefaultValues||(s=j),!V.keepValues){if(V.keepDirtyValues){const re=new Set([...o.mount,...Object.keys(wo(s,i))]);for(const me of Array.from(re))J(n.dirtyFields,me)?Ne(q,me,J(i,me)):Ye(me,J(q,me))}else{if($g&&it(b))for(const re of o.mount){const me=J(r,re);if(me&&me._f){const _e=Array.isArray(me._f.refs)?me._f.refs[0]:me._f.ref;if(fd(_e)){const we=_e.closest("form");if(we){we.reset();break}}}}r={}}i=e.shouldUnregister?V.keepDefaultValues?pn(s):{}:pn(q),p.array.next({values:{...q}}),p.values.next({values:{...q}})}o={mount:V.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!h.isValid||!!V.keepIsValid||!!V.keepDirtyValues,a.watch=!!e.shouldUnregister,p.state.next({submitCount:V.keepSubmitCount?n.submitCount:0,isDirty:K?!1:V.keepDirty?n.isDirty:!!(V.keepDefaultValues&&!es(b,s)),isSubmitted:V.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:K?{}:V.keepDirtyValues?V.keepDefaultValues&&i?wo(s,i):n.dirtyFields:V.keepDefaultValues&&b?wo(s,b):V.keepDirty?n.dirtyFields:{},touchedFields:V.keepTouched?n.touchedFields:{},errors:V.keepErrors?n.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ki=(b,V)=>Ii(Hn(b)?b(i):b,V);return{control:{register:Ga,unregister:Jt,getFieldState:Ce,handleSubmit:Ls,setError:fn,_executeSchema:v,_getWatch:x,_getDirty:P,_updateValid:N,_removeUnmounted:R,_updateFieldArray:_,_updateDisabledField:mn,_getFieldArray:ke,_reset:Ii,_resetDefaultValues:()=>Hn(e.defaultValues)&&e.defaultValues().then(b=>{ki(b,e.resetOptions),p.state.next({isLoading:!1})}),_updateFormState:b=>{n={...n,...b}},_disableForm:Ti,_subjects:p,_proxyFormState:h,_setErrors:O,get _fields(){return r},get _formValues(){return i},get _state(){return a},set _state(b){a=b},get _defaultValues(){return s},get _names(){return o},set _names(b){o=b},get _formState(){return n},set _formState(b){n=b},get _options(){return e},set _options(b){e={...e,...b}}},trigger:de,register:Ga,handleSubmit:Ls,watch:In,setValue:Ye,getValues:Ve,reset:ki,resetField:Qa,clearErrors:ze,unregister:Jt,setError:fn,setFocus:(b,V={})=>{const j=J(r,b),Y=j&&j._f;if(Y){const K=Y.refs?Y.refs[0]:Y.ref;K.focus&&(K.focus(),V.shouldSelect&&Hn(K.select)&&K.select())}},getFieldState:Ce}}function Hg(t={}){const e=Ft.useRef(void 0),n=Ft.useRef(void 0),[r,s]=Ft.useState({isDirty:!1,isValidating:!1,isLoading:Hn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Hn(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...X2(t),formState:r});const i=e.current.control;return i._options=t,U2({subject:i._subjects.state,next:a=>{F2(a,i._proxyFormState,i._updateFormState)&&s({...i._formState})}}),Ft.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Ft.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==r.isDirty&&i._subjects.state.next({isDirty:a})}},[i,r.isDirty]),Ft.useEffect(()=>{t.values&&!es(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(a=>({...a}))):i._resetDefaultValues()},[t.values,i]),Ft.useEffect(()=>{t.errors&&i._setErrors(t.errors)},[t.errors,i]),Ft.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),Ft.useEffect(()=>{t.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[t.shouldUnregister,i]),e.current.formState=j2(r,i),e.current}const Dw=(t,e,n)=>{if(t&&"reportValidity"in t){const r=J(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},jI=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?Dw(r.ref,n,t):r.refs&&r.refs.forEach(s=>Dw(s,n,t))}},J2=(t,e)=>{e.shouldUseNativeValidation&&jI(t,e);const n={};for(const r in t){const s=J(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(eV(e.names||Object.keys(t),r)){const a=Object.assign({},J(n,r));Ne(a,"root",i),Ne(n,r,a)}else Ne(n,r,i)}return n},eV=(t,e)=>t.some(n=>n.startsWith(e+"."));var tV=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,a=r.path.join(".");if(!n[a])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];n[a]={message:o.message,type:o.code}}else n[a]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(p){return t.push(p)})}),e){var u=n[a].types,c=u&&u[r.code];n[a]=RI(a,e,n,s,c?[].concat(c,r.message):r.message)}t.shift()}return n},Kg=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(a,o){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&jI({},i),{errors:{},values:n.raw?r:c}})}catch(c){return o(c)}return u&&u.then?u.then(void 0,o):u}(0,function(a){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(a))return{values:{},errors:J2(tV(a.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw a}))}catch(a){return Promise.reject(a)}}},xe;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(xe||(xe={}));var Bm;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Bm||(Bm={}));const X=xe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_r=t=>{switch(typeof t){case"undefined":return X.undefined;case"string":return X.string;case"number":return isNaN(t)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(t)?X.array:t===null?X.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?X.promise:typeof Map<"u"&&t instanceof Map?X.map:typeof Set<"u"&&t instanceof Set?X.set:typeof Date<"u"&&t instanceof Date?X.date:X.object;default:return X.unknown}},z=xe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),nV=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ln extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,u=0;for(;u<a.path.length;){const c=a.path[u];u===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(a))):o[c]=o[c]||{_errors:[]},o=o[c],u++}}};return s(this),r}static assert(e){if(!(e instanceof ln))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,xe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ln.create=t=>new ln(t);const Ca=(t,e)=>{let n;switch(t.code){case z.invalid_type:t.received===X.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case z.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,xe.jsonStringifyReplacer)}`;break;case z.unrecognized_keys:n=`Unrecognized key(s) in object: ${xe.joinValues(t.keys,", ")}`;break;case z.invalid_union:n="Invalid input";break;case z.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${xe.joinValues(t.options)}`;break;case z.invalid_enum_value:n=`Invalid enum value. Expected ${xe.joinValues(t.options)}, received '${t.received}'`;break;case z.invalid_arguments:n="Invalid function arguments";break;case z.invalid_return_type:n="Invalid function return type";break;case z.invalid_date:n="Invalid date";break;case z.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:xe.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case z.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case z.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case z.custom:n="Invalid input";break;case z.invalid_intersection_types:n="Intersection results could not be merged";break;case z.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case z.not_finite:n="Number must be finite";break;default:n=e.defaultError,xe.assertNever(t)}return{message:n}};let FI=Ca;function rV(t){FI=t}function gd(){return FI}const yd=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let o="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)o=c(a,{data:e,defaultError:o}).message;return{...s,path:i,message:o}},sV=[];function Q(t,e){const n=gd(),r=yd({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ca?void 0:Ca].filter(s=>!!s)});t.common.issues.push(r)}class Lt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return ce;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,a=await s.value;r.push({key:i,value:a})}return Lt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return ce;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:e.value,value:r}}}const ce=Object.freeze({status:"aborted"}),Ji=t=>({status:"dirty",value:t}),Wt=t=>({status:"valid",value:t}),$m=t=>t.status==="aborted",zm=t=>t.status==="dirty",pi=t=>t.status==="valid",Tl=t=>typeof Promise<"u"&&t instanceof Promise;function _d(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function UI(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var ne;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ne||(ne={}));var Ro,No;class ar{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ow=(t,e)=>{if(pi(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ln(t.common.issues);return this._error=n,this._error}}};function fe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>{var u,c;const{message:h}=t;return a.code==="invalid_enum_value"?{message:h??o.defaultError}:typeof o.data>"u"?{message:(u=h??r)!==null&&u!==void 0?u:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(c=h??n)!==null&&c!==void 0?c:o.defaultError}},description:s}}class pe{get description(){return this._def.description}_getType(e){return _r(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:_r(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Lt,ctx:{common:e.parent.common,data:e.data,parsedType:_r(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Tl(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_r(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Ow(s,i)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_r(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return pi(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>pi(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_r(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Tl(s)?s:Promise.resolve(s));return Ow(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const a=e(s),o=()=>i.addIssue({code:z.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Un({schema:this,typeName:oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return sr.create(this,this._def)}nullable(){return As.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Mn.create(this)}promise(){return Pa.create(this,this._def)}or(e){return Al.create([this,e],this._def)}and(e){return Cl.create(this,e,this._def)}transform(e){return new Un({...fe(this._def),schema:this,typeName:oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Dl({...fe(this._def),innerType:this,defaultValue:n,typeName:oe.ZodDefault})}brand(){return new Gg({typeName:oe.ZodBranded,type:this,...fe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Ol({...fe(this._def),innerType:this,catchValue:n,typeName:oe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return uu.create(this,e)}readonly(){return Vl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const iV=/^c[^\s-]{8,}$/i,aV=/^[0-9a-z]+$/,oV=/^[0-9A-HJKMNP-TV-Z]{26}$/i,lV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,uV=/^[a-z0-9_-]{21}$/i,cV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,dV=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hV=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,fV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let yf;const mV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,gV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,yV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,_V=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,vV=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,BI="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",wV=new RegExp(`^${BI}$`);function $I(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function EV(t){return new RegExp(`^${$I(t)}$`)}function zI(t){let e=`${BI}T${$I(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function xV(t,e){return!!((e==="v4"||!e)&&mV.test(t)||(e==="v6"||!e)&&gV.test(t))}function TV(t,e){if(!cV.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function IV(t,e){return!!((e==="v4"||!e)&&pV.test(t)||(e==="v6"||!e)&&yV.test(t))}class Nn extends pe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==X.string){const i=this._getOrReturnCtx(e);return Q(i,{code:z.invalid_type,expected:X.string,received:i.parsedType}),ce}const r=new Lt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?Q(s,{code:z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&Q(s,{code:z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")hV.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"email",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")yf||(yf=new RegExp(fV,"u")),yf.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"emoji",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")lV.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"uuid",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")uV.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"nanoid",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")iV.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cuid",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")aV.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cuid2",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")oV.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"ulid",code:z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Q(s,{validation:"url",code:z.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"regex",code:z.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Q(s,{code:z.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Q(s,{code:z.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Q(s,{code:z.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?zI(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:z.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?wV.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:z.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?EV(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:z.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?dV.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"duration",code:z.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?xV(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"ip",code:z.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?TV(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"jwt",code:z.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?IV(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cidr",code:z.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?_V.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"base64",code:z.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?vV.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"base64url",code:z.invalid_string,message:i.message}),r.dirty()):xe.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:z.invalid_string,...ne.errToObj(r)})}_addCheck(e){return new Nn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ne.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ne.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ne.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ne.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ne.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ne.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ne.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ne.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ne.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ne.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ne.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ne.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ne.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ne.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ne.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ne.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ne.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ne.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ne.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ne.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ne.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ne.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ne.errToObj(n)})}nonempty(e){return this.min(1,ne.errToObj(e))}trim(){return new Nn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Nn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Nn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Nn.create=t=>{var e;return new Nn({checks:[],typeName:oe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...fe(t)})};function kV(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class Is extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==X.number){const i=this._getOrReturnCtx(e);return Q(i,{code:z.invalid_type,expected:X.number,received:i.parsedType}),ce}let r;const s=new Lt;for(const i of this._def.checks)i.kind==="int"?xe.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Q(r,{code:z.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:z.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:z.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?kV(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Q(r,{code:z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Q(r,{code:z.not_finite,message:i.message}),s.dirty()):xe.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ne.toString(n))}setLimit(e,n,r,s){return new Is({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ne.toString(s)}]})}_addCheck(e){return new Is({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ne.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ne.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ne.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ne.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ne.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&xe.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Is.create=t=>new Is({checks:[],typeName:oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...fe(t)});class ks extends pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==X.bigint)return this._getInvalidInput(e);let r;const s=new Lt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:z.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:z.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):xe.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Q(n,{code:z.invalid_type,expected:X.bigint,received:n.parsedType}),ce}gte(e,n){return this.setLimit("min",e,!0,ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ne.toString(n))}setLimit(e,n,r,s){return new ks({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ne.toString(s)}]})}_addCheck(e){return new ks({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ne.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ks.create=t=>{var e;return new ks({checks:[],typeName:oe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...fe(t)})};class Il extends pe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==X.boolean){const r=this._getOrReturnCtx(e);return Q(r,{code:z.invalid_type,expected:X.boolean,received:r.parsedType}),ce}return Wt(e.data)}}Il.create=t=>new Il({typeName:oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...fe(t)});class gi extends pe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==X.date){const i=this._getOrReturnCtx(e);return Q(i,{code:z.invalid_type,expected:X.date,received:i.parsedType}),ce}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Q(i,{code:z.invalid_date}),ce}const r=new Lt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:z.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:z.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):xe.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new gi({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ne.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ne.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}gi.create=t=>new gi({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:oe.ZodDate,...fe(t)});class vd extends pe{_parse(e){if(this._getType(e)!==X.symbol){const r=this._getOrReturnCtx(e);return Q(r,{code:z.invalid_type,expected:X.symbol,received:r.parsedType}),ce}return Wt(e.data)}}vd.create=t=>new vd({typeName:oe.ZodSymbol,...fe(t)});class kl extends pe{_parse(e){if(this._getType(e)!==X.undefined){const r=this._getOrReturnCtx(e);return Q(r,{code:z.invalid_type,expected:X.undefined,received:r.parsedType}),ce}return Wt(e.data)}}kl.create=t=>new kl({typeName:oe.ZodUndefined,...fe(t)});class Sl extends pe{_parse(e){if(this._getType(e)!==X.null){const r=this._getOrReturnCtx(e);return Q(r,{code:z.invalid_type,expected:X.null,received:r.parsedType}),ce}return Wt(e.data)}}Sl.create=t=>new Sl({typeName:oe.ZodNull,...fe(t)});class ba extends pe{constructor(){super(...arguments),this._any=!0}_parse(e){return Wt(e.data)}}ba.create=t=>new ba({typeName:oe.ZodAny,...fe(t)});class ni extends pe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wt(e.data)}}ni.create=t=>new ni({typeName:oe.ZodUnknown,...fe(t)});class Vr extends pe{_parse(e){const n=this._getOrReturnCtx(e);return Q(n,{code:z.invalid_type,expected:X.never,received:n.parsedType}),ce}}Vr.create=t=>new Vr({typeName:oe.ZodNever,...fe(t)});class wd extends pe{_parse(e){if(this._getType(e)!==X.undefined){const r=this._getOrReturnCtx(e);return Q(r,{code:z.invalid_type,expected:X.void,received:r.parsedType}),ce}return Wt(e.data)}}wd.create=t=>new wd({typeName:oe.ZodVoid,...fe(t)});class Mn extends pe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==X.array)return Q(n,{code:z.invalid_type,expected:X.array,received:n.parsedType}),ce;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(a||o)&&(Q(n,{code:a?z.too_big:z.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Q(n,{code:z.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Q(n,{code:z.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>s.type._parseAsync(new ar(n,a,n.path,o)))).then(a=>Lt.mergeArray(r,a));const i=[...n.data].map((a,o)=>s.type._parseSync(new ar(n,a,n.path,o)));return Lt.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Mn({...this._def,minLength:{value:e,message:ne.toString(n)}})}max(e,n){return new Mn({...this._def,maxLength:{value:e,message:ne.toString(n)}})}length(e,n){return new Mn({...this._def,exactLength:{value:e,message:ne.toString(n)}})}nonempty(e){return this.min(1,e)}}Mn.create=(t,e)=>new Mn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:oe.ZodArray,...fe(e)});function ji(t){if(t instanceof We){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=sr.create(ji(r))}return new We({...t._def,shape:()=>e})}else return t instanceof Mn?new Mn({...t._def,type:ji(t.element)}):t instanceof sr?sr.create(ji(t.unwrap())):t instanceof As?As.create(ji(t.unwrap())):t instanceof or?or.create(t.items.map(e=>ji(e))):t}class We extends pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=xe.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==X.object){const c=this._getOrReturnCtx(e);return Q(c,{code:z.invalid_type,expected:X.object,received:c.parsedType}),ce}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Vr&&this._def.unknownKeys==="strip"))for(const c in s.data)a.includes(c)||o.push(c);const u=[];for(const c of a){const h=i[c],p=s.data[c];u.push({key:{status:"valid",value:c},value:h._parse(new ar(s,p,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Vr){const c=this._def.unknownKeys;if(c==="passthrough")for(const h of o)u.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(c==="strict")o.length>0&&(Q(s,{code:z.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const h of o){const p=s.data[h];u.push({key:{status:"valid",value:h},value:c._parse(new ar(s,p,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const h of u){const p=await h.key,g=await h.value;c.push({key:p,value:g,alwaysSet:h.alwaysSet})}return c}).then(c=>Lt.mergeObjectSync(r,c)):Lt.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return ne.errToObj,new We({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,a,o;const u=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=ne.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new We({...this._def,unknownKeys:"strip"})}passthrough(){return new We({...this._def,unknownKeys:"passthrough"})}extend(e){return new We({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new We({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:oe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new We({...this._def,catchall:e})}pick(e){const n={};return xe.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new We({...this._def,shape:()=>n})}omit(e){const n={};return xe.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new We({...this._def,shape:()=>n})}deepPartial(){return ji(this)}partial(e){const n={};return xe.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new We({...this._def,shape:()=>n})}required(e){const n={};return xe.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof sr;)i=i._def.innerType;n[r]=i}}),new We({...this._def,shape:()=>n})}keyof(){return WI(xe.objectKeys(this.shape))}}We.create=(t,e)=>new We({shape:()=>t,unknownKeys:"strip",catchall:Vr.create(),typeName:oe.ZodObject,...fe(e)});We.strictCreate=(t,e)=>new We({shape:()=>t,unknownKeys:"strict",catchall:Vr.create(),typeName:oe.ZodObject,...fe(e)});We.lazycreate=(t,e)=>new We({shape:t,unknownKeys:"strip",catchall:Vr.create(),typeName:oe.ZodObject,...fe(e)});class Al extends pe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new ln(o.ctx.common.issues));return Q(n,{code:z.invalid_union,unionErrors:a}),ce}if(n.common.async)return Promise.all(r.map(async i=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const u of r){const c={...n,common:{...n.common,issues:[]},parent:null},h=u._parseSync({data:n.data,path:n.path,parent:c});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(u=>new ln(u));return Q(n,{code:z.invalid_union,unionErrors:o}),ce}}get options(){return this._def.options}}Al.create=(t,e)=>new Al({options:t,typeName:oe.ZodUnion,...fe(e)});const mr=t=>t instanceof Pl?mr(t.schema):t instanceof Un?mr(t.innerType()):t instanceof Rl?[t.value]:t instanceof Ss?t.options:t instanceof Nl?xe.objectValues(t.enum):t instanceof Dl?mr(t._def.innerType):t instanceof kl?[void 0]:t instanceof Sl?[null]:t instanceof sr?[void 0,...mr(t.unwrap())]:t instanceof As?[null,...mr(t.unwrap())]:t instanceof Gg||t instanceof Vl?mr(t.unwrap()):t instanceof Ol?mr(t._def.innerType):[];class dh extends pe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==X.object)return Q(n,{code:z.invalid_type,expected:X.object,received:n.parsedType}),ce;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Q(n,{code:z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ce)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const a=mr(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,i)}}return new dh({typeName:oe.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...fe(r)})}}function Wm(t,e){const n=_r(t),r=_r(e);if(t===e)return{valid:!0,data:t};if(n===X.object&&r===X.object){const s=xe.objectKeys(e),i=xe.objectKeys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(const o of i){const u=Wm(t[o],e[o]);if(!u.valid)return{valid:!1};a[o]=u.data}return{valid:!0,data:a}}else if(n===X.array&&r===X.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],o=e[i],u=Wm(a,o);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return n===X.date&&r===X.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Cl extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,a)=>{if($m(i)||$m(a))return ce;const o=Wm(i.value,a.value);return o.valid?((zm(i)||zm(a))&&n.dirty(),{status:n.value,value:o.data}):(Q(r,{code:z.invalid_intersection_types}),ce)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Cl.create=(t,e,n)=>new Cl({left:t,right:e,typeName:oe.ZodIntersection,...fe(n)});class or extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==X.array)return Q(r,{code:z.invalid_type,expected:X.array,received:r.parsedType}),ce;if(r.data.length<this._def.items.length)return Q(r,{code:z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ce;!this._def.rest&&r.data.length>this._def.items.length&&(Q(r,{code:z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((a,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new ar(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>Lt.mergeArray(n,a)):Lt.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new or({...this._def,rest:e})}}or.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new or({items:t,typeName:oe.ZodTuple,rest:null,...fe(e)})};class bl extends pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==X.object)return Q(r,{code:z.invalid_type,expected:X.object,received:r.parsedType}),ce;const s=[],i=this._def.keyType,a=this._def.valueType;for(const o in r.data)s.push({key:i._parse(new ar(r,o,r.path,o)),value:a._parse(new ar(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?Lt.mergeObjectAsync(n,s):Lt.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof pe?new bl({keyType:e,valueType:n,typeName:oe.ZodRecord,...fe(r)}):new bl({keyType:Nn.create(),valueType:e,typeName:oe.ZodRecord,...fe(n)})}}class Ed extends pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==X.map)return Q(r,{code:z.invalid_type,expected:X.map,received:r.parsedType}),ce;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([o,u],c)=>({key:s._parse(new ar(r,o,r.path,[c,"key"])),value:i._parse(new ar(r,u,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of a){const c=await u.key,h=await u.value;if(c.status==="aborted"||h.status==="aborted")return ce;(c.status==="dirty"||h.status==="dirty")&&n.dirty(),o.set(c.value,h.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const u of a){const c=u.key,h=u.value;if(c.status==="aborted"||h.status==="aborted")return ce;(c.status==="dirty"||h.status==="dirty")&&n.dirty(),o.set(c.value,h.value)}return{status:n.value,value:o}}}}Ed.create=(t,e,n)=>new Ed({valueType:e,keyType:t,typeName:oe.ZodMap,...fe(n)});class yi extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==X.set)return Q(r,{code:z.invalid_type,expected:X.set,received:r.parsedType}),ce;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Q(r,{code:z.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Q(r,{code:z.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function a(u){const c=new Set;for(const h of u){if(h.status==="aborted")return ce;h.status==="dirty"&&n.dirty(),c.add(h.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((u,c)=>i._parse(new ar(r,u,r.path,c)));return r.common.async?Promise.all(o).then(u=>a(u)):a(o)}min(e,n){return new yi({...this._def,minSize:{value:e,message:ne.toString(n)}})}max(e,n){return new yi({...this._def,maxSize:{value:e,message:ne.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}yi.create=(t,e)=>new yi({valueType:t,minSize:null,maxSize:null,typeName:oe.ZodSet,...fe(e)});class ca extends pe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==X.function)return Q(n,{code:z.invalid_type,expected:X.function,received:n.parsedType}),ce;function r(o,u){return yd({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gd(),Ca].filter(c=>!!c),issueData:{code:z.invalid_arguments,argumentsError:u}})}function s(o,u){return yd({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,gd(),Ca].filter(c=>!!c),issueData:{code:z.invalid_return_type,returnTypeError:u}})}const i={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof Pa){const o=this;return Wt(async function(...u){const c=new ln([]),h=await o._def.args.parseAsync(u,i).catch(w=>{throw c.addIssue(r(u,w)),c}),p=await Reflect.apply(a,this,h);return await o._def.returns._def.type.parseAsync(p,i).catch(w=>{throw c.addIssue(s(p,w)),c})})}else{const o=this;return Wt(function(...u){const c=o._def.args.safeParse(u,i);if(!c.success)throw new ln([r(u,c.error)]);const h=Reflect.apply(a,this,c.data),p=o._def.returns.safeParse(h,i);if(!p.success)throw new ln([s(h,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ca({...this._def,args:or.create(e).rest(ni.create())})}returns(e){return new ca({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new ca({args:e||or.create([]).rest(ni.create()),returns:n||ni.create(),typeName:oe.ZodFunction,...fe(r)})}}class Pl extends pe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Pl.create=(t,e)=>new Pl({getter:t,typeName:oe.ZodLazy,...fe(e)});class Rl extends pe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Q(n,{received:n.data,code:z.invalid_literal,expected:this._def.value}),ce}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rl.create=(t,e)=>new Rl({value:t,typeName:oe.ZodLiteral,...fe(e)});function WI(t,e){return new Ss({values:t,typeName:oe.ZodEnum,...fe(e)})}class Ss extends pe{constructor(){super(...arguments),Ro.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Q(n,{expected:xe.joinValues(r),received:n.parsedType,code:z.invalid_type}),ce}if(_d(this,Ro)||UI(this,Ro,new Set(this._def.values)),!_d(this,Ro).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Q(n,{received:n.data,code:z.invalid_enum_value,options:r}),ce}return Wt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Ss.create(e,{...this._def,...n})}exclude(e,n=this._def){return Ss.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Ro=new WeakMap;Ss.create=WI;class Nl extends pe{constructor(){super(...arguments),No.set(this,void 0)}_parse(e){const n=xe.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==X.string&&r.parsedType!==X.number){const s=xe.objectValues(n);return Q(r,{expected:xe.joinValues(s),received:r.parsedType,code:z.invalid_type}),ce}if(_d(this,No)||UI(this,No,new Set(xe.getValidEnumValues(this._def.values))),!_d(this,No).has(e.data)){const s=xe.objectValues(n);return Q(r,{received:r.data,code:z.invalid_enum_value,options:s}),ce}return Wt(e.data)}get enum(){return this._def.values}}No=new WeakMap;Nl.create=(t,e)=>new Nl({values:t,typeName:oe.ZodNativeEnum,...fe(e)});class Pa extends pe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==X.promise&&n.common.async===!1)return Q(n,{code:z.invalid_type,expected:X.promise,received:n.parsedType}),ce;const r=n.parsedType===X.promise?n.data:Promise.resolve(n.data);return Wt(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Pa.create=(t,e)=>new Pa({type:t,typeName:oe.ZodPromise,...fe(e)});class Un extends pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{Q(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return ce;const u=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return u.status==="aborted"?ce:u.status==="dirty"||n.value==="dirty"?Ji(u.value):u});{if(n.value==="aborted")return ce;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?ce:o.status==="dirty"||n.value==="dirty"?Ji(o.value):o}}if(s.type==="refinement"){const a=o=>{const u=s.refinement(o,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?ce:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?ce:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!pi(a))return a;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>pi(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:n.value,value:o})):a);xe.assertNever(s)}}Un.create=(t,e,n)=>new Un({schema:t,typeName:oe.ZodEffects,effect:e,...fe(n)});Un.createWithPreprocess=(t,e,n)=>new Un({schema:e,effect:{type:"preprocess",transform:t},typeName:oe.ZodEffects,...fe(n)});class sr extends pe{_parse(e){return this._getType(e)===X.undefined?Wt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}sr.create=(t,e)=>new sr({innerType:t,typeName:oe.ZodOptional,...fe(e)});class As extends pe{_parse(e){return this._getType(e)===X.null?Wt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}As.create=(t,e)=>new As({innerType:t,typeName:oe.ZodNullable,...fe(e)});class Dl extends pe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===X.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Dl.create=(t,e)=>new Dl({innerType:t,typeName:oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fe(e)});class Ol extends pe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Tl(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ln(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ln(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ol.create=(t,e)=>new Ol({innerType:t,typeName:oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fe(e)});class xd extends pe{_parse(e){if(this._getType(e)!==X.nan){const r=this._getOrReturnCtx(e);return Q(r,{code:z.invalid_type,expected:X.nan,received:r.parsedType}),ce}return{status:"valid",value:e.data}}}xd.create=t=>new xd({typeName:oe.ZodNaN,...fe(t)});const SV=Symbol("zod_brand");class Gg extends pe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class uu extends pe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ce:i.status==="dirty"?(n.dirty(),Ji(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ce:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new uu({in:e,out:n,typeName:oe.ZodPipeline})}}class Vl extends pe{_parse(e){const n=this._def.innerType._parse(e),r=s=>(pi(s)&&(s.value=Object.freeze(s.value)),s);return Tl(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Vl.create=(t,e)=>new Vl({innerType:t,typeName:oe.ZodReadonly,...fe(e)});function qI(t,e={},n){return t?ba.create().superRefine((r,s)=>{var i,a;if(!t(r)){const o=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(a=(i=o.fatal)!==null&&i!==void 0?i:n)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...c,fatal:u})}}):ba.create()}const AV={object:We.lazycreate};var oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(oe||(oe={}));const CV=(t,e={message:`Input not instance of ${t.name}`})=>qI(n=>n instanceof t,e),HI=Nn.create,KI=Is.create,bV=xd.create,PV=ks.create,GI=Il.create,RV=gi.create,NV=vd.create,DV=kl.create,OV=Sl.create,VV=ba.create,MV=ni.create,LV=Vr.create,jV=wd.create,FV=Mn.create,UV=We.create,BV=We.strictCreate,$V=Al.create,zV=dh.create,WV=Cl.create,qV=or.create,HV=bl.create,KV=Ed.create,GV=yi.create,QV=ca.create,YV=Pl.create,ZV=Rl.create,XV=Ss.create,JV=Nl.create,eM=Pa.create,Vw=Un.create,tM=sr.create,nM=As.create,rM=Un.createWithPreprocess,sM=uu.create,iM=()=>HI().optional(),aM=()=>KI().optional(),oM=()=>GI().optional(),lM={string:t=>Nn.create({...t,coerce:!0}),number:t=>Is.create({...t,coerce:!0}),boolean:t=>Il.create({...t,coerce:!0}),bigint:t=>ks.create({...t,coerce:!0}),date:t=>gi.create({...t,coerce:!0})},uM=ce;var qe=Object.freeze({__proto__:null,defaultErrorMap:Ca,setErrorMap:rV,getErrorMap:gd,makeIssue:yd,EMPTY_PATH:sV,addIssueToContext:Q,ParseStatus:Lt,INVALID:ce,DIRTY:Ji,OK:Wt,isAborted:$m,isDirty:zm,isValid:pi,isAsync:Tl,get util(){return xe},get objectUtil(){return Bm},ZodParsedType:X,getParsedType:_r,ZodType:pe,datetimeRegex:zI,ZodString:Nn,ZodNumber:Is,ZodBigInt:ks,ZodBoolean:Il,ZodDate:gi,ZodSymbol:vd,ZodUndefined:kl,ZodNull:Sl,ZodAny:ba,ZodUnknown:ni,ZodNever:Vr,ZodVoid:wd,ZodArray:Mn,ZodObject:We,ZodUnion:Al,ZodDiscriminatedUnion:dh,ZodIntersection:Cl,ZodTuple:or,ZodRecord:bl,ZodMap:Ed,ZodSet:yi,ZodFunction:ca,ZodLazy:Pl,ZodLiteral:Rl,ZodEnum:Ss,ZodNativeEnum:Nl,ZodPromise:Pa,ZodEffects:Un,ZodTransformer:Un,ZodOptional:sr,ZodNullable:As,ZodDefault:Dl,ZodCatch:Ol,ZodNaN:xd,BRAND:SV,ZodBranded:Gg,ZodPipeline:uu,ZodReadonly:Vl,custom:qI,Schema:pe,ZodSchema:pe,late:AV,get ZodFirstPartyTypeKind(){return oe},coerce:lM,any:VV,array:FV,bigint:PV,boolean:GI,date:RV,discriminatedUnion:zV,effect:Vw,enum:XV,function:QV,instanceof:CV,intersection:WV,lazy:YV,literal:ZV,map:KV,nan:bV,nativeEnum:JV,never:LV,null:OV,nullable:nM,number:KI,object:UV,oboolean:oM,onumber:aM,optional:tM,ostring:iM,pipeline:sM,preprocess:rM,promise:eM,record:HV,set:GV,strictObject:BV,string:HI,symbol:NV,transformer:Vw,tuple:qV,undefined:DV,union:$V,unknown:MV,void:jV,NEVER:uM,ZodIssueCode:z,quotelessJson:nV,ZodError:ln});const Bn=({message:t})=>f.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 my-4",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx(cC,{className:"h-5 w-5 text-red-400 mr-2"}),f.jsx("p",{className:"text-sm text-red-700",children:t})]})}),cM=qe.object({firstName:qe.string().min(2,"Le prénom doit contenir au moins 2 caractères").optional(),lastName:qe.string().min(2,"Le nom doit contenir au moins 2 caractères").optional(),email:qe.string().email("Email invalide"),password:qe.string().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),QI=({mode:t,onSuccess:e})=>{const[n,r]=M.useState(null),{register:s,handleSubmit:i,formState:{errors:a,isSubmitting:o}}=Hg({resolver:Kg(cM)}),u=async c=>{try{r(null),t==="register"?await Fm.register(c.email,c.password,{firstName:c.firstName||"",lastName:c.lastName||""}):await Fm.login(c.email,c.password),e==null||e()}catch(h){console.error("Auth error:",h),r(h instanceof Error?h.message:"Une erreur est survenue")}};return f.jsxs("form",{onSubmit:i(u),className:"space-y-6",children:[n&&f.jsx(Bn,{message:n}),t==="register"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"Prénom"}),f.jsx("input",{...s("firstName"),type:"text",id:"firstName",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),a.firstName&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.firstName.message})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Nom"}),f.jsx("input",{...s("lastName"),type:"text",id:"lastName",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),a.lastName&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.lastName.message})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),f.jsx("input",{...s("email"),type:"email",id:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),a.email&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email.message})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),f.jsx("input",{...s("password"),type:"password",id:"password",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),a.password&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password.message})]}),f.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-black hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black disabled:bg-gray-400",children:o?"Chargement...":t==="login"?"Se connecter":"S'inscrire"})]})},dM=()=>{const t=Fa();return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connexion à votre compte"}),f.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",f.jsx("button",{onClick:()=>t("/register"),className:"font-medium text-black hover:text-gray-900",children:"créez un compte"})]})]}),f.jsx(QI,{mode:"login",onSuccess:()=>t("/dashboard")})]})})},hM=()=>{const t=Fa();return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Créer un compte"}),f.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",f.jsx("button",{onClick:()=>t("/login"),className:"font-medium text-black hover:text-gray-900",children:"connectez-vous à votre compte"})]})]}),f.jsx(QI,{mode:"register",onSuccess:()=>t("/dashboard")})]})})},cr=()=>f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black"})}),fM=()=>{const{user:t}=Tn(),[e,n]=M.useState(null),[r,s]=M.useState(!0),[i,a]=M.useState(null);return M.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{s(!0),a(null);const u=await Aa.getUserProfile(t.uid);n((u==null?void 0:u.timeBalance)??0)}catch(u){console.error("Error loading time balance:",u),a("Unable to load time balance")}finally{s(!1)}})()},[t==null?void 0:t.uid]),r?f.jsx(cr,{}):i?f.jsx(Bn,{message:i}):e===null?null:f.jsxs("div",{className:"bg-gradient-to-br from-black to-gray-800 text-white rounded-2xl p-8 shadow-lg",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-xl font-medium",children:"Votre solde de temps"}),f.jsx(lr,{className:"w-6 h-6 opacity-80"})]}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("p",{className:"text-6xl font-bold",children:[e,"h"]}),f.jsx("p",{className:"text-lg opacity-80 mt-2",children:"disponibles"})]})]})},mM=()=>{const{user:t}=Tn(),[e,n]=M.useState(null),[r,s]=M.useState(!0),[i,a]=M.useState(null);return M.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{s(!0),a(null);const u=await Aa.getUserProfile(t.uid);u&&n({exchangesCount:u.exchangesCount??0,totalHours:u.exchangedHours??0,rating:u.rating??5})}catch(u){console.error("Error loading stats:",u),a("Unable to load statistics")}finally{s(!1)}})()},[t==null?void 0:t.uid]),r?f.jsx(cr,{}):i?f.jsx(Bn,{message:i}):e?f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Échanges"}),f.jsx(yC,{className:"w-5 h-5 text-gray-400"})]}),f.jsx("p",{className:"text-2xl font-bold",children:e.exchangesCount})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Heures échangées"}),f.jsx(zp,{className:"w-5 h-5 text-gray-400"})]}),f.jsxs("p",{className:"text-2xl font-bold",children:[e.totalHours,"h"]})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Note moyenne"}),f.jsx(fx,{className:"w-5 h-5 text-gray-400"})]}),f.jsxs("p",{className:"text-2xl font-bold",children:[e.rating.toFixed(1),"/5"]})]})]}):null};class hh{async requireAuth(){const e=uh.currentUser;if(!e)throw new Error("Authentication required");return e.uid}handleError(e){if(console.error("Service error:",e),e instanceof ur)switch(e.code){case"permission-denied":throw new Error("You do not have permission to perform this action");case"not-found":throw new Error("The requested resource was not found");case"unauthenticated":throw new Error("Please sign in to continue");case"unavailable":throw new Error("Service temporarily unavailable. Please try again later");case"resource-exhausted":throw new Error("Too many requests. Please try again later");default:throw new Error("An error occurred. Please try again")}throw new Error("An unexpected error occurred")}async withAuth(e){try{return await this.requireAuth(),await e()}catch(n){throw this.handleError(n)}}}class pM extends hh{constructor(){super(...arguments);Sn(this,"COLLECTION","transactions");Sn(this,"USERS_COLLECTION","users")}async transferTime({fromUserId:n,toUserId:r,amount:s,bookingId:i,experienceId:a}){if(!s||s<=0)throw new Error("Invalid amount for time transfer");return this.withAuth(async()=>{try{const o=new Date,u=await au(Vn(Fe,this.COLLECTION),{fromUserId:n,toUserId:r,amount:s,bookingId:i,experienceId:a,type:"booking",status:"pending",createdAt:o,updatedAt:o});return await AI(Fe,async c=>{const h=xn(Fe,this.USERS_COLLECTION,n),p=xn(Fe,this.USERS_COLLECTION,r),[g,w]=await Promise.all([c.get(h),c.get(p)]);if(!g.exists()||!w.exists())throw new Error("One or both users not found");const A=g.data(),C=w.data(),N=A.timeBalance||0,T=C.timeBalance||0;if(N<s)throw new Error(`Not enough balance: ${N}h available, ${s}h needed`);c.update(h,{timeBalance:N-s,exchangedHours:(A.exchangedHours||0)+s,exchangesCount:(A.exchangesCount||0)+1,updatedAt:o}),c.update(p,{timeBalance:T+s,exchangedHours:(C.exchangedHours||0)+s,exchangesCount:(C.exchangesCount||0)+1,updatedAt:o}),c.update(u,{status:"completed",updatedAt:o})}),u.id}catch(o){throw console.error("Transaction error:",o),o instanceof Error?o:new Error("Failed to transfer time")}})}}const gM=new pM;class yM extends hh{constructor(){super(...arguments);Sn(this,"COLLECTION","bookings")}async createBooking(n){return this.withAuth(async()=>{try{const r=new Date;return(await au(Vn(Fe,this.COLLECTION),{...n,status:"pending",createdAt:r,updatedAt:r,timeSlot:{startTime:be.fromDate(n.timeSlot.startTime),endTime:be.fromDate(n.timeSlot.endTime)}})).id}catch(r){throw console.error("Error creating booking:",r),r instanceof Error?r:new Error("Failed to create booking")}})}async confirmBooking(n){return this.withAuth(async()=>{try{await AI(Fe,async r=>{const s=xn(Fe,this.COLLECTION,n),i=await r.get(s);if(!i.exists())throw new Error("Booking not found");const a=i.data();if(a.status!=="pending")throw new Error("This booking cannot be confirmed");await gM.transferTime({fromUserId:a.guestUserId,toUserId:a.hostUserId,amount:a.duration,bookingId:n,experienceId:a.experienceId}),r.update(s,{status:"confirmed",updatedAt:be.fromDate(new Date)})})}catch(r){throw console.error("Error confirming booking:",r),r instanceof Error?r:new Error("Failed to confirm booking")}})}async cancelBooking(n){return this.withAuth(async()=>{try{const r=xn(Fe,this.COLLECTION,n);await Ug(r,{status:"cancelled",updatedAt:be.fromDate(new Date)})}catch(r){throw console.error("Error cancelling booking:",r),r instanceof Error?r:new Error("Failed to cancel booking")}})}async getUserBookings(n){return this.withAuth(async()=>{try{const[r,s]=await Promise.all([this.getBookingsByRole(n,"guestUserId"),this.getBookingsByRole(n,"hostUserId")]);return[...r,...s].sort((i,a)=>a.timeSlot.startTime.getTime()-i.timeSlot.startTime.getTime())}catch(r){throw console.error("Error loading bookings:",r),new Error("Unable to load bookings")}})}async getBookingsByRole(n,r){const s=ka(Vn(Fe,this.COLLECTION),ys(r,"==",n));return(await Sa(s)).docs.map(a=>({id:a.id,...a.data(),timeSlot:{startTime:a.data().timeSlot.startTime.toDate(),endTime:a.data().timeSlot.endTime.toDate()},createdAt:a.data().createdAt.toDate(),updatedAt:a.data().updatedAt.toDate()}))}}const Ec=new yM;function ht(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Cs(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const YI=6048e5,_M=864e5;let vM={};function fh(){return vM}function Ra(t,e){var o,u,c,h;const n=fh(),r=(e==null?void 0:e.weekStartsOn)??((u=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,s=ht(t),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Td(t){return Ra(t,{weekStartsOn:1})}function ZI(t){const e=ht(t),n=e.getFullYear(),r=Cs(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Td(r),i=Cs(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=Td(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function Id(t){const e=ht(t);return e.setHours(0,0,0,0),e}function Mw(t){const e=ht(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function wM(t,e){const n=Id(t),r=Id(e),s=+n-Mw(n),i=+r-Mw(r);return Math.round((s-i)/_M)}function EM(t){const e=ZI(t),n=Cs(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Td(n)}function xM(t){return Cs(t,Date.now())}function kd(t,e){const n=Id(t),r=Id(e);return+n==+r}function TM(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function IM(t){if(!TM(t)&&typeof t!="number")return!1;const e=ht(t);return!isNaN(Number(e))}function kM(t){const e=ht(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function SM(t,e){const n=ht(t.start),r=ht(t.end);let s=+n>+r;const i=s?+n:+r,a=s?r:n;a.setHours(0,0,0,0);let o=1;const u=[];for(;+a<=i;)u.push(ht(a)),a.setDate(a.getDate()+o),a.setHours(0,0,0,0);return s?u.reverse():u}function AM(t){const e=ht(t);return e.setDate(1),e.setHours(0,0,0,0),e}function CM(t){const e=ht(t),n=Cs(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function bM(t,e){const n=e==null?void 0:e.weekStartsOn,r=ht(t),s=r.getDay(),i=(s<n?-7:0)+6-(s-n);return r.setDate(r.getDate()+i),r.setHours(23,59,59,999),r}const PM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},RM=(t,e,n)=>{let r;const s=PM[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function da(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const NM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},DM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},OM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VM={date:da({formats:NM,defaultWidth:"full"}),time:da({formats:DM,defaultWidth:"full"}),dateTime:da({formats:OM,defaultWidth:"full"})},MM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},LM=(t,e,n,r)=>MM[t];function Kn(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const jM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},FM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},UM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},BM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$M={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},WM=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},qM={ordinalNumber:WM,era:Kn({values:jM,defaultWidth:"wide"}),quarter:Kn({values:FM,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Kn({values:UM,defaultWidth:"wide"}),day:Kn({values:BM,defaultWidth:"wide"}),dayPeriod:Kn({values:$M,defaultWidth:"wide",formattingValues:zM,defaultFormattingWidth:"wide"})};function Gn(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(o)?KM(o,p=>p.test(a)):HM(o,p=>p.test(a));let c;c=t.valueCallback?t.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const h=e.slice(a.length);return{value:c,rest:h}}}function HM(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function KM(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function XI(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const GM=/^(\d+)(th|st|nd|rd)?/i,QM=/\d+/i,YM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ZM={any:[/^b/i,/^(a|c)/i]},XM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},JM={any:[/1/i,/2/i,/3/i,/4/i]},eL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aL={ordinalNumber:XI({matchPattern:GM,parsePattern:QM,valueCallback:t=>parseInt(t,10)}),era:Gn({matchPatterns:YM,defaultMatchWidth:"wide",parsePatterns:ZM,defaultParseWidth:"any"}),quarter:Gn({matchPatterns:XM,defaultMatchWidth:"wide",parsePatterns:JM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gn({matchPatterns:eL,defaultMatchWidth:"wide",parsePatterns:tL,defaultParseWidth:"any"}),day:Gn({matchPatterns:nL,defaultMatchWidth:"wide",parsePatterns:rL,defaultParseWidth:"any"}),dayPeriod:Gn({matchPatterns:sL,defaultMatchWidth:"any",parsePatterns:iL,defaultParseWidth:"any"})},oL={code:"en-US",formatDistance:RM,formatLong:VM,formatRelative:LM,localize:qM,match:aL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lL(t){const e=ht(t);return wM(e,CM(e))+1}function uL(t){const e=ht(t),n=+Td(e)-+EM(e);return Math.round(n/YI)+1}function JI(t,e){var h,p,g,w;const n=ht(t),r=n.getFullYear(),s=fh(),i=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??s.firstWeekContainsDate??((w=(g=s.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??1,a=Cs(t,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=Ra(a,e),u=Cs(t,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const c=Ra(u,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function cL(t,e){var o,u,c,h;const n=fh(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,s=JI(t,e),i=Cs(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Ra(i,e)}function dL(t,e){const n=ht(t),r=+Ra(n,e)-+cL(n,e);return Math.round(r/YI)+1}function Pe(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const zr={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Pe(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Pe(n+1,2)},d(t,e){return Pe(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Pe(t.getHours()%12||12,e.length)},H(t,e){return Pe(t.getHours(),e.length)},m(t,e){return Pe(t.getMinutes(),e.length)},s(t,e){return Pe(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Pe(s,e.length)}},Oi={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Lw={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return zr.y(t,e)},Y:function(t,e,n,r){const s=JI(t,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Pe(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Pe(i,e.length)},R:function(t,e){const n=ZI(t);return Pe(n,e.length)},u:function(t,e){const n=t.getFullYear();return Pe(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Pe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Pe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return zr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Pe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=dL(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Pe(s,e.length)},I:function(t,e,n){const r=uL(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Pe(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):zr.d(t,e)},D:function(t,e,n){const r=lL(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Pe(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Pe(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Pe(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Pe(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Oi.noon:r===0?s=Oi.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Oi.evening:r>=12?s=Oi.afternoon:r>=4?s=Oi.morning:s=Oi.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return zr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):zr.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Pe(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Pe(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):zr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):zr.s(t,e)},S:function(t,e){return zr.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Fw(r);case"XXXX":case"XX":return Ks(r);case"XXXXX":case"XXX":default:return Ks(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Fw(r);case"xxxx":case"xx":return Ks(r);case"xxxxx":case"xxx":default:return Ks(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+jw(r,":");case"OOOO":default:return"GMT"+Ks(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+jw(r,":");case"zzzz":default:return"GMT"+Ks(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Pe(r,e.length)},T:function(t,e,n){const r=t.getTime();return Pe(r,e.length)}};function jw(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Pe(i,2)}function Fw(t,e){return t%60===0?(t>0?"-":"+")+Pe(Math.abs(t)/60,2):Ks(t,e)}function Ks(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Pe(Math.trunc(r/60),2),i=Pe(r%60,2);return n+s+e+i}const Uw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ek=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},hL=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Uw(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Uw(r,e)).replace("{{time}}",ek(s,e))},fL={p:ek,P:hL},mL=/^D+$/,pL=/^Y+$/,gL=["D","DD","YY","YYYY"];function yL(t){return mL.test(t)}function _L(t){return pL.test(t)}function vL(t,e,n){const r=wL(t,e,n);if(console.warn(r),gL.includes(t))throw new RangeError(r)}function wL(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const EL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,TL=/^'([^]*?)'?$/,IL=/''/g,kL=/[a-zA-Z]/;function Ir(t,e,n){var h,p,g,w,A,C,N,T;const r=fh(),s=(n==null?void 0:n.locale)??r.locale??oL,i=(n==null?void 0:n.firstWeekContainsDate)??((p=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((w=(g=r.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((C=(A=n==null?void 0:n.locale)==null?void 0:A.options)==null?void 0:C.weekStartsOn)??r.weekStartsOn??((T=(N=r.locale)==null?void 0:N.options)==null?void 0:T.weekStartsOn)??0,o=ht(t);if(!IM(o))throw new RangeError("Invalid time value");let u=e.match(xL).map(_=>{const E=_[0];if(E==="p"||E==="P"){const O=fL[E];return O(_,s.formatLong)}return _}).join("").match(EL).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const E=_[0];if(E==="'")return{isToken:!1,value:SL(_)};if(Lw[E])return{isToken:!0,value:_};if(E.match(kL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:_}});s.localize.preprocessor&&(u=s.localize.preprocessor(o,u));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return u.map(_=>{if(!_.isToken)return _.value;const E=_.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&_L(E)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&yL(E))&&vL(E,e,String(t));const O=Lw[E[0]];return O(o,E,s.localize,c)}).join("")}function SL(t){const e=t.match(TL);return e?e[1].replace(IL,"'"):t}function Bw(t,e){const n=ht(t),r=ht(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function AL(t){return kd(t,xM(t))}const CL={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},bL=(t,e,n)=>{let r;const s=CL[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},PL={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},RL={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},NL={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},DL={date:da({formats:PL,defaultWidth:"full"}),time:da({formats:RL,defaultWidth:"full"}),dateTime:da({formats:NL,defaultWidth:"full"})},OL={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},VL=(t,e,n,r)=>OL[t],ML={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},LL={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},jL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},FL={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},UL={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},BL=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let i;return n===1?i=r&&s.includes(r)?"ère":"er":i="ème",n+i},$L=["MMM","MMMM"],zL={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&$L.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:BL,era:Kn({values:ML,defaultWidth:"wide"}),quarter:Kn({values:LL,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Kn({values:jL,defaultWidth:"wide"}),day:Kn({values:FL,defaultWidth:"wide"}),dayPeriod:Kn({values:UL,defaultWidth:"wide"})},WL=/^(\d+)(ième|ère|ème|er|e)?/i,qL=/\d+/i,HL={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},KL={any:[/^av/i,/^ap/i]},GL={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},QL={any:[/1/i,/2/i,/3/i,/4/i]},YL={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},ZL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},XL={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},JL={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},ej={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},tj={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},nj={ordinalNumber:XI({matchPattern:WL,parsePattern:qL,valueCallback:t=>parseInt(t)}),era:Gn({matchPatterns:HL,defaultMatchWidth:"wide",parsePatterns:KL,defaultParseWidth:"any"}),quarter:Gn({matchPatterns:GL,defaultMatchWidth:"wide",parsePatterns:QL,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gn({matchPatterns:YL,defaultMatchWidth:"wide",parsePatterns:ZL,defaultParseWidth:"any"}),day:Gn({matchPatterns:XL,defaultMatchWidth:"wide",parsePatterns:JL,defaultParseWidth:"any"}),dayPeriod:Gn({matchPatterns:ej,defaultMatchWidth:"any",parsePatterns:tj,defaultParseWidth:"any"})},Na={code:"fr",formatDistance:bL,formatLong:DL,formatRelative:VL,localize:zL,match:nj,options:{weekStartsOn:1,firstWeekContainsDate:4}},rj=({booking:t,onStatusUpdate:e,isProcessing:n,isHost:r})=>{const s=a=>{switch(a){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},i=a=>{switch(a){case"confirmed":return"Confirmé";case"pending":return"En attente";case"cancelled":return"Annulé";default:return a}};return f.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium",children:t.experienceTitle}),f.jsxs("div",{className:"mt-1 space-y-1",children:[f.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[f.jsx(lr,{className:"w-4 h-4 mr-1"}),Ir(t.timeSlot.startTime,"EEEE d MMMM à HH:mm",{locale:Na})]}),!r&&t.hostUser&&f.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[f.jsx(iv,{className:"w-4 h-4 mr-1"}),"Animé par ",t.hostUser.firstName," ",t.hostUser.lastName]}),r&&t.guestUser&&f.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[f.jsx(iv,{className:"w-4 h-4 mr-1"}),"Réservé par ",t.guestUser.firstName," ",t.guestUser.lastName]})]})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[t.status==="pending"&&r&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>e==null?void 0:e(t.id,"confirm"),disabled:n,className:"text-green-600 hover:text-green-800 disabled:opacity-50",title:"Confirmer",children:f.jsx(fC,{className:"w-5 h-5"})}),f.jsx("button",{onClick:()=>e==null?void 0:e(t.id,"cancel"),disabled:n,className:"text-red-600 hover:text-red-800 disabled:opacity-50",title:"Refuser",children:f.jsx(zd,{className:"w-5 h-5"})})]}),f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s(t.status)}`,children:i(t.status)})]})]})})},Zu=({bookings:t,title:e,listType:n,onStatusUpdate:r,isProcessing:s,isHost:i})=>t.length===0?null:f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium mb-4",children:e}),f.jsx("div",{className:"space-y-4",children:t.map(a=>f.jsx(rj,{booking:a,onStatusUpdate:r,isProcessing:s,isHost:i},`${a.id}-${a.status}-${n}`))})]}),sj=()=>{const{user:t}=Tn(),[e,n]=M.useState([]),[r,s]=M.useState(!0),[i,a]=M.useState(null),[o,u]=M.useState(null),c=async()=>{if(t!=null&&t.uid)try{s(!0),a(null);const A=await Ec.getUserBookings(t.uid);n(A)}catch{a("Unable to load your bookings")}finally{s(!1)}};M.useEffect(()=>{t!=null&&t.uid&&c()},[t==null?void 0:t.uid]);const h=async(A,C)=>{try{u(A),a(null);const N=e.find(T=>T.id===A);if(!N)throw new Error("Booking not found");if(N.hostUserId!==(t==null?void 0:t.uid))throw new Error("Only the host can update booking status");C==="confirm"?await Ec.confirmBooking(A,N.experienceId,N.duration):await Ec.cancelBooking(A),await c()}catch(N){console.error("Status update error:",N),a(N instanceof Error?N.message:`Failed to ${C} booking`)}finally{u(null)}};if(r)return f.jsx(cr,{});if(i)return f.jsx(Bn,{message:i});const p=new Date,g=e.filter(A=>A.hostUserId===(t==null?void 0:t.uid)),w=e.filter(A=>A.guestUserId===(t==null?void 0:t.uid));return f.jsxs("div",{className:"space-y-8",children:[g.length>0&&f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Sessions que vous animez"}),f.jsx(Zu,{bookings:g.filter(A=>A.timeSlot.startTime>p&&A.status!=="cancelled"),title:"À venir",listType:"upcoming",onStatusUpdate:h,isProcessing:!!o,isHost:!0}),f.jsx(Zu,{bookings:g.filter(A=>A.timeSlot.startTime<=p||A.status==="cancelled"),title:"Passées",listType:"past",isHost:!0})]}),w.length>0&&f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Sessions auxquelles vous participez"}),f.jsx(Zu,{bookings:w.filter(A=>A.timeSlot.startTime>p&&A.status!=="cancelled"),title:"À venir",listType:"upcoming",isHost:!1}),f.jsx(Zu,{bookings:w.filter(A=>A.timeSlot.startTime<=p||A.status==="cancelled"),title:"Passées",listType:"past",isHost:!1})]}),e.length===0&&f.jsx("div",{className:"text-center py-8 bg-white rounded-lg",children:f.jsx("p",{className:"text-gray-500",children:"Aucune réservation trouvée"})})]})};class Wr extends Error{constructor(e){super(e),this.name="ExperienceValidationError"}}function ij(t){var e,n,r,s;if(!((e=t.title)!=null&&e.trim()))throw new Wr("Title is required");if(!((n=t.description)!=null&&n.trim()))throw new Wr("Description is required");if(t.duration<=0||t.duration>8)throw new Wr("Duration must be between 0 and 8 hours");if(!((r=t.category)!=null&&r.trim()))throw new Wr("Category is required");if(t.minParticipants<1)throw new Wr("Minimum participants must be at least 1");if(t.maxParticipants<t.minParticipants)throw new Wr("Maximum participants must be greater than or equal to minimum participants");if(!((s=t.location)!=null&&s.trim()))throw new Wr("Location is required");try{new URL(t.imageUrl)}catch{throw new Wr("Valid image URL is required")}}class aj{constructor(){Sn(this,"COLLECTION","disponibilites")}async getExperienceAvailabilities(e){const n=await fetch(`/api/availabilities?experienceId=${e}`);if(!n.ok)throw new Error("Erreur lors de la récupération des disponibilités.");return n.json()}async createAvailability(e){try{const{userId:n,experienceId:r,date:s,startTime:i,endTime:a}=e,o={userId:n,experienceId:r,date:be.fromDate(s),startTime:i,endTime:a,status:"active",createdAt:be.fromDate(new Date)};await au(Vn(Fe,this.COLLECTION),o),console.log("✅ Disponibilité créée avec succès")}catch(n){throw console.error("❌ Erreur lors de la création de la disponibilité:",n),new Error("Impossible de créer la disponibilité")}}async deleteAvailability(e){try{const n=xn(Fe,this.COLLECTION,e);await c2(n),console.log("✅ Disponibilité supprimée avec succès")}catch(n){throw console.error("❌ Erreur lors de la suppression:",n),new Error("Impossible de supprimer la disponibilité")}}async updateAvailabilityStatus(e,n){try{const r=xn(Fe,this.COLLECTION,e);await Ug(r,{status:n,updatedAt:be.fromDate(new Date)}),console.log("✅ Statut de la disponibilité mis à jour avec succès")}catch(r){throw console.error("❌ Erreur lors de la mise à jour du statut:",r),new Error("Impossible de mettre à jour le statut de la disponibilité")}}async getUserAvailabilities(e){try{const n=ka(Vn(Fe,this.COLLECTION),ys("userId","==",e)),r=await Sa(n),s=[];return r.forEach(i=>{const a=i.data();s.push({id:i.id,userId:a.userId,experienceId:a.experienceId,date:a.date.toDate(),startTime:a.startTime,endTime:a.endTime,status:a.status,createdAt:a.createdAt.toDate()})}),console.log("✅ Disponibilités récupérées avec succès"),s}catch(n){throw console.error("❌ Erreur lors de la récupération des disponibilités:",n),new Error("Impossible de récupérer les disponibilités")}}}const Da=new aj;let oj=class extends hh{constructor(){super(...arguments);Sn(this,"COLLECTION","experiences")}async createExperience(n){return this.withAuth(async()=>{try{ij(n);const r=await this.requireAuth(),s={...n,userId:r,status:"active",createdAt:new Date};return(await au(Vn(Fe,this.COLLECTION),s)).id}catch(r){throw this.handleError(r)}})}async getAllExperiences(){return this.withAuth(async()=>{try{const n=await this.requireAuth(),r=ka(Vn(Fe,this.COLLECTION),ys("status","==","active"));return(await Sa(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt instanceof be?i.data().createdAt.toDate():new Date(i.data().createdAt)})).filter(i=>i.userId!==n)}catch(n){throw this.handleError(n)}})}async getUserExperiences(n){return this.withAuth(async()=>{try{const r=ka(Vn(Fe,this.COLLECTION),ys("userId","==",n),ys("status","==","active"));return(await Sa(r)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt instanceof be?i.data().createdAt.toDate():new Date(i.data().createdAt)}))}catch(r){throw this.handleError(r)}})}async deleteExperience(n){return this.withAuth(async()=>{try{const r=p2(Fe),s=xn(Fe,this.COLLECTION,n);r.update(s,{status:"deleted",updatedAt:be.fromDate(new Date)}),(await Da.getExperienceAvailabilities(n)).forEach(a=>{const o=xn(Fe,"disponibilites",a.id);r.update(o,{status:"cancelled",updatedAt:be.fromDate(new Date)})}),await r.commit()}catch(r){throw this.handleError(r)}})}};const Ml=new oj,lj=qe.object({title:qe.string().min(3,"Le titre doit contenir au moins 3 caractères"),description:qe.string().min(10,"La description doit contenir au moins 10 caractères"),duration:qe.number().min(.5,"La durée minimum est de 30 minutes").max(8,"La durée maximum est de 8 heures"),category:qe.string().min(1,"Veuillez sélectionner une catégorie"),minParticipants:qe.number().min(1,"Minimum 1 participant"),maxParticipants:qe.number().min(1,"Minimum 1 participant"),location:qe.string().min(1,"Veuillez indiquer un lieu"),imageUrl:qe.string().url("Veuillez fournir une URL d'image valide")}),uj=["Sport","Music","Cooking","Art & Creativity","Technology","Languages","Wellness","Business","Education","Travel","Other"],cj=({onSuccess:t,onClose:e})=>{const{user:n}=Tn(),[r,s]=M.useState(!1),[i,a]=M.useState(null),{register:o,handleSubmit:u,formState:{errors:c}}=Hg({resolver:Kg(lj),defaultValues:{minParticipants:1,maxParticipants:5,duration:1}}),h=async p=>{if(!n){a("You must be logged in to create an experience");return}s(!0),a(null);try{await Ml.createExperience(p),t==null||t(),e()}catch(g){a(g instanceof Error?g.message:"Failed to create experience")}finally{s(!1)}};return f.jsxs("form",{onSubmit:u(h),className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),f.jsx("input",{type:"text",...o("title"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.title&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.title.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),f.jsx("textarea",{...o("description"),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.description&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.description.message})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Duration (hours)"}),f.jsx("input",{type:"number",step:"0.5",...o("duration",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.duration&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.duration.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),f.jsxs("select",{...o("category"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",children:[f.jsx("option",{value:"",children:"Select a category"}),uj.map(p=>f.jsx("option",{value:p,children:p},p))]}),c.category&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.category.message})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Min participants"}),f.jsx("input",{type:"number",...o("minParticipants",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.minParticipants&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.minParticipants.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Max participants"}),f.jsx("input",{type:"number",...o("maxParticipants",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.maxParticipants&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.maxParticipants.message})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),f.jsx("input",{type:"text",...o("location"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.location&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.location.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image URL"}),f.jsx("input",{type:"url",...o("imageUrl"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",placeholder:"https://example.com/image.jpg"}),c.imageUrl&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.imageUrl.message})]}),i&&f.jsx(Bn,{message:i}),f.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[f.jsx("button",{type:"submit",disabled:r,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:ml-3 sm:w-auto sm:text-sm disabled:bg-gray-400",children:r?"Creating...":"Create Experience"}),f.jsx("button",{type:"button",onClick:e,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})},dj=({isOpen:t,onClose:e,onSuccess:n})=>t?f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:f.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:f.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[f.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:f.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:f.jsx(zd,{className:"h-6 w-6"})})}),f.jsx("div",{className:"sm:flex sm:items-start",children:f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Create New Experience"}),f.jsx(cj,{onSuccess:n,onClose:e})]})})]})]})}):null;class hj extends hh{constructor(){super(...arguments);Sn(this,"COLLECTION","experiences")}async createExperience(n){return this.withAuth(async()=>(await au(Vn(Fe,this.COLLECTION),{...n,createdAt:new Date,status:"active"})).id)}async getUserExperiences(n){return this.withAuth(async()=>{try{const r=ka(Vn(Fe,this.COLLECTION),ys("userId","==",n),ys("status","==","active"));return(await Sa(r)).docs.map(i=>({id:i.id,...i.data()}))}catch(r){throw console.error("❌ Error fetching user experiences:",r),new Error("Failed to fetch user experiences. Please try again later.")}})}async getAllExperiences(){return this.withAuth(async()=>{const n=ka(Vn(Fe,this.COLLECTION),ys("status","==","active"));return(await Sa(n)).docs.map(s=>({id:s.id,...s.data()}))})}async deleteExperience(n){return this.withAuth(async()=>{const r=xn(Fe,this.COLLECTION,n);await Ug(r,{status:"deleted",updatedAt:new Date})})}}const fj=new hj,mj=qe.object({title:qe.string().min(3,"Le titre doit contenir au moins 3 caractères"),description:qe.string().min(10,"La description doit contenir au moins 10 caractères"),duration:qe.number().min(.5,"La durée minimum est de 30 minutes").max(8,"La durée maximum est de 8 heures"),category:qe.string().min(1,"Veuillez sélectionner une catégorie"),minParticipants:qe.number().min(1,"Minimum 1 participant"),maxParticipants:qe.number().min(1,"Minimum 1 participant"),location:qe.string().min(1,"Veuillez indiquer un lieu"),imageUrl:qe.string().url("Veuillez fournir une URL d'image valide")}),pj=["Sport","Musique","Cuisine","Art & Créativité","Technologie","Langues","Bien-être","Business","Éducation","Voyage","Autre"],gj=({experience:t,isOpen:e,onClose:n,onUpdate:r})=>{const[s,i]=M.useState(!1),{register:a,handleSubmit:o,formState:{errors:u}}=Hg({resolver:Kg(mj),defaultValues:{title:t.title,description:t.description,duration:t.duration,category:t.category,minParticipants:t.minParticipants,maxParticipants:t.maxParticipants,location:t.location,imageUrl:t.imageUrl}}),c=async h=>{i(!0);try{await fj.updateExperience(t.id,h),r(),n()}catch(p){console.error("Erreur lors de la mise à jour de l'expérience:",p)}finally{i(!1)}};return e?f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:f.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:f.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[f.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:f.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-500",children:f.jsx(zd,{className:"h-6 w-6"})})}),f.jsx("div",{className:"sm:flex sm:items-start",children:f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Modifier l'expérience"}),f.jsxs("form",{onSubmit:o(c),className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Titre"}),f.jsx("input",{type:"text",...a("title"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),u.title&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.title.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),f.jsx("textarea",{...a("description"),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),u.description&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.description.message})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Durée (heures)"}),f.jsx("input",{type:"number",step:"0.5",...a("duration",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),u.duration&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.duration.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),f.jsxs("select",{...a("category"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",children:[f.jsx("option",{value:"",children:"Sélectionner une catégorie"}),pj.map(h=>f.jsx("option",{value:h,children:h},h))]}),u.category&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.category.message})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Min. participants"}),f.jsx("input",{type:"number",...a("minParticipants",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),u.minParticipants&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.minParticipants.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Max. participants"}),f.jsx("input",{type:"number",...a("maxParticipants",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),u.maxParticipants&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.maxParticipants.message})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lieu"}),f.jsx("input",{type:"text",...a("location"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),u.location&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.location.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"URL de l'image"}),f.jsx("input",{type:"url",...a("imageUrl"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),u.imageUrl&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.imageUrl.message})]}),f.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[f.jsx("button",{type:"submit",disabled:s,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:ml-3 sm:w-auto sm:text-sm disabled:bg-gray-400",children:s?"Mise à jour...":"Mettre à jour"}),f.jsx("button",{type:"button",onClick:n,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:mt-0 sm:w-auto sm:text-sm",children:"Annuler"})]})]})]})})]})]})}):null},yj=({experience:t,onEdit:e,onDelete:n,isDeleting:r})=>{const s=async()=>{window.confirm("Are you sure you want to delete this experience?")&&await n(t.id)};return f.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("h3",{className:"font-medium",children:t.title}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:e,className:"text-gray-600 hover:text-black",children:f.jsx(mC,{className:"w-4 h-4"})}),f.jsx("button",{onClick:s,disabled:r,className:`text-gray-600 hover:text-red-600 transition-colors ${r?"opacity-50 cursor-not-allowed":""}`,children:f.jsx(mx,{className:"w-4 h-4"})})]})]}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.description}),f.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[f.jsxs("span",{className:"text-sm font-medium",children:[t.duration,"h"]}),f.jsx("span",{className:"text-sm text-gray-500",children:t.category})]})]})},_j=()=>{const{user:t}=Tn(),[e,n]=M.useState([]),[r,s]=M.useState(!0),[i,a]=M.useState(null),[o,u]=M.useState(null),[c,h]=M.useState(!1),[p,g]=M.useState(null),w=async()=>{if(t!=null&&t.uid)try{s(!0),a(null);const C=await Ml.getUserExperiences(t.uid);n(C)}catch{a("Unable to load your experiences. Please try again.")}finally{s(!1)}};M.useEffect(()=>{t!=null&&t.uid&&w()},[t==null?void 0:t.uid]);const A=async C=>{try{u(C),a(null),await Ml.deleteExperience(C),n(N=>N.filter(T=>T.id!==C))}catch{a("Unable to delete the experience. Please try again.")}finally{u(null)}};return r?f.jsx(cr,{}):f.jsxs("div",{children:[i&&f.jsx(Bn,{message:i}),f.jsx("div",{className:"flex justify-end mb-4",children:f.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center px-4 py-2 bg-black text-white rounded-full hover:bg-gray-900",children:[f.jsx(pC,{className:"w-5 h-5 mr-2"}),"Add Experience"]})}),e.length===0?f.jsx("div",{className:"text-center py-8 bg-white rounded-lg",children:f.jsx("p",{className:"text-gray-500",children:"You haven't created any experiences yet"})}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(C=>f.jsx(yj,{experience:C,onEdit:()=>g(C),onDelete:A,isDeleting:o===C.id},C.id))}),f.jsx(dj,{isOpen:c,onClose:()=>h(!1),onSuccess:()=>{h(!1),w()}}),p&&f.jsx(gj,{experience:p,isOpen:!0,onClose:()=>g(null),onUpdate:()=>{g(null),w()}})]})};function tk(t="/login"){const{user:e,loading:n}=Tn(),r=Fa();return M.useEffect(()=>{!n&&!e&&r(t)},[e,n,r,t]),{user:e,loading:n}}const vj=()=>{const{loading:t}=tk();return t?f.jsx(cr,{}):f.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx("div",{className:"mb-8",children:f.jsx(fM,{})}),f.jsx("div",{className:"mb-8",children:f.jsx(mM,{})}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Mes réservations à venir"}),f.jsx(sj,{})]}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Mes expériences proposées"}),f.jsx(_j,{})]})]})})},nk=({selectedDate:t,onDateSelect:e,availableTimeSlots:n=[]})=>{const[r,s]=Ft.useState(new Date),i=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],a=AM(r),o=kM(a),u=Ra(a,{weekStartsOn:1}),c=bM(o,{weekStartsOn:1}),h=SM({start:u,end:c}),p=w=>n.some(A=>kd(A.date,w)),g=w=>{e&&Bw(w,r)&&e(w)};return f.jsxs("div",{className:"w-full max-w-md mx-auto bg-white rounded-lg shadow",children:[f.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[f.jsx("button",{onClick:()=>s(w=>new Date(w.getFullYear(),w.getMonth()-1)),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:"←"}),f.jsx("h2",{className:"text-lg font-semibold",children:Ir(r,"MMMM yyyy",{locale:Na})}),f.jsx("button",{onClick:()=>s(w=>new Date(w.getFullYear(),w.getMonth()+1)),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:"→"})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:i.map(w=>f.jsx("div",{className:"text-center text-sm font-medium text-gray-600",children:w},w))}),f.jsx("div",{className:"grid grid-cols-7 gap-2",children:h.map((w,A)=>{const C=t&&kd(w,t),N=Bw(w,r),T=w<new Date(new Date().setHours(0,0,0,0)),_=p(w);return f.jsxs("div",{onClick:()=>!T&&N&&g(w),className:`
                  relative aspect-square flex flex-col items-center justify-center rounded-lg
                  ${N&&!T?"cursor-pointer hover:bg-gray-50":"cursor-not-allowed"}
                  ${C?"ring-2 ring-black":""}
                  ${T?"text-gray-300":""}
                  ${N?"":"text-gray-300"}
                `,children:[f.jsx("span",{className:`
                  text-sm font-medium
                  ${AL(w)?"bg-black text-white w-7 h-7 flex items-center justify-center rounded-full":""}
                `,children:Ir(w,"d")}),_&&N&&!T&&f.jsx("div",{className:"mt-1",children:f.jsx(lr,{className:"w-4 h-4 text-green-500"})})]},A)})})]})]})},wj=({experience:t,isOwner:e,onTimeSlotSelect:n})=>{const[r,s]=M.useState(null),[i,a]=M.useState([]),[o,u]=M.useState(null),[c,h]=M.useState(!0);M.useEffect(()=>{t.id&&p()},[t.id]);const p=async()=>{try{h(!0),u(null);const C=await Da.getExperienceAvailabilities(t.id);a(C)}catch{u("Unable to load available time slots")}finally{h(!1)}},g=C=>{n&&n({date:C.date,startTime:C.startTime,endTime:C.endTime})};if(c)return f.jsx(cr,{});if(o)return f.jsx(Bn,{message:o});const w=i.map(C=>({date:C.date,slots:[`${C.startTime}-${C.endTime}`]})),A=i.filter(C=>r&&kd(C.date,r));return i.length===0?f.jsx("div",{className:"text-center py-8 text-gray-500",children:"No available time slots for this experience"}):f.jsxs("div",{className:"space-y-6",children:[f.jsx(nk,{selectedDate:r,onDateSelect:s,availableTimeSlots:w}),r&&A.length>0&&f.jsxs("div",{className:"mt-4",children:[f.jsxs("h3",{className:"text-lg font-medium mb-4",children:["Available slots for ",Ir(r,"EEEE d MMMM yyyy",{locale:Na})]}),f.jsx("div",{className:"space-y-2",children:A.map(C=>f.jsxs("button",{onClick:()=>g(C),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(lr,{className:"w-5 h-5 text-gray-400 mr-2"}),f.jsxs("span",{className:"font-medium",children:[C.startTime," - ",C.endTime]})]}),f.jsx("span",{className:"text-sm text-gray-500",children:"Select"})]},C.id))})]}),r&&A.length===0&&f.jsx("div",{className:"text-center py-4 text-gray-500",children:"No available slots for this date"})]})},rk=({experience:t,isOpen:e,onClose:n})=>{const{user:r,userProfile:s}=Tn(),[i,a]=M.useState(!1),[o,u]=M.useState(null),[c,h]=M.useState(null),[p,g]=M.useState(null),w=N=>{u(null),h(N)},A=!!(c&&!i&&(r==null?void 0:r.uid)!==t.userId&&(s==null?void 0:s.timeBalance)>=t.duration),C=async()=>{if(!(!r||!s||!c))try{a(!0),u(null);const N=new Date(`${c.date.toISOString().split("T")[0]}T${c.startTime}`),T=new Date(`${c.date.toISOString().split("T")[0]}T${c.endTime}`);await Ec.createBooking({experienceId:t.id,experienceTitle:t.title,hostUserId:t.userId,guestUserId:r.uid,timeSlot:{startTime:N,endTime:T},duration:t.duration,status:"pending"}),g("Réservation effectuée avec succès !"),setTimeout(()=>{n()},2e3)}catch(N){console.error("Create booking error:",N),u(N instanceof Error?N.message:"Impossible de finaliser la réservation")}finally{a(!1)}};return e?f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:f.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:f.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[f.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:f.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-500",children:f.jsx(zd,{className:"h-6 w-6"})})}),f.jsx("div",{className:"sm:flex sm:items-start",children:f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[f.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:["Réserver ",t.title]}),f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(lr,{className:"w-5 h-5 text-gray-400 mr-2"}),f.jsxs("span",{className:"text-sm font-medium",children:["Durée : ",t.duration,"h"]})]}),f.jsxs("div",{className:"text-sm text-gray-500",children:["Votre solde : ",(s==null?void 0:s.timeBalance)||0,"h"]})]}),f.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(zp,{className:"w-4 h-4 mr-1"}),t.minParticipants,"-",t.maxParticipants," pers."]}),t.location&&f.jsxs("div",{className:"flex items-center",children:[f.jsx(cx,{className:"w-4 h-4 mr-1"}),t.location]})]})]}),o&&f.jsx(Bn,{message:o}),p&&f.jsx("div",{className:"mb-4 p-4 bg-green-50 text-green-700 rounded-lg",children:p}),f.jsx("div",{className:"mb-6",children:f.jsx(wj,{experience:t,isOwner:(r==null?void 0:r.uid)===t.userId,onTimeSlotSelect:w})}),f.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[f.jsx("button",{type:"button",onClick:C,disabled:!A||i,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:ml-3 sm:w-auto sm:text-sm disabled:bg-gray-400",children:i?"Réservation...":"Confirmer la réservation"}),f.jsx("button",{type:"button",onClick:n,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:mt-0 sm:w-auto sm:text-sm",children:"Annuler"})]})]})})]})]})}):null},Ej=({experience:t})=>{const[e,n]=M.useState(!1),r=()=>{n(!0)};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[f.jsxs("div",{className:"relative h-48 w-full",children:[f.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute top-2 right-2",children:f.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-white/90 text-gray-800",children:t.category})})]}),f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.title}),f.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:t.description}),f.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-4",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(lr,{className:"w-4 h-4 mr-1"}),t.duration,"h"]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx(zp,{className:"w-4 h-4 mr-1"}),t.minParticipants,"-",t.maxParticipants," pers."]}),t.location&&f.jsxs("div",{className:"flex items-center",children:[f.jsx(cx,{className:"w-4 h-4 mr-1"}),t.location]})]}),f.jsx("button",{onClick:r,className:"w-full px-4 py-2 text-sm font-medium text-white bg-black rounded-full hover:bg-gray-900 transition-colors cursor-pointer",children:"Réserver"})]})]}),e&&f.jsx(rk,{experience:t,isOpen:e,onClose:()=>n(!1)})]})},xj=({experiences:t})=>{const[e,n]=M.useState(null);return t.length===0?f.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune expérience trouvée"}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>f.jsx(Ej,{experience:r,onBook:()=>n(r)},r.id))}),e&&f.jsx(rk,{experience:e,isOpen:!!e,onClose:()=>n(null)})]})},Tj=({searchTerm:t,onSearchChange:e,selectedCategory:n,onCategoryChange:r,categories:s})=>f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"relative",children:[f.jsx(dx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),f.jsx("input",{type:"text",placeholder:"Rechercher une expérience...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-black",value:t,onChange:i=>e(i.target.value)})]})}),f.jsxs("select",{className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-black",value:n,onChange:i=>r(i.target.value),children:[f.jsx("option",{value:"",children:"Toutes les catégories"}),s.map(i=>f.jsx("option",{value:i,children:i},i))]})]}),Ij=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState([]),[a,o]=M.useState(!0),[u,c]=M.useState(null),h=async()=>{try{o(!0),c(null);const w=await Ml.getAllExperiences();i(w)}catch(w){c(w instanceof Error?w.message:"Failed to load experiences")}finally{o(!1)}};M.useEffect(()=>{h()},[]);const p=Array.from(new Set(s.map(w=>w.category))),g=s.filter(w=>{const A=w.title.toLowerCase().includes(t.toLowerCase())||w.description.toLowerCase().includes(t.toLowerCase()),C=!n||w.category===n;return A&&C});return a?f.jsx(cr,{}):u?f.jsx(Bn,{message:u}):f.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Discover Experiences"}),f.jsx(Tj,{searchTerm:t,onSearchChange:e,selectedCategory:n,onCategoryChange:r,categories:p}),f.jsx(xj,{experiences:g})]})})},kj=({selectedDate:t,onTimeSelect:e})=>{const[n,r]=M.useState("09:00"),[s,i]=M.useState("10:00"),[a,o]=M.useState(null),u=Array.from({length:24},(h,p)=>`${p.toString().padStart(2,"0")}:00`),c=h=>{if(h.preventDefault(),o(null),n>=s){o("End time must be after start time");return}e({startTime:n,endTime:s})};return t?f.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx(lr,{className:"w-5 h-5 text-gray-400 mr-2"}),f.jsx("h3",{className:"text-lg font-medium",children:"Choisir un créneau"})]}),f.jsxs("form",{onSubmit:c,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Début"}),f.jsx("select",{value:n,onChange:h=>{r(h.target.value),o(null)},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",children:u.map(h=>f.jsx("option",{value:h,children:h},h))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fin"}),f.jsx("select",{value:s,onChange:h=>{i(h.target.value),o(null)},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",children:u.map(h=>f.jsx("option",{value:h,disabled:h<=n,children:h},h))})]})]}),a&&f.jsx("p",{className:"text-sm text-red-600",children:a}),f.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-black text-white rounded-full hover:bg-gray-900",children:"Ajouter la disponibilité"})]})]}):null},Sj=()=>{const{user:t}=Tn(),[e,n]=M.useState(null),[r,s]=M.useState([]),[i,a]=M.useState(!0),[o,u]=M.useState([]),[c,h]=M.useState(""),[p,g]=M.useState(null),[w,A]=M.useState(!1),[C,N]=M.useState(null);M.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{const O=await Ml.getUserExperiences(t.uid);u(O)}catch{g("Impossible de charger vos expériences")}finally{a(!1)}})()},[t==null?void 0:t.uid]);const T=async E=>{if(!e||!(t!=null&&t.uid)||!c){g("Veuillez sélectionner une expérience et une date");return}try{g(null),await Da.createAvailability({userId:t.uid,experienceId:c,date:e,startTime:E.startTime,endTime:E.endTime}),s(O=>{const U=O.findIndex($=>Ir($.date,"yyyy-MM-dd")===Ir(e,"yyyy-MM-dd"));if(U>=0){const $=[...O];return $[U]={date:e,slots:[...O[U].slots,`${E.startTime}-${E.endTime}`]},$}return[...O,{date:e,slots:[`${E.startTime}-${E.endTime}`]}]}),N("Créneau ajouté avec succès"),setTimeout(()=>N(null),3e3)}catch(O){g(O instanceof Error?O.message:"Failed to add time slot")}},_=async()=>{if(!(t!=null&&t.uid)||!c||r.length===0){g("Veuillez sélectionner une expérience et ajouter au moins un créneau");return}try{A(!0),g(null);const E=r.flatMap(({date:O,slots:U})=>U.map($=>{const[k,v]=$.split("-");return{userId:t.uid,experienceId:c,date:O,startTime:k,endTime:v}}));await Promise.all(E.map(O=>Da.createAvailability(O))),N("Vos disponibilités ont été enregistrées avec succès"),setTimeout(()=>N(null),3e3),n(null),s([])}catch(E){g(E instanceof Error?E.message:"Failed to save availabilities")}finally{A(!1)}};return i?f.jsx(cr,{}):f.jsx("div",{className:"space-y-8",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sélectionnez une expérience"}),f.jsxs("select",{value:c,onChange:E=>h(E.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",children:[f.jsx("option",{value:"",children:"Choisir une expérience"}),o.map(E=>f.jsx("option",{value:E.id,children:E.title},E.id))]})]}),f.jsx(nk,{selectedDate:e,onDateSelect:n,availableTimeSlots:r})]}),f.jsxs("div",{className:"space-y-6",children:[p&&f.jsx(Bn,{message:p}),C&&f.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:f.jsx("p",{className:"text-sm text-green-700",children:C})}),f.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[f.jsx("h3",{className:"text-lg font-medium mb-4",children:e?`Créneaux pour le ${Ir(e,"dd MMMM yyyy",{locale:Na})}`:"Sélectionnez une date"}),e&&c&&f.jsx(kj,{selectedDate:e,onTimeSelect:T}),e&&!c&&f.jsx("p",{className:"text-sm text-gray-500",children:"Veuillez d'abord sélectionner une expérience"})]}),r.length>0&&f.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[f.jsx("h3",{className:"text-lg font-medium mb-4",children:"Créneaux sélectionnés"}),f.jsx("div",{className:"space-y-2",children:r.map(({date:E,slots:O})=>f.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[f.jsx("p",{className:"font-medium",children:Ir(E,"EEEE d MMMM",{locale:Na})}),f.jsx("div",{className:"mt-2 space-y-1",children:O.map((U,$)=>f.jsx("p",{className:"text-sm text-gray-600",children:U.replace("-"," à ")},$))})]},E.toISOString()))}),f.jsx("button",{onClick:_,disabled:w,className:"mt-4 w-full px-4 py-2 bg-black text-white rounded-full hover:bg-gray-900 disabled:bg-gray-400 transition-colors",children:w?"Enregistrement...":"Valider mes disponibilités"})]})]})]})})},Aj=()=>{const{user:t}=Tn(),[e,n]=M.useState([]),[r,s]=M.useState(!0),[i,a]=M.useState(null),[o,u]=M.useState(null),c=async()=>{if(t!=null&&t.uid)try{s(!0),a(null);const p=await Da.getUserAvailabilities(t.uid);n(p.sort((g,w)=>g.date.getTime()-w.date.getTime()))}catch(p){console.error("Error loading availabilities:",p),a("Unable to load your availabilities. Please try again.")}finally{s(!1)}};M.useEffect(()=>(c(),window.addEventListener("availability-updated",c),()=>window.removeEventListener("availability-updated",c)),[t==null?void 0:t.uid]);const h=async p=>{try{u(p),a(null),await Da.deleteAvailability(p),n(g=>g.filter(w=>w.id!==p))}catch(g){console.error("Error deleting availability:",g),a("Unable to delete the availability. Please try again.")}finally{u(null)}};return r?f.jsx(cr,{}):i?f.jsx(Bn,{message:i}):f.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[f.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Créneaux disponibles"}),f.jsx("div",{className:"space-y-4",children:e.length===0?f.jsx("p",{className:"text-center text-gray-500 py-4",children:"Aucun créneau disponible"}):e.map(p=>f.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(lr,{className:"w-5 h-5 text-gray-400"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:Ir(p.date,"EEEE d MMMM",{locale:Na})}),f.jsxs("p",{className:"text-sm text-gray-500",children:[p.startTime," - ",p.endTime]})]})]}),f.jsx("button",{onClick:()=>h(p.id),disabled:o===p.id,className:`text-gray-400 hover:text-red-600 transition-colors ${o===p.id?"opacity-50 cursor-not-allowed":""}`,children:f.jsx(mx,{className:"w-5 h-5"})})]},p.id))})]})},Cj=()=>{const{loading:t}=tk();return t?f.jsx(cr,{}):f.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Mes disponibilités"}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsx(Sj,{}),f.jsx(Aj,{})]})]})})},_f=({children:t})=>{const{user:e,loading:n}=Tn();return n?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black"})}):e?f.jsx(f.Fragment,{children:t}):f.jsx(Q1,{to:"/login",replace:!0})},bj=()=>f.jsx(sC,{children:f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx(b2,{}),f.jsx("main",{className:"pt-16",children:f.jsxs(Z1,{children:[f.jsx(qs,{path:"/",element:f.jsx(D2,{})}),f.jsx(qs,{path:"/login",element:f.jsx(dM,{})}),f.jsx(qs,{path:"/register",element:f.jsx(hM,{})}),f.jsx(qs,{path:"/dashboard",element:f.jsx(_f,{children:f.jsx(vj,{})})}),f.jsx(qs,{path:"/experiences",element:f.jsx(_f,{children:f.jsx(Ij,{})})}),f.jsx(qs,{path:"/availability",element:f.jsx(_f,{children:f.jsx(Cj,{})})})]})})]})}),Pj=M.createContext({user:null,userProfile:null,loading:!0,error:null}),Rj=({children:t})=>{const[e,n]=M.useState(null),[r,s]=M.useState(null),[i,a]=M.useState(!0),[o,u]=M.useState(null);M.useEffect(()=>{const h=uh.onAuthStateChanged(async p=>{n(p),a(!0);try{if(p){const g=await Aa.getUserProfile(p.uid);s(g),u(null)}else s(null)}catch(g){console.error("Error loading profile:",g),u("Unable to load user profile")}finally{a(!1)}});return()=>h()},[]);const c={user:e,userProfile:r,loading:i,error:o};return f.jsx(Pj.Provider,{value:c,children:t})},sk=document.getElementById("root");if(!sk)throw new Error("Failed to find the root element");const Nj=ex(sk);Nj.render(f.jsx(Ft.StrictMode,{children:f.jsxs(Rj,{children:[" ",f.jsx(bj,{})]})}));
