(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var C1=Object.defineProperty,I1=(t,e,n)=>e in t?C1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xn=(t,e,n)=>I1(t,typeof e!="symbol"?e+"":e,n);function A1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();function P1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zb={exports:{}},Ed={},Bb={exports:{}},ge={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Mu=Symbol.for("react.element"),O1=Symbol.for("react.portal"),D1=Symbol.for("react.fragment"),j1=Symbol.for("react.strict_mode"),L1=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),R1=Symbol.for("react.context"),F1=Symbol.for("react.forward_ref"),U1=Symbol.for("react.suspense"),V1=Symbol.for("react.memo"),z1=Symbol.for("react.lazy"),Vy=Symbol.iterator;function B1(t){return t===null||typeof t!="object"?null:(t=Vy&&t[Vy]||t["@@iterator"],typeof t=="function"?t:null)}var $b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qb=Object.assign,Wb={};function ja(t,e,n){this.props=t,this.context=e,this.refs=Wb,this.updater=n||$b}ja.prototype.isReactComponent={};ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hb(){}Hb.prototype=ja.prototype;function $p(t,e,n){this.props=t,this.context=e,this.refs=Wb,this.updater=n||$b}var qp=$p.prototype=new Hb;qp.constructor=$p;qb(qp,ja.prototype);qp.isPureReactComponent=!0;var zy=Array.isArray,Kb=Object.prototype.hasOwnProperty,Wp={current:null},Qb={key:!0,ref:!0,__self:!0,__source:!0};function Gb(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Kb.call(e,r)&&!Qb.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Mu,type:t,key:i,ref:a,props:s,_owner:Wp.current}}function $1(t,e){return{$$typeof:Mu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mu}function q1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var By=/\/+/g;function Ih(t,e){return typeof t=="object"&&t!==null&&t.key!=null?q1(""+t.key):e.toString(36)}function Gl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Mu:case O1:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Ih(a,0):r,zy(s)?(n="",t!=null&&(n=t.replace(By,"$&/")+"/"),Gl(s,e,n,"",function(c){return c})):s!=null&&(Hp(s)&&(s=$1(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(By,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",zy(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+Ih(i,o);a+=Gl(i,e,n,l,s)}else if(l=B1(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+Ih(i,o++),a+=Gl(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Tl(t,e,n){if(t==null)return t;var r=[],s=0;return Gl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function W1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},Zl={transition:null},H1={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:Zl,ReactCurrentOwner:Wp};function Zb(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:Tl,forEach:function(t,e,n){Tl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tl(t,function(){e++}),e},toArray:function(t){return Tl(t,function(e){return e})||[]},only:function(t){if(!Hp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=ja;ge.Fragment=D1;ge.Profiler=L1;ge.PureComponent=$p;ge.StrictMode=j1;ge.Suspense=U1;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H1;ge.act=Zb;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qb({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Wp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Kb.call(e,l)&&!Qb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Mu,type:t.type,key:s,ref:i,props:r,_owner:a}};ge.createContext=function(t){return t={$$typeof:R1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:M1,_context:t},t.Consumer=t};ge.createElement=Gb;ge.createFactory=function(t){var e=Gb.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:F1,render:t}};ge.isValidElement=Hp;ge.lazy=function(t){return{$$typeof:z1,_payload:{_status:-1,_result:t},_init:W1}};ge.memo=function(t,e){return{$$typeof:V1,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Zl.transition;Zl.transition={};try{t()}finally{Zl.transition=e}};ge.unstable_act=Zb;ge.useCallback=function(t,e){return Wt.current.useCallback(t,e)};ge.useContext=function(t){return Wt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Wt.current.useEffect(t,e)};ge.useId=function(){return Wt.current.useId()};ge.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Wt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};ge.useRef=function(t){return Wt.current.useRef(t)};ge.useState=function(t){return Wt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Wt.current.useTransition()};ge.version="18.3.1";Bb.exports=ge;var M=Bb.exports;const Ut=P1(M),K1=A1({__proto__:null,default:Ut},[M]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Q1=M,G1=Symbol.for("react.element"),Z1=Symbol.for("react.fragment"),Y1=Object.prototype.hasOwnProperty,X1=Q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,J1={key:!0,ref:!0,__self:!0,__source:!0};function Yb(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Y1.call(e,r)&&!J1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:G1,type:t,key:i,ref:a,props:s,_owner:X1.current}}Ed.Fragment=Z1;Ed.jsx=Yb;Ed.jsxs=Yb;zb.exports=Ed;var f=zb.exports,Xb={exports:{}},hn={},Jb={exports:{}},ex={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(t){function e(Q,ie){var ce=Q.length;Q.push(ie);e:for(;0<ce;){var Oe=ce-1>>>1,Se=Q[Oe];if(0<s(Se,ie))Q[Oe]=ie,Q[ce]=Se,ce=Oe;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ie=Q[0],ce=Q.pop();if(ce!==ie){Q[0]=ce;e:for(var Oe=0,Se=Q.length,ze=Se>>>1;Oe<ze;){var pn=2*(Oe+1)-1,Sn=Q[pn],tn=pn+1,mn=Q[tn];if(0>s(Sn,ce))tn<Se&&0>s(mn,Sn)?(Q[Oe]=mn,Q[tn]=ce,Oe=tn):(Q[Oe]=Sn,Q[pn]=ce,Oe=pn);else if(tn<Se&&0>s(mn,ce))Q[Oe]=mn,Q[tn]=ce,Oe=tn;else break e}}return ie}function s(Q,ie){var ce=Q.sortIndex-ie.sortIndex;return ce!==0?ce:Q.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,m=null,g=3,_=!1,N=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(Q){for(var ie=n(c);ie!==null;){if(ie.callback===null)r(c);else if(ie.startTime<=Q)r(c),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=n(c)}}function j(Q){if(C=!1,x(Q),!N)if(n(l)!==null)N=!0,wt(V);else{var ie=n(c);ie!==null&&Qe(j,ie.startTime-Q)}}function V(Q,ie){N=!1,C&&(C=!1,E(w),w=-1),_=!0;var ce=g;try{for(x(ie),m=n(l);m!==null&&(!(m.expirationTime>ie)||Q&&!P());){var Oe=m.callback;if(typeof Oe=="function"){m.callback=null,g=m.priorityLevel;var Se=Oe(m.expirationTime<=ie);ie=t.unstable_now(),typeof Se=="function"?m.callback=Se:m===n(l)&&r(l),x(ie)}else r(l);m=n(l)}if(m!==null)var ze=!0;else{var pn=n(c);pn!==null&&Qe(j,pn.startTime-ie),ze=!1}return ze}finally{m=null,g=ce,_=!1}}var $=!1,S=null,w=-1,k=5,T=-1;function P(){return!(t.unstable_now()-T<k)}function A(){if(S!==null){var Q=t.unstable_now();T=Q;var ie=!0;try{ie=S(!0,Q)}finally{ie?b():($=!1,S=null)}}else $=!1}var b;if(typeof v=="function")b=function(){v(A)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Ue=ke.port2;ke.port1.onmessage=A,b=function(){Ue.postMessage(null)}}else b=function(){O(A,0)};function wt(Q){S=Q,$||($=!0,b())}function Qe(Q,ie){w=O(function(){Q(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){N||_||(N=!0,wt(V))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Q){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var ce=g;g=ie;try{return Q()}finally{g=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,ie){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ce=g;g=Q;try{return ie()}finally{g=ce}},t.unstable_scheduleCallback=function(Q,ie,ce){var Oe=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Oe+ce:Oe):ce=Oe,Q){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ce+Se,Q={id:h++,callback:ie,priorityLevel:Q,startTime:ce,expirationTime:Se,sortIndex:-1},ce>Oe?(Q.sortIndex=ce,e(c,Q),n(l)===null&&Q===n(c)&&(C?(E(w),w=-1):C=!0,Qe(j,ce-Oe))):(Q.sortIndex=Se,e(l,Q),N||_||(N=!0,wt(V))),Q},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(Q){var ie=g;return function(){var ce=g;g=ie;try{return Q.apply(this,arguments)}finally{g=ce}}}})(ex);Jb.exports=ex;var eS=Jb.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var tS=M,cn=eS;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tx=new Set,Qo={};function xi(t,e){ha(t,e),ha(t+"Capture",e)}function ha(t,e){for(Qo[t]=e,t=0;t<e.length;t++)tx.add(e[t])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vf=Object.prototype.hasOwnProperty,nS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$y={},qy={};function rS(t){return vf.call(qy,t)?!0:vf.call($y,t)?!1:nS.test(t)?qy[t]=!0:($y[t]=!0,!1)}function sS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iS(t,e,n,r){if(e===null||typeof e>"u"||sS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kp=/[\-:]([a-z])/g;function Qp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kp,Qp);Tt[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kp,Qp);Tt[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kp,Qp);Tt[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gp(t,e,n,r){var s=Tt.hasOwnProperty(e)?Tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iS(e,n,s,r)&&(n=null),r||s===null?rS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rr=tS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nl=Symbol.for("react.element"),Vi=Symbol.for("react.portal"),zi=Symbol.for("react.fragment"),Zp=Symbol.for("react.strict_mode"),wf=Symbol.for("react.profiler"),nx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),Yp=Symbol.for("react.forward_ref"),bf=Symbol.for("react.suspense"),xf=Symbol.for("react.suspense_list"),Xp=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),sx=Symbol.for("react.offscreen"),Wy=Symbol.iterator;function lo(t){return t===null||typeof t!="object"?null:(t=Wy&&t[Wy]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Ah;function xo(t){if(Ah===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ah=e&&e[1]||""}return`
`+Ah+t}var Ph=!1;function Oh(t,e){if(!t||Ph)return"";Ph=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Ph=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xo(t):""}function aS(t){switch(t.tag){case 5:return xo(t.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 2:case 15:return t=Oh(t.type,!1),t;case 11:return t=Oh(t.type.render,!1),t;case 1:return t=Oh(t.type,!0),t;default:return""}}function _f(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zi:return"Fragment";case Vi:return"Portal";case wf:return"Profiler";case Zp:return"StrictMode";case bf:return"Suspense";case xf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rx:return(t.displayName||"Context")+".Consumer";case nx:return(t._context.displayName||"Context")+".Provider";case Yp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xp:return e=t.displayName||null,e!==null?e:_f(t.type)||"Memo";case Gr:e=t._payload,t=t._init;try{return _f(t(e))}catch{}}return null}function oS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _f(e);case 8:return e===Zp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _s(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ix(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uS(t){var e=ix(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=uS(t))}function ax(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ix(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kf(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_s(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ox(t,e){e=e.checked,e!=null&&Gp(t,"checked",e,!1)}function Ef(t,e){ox(t,e);var n=_s(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sf(t,e.type,_s(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ky(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sf(t,e,n){(e!=="number"||wc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _o=Array.isArray;function ea(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_s(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Tf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(_o(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_s(n)}}function ux(t,e){var n=_s(e.value),r=_s(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Il,cx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Il=Il||document.createElement("div"),Il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lS=["Webkit","ms","Moz","O"];Object.keys(Oo).forEach(function(t){lS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Oo[e]=Oo[t]})});function dx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Oo.hasOwnProperty(t)&&Oo[t]?(""+e).trim():e+"px"}function hx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=dx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var cS=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cf(t,e){if(e){if(cS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function If(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Af=null;function Jp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pf=null,ta=null,na=null;function Zy(t){if(t=Uu(t)){if(typeof Pf!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Id(e),Pf(t.stateNode,t.type,e))}}function fx(t){ta?na?na.push(t):na=[t]:ta=t}function px(){if(ta){var t=ta,e=na;if(na=ta=null,Zy(t),e)for(t=0;t<e.length;t++)Zy(e[t])}}function mx(t,e){return t(e)}function gx(){}var Dh=!1;function yx(t,e,n){if(Dh)return t(e,n);Dh=!0;try{return mx(t,e,n)}finally{Dh=!1,(ta!==null||na!==null)&&(gx(),px())}}function Zo(t,e){var n=t.stateNode;if(n===null)return null;var r=Id(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Of=!1;if(Cr)try{var co={};Object.defineProperty(co,"passive",{get:function(){Of=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{Of=!1}function dS(t,e,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Do=!1,bc=null,xc=!1,Df=null,hS={onError:function(t){Do=!0,bc=t}};function fS(t,e,n,r,s,i,a,o,l){Do=!1,bc=null,dS.apply(hS,arguments)}function pS(t,e,n,r,s,i,a,o,l){if(fS.apply(this,arguments),Do){if(Do){var c=bc;Do=!1,bc=null}else throw Error(q(198));xc||(xc=!0,Df=c)}}function _i(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yy(t){if(_i(t)!==t)throw Error(q(188))}function mS(t){var e=t.alternate;if(!e){if(e=_i(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Yy(s),t;if(i===r)return Yy(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function wx(t){return t=mS(t),t!==null?bx(t):null}function bx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bx(t);if(e!==null)return e;t=t.sibling}return null}var xx=cn.unstable_scheduleCallback,Xy=cn.unstable_cancelCallback,gS=cn.unstable_shouldYield,yS=cn.unstable_requestPaint,tt=cn.unstable_now,vS=cn.unstable_getCurrentPriorityLevel,em=cn.unstable_ImmediatePriority,_x=cn.unstable_UserBlockingPriority,_c=cn.unstable_NormalPriority,wS=cn.unstable_LowPriority,kx=cn.unstable_IdlePriority,Sd=null,Jn=null;function bS(t){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(Sd,t,void 0,(t.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:kS,xS=Math.log,_S=Math.LN2;function kS(t){return t>>>=0,t===0?32:31-(xS(t)/_S|0)|0}var Al=64,Pl=4194304;function ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=ko(o):(i&=a,i!==0&&(r=ko(i)))}else a=n&~s,a!==0?r=ko(a):i!==0&&(r=ko(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-jn(e),s=1<<n,r|=t[n],e&=~s;return r}function ES(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-jn(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=ES(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function jf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ex(){var t=Al;return Al<<=1,!(Al&4194240)&&(Al=64),t}function jh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ru(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jn(e),t[e]=n}function TS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-jn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function tm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-jn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function Sx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tx,nm,Nx,Cx,Ix,Lf=!1,Ol=[],ls=null,cs=null,ds=null,Yo=new Map,Xo=new Map,Yr=[],NS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jy(t,e){switch(t){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":Yo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(e.pointerId)}}function ho(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Uu(e),e!==null&&nm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CS(t,e,n,r,s){switch(e){case"focusin":return ls=ho(ls,t,e,n,r,s),!0;case"dragenter":return cs=ho(cs,t,e,n,r,s),!0;case"mouseover":return ds=ho(ds,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Yo.set(i,ho(Yo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Xo.set(i,ho(Xo.get(i)||null,t,e,n,r,s)),!0}return!1}function Ax(t){var e=Ys(t.target);if(e!==null){var n=_i(e);if(n!==null){if(e=n.tag,e===13){if(e=vx(n),e!==null){t.blockedOn=e,Ix(t.priority,function(){Nx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Af=r,n.target.dispatchEvent(r),Af=null}else return e=Uu(n),e!==null&&nm(e),t.blockedOn=n,!1;e.shift()}return!0}function ev(t,e,n){Yl(t)&&n.delete(e)}function IS(){Lf=!1,ls!==null&&Yl(ls)&&(ls=null),cs!==null&&Yl(cs)&&(cs=null),ds!==null&&Yl(ds)&&(ds=null),Yo.forEach(ev),Xo.forEach(ev)}function fo(t,e){t.blockedOn===e&&(t.blockedOn=null,Lf||(Lf=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,IS)))}function Jo(t){function e(s){return fo(s,t)}if(0<Ol.length){fo(Ol[0],t);for(var n=1;n<Ol.length;n++){var r=Ol[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ls!==null&&fo(ls,t),cs!==null&&fo(cs,t),ds!==null&&fo(ds,t),Yo.forEach(e),Xo.forEach(e),n=0;n<Yr.length;n++)r=Yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yr.length&&(n=Yr[0],n.blockedOn===null);)Ax(n),n.blockedOn===null&&Yr.shift()}var ra=Rr.ReactCurrentBatchConfig,Ec=!0;function AS(t,e,n,r){var s=Ie,i=ra.transition;ra.transition=null;try{Ie=1,rm(t,e,n,r)}finally{Ie=s,ra.transition=i}}function PS(t,e,n,r){var s=Ie,i=ra.transition;ra.transition=null;try{Ie=4,rm(t,e,n,r)}finally{Ie=s,ra.transition=i}}function rm(t,e,n,r){if(Ec){var s=Mf(t,e,n,r);if(s===null)qh(t,e,r,Sc,n),Jy(t,r);else if(CS(s,t,e,n,r))r.stopPropagation();else if(Jy(t,r),e&4&&-1<NS.indexOf(t)){for(;s!==null;){var i=Uu(s);if(i!==null&&Tx(i),i=Mf(t,e,n,r),i===null&&qh(t,e,r,Sc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qh(t,e,r,null,n)}}var Sc=null;function Mf(t,e,n,r){if(Sc=null,t=Jp(r),t=Ys(t),t!==null)if(e=_i(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sc=t,null}function Px(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vS()){case em:return 1;case _x:return 4;case _c:case wS:return 16;case kx:return 536870912;default:return 16}default:return 16}}var is=null,sm=null,Xl=null;function Ox(){if(Xl)return Xl;var t,e=sm,n=e.length,r,s="value"in is?is.value:is.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Xl=s.slice(t,1<r?1-r:void 0)}function Jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dl(){return!0}function tv(){return!1}function fn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dl:tv,this.isPropagationStopped=tv,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dl)},persist:function(){},isPersistent:Dl}),e}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},im=fn(La),Fu=He({},La,{view:0,detail:0}),OS=fn(Fu),Lh,Mh,po,Td=He({},Fu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:am,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==po&&(po&&t.type==="mousemove"?(Lh=t.screenX-po.screenX,Mh=t.screenY-po.screenY):Mh=Lh=0,po=t),Lh)},movementY:function(t){return"movementY"in t?t.movementY:Mh}}),nv=fn(Td),DS=He({},Td,{dataTransfer:0}),jS=fn(DS),LS=He({},Fu,{relatedTarget:0}),Rh=fn(LS),MS=He({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),RS=fn(MS),FS=He({},La,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),US=fn(FS),VS=He({},La,{data:0}),rv=fn(VS),zS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$S={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$S[t])?!!e[t]:!1}function am(){return qS}var WS=He({},Fu,{key:function(t){if(t.key){var e=zS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:am,charCode:function(t){return t.type==="keypress"?Jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HS=fn(WS),KS=He({},Td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sv=fn(KS),QS=He({},Fu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:am}),GS=fn(QS),ZS=He({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),YS=fn(ZS),XS=He({},Td,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JS=fn(XS),eT=[9,13,27,32],om=Cr&&"CompositionEvent"in window,jo=null;Cr&&"documentMode"in document&&(jo=document.documentMode);var tT=Cr&&"TextEvent"in window&&!jo,Dx=Cr&&(!om||jo&&8<jo&&11>=jo),iv=" ",av=!1;function jx(t,e){switch(t){case"keyup":return eT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bi=!1;function nT(t,e){switch(t){case"compositionend":return Lx(e);case"keypress":return e.which!==32?null:(av=!0,iv);case"textInput":return t=e.data,t===iv&&av?null:t;default:return null}}function rT(t,e){if(Bi)return t==="compositionend"||!om&&jx(t,e)?(t=Ox(),Xl=sm=is=null,Bi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dx&&e.locale!=="ko"?null:e.data;default:return null}}var sT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ov(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sT[t.type]:e==="textarea"}function Mx(t,e,n,r){fx(r),e=Tc(e,"onChange"),0<e.length&&(n=new im("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lo=null,eu=null;function iT(t){Kx(t,0)}function Nd(t){var e=Wi(t);if(ax(e))return t}function aT(t,e){if(t==="change")return e}var Rx=!1;if(Cr){var Fh;if(Cr){var Uh="oninput"in document;if(!Uh){var uv=document.createElement("div");uv.setAttribute("oninput","return;"),Uh=typeof uv.oninput=="function"}Fh=Uh}else Fh=!1;Rx=Fh&&(!document.documentMode||9<document.documentMode)}function lv(){Lo&&(Lo.detachEvent("onpropertychange",Fx),eu=Lo=null)}function Fx(t){if(t.propertyName==="value"&&Nd(eu)){var e=[];Mx(e,eu,t,Jp(t)),yx(iT,e)}}function oT(t,e,n){t==="focusin"?(lv(),Lo=e,eu=n,Lo.attachEvent("onpropertychange",Fx)):t==="focusout"&&lv()}function uT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nd(eu)}function lT(t,e){if(t==="click")return Nd(e)}function cT(t,e){if(t==="input"||t==="change")return Nd(e)}function dT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:dT;function tu(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!vf.call(e,s)||!Fn(t[s],e[s]))return!1}return!0}function cv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dv(t,e){var n=cv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cv(n)}}function Ux(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ux(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vx(){for(var t=window,e=wc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wc(t.document)}return e}function um(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hT(t){var e=Vx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ux(n.ownerDocument.documentElement,n)){if(r!==null&&um(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=dv(n,i);var a=dv(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fT=Cr&&"documentMode"in document&&11>=document.documentMode,$i=null,Rf=null,Mo=null,Ff=!1;function hv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ff||$i==null||$i!==wc(r)||(r=$i,"selectionStart"in r&&um(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mo&&tu(Mo,r)||(Mo=r,r=Tc(Rf,"onSelect"),0<r.length&&(e=new im("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$i)))}function jl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qi={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionend:jl("Transition","TransitionEnd")},Vh={},zx={};Cr&&(zx=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function Cd(t){if(Vh[t])return Vh[t];if(!qi[t])return t;var e=qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zx)return Vh[t]=e[n];return t}var Bx=Cd("animationend"),$x=Cd("animationiteration"),qx=Cd("animationstart"),Wx=Cd("transitionend"),Hx=new Map,fv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(t,e){Hx.set(t,e),xi(e,[t])}for(var zh=0;zh<fv.length;zh++){var Bh=fv[zh],pT=Bh.toLowerCase(),mT=Bh[0].toUpperCase()+Bh.slice(1);Ds(pT,"on"+mT)}Ds(Bx,"onAnimationEnd");Ds($x,"onAnimationIteration");Ds(qx,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(Wx,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eo));function pv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pS(r,e,void 0,t),t.currentTarget=null}function Kx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;pv(s,o,c),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;pv(s,o,c),i=l}}}if(xc)throw t=Df,xc=!1,Df=null,t}function Me(t,e){var n=e[$f];n===void 0&&(n=e[$f]=new Set);var r=t+"__bubble";n.has(r)||(Qx(e,t,2,!1),n.add(r))}function $h(t,e,n){var r=0;e&&(r|=4),Qx(n,t,r,e)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function nu(t){if(!t[Ll]){t[Ll]=!0,tx.forEach(function(n){n!=="selectionchange"&&(gT.has(n)||$h(n,!1,t),$h(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ll]||(e[Ll]=!0,$h("selectionchange",!1,e))}}function Qx(t,e,n,r){switch(Px(e)){case 1:var s=AS;break;case 4:s=PS;break;default:s=rm}n=s.bind(null,e,n,t),s=void 0,!Of||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Ys(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}yx(function(){var c=i,h=Jp(n),m=[];e:{var g=Hx.get(t);if(g!==void 0){var _=im,N=t;switch(t){case"keypress":if(Jl(n)===0)break e;case"keydown":case"keyup":_=HS;break;case"focusin":N="focus",_=Rh;break;case"focusout":N="blur",_=Rh;break;case"beforeblur":case"afterblur":_=Rh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=nv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=jS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=GS;break;case Bx:case $x:case qx:_=RS;break;case Wx:_=YS;break;case"scroll":_=OS;break;case"wheel":_=JS;break;case"copy":case"cut":case"paste":_=US;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=sv}var C=(e&4)!==0,O=!C&&t==="scroll",E=C?g!==null?g+"Capture":null:g;C=[];for(var v=c,x;v!==null;){x=v;var j=x.stateNode;if(x.tag===5&&j!==null&&(x=j,E!==null&&(j=Zo(v,E),j!=null&&C.push(ru(v,j,x)))),O)break;v=v.return}0<C.length&&(g=new _(g,N,null,n,h),m.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==Af&&(N=n.relatedTarget||n.fromElement)&&(Ys(N)||N[Ir]))break e;if((_||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,_?(N=n.relatedTarget||n.toElement,_=c,N=N?Ys(N):null,N!==null&&(O=_i(N),N!==O||N.tag!==5&&N.tag!==6)&&(N=null)):(_=null,N=c),_!==N)){if(C=nv,j="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(C=sv,j="onPointerLeave",E="onPointerEnter",v="pointer"),O=_==null?g:Wi(_),x=N==null?g:Wi(N),g=new C(j,v+"leave",_,n,h),g.target=O,g.relatedTarget=x,j=null,Ys(h)===c&&(C=new C(E,v+"enter",N,n,h),C.target=x,C.relatedTarget=O,j=C),O=j,_&&N)t:{for(C=_,E=N,v=0,x=C;x;x=Di(x))v++;for(x=0,j=E;j;j=Di(j))x++;for(;0<v-x;)C=Di(C),v--;for(;0<x-v;)E=Di(E),x--;for(;v--;){if(C===E||E!==null&&C===E.alternate)break t;C=Di(C),E=Di(E)}C=null}else C=null;_!==null&&mv(m,g,_,C,!1),N!==null&&O!==null&&mv(m,O,N,C,!0)}}e:{if(g=c?Wi(c):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var V=aT;else if(ov(g))if(Rx)V=cT;else{V=uT;var $=oT}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=lT);if(V&&(V=V(t,c))){Mx(m,V,n,h);break e}$&&$(t,g,c),t==="focusout"&&($=g._wrapperState)&&$.controlled&&g.type==="number"&&Sf(g,"number",g.value)}switch($=c?Wi(c):window,t){case"focusin":(ov($)||$.contentEditable==="true")&&($i=$,Rf=c,Mo=null);break;case"focusout":Mo=Rf=$i=null;break;case"mousedown":Ff=!0;break;case"contextmenu":case"mouseup":case"dragend":Ff=!1,hv(m,n,h);break;case"selectionchange":if(fT)break;case"keydown":case"keyup":hv(m,n,h)}var S;if(om)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bi?jx(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Dx&&n.locale!=="ko"&&(Bi||w!=="onCompositionStart"?w==="onCompositionEnd"&&Bi&&(S=Ox()):(is=h,sm="value"in is?is.value:is.textContent,Bi=!0)),$=Tc(c,w),0<$.length&&(w=new rv(w,t,null,n,h),m.push({event:w,listeners:$}),S?w.data=S:(S=Lx(n),S!==null&&(w.data=S)))),(S=tT?nT(t,n):rT(t,n))&&(c=Tc(c,"onBeforeInput"),0<c.length&&(h=new rv("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:c}),h.data=S))}Kx(m,e)})}function ru(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Zo(t,n),i!=null&&r.unshift(ru(t,i,s)),i=Zo(t,e),i!=null&&r.push(ru(t,i,s))),t=t.return}return r}function Di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mv(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,s?(l=Zo(n,i),l!=null&&a.unshift(ru(n,l,o))):s||(l=Zo(n,i),l!=null&&a.push(ru(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var yT=/\r\n?/g,vT=/\u0000|\uFFFD/g;function gv(t){return(typeof t=="string"?t:""+t).replace(yT,`
`).replace(vT,"")}function Ml(t,e,n){if(e=gv(e),gv(t)!==e&&n)throw Error(q(425))}function Nc(){}var Uf=null,Vf=null;function zf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bf=typeof setTimeout=="function"?setTimeout:void 0,wT=typeof clearTimeout=="function"?clearTimeout:void 0,yv=typeof Promise=="function"?Promise:void 0,bT=typeof queueMicrotask=="function"?queueMicrotask:typeof yv<"u"?function(t){return yv.resolve(null).then(t).catch(xT)}:Bf;function xT(t){setTimeout(function(){throw t})}function Wh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Jo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jo(e)}function hs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ma=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Ma,su="__reactProps$"+Ma,Ir="__reactContainer$"+Ma,$f="__reactEvents$"+Ma,_T="__reactListeners$"+Ma,kT="__reactHandles$"+Ma;function Ys(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ir]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vv(t);t!==null;){if(n=t[Hn])return n;t=vv(t)}return e}t=n,n=t.parentNode}return null}function Uu(t){return t=t[Hn]||t[Ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Id(t){return t[su]||null}var qf=[],Hi=-1;function js(t){return{current:t}}function Fe(t){0>Hi||(t.current=qf[Hi],qf[Hi]=null,Hi--)}function De(t,e){Hi++,qf[Hi]=t.current,t.current=e}var ks={},Lt=js(ks),Xt=js(!1),ai=ks;function fa(t,e){var n=t.type.contextTypes;if(!n)return ks;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Jt(t){return t=t.childContextTypes,t!=null}function Cc(){Fe(Xt),Fe(Lt)}function wv(t,e,n){if(Lt.current!==ks)throw Error(q(168));De(Lt,e),De(Xt,n)}function Gx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,oS(t)||"Unknown",s));return He({},n,r)}function Ic(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ks,ai=Lt.current,De(Lt,t),De(Xt,Xt.current),!0}function bv(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=Gx(t,e,ai),r.__reactInternalMemoizedMergedChildContext=t,Fe(Xt),Fe(Lt),De(Lt,t)):Fe(Xt),De(Xt,n)}var yr=null,Ad=!1,Hh=!1;function Zx(t){yr===null?yr=[t]:yr.push(t)}function ET(t){Ad=!0,Zx(t)}function Ls(){if(!Hh&&yr!==null){Hh=!0;var t=0,e=Ie;try{var n=yr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yr=null,Ad=!1}catch(s){throw yr!==null&&(yr=yr.slice(t+1)),xx(em,Ls),s}finally{Ie=e,Hh=!1}}return null}var Ki=[],Qi=0,Ac=null,Pc=0,yn=[],vn=0,oi=null,br=1,xr="";function Hs(t,e){Ki[Qi++]=Pc,Ki[Qi++]=Ac,Ac=t,Pc=e}function Yx(t,e,n){yn[vn++]=br,yn[vn++]=xr,yn[vn++]=oi,oi=t;var r=br;t=xr;var s=32-jn(r)-1;r&=~(1<<s),n+=1;var i=32-jn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,br=1<<32-jn(e)+s|n<<s|r,xr=i+t}else br=1<<i|n<<s|r,xr=t}function lm(t){t.return!==null&&(Hs(t,1),Yx(t,1,0))}function cm(t){for(;t===Ac;)Ac=Ki[--Qi],Ki[Qi]=null,Pc=Ki[--Qi],Ki[Qi]=null;for(;t===oi;)oi=yn[--vn],yn[vn]=null,xr=yn[--vn],yn[vn]=null,br=yn[--vn],yn[vn]=null}var on=null,sn=null,Ve=!1,Pn=null;function Xx(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,on=t,sn=hs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,on=t,sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=oi!==null?{id:br,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,on=t,sn=null,!0):!1;default:return!1}}function Wf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hf(t){if(Ve){var e=sn;if(e){var n=e;if(!xv(t,e)){if(Wf(t))throw Error(q(418));e=hs(n.nextSibling);var r=on;e&&xv(t,e)?Xx(r,n):(t.flags=t.flags&-4097|2,Ve=!1,on=t)}}else{if(Wf(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ve=!1,on=t}}}function _v(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;on=t}function Rl(t){if(t!==on)return!1;if(!Ve)return _v(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zf(t.type,t.memoizedProps)),e&&(e=sn)){if(Wf(t))throw Jx(),Error(q(418));for(;e;)Xx(t,e),e=hs(e.nextSibling)}if(_v(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sn=hs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sn=null}}else sn=on?hs(t.stateNode.nextSibling):null;return!0}function Jx(){for(var t=sn;t;)t=hs(t.nextSibling)}function pa(){sn=on=null,Ve=!1}function dm(t){Pn===null?Pn=[t]:Pn.push(t)}var ST=Rr.ReactCurrentBatchConfig;function mo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Fl(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kv(t){var e=t._init;return e(t._payload)}function e0(t){function e(E,v){if(t){var x=E.deletions;x===null?(E.deletions=[v],E.flags|=16):x.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function s(E,v){return E=gs(E,v),E.index=0,E.sibling=null,E}function i(E,v,x){return E.index=x,t?(x=E.alternate,x!==null?(x=x.index,x<v?(E.flags|=2,v):x):(E.flags|=2,v)):(E.flags|=1048576,v)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function o(E,v,x,j){return v===null||v.tag!==6?(v=Jh(x,E.mode,j),v.return=E,v):(v=s(v,x),v.return=E,v)}function l(E,v,x,j){var V=x.type;return V===zi?h(E,v,x.props.children,j,x.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Gr&&kv(V)===v.type)?(j=s(v,x.props),j.ref=mo(E,v,x),j.return=E,j):(j=ac(x.type,x.key,x.props,null,E.mode,j),j.ref=mo(E,v,x),j.return=E,j)}function c(E,v,x,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=ef(x,E.mode,j),v.return=E,v):(v=s(v,x.children||[]),v.return=E,v)}function h(E,v,x,j,V){return v===null||v.tag!==7?(v=ri(x,E.mode,j,V),v.return=E,v):(v=s(v,x),v.return=E,v)}function m(E,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Jh(""+v,E.mode,x),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Nl:return x=ac(v.type,v.key,v.props,null,E.mode,x),x.ref=mo(E,null,v),x.return=E,x;case Vi:return v=ef(v,E.mode,x),v.return=E,v;case Gr:var j=v._init;return m(E,j(v._payload),x)}if(_o(v)||lo(v))return v=ri(v,E.mode,x,null),v.return=E,v;Fl(E,v)}return null}function g(E,v,x,j){var V=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return V!==null?null:o(E,v,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Nl:return x.key===V?l(E,v,x,j):null;case Vi:return x.key===V?c(E,v,x,j):null;case Gr:return V=x._init,g(E,v,V(x._payload),j)}if(_o(x)||lo(x))return V!==null?null:h(E,v,x,j,null);Fl(E,x)}return null}function _(E,v,x,j,V){if(typeof j=="string"&&j!==""||typeof j=="number")return E=E.get(x)||null,o(v,E,""+j,V);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Nl:return E=E.get(j.key===null?x:j.key)||null,l(v,E,j,V);case Vi:return E=E.get(j.key===null?x:j.key)||null,c(v,E,j,V);case Gr:var $=j._init;return _(E,v,x,$(j._payload),V)}if(_o(j)||lo(j))return E=E.get(x)||null,h(v,E,j,V,null);Fl(v,j)}return null}function N(E,v,x,j){for(var V=null,$=null,S=v,w=v=0,k=null;S!==null&&w<x.length;w++){S.index>w?(k=S,S=null):k=S.sibling;var T=g(E,S,x[w],j);if(T===null){S===null&&(S=k);break}t&&S&&T.alternate===null&&e(E,S),v=i(T,v,w),$===null?V=T:$.sibling=T,$=T,S=k}if(w===x.length)return n(E,S),Ve&&Hs(E,w),V;if(S===null){for(;w<x.length;w++)S=m(E,x[w],j),S!==null&&(v=i(S,v,w),$===null?V=S:$.sibling=S,$=S);return Ve&&Hs(E,w),V}for(S=r(E,S);w<x.length;w++)k=_(S,E,w,x[w],j),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?w:k.key),v=i(k,v,w),$===null?V=k:$.sibling=k,$=k);return t&&S.forEach(function(P){return e(E,P)}),Ve&&Hs(E,w),V}function C(E,v,x,j){var V=lo(x);if(typeof V!="function")throw Error(q(150));if(x=V.call(x),x==null)throw Error(q(151));for(var $=V=null,S=v,w=v=0,k=null,T=x.next();S!==null&&!T.done;w++,T=x.next()){S.index>w?(k=S,S=null):k=S.sibling;var P=g(E,S,T.value,j);if(P===null){S===null&&(S=k);break}t&&S&&P.alternate===null&&e(E,S),v=i(P,v,w),$===null?V=P:$.sibling=P,$=P,S=k}if(T.done)return n(E,S),Ve&&Hs(E,w),V;if(S===null){for(;!T.done;w++,T=x.next())T=m(E,T.value,j),T!==null&&(v=i(T,v,w),$===null?V=T:$.sibling=T,$=T);return Ve&&Hs(E,w),V}for(S=r(E,S);!T.done;w++,T=x.next())T=_(S,E,w,T.value,j),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?w:T.key),v=i(T,v,w),$===null?V=T:$.sibling=T,$=T);return t&&S.forEach(function(A){return e(E,A)}),Ve&&Hs(E,w),V}function O(E,v,x,j){if(typeof x=="object"&&x!==null&&x.type===zi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Nl:e:{for(var V=x.key,$=v;$!==null;){if($.key===V){if(V=x.type,V===zi){if($.tag===7){n(E,$.sibling),v=s($,x.props.children),v.return=E,E=v;break e}}else if($.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Gr&&kv(V)===$.type){n(E,$.sibling),v=s($,x.props),v.ref=mo(E,$,x),v.return=E,E=v;break e}n(E,$);break}else e(E,$);$=$.sibling}x.type===zi?(v=ri(x.props.children,E.mode,j,x.key),v.return=E,E=v):(j=ac(x.type,x.key,x.props,null,E.mode,j),j.ref=mo(E,v,x),j.return=E,E=j)}return a(E);case Vi:e:{for($=x.key;v!==null;){if(v.key===$)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(E,v.sibling),v=s(v,x.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=ef(x,E.mode,j),v.return=E,E=v}return a(E);case Gr:return $=x._init,O(E,v,$(x._payload),j)}if(_o(x))return N(E,v,x,j);if(lo(x))return C(E,v,x,j);Fl(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(E,v.sibling),v=s(v,x),v.return=E,E=v):(n(E,v),v=Jh(x,E.mode,j),v.return=E,E=v),a(E)):n(E,v)}return O}var ma=e0(!0),t0=e0(!1),Oc=js(null),Dc=null,Gi=null,hm=null;function fm(){hm=Gi=Dc=null}function pm(t){var e=Oc.current;Fe(Oc),t._currentValue=e}function Kf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sa(t,e){Dc=t,hm=Gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(hm!==t)if(t={context:t,memoizedValue:e,next:null},Gi===null){if(Dc===null)throw Error(q(308));Gi=t,Dc.dependencies={lanes:0,firstContext:t}}else Gi=Gi.next=t;return e}var Xs=null;function mm(t){Xs===null?Xs=[t]:Xs.push(t)}function n0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,mm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ar(t,r)}function Ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zr=!1;function gm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ar(t,n)}return s=r.interleaved,s===null?(e.next=e,mm(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ar(t,n)}function ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tm(t,n)}}function Ev(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jc(t,e,n,r){var s=t.updateQueue;Zr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(i!==null){var m=s.baseState;a=0,h=c=l=null,o=i;do{var g=o.lane,_=o.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:_,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var N=t,C=o;switch(g=e,_=n,C.tag){case 1:if(N=C.payload,typeof N=="function"){m=N.call(_,m,g);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=C.payload,g=typeof N=="function"?N.call(_,m,g):N,g==null)break e;m=He({},m,g);break e;case 2:Zr=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[o]:g.push(o))}else _={eventTime:_,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=_,l=m):h=h.next=_,a|=g;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;g=o,o=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(l=m),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);li|=a,t.lanes=a,t.memoizedState=m}}function Sv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var Vu={},er=js(Vu),iu=js(Vu),au=js(Vu);function Js(t){if(t===Vu)throw Error(q(174));return t}function ym(t,e){switch(De(au,e),De(iu,t),De(er,Vu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nf(e,t)}Fe(er),De(er,e)}function ga(){Fe(er),Fe(iu),Fe(au)}function s0(t){Js(au.current);var e=Js(er.current),n=Nf(e,t.type);e!==n&&(De(iu,t),De(er,n))}function vm(t){iu.current===t&&(Fe(er),Fe(iu))}var qe=js(0);function Lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kh=[];function wm(){for(var t=0;t<Kh.length;t++)Kh[t]._workInProgressVersionPrimary=null;Kh.length=0}var tc=Rr.ReactCurrentDispatcher,Qh=Rr.ReactCurrentBatchConfig,ui=0,We=null,dt=null,gt=null,Mc=!1,Ro=!1,ou=0,TT=0;function It(){throw Error(q(321))}function bm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function xm(t,e,n,r,s,i){if(ui=i,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tc.current=t===null||t.memoizedState===null?AT:PT,t=n(r,s),Ro){i=0;do{if(Ro=!1,ou=0,25<=i)throw Error(q(301));i+=1,gt=dt=null,e.updateQueue=null,tc.current=OT,t=n(r,s)}while(Ro)}if(tc.current=Rc,e=dt!==null&&dt.next!==null,ui=0,gt=dt=We=null,Mc=!1,e)throw Error(q(300));return t}function _m(){var t=ou!==0;return ou=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?We.memoizedState=gt=t:gt=gt.next=t,gt}function _n(){if(dt===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=gt===null?We.memoizedState:gt.next;if(e!==null)gt=e,dt=t;else{if(t===null)throw Error(q(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},gt===null?We.memoizedState=gt=t:gt=gt.next=t}return gt}function uu(t,e){return typeof e=="function"?e(t):e}function Gh(t){var e=_n(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=dt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,c=i;do{var h=c.lane;if((ui&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=m,a=r):l=l.next=m,We.lanes|=h,li|=h}c=c.next}while(c!==null&&c!==i);l===null?a=r:l.next=o,Fn(r,e.memoizedState)||(Yt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,We.lanes|=i,li|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zh(t){var e=_n(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Fn(i,e.memoizedState)||(Yt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function i0(){}function a0(t,e){var n=We,r=_n(),s=e(),i=!Fn(r.memoizedState,s);if(i&&(r.memoizedState=s,Yt=!0),r=r.queue,km(l0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,lu(9,u0.bind(null,n,r,s,e),void 0,null),vt===null)throw Error(q(349));ui&30||o0(n,e,s)}return s}function o0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function u0(t,e,n,r){e.value=n,e.getSnapshot=r,c0(e)&&d0(t)}function l0(t,e,n){return n(function(){c0(e)&&d0(t)})}function c0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fn(t,n)}catch{return!0}}function d0(t){var e=Ar(t,1);e!==null&&Ln(e,t,1,-1)}function Tv(t){var e=qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uu,lastRenderedState:t},e.queue=t,t=t.dispatch=IT.bind(null,We,t),[e.memoizedState,t]}function lu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function h0(){return _n().memoizedState}function nc(t,e,n,r){var s=qn();We.flags|=t,s.memoizedState=lu(1|e,n,void 0,r===void 0?null:r)}function Pd(t,e,n,r){var s=_n();r=r===void 0?null:r;var i=void 0;if(dt!==null){var a=dt.memoizedState;if(i=a.destroy,r!==null&&bm(r,a.deps)){s.memoizedState=lu(e,n,i,r);return}}We.flags|=t,s.memoizedState=lu(1|e,n,i,r)}function Nv(t,e){return nc(8390656,8,t,e)}function km(t,e){return Pd(2048,8,t,e)}function f0(t,e){return Pd(4,2,t,e)}function p0(t,e){return Pd(4,4,t,e)}function m0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function g0(t,e,n){return n=n!=null?n.concat([t]):null,Pd(4,4,m0.bind(null,e,t),n)}function Em(){}function y0(t,e){var n=_n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v0(t,e){var n=_n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function w0(t,e,n){return ui&21?(Fn(n,e)||(n=Ex(),We.lanes|=n,li|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function NT(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Qh.transition;Qh.transition={};try{t(!1),e()}finally{Ie=n,Qh.transition=r}}function b0(){return _n().memoizedState}function CT(t,e,n){var r=ms(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},x0(t))_0(e,n);else if(n=n0(t,e,n,r),n!==null){var s=$t();Ln(n,t,r,s),k0(n,e,r)}}function IT(t,e,n){var r=ms(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(x0(t))_0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Fn(o,a)){var l=e.interleaved;l===null?(s.next=s,mm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=n0(t,e,s,r),n!==null&&(s=$t(),Ln(n,t,r,s),k0(n,e,r))}}function x0(t){var e=t.alternate;return t===We||e!==null&&e===We}function _0(t,e){Ro=Mc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function k0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tm(t,n)}}var Rc={readContext:xn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},AT={readContext:xn,useCallback:function(t,e){return qn().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:Nv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nc(4194308,4,m0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var n=qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CT.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=qn();return t={current:t},e.memoizedState=t},useState:Tv,useDebugValue:Em,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=Tv(!1),e=t[0];return t=NT.bind(null,t[1]),qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,s=qn();if(Ve){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),vt===null)throw Error(q(349));ui&30||o0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Nv(l0.bind(null,r,i,t),[t]),r.flags|=2048,lu(9,u0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=qn(),e=vt.identifierPrefix;if(Ve){var n=xr,r=br;n=(r&~(1<<32-jn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ou++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=TT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PT={readContext:xn,useCallback:y0,useContext:xn,useEffect:km,useImperativeHandle:g0,useInsertionEffect:f0,useLayoutEffect:p0,useMemo:v0,useReducer:Gh,useRef:h0,useState:function(){return Gh(uu)},useDebugValue:Em,useDeferredValue:function(t){var e=_n();return w0(e,dt.memoizedState,t)},useTransition:function(){var t=Gh(uu)[0],e=_n().memoizedState;return[t,e]},useMutableSource:i0,useSyncExternalStore:a0,useId:b0,unstable_isNewReconciler:!1},OT={readContext:xn,useCallback:y0,useContext:xn,useEffect:km,useImperativeHandle:g0,useInsertionEffect:f0,useLayoutEffect:p0,useMemo:v0,useReducer:Zh,useRef:h0,useState:function(){return Zh(uu)},useDebugValue:Em,useDeferredValue:function(t){var e=_n();return dt===null?e.memoizedState=t:w0(e,dt.memoizedState,t)},useTransition:function(){var t=Zh(uu)[0],e=_n().memoizedState;return[t,e]},useMutableSource:i0,useSyncExternalStore:a0,useId:b0,unstable_isNewReconciler:!1};function In(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Od={isMounted:function(t){return(t=t._reactInternals)?_i(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),s=ms(t),i=Tr(r,s);i.payload=e,n!=null&&(i.callback=n),e=fs(t,i,s),e!==null&&(Ln(e,t,s,r),ec(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),s=ms(t),i=Tr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fs(t,i,s),e!==null&&(Ln(e,t,s,r),ec(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=ms(t),s=Tr(n,r);s.tag=2,e!=null&&(s.callback=e),e=fs(t,s,r),e!==null&&(Ln(e,t,r,n),ec(e,t,r))}};function Cv(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!tu(n,r)||!tu(s,i):!0}function E0(t,e,n){var r=!1,s=ks,i=e.contextType;return typeof i=="object"&&i!==null?i=xn(i):(s=Jt(e)?ai:Lt.current,r=e.contextTypes,i=(r=r!=null)?fa(t,s):ks),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Od,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Iv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Od.enqueueReplaceState(e,e.state,null)}function Gf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},gm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=xn(i):(i=Jt(e)?ai:Lt.current,s.context=fa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Qf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Od.enqueueReplaceState(s,s.state,null),jc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ya(t,e){try{var n="",r=e;do n+=aS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Yh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DT=typeof WeakMap=="function"?WeakMap:Map;function S0(t,e,n){n=Tr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Uc||(Uc=!0,ip=r),Zf(t,e)},n}function T0(t,e,n){n=Tr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Zf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Zf(t,e),typeof r!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Av(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=KT.bind(null,t,e,n),e.then(t,t))}function Pv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ov(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Tr(-1,1),e.tag=2,fs(n,e,1))),n.lanes|=1),t)}var jT=Rr.ReactCurrentOwner,Yt=!1;function Vt(t,e,n,r){e.child=t===null?t0(e,null,n,r):ma(e,t.child,n,r)}function Dv(t,e,n,r,s){n=n.render;var i=e.ref;return sa(e,s),r=xm(t,e,n,r,i,s),n=_m(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):(Ve&&n&&lm(e),e.flags|=1,Vt(t,e,r,s),e.child)}function jv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Om(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,N0(t,e,i,r,s)):(t=ac(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:tu,n(a,r)&&t.ref===e.ref)return Pr(t,e,s)}return e.flags|=1,t=gs(i,r),t.ref=e.ref,t.return=e,e.child=t}function N0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(tu(i,r)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,Pr(t,e,s)}return Yf(t,e,n,r,s)}function C0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Yi,rn),rn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Yi,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,De(Yi,rn),rn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,De(Yi,rn),rn|=r;return Vt(t,e,s,n),e.child}function I0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yf(t,e,n,r,s){var i=Jt(n)?ai:Lt.current;return i=fa(e,i),sa(e,s),n=xm(t,e,n,r,i,s),r=_m(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):(Ve&&r&&lm(e),e.flags|=1,Vt(t,e,n,s),e.child)}function Lv(t,e,n,r,s){if(Jt(n)){var i=!0;Ic(e)}else i=!1;if(sa(e,s),e.stateNode===null)rc(t,e),E0(e,n,r),Gf(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=xn(c):(c=Jt(n)?ai:Lt.current,c=fa(e,c));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&Iv(e,a,r,c),Zr=!1;var g=e.memoizedState;a.state=g,jc(e,r,a,s),l=e.memoizedState,o!==r||g!==l||Xt.current||Zr?(typeof h=="function"&&(Qf(e,n,h,r),l=e.memoizedState),(o=Zr||Cv(e,n,o,r,g,l,c))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,r0(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:In(e.type,o),a.props=c,m=e.pendingProps,g=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=xn(l):(l=Jt(n)?ai:Lt.current,l=fa(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==m||g!==l)&&Iv(e,a,r,l),Zr=!1,g=e.memoizedState,a.state=g,jc(e,r,a,s);var N=e.memoizedState;o!==m||g!==N||Xt.current||Zr?(typeof _=="function"&&(Qf(e,n,_,r),N=e.memoizedState),(c=Zr||Cv(e,n,c,r,g,N,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),a.props=r,a.state=N,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Xf(t,e,n,r,i,s)}function Xf(t,e,n,r,s,i){I0(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&bv(e,n,!1),Pr(t,e,i);r=e.stateNode,jT.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ma(e,t.child,null,i),e.child=ma(e,null,o,i)):Vt(t,e,o,i),e.memoizedState=r.state,s&&bv(e,n,!0),e.child}function A0(t){var e=t.stateNode;e.pendingContext?wv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wv(t,e.context,!1),ym(t,e.containerInfo)}function Mv(t,e,n,r,s){return pa(),dm(s),e.flags|=256,Vt(t,e,n,r),e.child}var Jf={dehydrated:null,treeContext:null,retryLane:0};function ep(t){return{baseLanes:t,cachePool:null,transitions:null}}function P0(t,e,n){var r=e.pendingProps,s=qe.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),De(qe,s&1),t===null)return Hf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ld(a,r,0,null),t=ri(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ep(n),e.memoizedState=Jf,t):Sm(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return LT(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=gs(o,i):(i=ri(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?ep(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Jf,r}return i=t.child,t=i.sibling,r=gs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sm(t,e){return e=Ld({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ul(t,e,n,r){return r!==null&&dm(r),ma(e,t.child,null,n),t=Sm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LT(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Yh(Error(q(422))),Ul(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ld({mode:"visible",children:r.children},s,0,null),i=ri(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ma(e,t.child,null,a),e.child.memoizedState=ep(a),e.memoizedState=Jf,i);if(!(e.mode&1))return Ul(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(q(419)),r=Yh(i,r,void 0),Ul(t,e,a,r)}if(o=(a&t.childLanes)!==0,Yt||o){if(r=vt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ar(t,s),Ln(r,t,s,-1))}return Pm(),r=Yh(Error(q(421))),Ul(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=QT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,sn=hs(s.nextSibling),on=e,Ve=!0,Pn=null,t!==null&&(yn[vn++]=br,yn[vn++]=xr,yn[vn++]=oi,br=t.id,xr=t.overflow,oi=e),e=Sm(e,r.children),e.flags|=4096,e)}function Rv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Kf(t.return,e,n)}function Xh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function O0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Vt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rv(t,n,e);else if(t.tag===19)Rv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(qe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Lc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Xh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Xh(e,!0,n,null,i);break;case"together":Xh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),li|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=gs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MT(t,e,n){switch(e.tag){case 3:A0(e),pa();break;case 5:s0(e);break;case 1:Jt(e.type)&&Ic(e);break;case 4:ym(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;De(Oc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?P0(t,e,n):(De(qe,qe.current&1),t=Pr(t,e,n),t!==null?t.sibling:null);De(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return O0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),De(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,C0(t,e,n)}return Pr(t,e,n)}var D0,tp,j0,L0;D0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tp=function(){};j0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Js(er.current);var i=null;switch(n){case"input":s=kf(t,s),r=kf(t,r),i=[];break;case"select":s=He({},s,{value:void 0}),r=He({},r,{value:void 0}),i=[];break;case"textarea":s=Tf(t,s),r=Tf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nc)}Cf(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Qo.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Qo.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Me("scroll",t),i||o===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};L0=function(t,e,n,r){n!==r&&(e.flags|=4)};function go(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RT(t,e,n){var r=e.pendingProps;switch(cm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Jt(e.type)&&Cc(),At(e),null;case 3:return r=e.stateNode,ga(),Fe(Xt),Fe(Lt),wm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(up(Pn),Pn=null))),tp(t,e),At(e),null;case 5:vm(e);var s=Js(au.current);if(n=e.type,t!==null&&e.stateNode!=null)j0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return At(e),null}if(t=Js(er.current),Rl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Hn]=e,r[su]=i,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(s=0;s<Eo.length;s++)Me(Eo[s],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Hy(r,i),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Me("invalid",r);break;case"textarea":Qy(r,i),Me("invalid",r)}Cf(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Ml(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Ml(r.textContent,o,t),s=["children",""+o]):Qo.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Me("scroll",r)}switch(n){case"input":Cl(r),Ky(r,i,!0);break;case"textarea":Cl(r),Gy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Nc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Hn]=e,t[su]=r,D0(t,e,!1,!1),e.stateNode=t;e:{switch(a=If(n,r),n){case"dialog":Me("cancel",t),Me("close",t),s=r;break;case"iframe":case"object":case"embed":Me("load",t),s=r;break;case"video":case"audio":for(s=0;s<Eo.length;s++)Me(Eo[s],t);s=r;break;case"source":Me("error",t),s=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),s=r;break;case"details":Me("toggle",t),s=r;break;case"input":Hy(t,r),s=kf(t,r),Me("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=He({},r,{value:void 0}),Me("invalid",t);break;case"textarea":Qy(t,r),s=Tf(t,r),Me("invalid",t);break;default:s=r}Cf(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?hx(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cx(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Go(t,l):typeof l=="number"&&Go(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qo.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Me("scroll",t):l!=null&&Gp(t,i,l,a))}switch(n){case"input":Cl(t),Ky(t,r,!1);break;case"textarea":Cl(t),Gy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_s(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ea(t,!!r.multiple,i,!1):r.defaultValue!=null&&ea(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Nc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)L0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Js(au.current),Js(er.current),Rl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(i=r.nodeValue!==n)&&(t=on,t!==null))switch(t.tag){case 3:Ml(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ml(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return At(e),null;case 13:if(Fe(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&sn!==null&&e.mode&1&&!(e.flags&128))Jx(),pa(),e.flags|=98560,i=!1;else if(i=Rl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[Hn]=e}else pa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else Pn!==null&&(up(Pn),Pn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?ht===0&&(ht=3):Pm())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return ga(),tp(t,e),t===null&&nu(e.stateNode.containerInfo),At(e),null;case 10:return pm(e.type._context),At(e),null;case 17:return Jt(e.type)&&Cc(),At(e),null;case 19:if(Fe(qe),i=e.memoizedState,i===null)return At(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)go(i,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Lc(t),a!==null){for(e.flags|=128,go(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(qe,qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&tt()>va&&(e.flags|=128,r=!0,go(i,!1),e.lanes=4194304)}else{if(!r)if(t=Lc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),go(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ve)return At(e),null}else 2*tt()-i.renderingStartTime>va&&n!==1073741824&&(e.flags|=128,r=!0,go(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=tt(),e.sibling=null,n=qe.current,De(qe,r?n&1|2:n&1),e):(At(e),null);case 22:case 23:return Am(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rn&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function FT(t,e){switch(cm(e),e.tag){case 1:return Jt(e.type)&&Cc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ga(),Fe(Xt),Fe(Lt),wm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vm(e),null;case 13:if(Fe(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));pa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(qe),null;case 4:return ga(),null;case 10:return pm(e.type._context),null;case 22:case 23:return Am(),null;case 24:return null;default:return null}}var Vl=!1,Dt=!1,UT=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Zi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function M0(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var Fv=!1;function VT(t,e){if(Uf=Ec,t=Vx(),um(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,h=0,m=t,g=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(o=a+s),m!==i||r!==0&&m.nodeType!==3||(l=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++c===s&&(o=a),g===i&&++h===r&&(l=a),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vf={focusedElem:t,selectionRange:n},Ec=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var C=N.memoizedProps,O=N.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?C:In(e.type,C),O);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(j){Xe(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return N=Fv,Fv=!1,N}function Fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&M0(e,n,i)}s=s.next}while(s!==r)}}function Dd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function np(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function R0(t){var e=t.alternate;e!==null&&(t.alternate=null,R0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[su],delete e[$f],delete e[_T],delete e[kT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function F0(t){return t.tag===5||t.tag===3||t.tag===4}function Uv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||F0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nc));else if(r!==4&&(t=t.child,t!==null))for(rp(t,e,n),t=t.sibling;t!==null;)rp(t,e,n),t=t.sibling}function sp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sp(t,e,n),t=t.sibling;t!==null;)sp(t,e,n),t=t.sibling}var xt=null,An=!1;function qr(t,e,n){for(n=n.child;n!==null;)U0(t,e,n),n=n.sibling}function U0(t,e,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(Sd,n)}catch{}switch(n.tag){case 5:Dt||Zi(n,e);case 6:var r=xt,s=An;xt=null,qr(t,e,n),xt=r,An=s,xt!==null&&(An?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(An?(t=xt,n=n.stateNode,t.nodeType===8?Wh(t.parentNode,n):t.nodeType===1&&Wh(t,n),Jo(t)):Wh(xt,n.stateNode));break;case 4:r=xt,s=An,xt=n.stateNode.containerInfo,An=!0,qr(t,e,n),xt=r,An=s;break;case 0:case 11:case 14:case 15:if(!Dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&M0(n,e,a),s=s.next}while(s!==r)}qr(t,e,n);break;case 1:if(!Dt&&(Zi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Xe(n,e,o)}qr(t,e,n);break;case 21:qr(t,e,n);break;case 22:n.mode&1?(Dt=(r=Dt)||n.memoizedState!==null,qr(t,e,n),Dt=r):qr(t,e,n);break;default:qr(t,e,n)}}function Vv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UT),e.forEach(function(r){var s=GT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:xt=o.stateNode,An=!1;break e;case 3:xt=o.stateNode.containerInfo,An=!0;break e;case 4:xt=o.stateNode.containerInfo,An=!0;break e}o=o.return}if(xt===null)throw Error(q(160));U0(i,a,s),xt=null,An=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Xe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)V0(e,t),e=e.sibling}function V0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),$n(t),r&4){try{Fo(3,t,t.return),Dd(3,t)}catch(C){Xe(t,t.return,C)}try{Fo(5,t,t.return)}catch(C){Xe(t,t.return,C)}}break;case 1:Cn(e,t),$n(t),r&512&&n!==null&&Zi(n,n.return);break;case 5:if(Cn(e,t),$n(t),r&512&&n!==null&&Zi(n,n.return),t.flags&32){var s=t.stateNode;try{Go(s,"")}catch(C){Xe(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&ox(s,i),If(o,a);var c=If(o,i);for(a=0;a<l.length;a+=2){var h=l[a],m=l[a+1];h==="style"?hx(s,m):h==="dangerouslySetInnerHTML"?cx(s,m):h==="children"?Go(s,m):Gp(s,h,m,c)}switch(o){case"input":Ef(s,i);break;case"textarea":ux(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?ea(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?ea(s,!!i.multiple,i.defaultValue,!0):ea(s,!!i.multiple,i.multiple?[]:"",!1))}s[su]=i}catch(C){Xe(t,t.return,C)}}break;case 6:if(Cn(e,t),$n(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){Xe(t,t.return,C)}}break;case 3:if(Cn(e,t),$n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jo(e.containerInfo)}catch(C){Xe(t,t.return,C)}break;case 4:Cn(e,t),$n(t);break;case 13:Cn(e,t),$n(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cm=tt())),r&4&&Vv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Dt=(c=Dt)||h,Cn(e,t),Dt=c):Cn(e,t),$n(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(m=ee=h;ee!==null;){switch(g=ee,_=g.child,g.tag){case 0:case 11:case 14:case 15:Fo(4,g,g.return);break;case 1:Zi(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(C){Xe(r,n,C)}}break;case 5:Zi(g,g.return);break;case 22:if(g.memoizedState!==null){Bv(m);continue}}_!==null?(_.return=g,ee=_):Bv(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,l=m.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=dx("display",a))}catch(C){Xe(t,t.return,C)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(C){Xe(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Cn(e,t),$n(t),r&4&&Vv(t);break;case 21:break;default:Cn(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(F0(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Go(s,""),r.flags&=-33);var i=Uv(t);sp(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Uv(t);rp(t,o,a);break;default:throw Error(q(161))}}catch(l){Xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zT(t,e,n){ee=t,z0(t)}function z0(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Vl;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Dt;o=Vl;var c=Dt;if(Vl=a,(Dt=l)&&!c)for(ee=s;ee!==null;)a=ee,l=a.child,a.tag===22&&a.memoizedState!==null?$v(s):l!==null?(l.return=a,ee=l):$v(s);for(;i!==null;)ee=i,z0(i),i=i.sibling;ee=s,Vl=o,Dt=c}zv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):zv(t)}}function zv(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||Dd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:In(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Sv(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sv(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Jo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Dt||e.flags&512&&np(e)}catch(g){Xe(e,e.return,g)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Bv(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function $v(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dd(4,e)}catch(l){Xe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Xe(e,s,l)}}var i=e.return;try{np(e)}catch(l){Xe(e,i,l)}break;case 5:var a=e.return;try{np(e)}catch(l){Xe(e,a,l)}}}catch(l){Xe(e,e.return,l)}if(e===t){ee=null;break}var o=e.sibling;if(o!==null){o.return=e.return,ee=o;break}ee=e.return}}var BT=Math.ceil,Fc=Rr.ReactCurrentDispatcher,Tm=Rr.ReactCurrentOwner,bn=Rr.ReactCurrentBatchConfig,xe=0,vt=null,at=null,Et=0,rn=0,Yi=js(0),ht=0,cu=null,li=0,jd=0,Nm=0,Uo=null,Zt=null,Cm=0,va=1/0,gr=null,Uc=!1,ip=null,ps=null,zl=!1,as=null,Vc=0,Vo=0,ap=null,sc=-1,ic=0;function $t(){return xe&6?tt():sc!==-1?sc:sc=tt()}function ms(t){return t.mode&1?xe&2&&Et!==0?Et&-Et:ST.transition!==null?(ic===0&&(ic=Ex()),ic):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:Px(t.type)),t):1}function Ln(t,e,n,r){if(50<Vo)throw Vo=0,ap=null,Error(q(185));Ru(t,n,r),(!(xe&2)||t!==vt)&&(t===vt&&(!(xe&2)&&(jd|=n),ht===4&&Xr(t,Et)),en(t,r),n===1&&xe===0&&!(e.mode&1)&&(va=tt()+500,Ad&&Ls()))}function en(t,e){var n=t.callbackNode;SS(t,e);var r=kc(t,t===vt?Et:0);if(r===0)n!==null&&Xy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xy(n),e===1)t.tag===0?ET(qv.bind(null,t)):Zx(qv.bind(null,t)),bT(function(){!(xe&6)&&Ls()}),n=null;else{switch(Sx(r)){case 1:n=em;break;case 4:n=_x;break;case 16:n=_c;break;case 536870912:n=kx;break;default:n=_c}n=G0(n,B0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function B0(t,e){if(sc=-1,ic=0,xe&6)throw Error(q(327));var n=t.callbackNode;if(ia()&&t.callbackNode!==n)return null;var r=kc(t,t===vt?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zc(t,r);else{e=r;var s=xe;xe|=2;var i=q0();(vt!==t||Et!==e)&&(gr=null,va=tt()+500,ni(t,e));do try{WT();break}catch(o){$0(t,o)}while(!0);fm(),Fc.current=i,xe=s,at!==null?e=0:(vt=null,Et=0,e=ht)}if(e!==0){if(e===2&&(s=jf(t),s!==0&&(r=s,e=op(t,s))),e===1)throw n=cu,ni(t,0),Xr(t,r),en(t,tt()),n;if(e===6)Xr(t,r);else{if(s=t.current.alternate,!(r&30)&&!$T(s)&&(e=zc(t,r),e===2&&(i=jf(t),i!==0&&(r=i,e=op(t,i))),e===1))throw n=cu,ni(t,0),Xr(t,r),en(t,tt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Ks(t,Zt,gr);break;case 3:if(Xr(t,r),(r&130023424)===r&&(e=Cm+500-tt(),10<e)){if(kc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Bf(Ks.bind(null,t,Zt,gr),e);break}Ks(t,Zt,gr);break;case 4:if(Xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-jn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BT(r/1960))-r,10<r){t.timeoutHandle=Bf(Ks.bind(null,t,Zt,gr),r);break}Ks(t,Zt,gr);break;case 5:Ks(t,Zt,gr);break;default:throw Error(q(329))}}}return en(t,tt()),t.callbackNode===n?B0.bind(null,t):null}function op(t,e){var n=Uo;return t.current.memoizedState.isDehydrated&&(ni(t,e).flags|=256),t=zc(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&up(e)),t}function up(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function $T(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Fn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xr(t,e){for(e&=~Nm,e&=~jd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jn(e),r=1<<n;t[n]=-1,e&=~r}}function qv(t){if(xe&6)throw Error(q(327));ia();var e=kc(t,0);if(!(e&1))return en(t,tt()),null;var n=zc(t,e);if(t.tag!==0&&n===2){var r=jf(t);r!==0&&(e=r,n=op(t,r))}if(n===1)throw n=cu,ni(t,0),Xr(t,e),en(t,tt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ks(t,Zt,gr),en(t,tt()),null}function Im(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(va=tt()+500,Ad&&Ls())}}function ci(t){as!==null&&as.tag===0&&!(xe&6)&&ia();var e=xe;xe|=1;var n=bn.transition,r=Ie;try{if(bn.transition=null,Ie=1,t)return t()}finally{Ie=r,bn.transition=n,xe=e,!(xe&6)&&Ls()}}function Am(){rn=Yi.current,Fe(Yi)}function ni(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wT(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(cm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cc();break;case 3:ga(),Fe(Xt),Fe(Lt),wm();break;case 5:vm(r);break;case 4:ga();break;case 13:Fe(qe);break;case 19:Fe(qe);break;case 10:pm(r.type._context);break;case 22:case 23:Am()}n=n.return}if(vt=t,at=t=gs(t.current,null),Et=rn=e,ht=0,cu=null,Nm=jd=li=0,Zt=Uo=null,Xs!==null){for(e=0;e<Xs.length;e++)if(n=Xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Xs=null}return t}function $0(t,e){do{var n=at;try{if(fm(),tc.current=Rc,Mc){for(var r=We.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Mc=!1}if(ui=0,gt=dt=We=null,Ro=!1,ou=0,Tm.current=null,n===null||n.return===null){ht=1,cu=e,at=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=Et,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=o,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Pv(a);if(_!==null){_.flags&=-257,Ov(_,a,o,i,e),_.mode&1&&Av(i,c,e),e=_,l=c;var N=e.updateQueue;if(N===null){var C=new Set;C.add(l),e.updateQueue=C}else N.add(l);break e}else{if(!(e&1)){Av(i,c,e),Pm();break e}l=Error(q(426))}}else if(Ve&&o.mode&1){var O=Pv(a);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Ov(O,a,o,i,e),dm(ya(l,o));break e}}i=l=ya(l,o),ht!==4&&(ht=2),Uo===null?Uo=[i]:Uo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=S0(i,l,e);Ev(i,E);break e;case 1:o=l;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ps===null||!ps.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=T0(i,o,e);Ev(i,j);break e}}i=i.return}while(i!==null)}H0(n)}catch(V){e=V,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function q0(){var t=Fc.current;return Fc.current=Rc,t===null?Rc:t}function Pm(){(ht===0||ht===3||ht===2)&&(ht=4),vt===null||!(li&268435455)&&!(jd&268435455)||Xr(vt,Et)}function zc(t,e){var n=xe;xe|=2;var r=q0();(vt!==t||Et!==e)&&(gr=null,ni(t,e));do try{qT();break}catch(s){$0(t,s)}while(!0);if(fm(),xe=n,Fc.current=r,at!==null)throw Error(q(261));return vt=null,Et=0,ht}function qT(){for(;at!==null;)W0(at)}function WT(){for(;at!==null&&!gS();)W0(at)}function W0(t){var e=Q0(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?H0(t):at=e,Tm.current=null}function H0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FT(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,at=null;return}}else if(n=RT(n,e,rn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ht===0&&(ht=5)}function Ks(t,e,n){var r=Ie,s=bn.transition;try{bn.transition=null,Ie=1,HT(t,e,n,r)}finally{bn.transition=s,Ie=r}return null}function HT(t,e,n,r){do ia();while(as!==null);if(xe&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(TS(t,i),t===vt&&(at=vt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zl||(zl=!0,G0(_c,function(){return ia(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=bn.transition,bn.transition=null;var a=Ie;Ie=1;var o=xe;xe|=4,Tm.current=null,VT(t,n),V0(n,t),hT(Vf),Ec=!!Uf,Vf=Uf=null,t.current=n,zT(n),yS(),xe=o,Ie=a,bn.transition=i}else t.current=n;if(zl&&(zl=!1,as=t,Vc=s),i=t.pendingLanes,i===0&&(ps=null),bS(n.stateNode),en(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Uc)throw Uc=!1,t=ip,ip=null,t;return Vc&1&&t.tag!==0&&ia(),i=t.pendingLanes,i&1?t===ap?Vo++:(Vo=0,ap=t):Vo=0,Ls(),null}function ia(){if(as!==null){var t=Sx(Vc),e=bn.transition,n=Ie;try{if(bn.transition=null,Ie=16>t?16:t,as===null)var r=!1;else{if(t=as,as=null,Vc=0,xe&6)throw Error(q(331));var s=xe;for(xe|=4,ee=t.current;ee!==null;){var i=ee,a=i.child;if(ee.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(ee=c;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:Fo(8,h,i)}var m=h.child;if(m!==null)m.return=h,ee=m;else for(;ee!==null;){h=ee;var g=h.sibling,_=h.return;if(R0(h),h===c){ee=null;break}if(g!==null){g.return=_,ee=g;break}ee=_}}}var N=i.alternate;if(N!==null){var C=N.child;if(C!==null){N.child=null;do{var O=C.sibling;C.sibling=null,C=O}while(C!==null)}}ee=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ee=a;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ee=E;break e}ee=i.return}}var v=t.current;for(ee=v;ee!==null;){a=ee;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,ee=x;else e:for(a=v;ee!==null;){if(o=ee,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Dd(9,o)}}catch(V){Xe(o,o.return,V)}if(o===a){ee=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,ee=j;break e}ee=o.return}}if(xe=s,Ls(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(Sd,t)}catch{}r=!0}return r}finally{Ie=n,bn.transition=e}}return!1}function Wv(t,e,n){e=ya(n,e),e=S0(t,e,1),t=fs(t,e,1),e=$t(),t!==null&&(Ru(t,1,e),en(t,e))}function Xe(t,e,n){if(t.tag===3)Wv(t,t,n);else for(;e!==null;){if(e.tag===3){Wv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ps===null||!ps.has(r))){t=ya(n,t),t=T0(e,t,1),e=fs(e,t,1),t=$t(),e!==null&&(Ru(e,1,t),en(e,t));break}}e=e.return}}function KT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(Et&n)===n&&(ht===4||ht===3&&(Et&130023424)===Et&&500>tt()-Cm?ni(t,0):Nm|=n),en(t,e)}function K0(t,e){e===0&&(t.mode&1?(e=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):e=1);var n=$t();t=Ar(t,e),t!==null&&(Ru(t,e,n),en(t,n))}function QT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),K0(t,n)}function GT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),K0(t,n)}var Q0;Q0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,MT(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,Ve&&e.flags&1048576&&Yx(e,Pc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rc(t,e),t=e.pendingProps;var s=fa(e,Lt.current);sa(e,n),s=xm(null,e,r,t,s,n);var i=_m();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(r)?(i=!0,Ic(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gm(e),s.updater=Od,e.stateNode=s,s._reactInternals=e,Gf(e,r,t,n),e=Xf(null,e,r,!0,i,n)):(e.tag=0,Ve&&i&&lm(e),Vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=YT(r),t=In(r,t),s){case 0:e=Yf(null,e,r,t,n);break e;case 1:e=Lv(null,e,r,t,n);break e;case 11:e=Dv(null,e,r,t,n);break e;case 14:e=jv(null,e,r,In(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),Yf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),Lv(t,e,r,s,n);case 3:e:{if(A0(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,r0(t,e),jc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ya(Error(q(423)),e),e=Mv(t,e,r,n,s);break e}else if(r!==s){s=ya(Error(q(424)),e),e=Mv(t,e,r,n,s);break e}else for(sn=hs(e.stateNode.containerInfo.firstChild),on=e,Ve=!0,Pn=null,n=t0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pa(),r===s){e=Pr(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return s0(e),t===null&&Hf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,zf(r,s)?a=null:i!==null&&zf(r,i)&&(e.flags|=32),I0(t,e),Vt(t,e,a,n),e.child;case 6:return t===null&&Hf(e),null;case 13:return P0(t,e,n);case 4:return ym(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ma(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),Dv(t,e,r,s,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,De(Oc,r._currentValue),r._currentValue=a,i!==null)if(Fn(i.value,a)){if(i.children===s.children&&!Xt.current){e=Pr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Tr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Kf(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(q(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Kf(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,sa(e,n),s=xn(s),r=r(s),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,s=In(r,e.pendingProps),s=In(r.type,s),jv(t,e,r,s,n);case 15:return N0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),rc(t,e),e.tag=1,Jt(r)?(t=!0,Ic(e)):t=!1,sa(e,n),E0(e,r,s),Gf(e,r,s,n),Xf(null,e,r,!0,t,n);case 19:return O0(t,e,n);case 22:return C0(t,e,n)}throw Error(q(156,e.tag))};function G0(t,e){return xx(t,e)}function ZT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,r){return new ZT(t,e,n,r)}function Om(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YT(t){if(typeof t=="function")return Om(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yp)return 11;if(t===Xp)return 14}return 2}function gs(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ac(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Om(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zi:return ri(n.children,s,i,e);case Zp:a=8,s|=8;break;case wf:return t=wn(12,n,e,s|2),t.elementType=wf,t.lanes=i,t;case bf:return t=wn(13,n,e,s),t.elementType=bf,t.lanes=i,t;case xf:return t=wn(19,n,e,s),t.elementType=xf,t.lanes=i,t;case sx:return Ld(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nx:a=10;break e;case rx:a=9;break e;case Yp:a=11;break e;case Xp:a=14;break e;case Gr:a=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=wn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ri(t,e,n,r){return t=wn(7,t,r,e),t.lanes=n,t}function Ld(t,e,n,r){return t=wn(22,t,r,e),t.elementType=sx,t.lanes=n,t.stateNode={isHidden:!1},t}function Jh(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function ef(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jh(0),this.expirationTimes=jh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dm(t,e,n,r,s,i,a,o,l){return t=new XT(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=wn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gm(i),t}function JT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Z0(t){if(!t)return ks;t=t._reactInternals;e:{if(_i(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Jt(n))return Gx(t,n,e)}return e}function Y0(t,e,n,r,s,i,a,o,l){return t=Dm(n,r,!0,t,s,i,a,o,l),t.context=Z0(null),n=t.current,r=$t(),s=ms(n),i=Tr(r,s),i.callback=e??null,fs(n,i,s),t.current.lanes=s,Ru(t,s,r),en(t,r),t}function Md(t,e,n,r){var s=e.current,i=$t(),a=ms(s);return n=Z0(n),e.context===null?e.context=n:e.pendingContext=n,e=Tr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fs(s,e,a),t!==null&&(Ln(t,s,a,i),ec(t,s,a)),a}function Bc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jm(t,e){Hv(t,e),(t=t.alternate)&&Hv(t,e)}var X0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lm(t){this._internalRoot=t}Rd.prototype.render=Lm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Md(t,e,null,null)};Rd.prototype.unmount=Lm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ci(function(){Md(null,t,null,null)}),e[Ir]=null}};function Rd(t){this._internalRoot=t}Rd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yr.length&&e!==0&&e<Yr[n].priority;n++);Yr.splice(n,0,t),n===0&&Ax(t)}};function Mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Kv(){}function eN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Bc(a);i.call(c)}}var a=Y0(e,r,t,0,null,!1,!1,"",Kv);return t._reactRootContainer=a,t[Ir]=a.current,nu(t.nodeType===8?t.parentNode:t),ci(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=Bc(l);o.call(c)}}var l=Dm(t,0,!1,null,null,!1,!1,"",Kv);return t._reactRootContainer=l,t[Ir]=l.current,nu(t.nodeType===8?t.parentNode:t),ci(function(){Md(e,l,n,r)}),l}function Ud(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=Bc(a);o.call(l)}}Md(e,a,t,s)}else a=eN(n,e,t,s,r);return Bc(a)}Tx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ko(e.pendingLanes);n!==0&&(tm(e,n|1),en(e,tt()),!(xe&6)&&(va=tt()+500,Ls()))}break;case 13:ci(function(){var r=Ar(t,1);if(r!==null){var s=$t();Ln(r,t,1,s)}}),jm(t,1)}};nm=function(t){if(t.tag===13){var e=Ar(t,134217728);if(e!==null){var n=$t();Ln(e,t,134217728,n)}jm(t,134217728)}};Nx=function(t){if(t.tag===13){var e=ms(t),n=Ar(t,e);if(n!==null){var r=$t();Ln(n,t,e,r)}jm(t,e)}};Cx=function(){return Ie};Ix=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Pf=function(t,e,n){switch(e){case"input":if(Ef(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Id(r);if(!s)throw Error(q(90));ax(r),Ef(r,s)}}}break;case"textarea":ux(t,n);break;case"select":e=n.value,e!=null&&ea(t,!!n.multiple,e,!1)}};mx=Im;gx=ci;var tN={usingClientEntryPoint:!1,Events:[Uu,Wi,Id,fx,px,Im]},yo={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nN={bundleType:yo.bundleType,version:yo.version,rendererPackageName:yo.rendererPackageName,rendererConfig:yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wx(t),t===null?null:t.stateNode},findFiberByHostInstance:yo.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Sd=Bl.inject(nN),Jn=Bl}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tN;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mm(e))throw Error(q(200));return JT(t,e,null,n)};hn.createRoot=function(t,e){if(!Mm(t))throw Error(q(299));var n=!1,r="",s=X0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Dm(t,1,!1,null,null,n,!1,r,s),t[Ir]=e.current,nu(t.nodeType===8?t.parentNode:t),new Lm(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=wx(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return ci(t)};hn.hydrate=function(t,e,n){if(!Fd(e))throw Error(q(200));return Ud(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!Mm(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=X0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Y0(e,null,t,1,n??null,s,!1,i,a),t[Ir]=e.current,nu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Rd(e)};hn.render=function(t,e,n){if(!Fd(e))throw Error(q(200));return Ud(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!Fd(t))throw Error(q(40));return t._reactRootContainer?(ci(function(){Ud(null,null,t,!1,function(){t._reactRootContainer=null,t[Ir]=null})}),!0):!1};hn.unstable_batchedUpdates=Im;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fd(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Ud(t,e,n,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function J0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J0)}catch(t){console.error(t)}}J0(),Xb.exports=hn;var rN=Xb.exports,e_,Qv=rN;e_=Qv.createRoot,Qv.hydrateRoot;/**
* @remix-run/router v1.21.1
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function du(){return du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},du.apply(this,arguments)}var os;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(os||(os={}));const Gv="popstate";function sN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return lp("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:$c(s)}return aN(e,n,null,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function t_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iN(){return Math.random().toString(36).substr(2,8)}function Zv(t,e){return{usr:t.state,key:t.key,idx:e}}function lp(t,e,n,r){return n===void 0&&(n=null),du({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ra(e):e,{state:n,key:e&&e.key||r||iN()})}function $c(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ra(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function aN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=os.Pop,l=null,c=h();c==null&&(c=0,a.replaceState(du({},a.state,{idx:c}),""));function h(){return(a.state||{idx:null}).idx}function m(){o=os.Pop;let O=h(),E=O==null?null:O-c;c=O,l&&l({action:o,location:C.location,delta:E})}function g(O,E){o=os.Push;let v=lp(C.location,O,E);c=h()+1;let x=Zv(v,c),j=C.createHref(v);try{a.pushState(x,"",j)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(j)}i&&l&&l({action:o,location:C.location,delta:1})}function _(O,E){o=os.Replace;let v=lp(C.location,O,E);c=h();let x=Zv(v,c),j=C.createHref(v);a.replaceState(x,"",j),i&&l&&l({action:o,location:C.location,delta:0})}function N(O){let E=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof O=="string"?O:$c(O);return v=v.replace(/ $/,"%20"),nt(E,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,E)}let C={get action(){return o},get location(){return t(s,a)},listen(O){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Gv,m),l=O,()=>{s.removeEventListener(Gv,m),l=null}},createHref(O){return e(s,O)},createURL:N,encodeLocation(O){let E=N(O);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:_,go(O){return a.go(O)}};return C}var Yv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Yv||(Yv={}));function oN(t,e,n){return n===void 0&&(n="/"),uN(t,e,n)}function uN(t,e,n,r){let s=typeof e=="string"?Ra(e):e,i=Rm(s.pathname||"/",n);if(i==null)return null;let a=n_(t);lN(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=xN(i);o=vN(a[l],c)}return o}function n_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(nt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ys([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),n_(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:gN(c,i.index),routesMeta:h})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of r_(i.path))s(i,a,l)}),e}function r_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=r_(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function lN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cN=/^:[\w-]+$/,dN=3,hN=2,fN=1,pN=10,mN=-2,Xv=t=>t==="*";function gN(t,e){let n=t.split("/"),r=n.length;return n.some(Xv)&&(r+=mN),e&&(r+=hN),n.filter(s=>!Xv(s)).reduce((s,i)=>s+(cN.test(i)?dN:i===""?fN:pN),r)}function yN(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function vN(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",m=wN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),g=l.route;if(!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:ys([i,m.pathname]),pathnameBase:SN(ys([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=ys([i,m.pathnameBase]))}return a}function wN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((l,c,h)=>{let{paramName:m,isOptional:g}=c;if(m==="*"){let N=o[h]||"";a=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const _=o[h];return g&&!_?l[m]=void 0:l[m]=(_||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:a,pattern:t}}function bN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),t_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,o)=>(r.push({paramName:a,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return t_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Rm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function _N(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ra(t):t;return{pathname:n?n.startsWith("/")?n:kN(n,e):e,search:TN(r),hash:NN(s)}}function kN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function tf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Fm(t,e){let n=EN(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Um(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ra(t):(s=du({},t),nt(!s.pathname||!s.pathname.includes("?"),tf("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),tf("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),tf("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}o=m>=0?e[m]:"/"}let l=_N(s,o),c=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ys=t=>t.join("/").replace(/\/\/+/g,"/"),SN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const s_=["post","put","patch","delete"];new Set(s_);const IN=["get",...s_];new Set(IN);/**
* React Router v6.28.2
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hu.apply(this,arguments)}const Vm=M.createContext(null),AN=M.createContext(null),Ms=M.createContext(null),Vd=M.createContext(null),Rs=M.createContext({outlet:null,matches:[],isDataRoute:!1}),i_=M.createContext(null);function PN(t,e){let{relative:n}=e===void 0?{}:e;Fa()||nt(!1);let{basename:r,navigator:s}=M.useContext(Ms),{hash:i,pathname:a,search:o}=o_(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:ys([r,a])),s.createHref({pathname:l,search:o,hash:i})}function Fa(){return M.useContext(Vd)!=null}function zu(){return Fa()||nt(!1),M.useContext(Vd).location}function a_(t){M.useContext(Ms).static||M.useLayoutEffect(t)}function Ua(){let{isDataRoute:t}=M.useContext(Rs);return t?qN():ON()}function ON(){Fa()||nt(!1);let t=M.useContext(Vm),{basename:e,future:n,navigator:r}=M.useContext(Ms),{matches:s}=M.useContext(Rs),{pathname:i}=zu(),a=JSON.stringify(Fm(s,n.v7_relativeSplatPath)),o=M.useRef(!1);return a_(()=>{o.current=!0}),M.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){r.go(l);return}let h=Um(l,JSON.parse(a),i,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ys([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,a,i,t])}function o_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Ms),{matches:s}=M.useContext(Rs),{pathname:i}=zu(),a=JSON.stringify(Fm(s,r.v7_relativeSplatPath));return M.useMemo(()=>Um(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function DN(t,e){return jN(t,e)}function jN(t,e,n,r){Fa()||nt(!1);let{navigator:s}=M.useContext(Ms),{matches:i}=M.useContext(Rs),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=zu(),h;if(e){var m;let O=typeof e=="string"?Ra(e):e;l==="/"||(m=O.pathname)!=null&&m.startsWith(l)||nt(!1),h=O}else h=c;let g=h.pathname||"/",_=g;if(l!=="/"){let O=l.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(O.length).join("/")}let N=oN(t,{pathname:_}),C=UN(N&&N.map(O=>Object.assign({},O,{params:Object.assign({},o,O.params),pathname:ys([l,s.encodeLocation?s.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?l:ys([l,s.encodeLocation?s.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),i,n,r);return e&&C?M.createElement(Vd.Provider,{value:{location:hu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:os.Pop}},C):C}function LN(){let t=$N(),e=CN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:r},n):null,null)}const MN=M.createElement(LN,null);class RN extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Rs.Provider,{value:this.props.routeContext},M.createElement(i_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FN(t){let{routeContext:e,match:n,children:r}=t,s=M.useContext(Vm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Rs.Provider,{value:e},r)}function UN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let h=a.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);h>=0||nt(!1),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let m=a[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=h),m.route.id){let{loaderData:g,errors:_}=n,N=m.route.loader&&g[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||N){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((h,m,g)=>{let _,N=!1,C=null,O=null;n&&(_=o&&m.route.id?o[m.route.id]:void 0,C=m.route.errorElement||MN,l&&(c<0&&g===0?(N=!0,O=null):c===g&&(N=!0,O=m.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,g+1)),v=()=>{let x;return _?x=C:N?x=O:m.route.Component?x=M.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=h,M.createElement(FN,{match:m,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:x})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?M.createElement(RN,{location:n.location,revalidation:n.revalidation,component:C,error:_,children:v(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):v()},null)}var u_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(u_||{}),qc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qc||{});function VN(t){let e=M.useContext(Vm);return e||nt(!1),e}function zN(t){let e=M.useContext(AN);return e||nt(!1),e}function BN(t){let e=M.useContext(Rs);return e||nt(!1),e}function l_(t){let e=BN(),n=e.matches[e.matches.length-1];return n.route.id||nt(!1),n.route.id}function $N(){var t;let e=M.useContext(i_),n=zN(qc.UseRouteError),r=l_(qc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function qN(){let{router:t}=VN(u_.UseNavigateStable),e=l_(qc.UseNavigateStable),n=M.useRef(!1);return a_(()=>{n.current=!0}),M.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,hu({fromRouteId:e},s)))},[t,e])}const Jv={};function WN(t,e){Jv[e]||(Jv[e]=!0,console.warn(e))}const ew=(t,e,n)=>WN(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function HN(t,e){(t==null?void 0:t.v7_startTransition)===void 0&&ew("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(t==null?void 0:t.v7_relativeSplatPath)===void 0&&ew("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function KN(t){let{to:e,replace:n,state:r,relative:s}=t;Fa()||nt(!1);let{future:i,static:a}=M.useContext(Ms),{matches:o}=M.useContext(Rs),{pathname:l}=zu(),c=Ua(),h=Um(e,Fm(o,i.v7_relativeSplatPath),l,s==="path"),m=JSON.stringify(h);return M.useEffect(()=>c(JSON.parse(m),{replace:n,state:r,relative:s}),[c,m,s,n,r]),null}function Qs(t){nt(!1)}function QN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=os.Pop,navigator:i,static:a=!1,future:o}=t;Fa()&&nt(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:i,static:a,future:hu({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof r=="string"&&(r=Ra(r));let{pathname:h="/",search:m="",hash:g="",state:_=null,key:N="default"}=r,C=M.useMemo(()=>{let O=Rm(h,l);return O==null?null:{location:{pathname:O,search:m,hash:g,state:_,key:N},navigationType:s}},[l,h,m,g,_,N,s]);return C==null?null:M.createElement(Ms.Provider,{value:c},M.createElement(Vd.Provider,{children:n,value:C}))}function GN(t){let{children:e,location:n}=t;return DN(cp(e),n)}new Promise(()=>{});function cp(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,s)=>{if(!M.isValidElement(r))return;let i=[...e,s];if(r.type===M.Fragment){n.push.apply(n,cp(r.props.children,i));return}r.type!==Qs&&nt(!1),!r.props.index||!r.props.children||nt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=cp(r.props.children,i)),n.push(a)}),n}/**
* React Router DOM v6.28.2
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function dp(){return dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dp.apply(this,arguments)}function ZN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function YN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XN(t,e){return t.button===0&&(!e||e==="_self")&&!YN(t)}const JN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eC="6";try{window.__reactRouterVersion=eC}catch{}const tC="startTransition",tw=K1[tC];function nC(t){let{basename:e,children:n,future:r,window:s}=t,i=M.useRef();i.current==null&&(i.current=sN({window:s,v5Compat:!0}));let a=i.current,[o,l]=M.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},h=M.useCallback(m=>{c&&tw?tw(()=>l(m)):l(m)},[l,c]);return M.useLayoutEffect(()=>a.listen(h),[a,h]),M.useEffect(()=>HN(r),[r]),M.createElement(QN,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const rC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vr=M.forwardRef(function(t,e){let{onClick:n,relative:r,reloadDocument:s,replace:i,state:a,target:o,to:l,preventScrollReset:c,viewTransition:h}=t,m=ZN(t,JN),{basename:g}=M.useContext(Ms),_,N=!1;if(typeof l=="string"&&sC.test(l)&&(_=l,rC))try{let v=new URL(window.location.href),x=l.startsWith("//")?new URL(v.protocol+l):new URL(l),j=Rm(x.pathname,g);x.origin===v.origin&&j!=null?l=j+x.search+x.hash:N=!0}catch{}let C=PN(l,{relative:r}),O=iC(l,{replace:i,state:a,target:o,preventScrollReset:c,relative:r,viewTransition:h});function E(v){n&&n(v),v.defaultPrevented||O(v)}return M.createElement("a",dp({},m,{href:_||C,onClick:N||s?n:E,ref:e,target:o}))});var nw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(nw||(nw={}));var rw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rw||(rw={}));function iC(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=Ua(),c=zu(),h=o_(t,{relative:a});return M.useCallback(m=>{if(XN(m,n)){m.preventDefault();let g=r!==void 0?r:$c(c)===$c(h);l(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,h,r,s,n,t,i,a,o])}/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var aC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const oC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Kt=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...c},h)=>M.createElement("svg",{ref:h,...aC,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${oC(t)}`,o].join(" "),...c},[...e.map(([m,g])=>M.createElement(m,g)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const uC=Kt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lC=Kt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const cC=Kt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const cr=Kt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const c_=Kt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const dC=Kt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const d_=Kt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const hC=Kt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const h_=Kt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const fC=Kt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const pC=Kt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const mC=Kt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sw=Kt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const zm=Kt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const zd=Kt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var iw={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const f_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},gC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],o=t[n++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},p_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,m=(i&3)<<4|o>>4;let g=(o&15)<<2|c>>6,_=c&63;l||(_=64,a||(g=64)),r.push(n[h],n[m],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(f_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const o=s<t.length?n[t.charAt(s)]:64;++s;const l=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||o==null||l==null)throw new yC;const c=i<<2|a>>4;if(r.push(c),o!==64){const h=a<<4&240|o>>2;if(r.push(h),l!==64){const m=o<<6&192|l;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vC=function(t){const e=f_(t);return p_.encodeByteArray(e,!0)},Wc=function(t){return vC(t).replace(/\./g,"")},m_=function(t){try{return p_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bC=()=>wC().__FIREBASE_DEFAULTS__,xC=()=>{if(typeof process>"u"||typeof iw>"u")return;const t=iw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_C=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&m_(t[1]);return e&&JSON.parse(e)},Bd=()=>{try{return bC()||xC()||_C()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},g_=t=>{var e,n;return(n=(e=Bd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},y_=t=>{const e=g_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},v_=()=>{var t;return(t=Bd())===null||t===void 0?void 0:t.config},w_=t=>{var e;return(e=Bd())===null||e===void 0?void 0:e[`_${t}`]};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wc(JSON.stringify(n)),Wc(JSON.stringify(a)),""].join(".")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function TC(){var t;const e=(t=Bd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AC(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PC(){return!TC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OC(){try{return typeof indexedDB=="object"}catch{return!1}}function DC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const jC="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jC,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bu.prototype.create)}}class Bu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?LC(i,r):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new dr(s,o,r)}}function LC(t,e){return t.replace(MC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const MC=/\{\$([^}]+)}/g;function RC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(aw(i)&&aw(a)){if(!Hc(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function aw(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $u(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function So(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,s]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function To(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FC(t,e){const n=new UC(t,e);return n.subscribe.bind(n)}class UC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=nf),s.error===void 0&&(s.error=nf),s.complete===void 0&&(s.complete=nf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nf(){}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Je(t){return t&&t._delegate?t._delegate:t}class Es{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Gs="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($C(e))try{this.getOrInitializeService({instanceIdentifier:Gs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gs){return this.instances.has(e)}getOptions(e=Gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);r===o&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gs){return this.component?this.component.multipleInstances?e:Gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BC(t){return t===Gs?void 0:t}function $C(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const WC={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},HC=ve.INFO,KC={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},QC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=KC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bm{constructor(e){this.name=e,this._logLevel=HC,this._logHandler=QC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const GC=(t,e)=>e.some(n=>t instanceof n);let ow,uw;function ZC(){return ow||(ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YC(){return uw||(uw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b_=new WeakMap,hp=new WeakMap,x_=new WeakMap,rf=new WeakMap,$m=new WeakMap;function XC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(vs(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&b_.set(n,t)}).catch(()=>{}),$m.set(e,t),e}function JC(t){if(hp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});hp.set(t,e)}let fp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||x_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eI(t){fp=t(fp)}function tI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sf(this),e,...n);return x_.set(r,e.sort?e.sort():[e]),vs(r)}:YC().includes(t)?function(...e){return t.apply(sf(this),e),vs(b_.get(this))}:function(...e){return vs(t.apply(sf(this),e))}}function nI(t){return typeof t=="function"?tI(t):(t instanceof IDBTransaction&&JC(t),GC(t,ZC())?new Proxy(t,fp):t)}function vs(t){if(t instanceof IDBRequest)return XC(t);if(rf.has(t))return rf.get(t);const e=nI(t);return e!==t&&(rf.set(t,e),$m.set(e,t)),e}const sf=t=>$m.get(t);function rI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=vs(a);return r&&a.addEventListener("upgradeneeded",l=>{r(vs(a.result),l.oldVersion,l.newVersion,vs(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const sI=["get","getKey","getAll","getAllKeys","count"],iI=["put","add","delete","clear"],af=new Map;function lw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(af.get(e))return af.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=iI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||sI.includes(n)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&l.done]))[0]};return af.set(e,i),i}eI(t=>({...t,get:(e,n,r)=>lw(e,n)||t.get(e,n,r),has:(e,n)=>!!lw(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(oI(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function oI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pp="@firebase/app",cw="0.10.13";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Or=new Bm("@firebase/app"),uI="@firebase/app-compat",lI="@firebase/analytics-compat",cI="@firebase/analytics",dI="@firebase/app-check-compat",hI="@firebase/app-check",fI="@firebase/auth",pI="@firebase/auth-compat",mI="@firebase/database",gI="@firebase/data-connect",yI="@firebase/database-compat",vI="@firebase/functions",wI="@firebase/functions-compat",bI="@firebase/installations",xI="@firebase/installations-compat",_I="@firebase/messaging",kI="@firebase/messaging-compat",EI="@firebase/performance",SI="@firebase/performance-compat",TI="@firebase/remote-config",NI="@firebase/remote-config-compat",CI="@firebase/storage",II="@firebase/storage-compat",AI="@firebase/firestore",PI="@firebase/vertexai-preview",OI="@firebase/firestore-compat",DI="firebase",jI="10.14.1";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mp="[DEFAULT]",LI={[pp]:"fire-core",[uI]:"fire-core-compat",[cI]:"fire-analytics",[lI]:"fire-analytics-compat",[hI]:"fire-app-check",[dI]:"fire-app-check-compat",[fI]:"fire-auth",[pI]:"fire-auth-compat",[mI]:"fire-rtdb",[gI]:"fire-data-connect",[yI]:"fire-rtdb-compat",[vI]:"fire-fn",[wI]:"fire-fn-compat",[bI]:"fire-iid",[xI]:"fire-iid-compat",[_I]:"fire-fcm",[kI]:"fire-fcm-compat",[EI]:"fire-perf",[SI]:"fire-perf-compat",[TI]:"fire-rc",[NI]:"fire-rc-compat",[CI]:"fire-gcs",[II]:"fire-gcs-compat",[AI]:"fire-fst",[OI]:"fire-fst-compat",[PI]:"fire-vertex","fire-js":"fire-js",[DI]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Kc=new Map,MI=new Map,gp=new Map;function dw(t,e){try{t.container.addComponent(e)}catch(n){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function di(t){const e=t.name;if(gp.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;gp.set(e,t);for(const n of Kc.values())dw(n,t);for(const n of MI.values())dw(n,t);return!0}function $d(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const RI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ws=new Bu("app","Firebase",RI);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ws.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Va=jI;function __(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ws.create("bad-app-name",{appName:String(s)});if(n||(n=v_()),!n)throw ws.create("no-options");const i=Kc.get(s);if(i){if(Hc(n,i.options)&&Hc(r,i.config))return i;throw ws.create("duplicate-app",{appName:s})}const a=new qC(s);for(const l of gp.values())a.addComponent(l);const o=new FI(n,r,a);return Kc.set(s,o),o}function qm(t=mp){const e=Kc.get(t);if(!e&&t===mp&&v_())return __();if(!e)throw ws.create("no-app",{appName:t});return e}function tr(t,e,n){var r;let s=(r=LI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(o.join(" "));return}di(new Es(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const UI="firebase-heartbeat-database",VI=1,fu="firebase-heartbeat-store";let of=null;function k_(){return of||(of=rI(UI,VI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ws.create("idb-open",{originalErrorMessage:t.message})})),of}async function zI(t){try{const e=(await k_()).transaction(fu),n=await e.objectStore(fu).get(E_(t));return await e.done,n}catch(e){if(e instanceof dr)Or.warn(e.message);else{const n=ws.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Or.warn(n.message)}}}async function hw(t,e){try{const n=(await k_()).transaction(fu,"readwrite");await n.objectStore(fu).put(e,E_(t)),await n.done}catch(n){if(n instanceof dr)Or.warn(n.message);else{const r=ws.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Or.warn(r.message)}}}function E_(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const BI=1024,$I=30*24*60*60*1e3;class qI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=$I}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fw(),{heartbeatsToSend:r,unsentEntries:s}=WI(this._heartbeatsCache.heartbeats),i=Wc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Or.warn(n),""}}}function fw(){return new Date().toISOString().substring(0,10)}function WI(t,e=BI){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),pw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),pw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OC()?DC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await zI(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function pw(t){return Wc(JSON.stringify({version:2,heartbeats:t})).length}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KI(t){di(new Es("platform-logger",e=>new aI(e),"PRIVATE")),di(new Es("heartbeat",e=>new qI(e),"PRIVATE")),tr(pp,cw,t),tr(pp,cw,"esm2017"),tr("fire-js","")}KI("");var QI="firebase",GI="10.14.1";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/tr(QI,GI,"app");function Wm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function S_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZI=S_,T_=new Bu("auth","Firebase",S_());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qc=new Bm("@firebase/auth");function YI(t,...e){Qc.logLevel<=ve.WARN&&Qc.warn(`Auth (${Va}): ${t}`,...e)}function oc(t,...e){Qc.logLevel<=ve.ERROR&&Qc.error(`Auth (${Va}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Un(t,...e){throw Hm(t,...e)}function nr(t,...e){return Hm(t,...e)}function N_(t,e,n){const r=Object.assign(Object.assign({},ZI()),{[e]:n});return new Bu("auth","Firebase",r).create(e,{appName:t.name})}function Nr(t){return N_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return T_.create(t,...e)}function le(t,e,...n){if(!t)throw Hm(e,...n)}function _r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw oc(e),new Error(e)}function Dr(t,e){t||_r(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XI(){return mw()==="http:"||mw()==="https:"}function mw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XI()||CC()||"connection"in navigator)?navigator.onLine:!0}function eA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Dr(n>e,"Short delay should be less than long delay!"),this.isMobile=SC()||IC()}get(){return JI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Km(t,e){Dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class C_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nA=new qu(3e4,6e4);function Fs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Us(t,e,n,r,s={}){return I_(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const o=$u(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return NC()||(c.referrerPolicy="no-referrer"),C_.fetch()(A_(t,t.config.apiHost,n,o),c)})}async function I_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tA),e);try{const s=new sA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw $l(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $l(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw $l(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw $l(t,"user-disabled",a);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw N_(t,h,c);Un(t,h)}}catch(s){if(s instanceof dr)throw s;Un(t,"network-request-failed",{message:String(s)})}}async function Wu(t,e,n,r,s={}){const i=await Us(t,e,n,r,s);return"mfaPendingCredential"in i&&Un(t,"multi-factor-auth-required",{_serverResponse:i}),i}function A_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Km(t.config,s):`${t.config.apiScheme}://${s}`}function rA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),nA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $l(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=nr(t,e,r);return s.customData._tokenResponse=n,s}function gw(t){return t!==void 0&&t.enterprise!==void 0}class iA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function aA(t,e){return Us(t,"GET","/v2/recaptchaConfig",Fs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function oA(t,e){return Us(t,"POST","/v1/accounts:delete",e)}async function P_(t,e){return Us(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uA(t,e=!1){const n=Je(t),r=await n.getIdToken(e),s=Qm(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:zo(uf(s.auth_time)),issuedAtTime:zo(uf(s.iat)),expirationTime:zo(uf(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function uf(t){return Number(t)*1e3}function Qm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return oc("JWT malformed, contained fewer than 3 sections"),null;try{const s=m_(n);return s?JSON.parse(s):(oc("Failed to decode base64 JWT payload"),null)}catch(s){return oc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function yw(t){const e=Qm(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function pu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&lA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function lA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zo(this.lastLoginAt),this.creationTime=zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Gc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await pu(t,P_(n,{idToken:r}));le(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?O_(i.providerUserInfo):[],o=hA(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),h=l?c:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new vp(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function dA(t){const e=Je(t);await Gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hA(t,e){return[...t.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function O_(t){return t.map(e=>{var{providerId:n}=e,r=Wm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function fA(t,e){const n=await I_(t,{},async()=>{const r=$u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=A_(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",C_.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pA(t,e){return Us(t,"POST","/v2/accounts:revokeToken",Fs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=yw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new aa;return r&&(le(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return _r("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Wr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class kr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Wm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await pu(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uA(this,e)}reload(){return dA(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new kr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Nr(this.auth));const e=await this.getIdToken();return await pu(this,oA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,o,l,c,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(a=n.photoURL)!==null&&a!==void 0?a:void 0,C=(o=n.tenantId)!==null&&o!==void 0?o:void 0,O=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:j,isAnonymous:V,providerData:$,stsTokenManager:S}=n;le(x&&S,e,"internal-error");const w=aa.fromJSON(this.name,S);le(typeof x=="string",e,"internal-error"),Wr(m,e.name),Wr(g,e.name),le(typeof j=="boolean",e,"internal-error"),le(typeof V=="boolean",e,"internal-error"),Wr(_,e.name),Wr(N,e.name),Wr(C,e.name),Wr(O,e.name),Wr(E,e.name),Wr(v,e.name);const k=new kr({uid:x,auth:e,email:g,emailVerified:j,displayName:m,isAnonymous:V,photoURL:N,phoneNumber:_,tenantId:C,stsTokenManager:w,createdAt:E,lastLoginAt:v});return $&&Array.isArray($)&&(k.providerData=$.map(T=>Object.assign({},T))),O&&(k._redirectEventId=O),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new aa;s.updateFromServerResponse(n);const i=new kr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Gc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?O_(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new aa;o.updateFromIdToken(r);const l=new kr({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new vp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vw=new Map;function Er(t){Dr(t instanceof Function,"Expected a class definition");let e=vw.get(t);return e?(Dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vw.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class D_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}D_.type="NONE";const ww=D_;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uc(t,e,n){return`firebase:${t}:${e}:${n}`}class oa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=uc(this.userKey,s.apiKey,i),this.fullPersistenceKey=uc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?kr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new oa(Er(ww),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Er(ww);const a=uc(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const h=await c._get(a);if(h){const m=kr._fromJSON(e,h);c!==i&&(o=m),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new oa(i,e,r):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new oa(i,e,r))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(R_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(j_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(U_(e))return"Blackberry";if(V_(e))return"Webos";if(L_(e))return"Safari";if((e.includes("chrome/")||M_(e))&&!e.includes("edge/"))return"Chrome";if(F_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function j_(t=Mt()){return/firefox\//i.test(t)}function L_(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function M_(t=Mt()){return/crios\//i.test(t)}function R_(t=Mt()){return/iemobile/i.test(t)}function F_(t=Mt()){return/android/i.test(t)}function U_(t=Mt()){return/blackberry/i.test(t)}function V_(t=Mt()){return/webos/i.test(t)}function Gm(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mA(t=Mt()){var e;return Gm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gA(){return AC()&&document.documentMode===10}function z_(t=Mt()){return Gm(t)||F_(t)||V_(t)||U_(t)||/windows phone/i.test(t)||R_(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function B_(t,e=[]){let n;switch(t){case"Browser":n=bw(Mt());break;case"Worker":n=`${bw(Mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Va}/${r}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function vA(t,e={}){return Us(t,"GET","/v2/passwordPolicy",Fs(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wA=6;class bA{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:wA,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xw(this),this.idTokenSubscription=new xw(this),this.beforeStateQueue=new yA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=T_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Er(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await oa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await P_(this,{idToken:e}),r=await kr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&l!=null&&l.user&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Nr(this));const n=e?Je(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vA(this),n=new bA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Er(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await oa.create(this,[Er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=B_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&YI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ki(t){return Je(t)}class xw{constructor(e){this.auth=e,this.observer=null,this.addObserver=FC(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _A(t){qd=t}function $_(t){return qd.loadJS(t)}function kA(){return qd.recaptchaEnterpriseScript}function EA(){return qd.gapiScript}function SA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const TA="recaptcha-enterprise",NA="NO_RECAPTCHA";class CA{constructor(e){this.type=TA,this.auth=ki(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{aA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new iA(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function s(i,a,o){const l=window.grecaptcha;gw(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(NA)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(o=>{if(!n&&gw(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=kA();l.length!==0&&(l+=o),$_(l).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function _w(t,e,n,r=!1){const s=new CA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function wp(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await _w(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await _w(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IA(t,e){const n=$d(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Hc(s,e))return r;Un(r,"already-initialized")}return n.initialize({options:e})}function AA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Er);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function PA(t,e,n){const r=ki(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=q_(e),{host:a,port:o}=OA(e),l=o===null?"":`:${o}`;r.config.emulator={url:`${i}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),DA()}function q_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OA(t){const e=q_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:kw(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:kw(a)}}}function kw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _r("not implemented")}_getIdTokenResponse(e){return _r("not implemented")}_linkToIdToken(e,n){return _r("not implemented")}_getReauthenticationResolver(e){return _r("not implemented")}}async function jA(t,e){return Us(t,"POST","/v1/accounts:signUp",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function LA(t,e){return Wu(t,"POST","/v1/accounts:signInWithPassword",Fs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function MA(t,e){return Wu(t,"POST","/v1/accounts:signInWithEmailLink",Fs(t,e))}async function RA(t,e){return Wu(t,"POST","/v1/accounts:signInWithEmailLink",Fs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mu extends Zm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new mu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new mu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&n!=null&&n.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,n,"signInWithPassword",LA);case"emailLink":return MA(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,r,"signUpPassword",jA);case"emailLink":return RA(e,{idToken:n,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ua(t,e){return Wu(t,"POST","/v1/accounts:signInWithIdp",Fs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const FA="http://localhost";class hi extends Zm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Wm(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new hi(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ua(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ua(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ua(e,n)}buildRequest(){const e={requestUri:FA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$u(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VA(t){const e=So(To(t)).link,n=e?So(To(e)).deep_link_id:null,r=So(To(t)).deep_link_id;return(r?So(To(r)).link:null)||r||n||e||t}class Ym{constructor(e){var n,r,s,i,a,o;const l=So(To(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,m=UA((s=l.mode)!==null&&s!==void 0?s:null);le(c&&h&&m,"argument-error"),this.apiKey=c,this.operation=m,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=VA(e);try{return new Ym(n)}catch{return null}}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class za{constructor(){this.providerId=za.PROVIDER_ID}static credential(e,n){return mu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ym.parseLink(n);return le(r,"argument-error"),mu._fromEmailAndCode(e,r.code,r.tenantId)}}za.PROVIDER_ID="password";za.EMAIL_PASSWORD_SIGN_IN_METHOD="password";za.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hu extends W_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jr extends Hu{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class es extends Hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hi._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return es.credential(n,r)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ts extends Hu{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ns extends Hu{constructor(){super("twitter.com")}static credential(e,n){return hi._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ns.credential(n,r)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function zA(t,e){return Wu(t,"POST","/v1/accounts:signUp",Fs(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await kr._fromIdTokenResponse(e,r,s),a=Ew(r);return new fi({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ew(r);return new fi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ew(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zc extends dr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Zc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Zc(e,n,r,s)}}function H_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Zc._fromErrorAndOperation(t,s,e,r):s})}async function BA(t,e,n=!1){const r=await pu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fi._forOperation(t,"link",r)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function $A(t,e,n=!1){const{auth:r}=t;if(Zn(r.app))return Promise.reject(Nr(r));const s="reauthenticate";try{const i=await pu(t,H_(r,s,e,t),n);le(i.idToken,r,"internal-error");const a=Qm(i.idToken);le(a,r,"internal-error");const{sub:o}=a;return le(t.uid===o,r,"user-mismatch"),fi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Un(r,"user-mismatch"),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function K_(t,e,n=!1){if(Zn(t.app))return Promise.reject(Nr(t));const r="signIn",s=await H_(t,r,e),i=await fi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function qA(t,e){return K_(ki(t),e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Q_(t){const e=ki(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WA(t,e,n){if(Zn(t.app))return Promise.reject(Nr(t));const r=ki(t),s=await wp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zA).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Q_(t),a}),i=await fi._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(i.user),i}function HA(t,e,n){return Zn(t.app)?Promise.reject(Nr(t)):qA(Je(t),za.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Q_(t),r})}function KA(t,e,n,r){return Je(t).onIdTokenChanged(e,n,r)}function QA(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function GA(t){return Je(t).signOut()}const Yc="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class G_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yc,"1"),this.storage.removeItem(Yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ZA=1e3,YA=10;class Z_ extends G_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);gA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,YA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Z_.type="LOCAL";const XA=Z_;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Y_ extends G_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Y_.type="SESSION";const X_=Y_;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(a).map(async c=>c(n.origin,i)),l=await JA(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wd.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Xm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class e2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=Xm("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(g.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rr(){return window}function t2(t){rr().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function J_(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function n2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function r2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function s2(){return J_()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ek="firebaseLocalStorageDb",i2=1,Xc="firebaseLocalStorage",tk="fbase_key";class Ku{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hd(t,e){return t.transaction([Xc],e?"readwrite":"readonly").objectStore(Xc)}function a2(){const t=indexedDB.deleteDatabase(ek);return new Ku(t).toPromise()}function bp(){const t=indexedDB.open(ek,i2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xc,{keyPath:tk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xc)?e(r):(r.close(),await a2(),e(await bp()))})})}async function Sw(t,e,n){const r=Hd(t,!0).put({[tk]:e,value:n});return new Ku(r).toPromise()}async function o2(t,e){const n=Hd(t,!1).get(e),r=await new Ku(n).toPromise();return r===void 0?null:r.value}function Tw(t,e){const n=Hd(t,!0).delete(e);return new Ku(n).toPromise()}const u2=800,l2=3;class nk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>l2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wd._getInstance(s2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await n2(),!this.activeServiceWorker)return;this.sender=new e2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||r2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bp();return await Sw(e,Yc,"1"),await Tw(e,Yc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Sw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>o2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Hd(s,!1).getAll();return new Ku(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nk.type="LOCAL";const c2=nk;new qu(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function d2(t,e){return e?Er(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jm extends Zm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ua(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ua(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function h2(t){return K_(t.auth,new Jm(t),t.bypassAuthState)}function f2(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),$A(n,new Jm(t),t.bypassAuthState)}async function p2(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),BA(n,new Jm(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rk{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h2;case"linkViaPopup":case"linkViaRedirect":return p2;case"reauthViaPopup":case"reauthViaRedirect":return f2;default:Un(this.auth,"internal-error")}}resolve(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const m2=new qu(2e3,1e4);class Xi extends rk{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Xi.currentPopupAction&&Xi.currentPopupAction.cancel(),Xi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Dr(this.filter.length===1,"Popup operations only handle one event");const e=Xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,m2.get())};e()}}Xi.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const g2="pendingRedirect",lc=new Map;class y2 extends rk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=lc.get(this.auth._key());if(!e){try{const n=await v2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}lc.set(this.auth._key(),e)}return this.bypassAuthState||lc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function v2(t,e){const n=x2(e),r=b2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function w2(t,e){lc.set(t._key(),e)}function b2(t){return Er(t._redirectPersistence)}function x2(t){return uc(g2,t.config.apiKey,t.name)}async function _2(t,e,n=!1){if(Zn(t.app))return Promise.reject(Nr(t));const r=ki(t),s=d2(r,e),i=await new y2(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const k2=10*60*1e3;class E2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!S2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sk(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(nr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nw(e))}saveEventToCache(e){this.cachedEventUids.add(Nw(e)),this.lastProcessedEventTime=Date.now()}}function Nw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function S2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sk(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function T2(t,e={}){return Us(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const N2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C2=/^https?/;async function I2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await T2(t);for(const n of e)try{if(A2(n))return}catch{}Un(t,"unauthorized-domain")}function A2(t){const e=yp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!C2.test(n))return!1;if(N2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const P2=new qu(3e4,6e4);function Cw(){const t=rr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function O2(t){return new Promise((e,n)=>{var r,s,i;function a(){Cw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cw(),n(nr(t,"network-request-failed"))},timeout:P2.get()})}if(!((s=(r=rr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=rr().gapi)===null||i===void 0)&&i.load)a();else{const o=SA("iframefcb");return rr()[o]=()=>{gapi.load?a():n(nr(t,"network-request-failed"))},$_(`${EA()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw cc=null,e})}let cc=null;function D2(t){return cc=cc||O2(t),cc}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const j2=new qu(5e3,15e3),L2="__/auth/iframe",M2="emulator/auth/iframe",R2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U2(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Km(e,M2):`https://${t.config.authDomain}/${L2}`,r={apiKey:e.apiKey,appName:t.name,v:Va},s=F2.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${$u(r).slice(1)}`}async function V2(t){const e=await D2(t),n=rr().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:U2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R2,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=nr(t,"network-request-failed"),o=rr().setTimeout(()=>{i(a)},j2.get());function l(){rr().clearTimeout(o),s(r)}r.ping(l).then(l,()=>{i(a)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B2=500,$2=600,q2="_blank",W2="http://localhost";class Iw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function H2(t,e,n,r=B2,s=$2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},z2),{width:r.toString(),height:s.toString(),top:i,left:a}),c=Mt().toLowerCase();n&&(o=M_(c)?q2:n),j_(c)&&(e=e||W2,l.scrollbars="yes");const h=Object.entries(l).reduce((g,[_,N])=>`${g}${_}=${N},`,"");if(mA(c)&&o!=="_self")return K2(e||"",o),new Iw(null);const m=window.open(e||"",o,h);le(m,t,"popup-blocked");try{m.focus()}catch{}return new Iw(m)}function K2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q2="__/auth/handler",G2="emulator/auth/handler",Z2=encodeURIComponent("fac");async function Aw(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Va,eventId:s};if(e instanceof W_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",RC(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))a[h]=m}if(e instanceof Hu){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),c=l?`#${Z2}=${encodeURIComponent(l)}`:"";return`${Y2(t)}?${$u(o).slice(1)}${c}`}function Y2({config:t}){return t.emulator?Km(t,G2):`https://${t.authDomain}/${Q2}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lf="webStorageSupport";class X2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=X_,this._completeRedirectFn=_2,this._overrideRedirectResult=w2}async _openPopup(e,n,r,s){var i;Dr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Aw(e,n,r,yp(),s);return H2(e,a,Xm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Aw(e,n,r,yp(),s);return t2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Dr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await V2(e),r=new E2(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lf,{type:lf},r=>{var s;const i=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[lf];i!==void 0&&n(!!i),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=I2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return z_()||L_()||Gm()}}const J2=X2;var Pw="@firebase/auth",Ow="1.7.9";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nP(t){di(new Es("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;le(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:B_(t)},c=new xA(r,s,i,l);return AA(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),di(new Es("auth-internal",e=>{const n=ki(e.getProvider("auth").getImmediate());return(r=>new eP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tr(Pw,Ow,tP(t)),tr(Pw,Ow,"esm2017")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rP=5*60,sP=w_("authIdTokenMaxAge")||rP;let Dw=null;const iP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sP)return;const s=n==null?void 0:n.token;Dw!==s&&(Dw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function aP(t=qm()){const e=$d(t,"auth");if(e.isInitialized())return e.getImmediate();const n=IA(t,{popupRedirectResolver:J2,persistence:[c2,XA,X_]}),r=w_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=iP(i.toString());QA(n,a,()=>a(n.currentUser)),KA(n,o=>a(o))}}const s=g_("auth");return s&&PA(n,`http://${s}`),n}function oP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_A({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=nr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",oP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nP("Browser");var jw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var si,ik;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,w){function k(){}k.prototype=w.prototype,S.D=w.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(T,P,A){for(var b=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)b[ke-2]=arguments[ke];return w.prototype[P].apply(T,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,w,k){k||(k=0);var T=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)T[P]=w.charCodeAt(k++)|w.charCodeAt(k++)<<8|w.charCodeAt(k++)<<16|w.charCodeAt(k++)<<24;else for(P=0;16>P;++P)T[P]=w[k++]|w[k++]<<8|w[k++]<<16|w[k++]<<24;w=S.g[0],k=S.g[1],P=S.g[2];var A=S.g[3],b=w+(A^k&(P^A))+T[0]+3614090360&4294967295;w=k+(b<<7&4294967295|b>>>25),b=A+(P^w&(k^P))+T[1]+3905402710&4294967295,A=w+(b<<12&4294967295|b>>>20),b=P+(k^A&(w^k))+T[2]+606105819&4294967295,P=A+(b<<17&4294967295|b>>>15),b=k+(w^P&(A^w))+T[3]+3250441966&4294967295,k=P+(b<<22&4294967295|b>>>10),b=w+(A^k&(P^A))+T[4]+4118548399&4294967295,w=k+(b<<7&4294967295|b>>>25),b=A+(P^w&(k^P))+T[5]+1200080426&4294967295,A=w+(b<<12&4294967295|b>>>20),b=P+(k^A&(w^k))+T[6]+2821735955&4294967295,P=A+(b<<17&4294967295|b>>>15),b=k+(w^P&(A^w))+T[7]+4249261313&4294967295,k=P+(b<<22&4294967295|b>>>10),b=w+(A^k&(P^A))+T[8]+1770035416&4294967295,w=k+(b<<7&4294967295|b>>>25),b=A+(P^w&(k^P))+T[9]+2336552879&4294967295,A=w+(b<<12&4294967295|b>>>20),b=P+(k^A&(w^k))+T[10]+4294925233&4294967295,P=A+(b<<17&4294967295|b>>>15),b=k+(w^P&(A^w))+T[11]+2304563134&4294967295,k=P+(b<<22&4294967295|b>>>10),b=w+(A^k&(P^A))+T[12]+1804603682&4294967295,w=k+(b<<7&4294967295|b>>>25),b=A+(P^w&(k^P))+T[13]+4254626195&4294967295,A=w+(b<<12&4294967295|b>>>20),b=P+(k^A&(w^k))+T[14]+2792965006&4294967295,P=A+(b<<17&4294967295|b>>>15),b=k+(w^P&(A^w))+T[15]+1236535329&4294967295,k=P+(b<<22&4294967295|b>>>10),b=w+(P^A&(k^P))+T[1]+4129170786&4294967295,w=k+(b<<5&4294967295|b>>>27),b=A+(k^P&(w^k))+T[6]+3225465664&4294967295,A=w+(b<<9&4294967295|b>>>23),b=P+(w^k&(A^w))+T[11]+643717713&4294967295,P=A+(b<<14&4294967295|b>>>18),b=k+(A^w&(P^A))+T[0]+3921069994&4294967295,k=P+(b<<20&4294967295|b>>>12),b=w+(P^A&(k^P))+T[5]+3593408605&4294967295,w=k+(b<<5&4294967295|b>>>27),b=A+(k^P&(w^k))+T[10]+38016083&4294967295,A=w+(b<<9&4294967295|b>>>23),b=P+(w^k&(A^w))+T[15]+3634488961&4294967295,P=A+(b<<14&4294967295|b>>>18),b=k+(A^w&(P^A))+T[4]+3889429448&4294967295,k=P+(b<<20&4294967295|b>>>12),b=w+(P^A&(k^P))+T[9]+568446438&4294967295,w=k+(b<<5&4294967295|b>>>27),b=A+(k^P&(w^k))+T[14]+3275163606&4294967295,A=w+(b<<9&4294967295|b>>>23),b=P+(w^k&(A^w))+T[3]+4107603335&4294967295,P=A+(b<<14&4294967295|b>>>18),b=k+(A^w&(P^A))+T[8]+1163531501&4294967295,k=P+(b<<20&4294967295|b>>>12),b=w+(P^A&(k^P))+T[13]+2850285829&4294967295,w=k+(b<<5&4294967295|b>>>27),b=A+(k^P&(w^k))+T[2]+4243563512&4294967295,A=w+(b<<9&4294967295|b>>>23),b=P+(w^k&(A^w))+T[7]+1735328473&4294967295,P=A+(b<<14&4294967295|b>>>18),b=k+(A^w&(P^A))+T[12]+2368359562&4294967295,k=P+(b<<20&4294967295|b>>>12),b=w+(k^P^A)+T[5]+4294588738&4294967295,w=k+(b<<4&4294967295|b>>>28),b=A+(w^k^P)+T[8]+2272392833&4294967295,A=w+(b<<11&4294967295|b>>>21),b=P+(A^w^k)+T[11]+1839030562&4294967295,P=A+(b<<16&4294967295|b>>>16),b=k+(P^A^w)+T[14]+4259657740&4294967295,k=P+(b<<23&4294967295|b>>>9),b=w+(k^P^A)+T[1]+2763975236&4294967295,w=k+(b<<4&4294967295|b>>>28),b=A+(w^k^P)+T[4]+1272893353&4294967295,A=w+(b<<11&4294967295|b>>>21),b=P+(A^w^k)+T[7]+4139469664&4294967295,P=A+(b<<16&4294967295|b>>>16),b=k+(P^A^w)+T[10]+3200236656&4294967295,k=P+(b<<23&4294967295|b>>>9),b=w+(k^P^A)+T[13]+681279174&4294967295,w=k+(b<<4&4294967295|b>>>28),b=A+(w^k^P)+T[0]+3936430074&4294967295,A=w+(b<<11&4294967295|b>>>21),b=P+(A^w^k)+T[3]+3572445317&4294967295,P=A+(b<<16&4294967295|b>>>16),b=k+(P^A^w)+T[6]+76029189&4294967295,k=P+(b<<23&4294967295|b>>>9),b=w+(k^P^A)+T[9]+3654602809&4294967295,w=k+(b<<4&4294967295|b>>>28),b=A+(w^k^P)+T[12]+3873151461&4294967295,A=w+(b<<11&4294967295|b>>>21),b=P+(A^w^k)+T[15]+530742520&4294967295,P=A+(b<<16&4294967295|b>>>16),b=k+(P^A^w)+T[2]+3299628645&4294967295,k=P+(b<<23&4294967295|b>>>9),b=w+(P^(k|~A))+T[0]+4096336452&4294967295,w=k+(b<<6&4294967295|b>>>26),b=A+(k^(w|~P))+T[7]+1126891415&4294967295,A=w+(b<<10&4294967295|b>>>22),b=P+(w^(A|~k))+T[14]+2878612391&4294967295,P=A+(b<<15&4294967295|b>>>17),b=k+(A^(P|~w))+T[5]+4237533241&4294967295,k=P+(b<<21&4294967295|b>>>11),b=w+(P^(k|~A))+T[12]+1700485571&4294967295,w=k+(b<<6&4294967295|b>>>26),b=A+(k^(w|~P))+T[3]+2399980690&4294967295,A=w+(b<<10&4294967295|b>>>22),b=P+(w^(A|~k))+T[10]+4293915773&4294967295,P=A+(b<<15&4294967295|b>>>17),b=k+(A^(P|~w))+T[1]+2240044497&4294967295,k=P+(b<<21&4294967295|b>>>11),b=w+(P^(k|~A))+T[8]+1873313359&4294967295,w=k+(b<<6&4294967295|b>>>26),b=A+(k^(w|~P))+T[15]+4264355552&4294967295,A=w+(b<<10&4294967295|b>>>22),b=P+(w^(A|~k))+T[6]+2734768916&4294967295,P=A+(b<<15&4294967295|b>>>17),b=k+(A^(P|~w))+T[13]+1309151649&4294967295,k=P+(b<<21&4294967295|b>>>11),b=w+(P^(k|~A))+T[4]+4149444226&4294967295,w=k+(b<<6&4294967295|b>>>26),b=A+(k^(w|~P))+T[11]+3174756917&4294967295,A=w+(b<<10&4294967295|b>>>22),b=P+(w^(A|~k))+T[2]+718787259&4294967295,P=A+(b<<15&4294967295|b>>>17),b=k+(A^(P|~w))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+A&4294967295}r.prototype.u=function(S,w){w===void 0&&(w=S.length);for(var k=w-this.blockSize,T=this.B,P=this.h,A=0;A<w;){if(P==0)for(;A<=k;)s(this,S,A),A+=this.blockSize;if(typeof S=="string"){for(;A<w;)if(T[P++]=S.charCodeAt(A++),P==this.blockSize){s(this,T),P=0;break}}else for(;A<w;)if(T[P++]=S[A++],P==this.blockSize){s(this,T),P=0;break}}this.h=P,this.o+=w},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;var k=8*this.o;for(w=S.length-8;w<S.length;++w)S[w]=k&255,k/=256;for(this.u(S),S=Array(16),w=k=0;4>w;++w)for(var T=0;32>T;T+=8)S[k++]=this.g[w]>>>T&255;return S};function i(S,w){var k=o;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=w(S)}function a(S,w){this.h=w;for(var k=[],T=!0,P=S.length-1;0<=P;P--){var A=S[P]|0;T&&A==w||(k[P]=A,T=!1)}this.g=k}var o={};function l(S){return-128<=S&&128>S?i(S,function(w){return new a([w|0],0>w?-1:0)}):new a([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return O(c(-S));for(var w=[],k=1,T=0;S>=k;T++)w[T]=S/k|0,k*=4294967296;return new a(w,0)}function h(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return O(h(S.substring(1),w));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(w,8)),T=m,P=0;P<S.length;P+=8){var A=Math.min(8,S.length-P),b=parseInt(S.substring(P,P+A),w);8>A?(A=c(Math.pow(w,A)),T=T.j(A).add(c(b))):(T=T.j(k),T=T.add(c(b)))}return T}var m=l(0),g=l(1),_=l(16777216);t=a.prototype,t.m=function(){if(C(this))return-O(this).m();for(var S=0,w=1,k=0;k<this.g.length;k++){var T=this.i(k);S+=(0<=T?T:4294967296+T)*w,w*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N(this))return"0";if(C(this))return"-"+O(this).toString(S);for(var w=c(Math.pow(S,6)),k=this,T="";;){var P=j(k,w).g;k=E(k,P.j(w));var A=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=P,N(k))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function N(S){if(S.h!=0)return!1;for(var w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function C(S){return S.h==-1}t.l=function(S){return S=E(this,S),C(S)?-1:N(S)?0:1};function O(S){for(var w=S.g.length,k=[],T=0;T<w;T++)k[T]=~S.g[T];return new a(k,~S.h).add(g)}t.abs=function(){return C(this)?O(this):this},t.add=function(S){for(var w=Math.max(this.g.length,S.g.length),k=[],T=0,P=0;P<=w;P++){var A=T+(this.i(P)&65535)+(S.i(P)&65535),b=(A>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);T=b>>>16,A&=65535,b&=65535,k[P]=b<<16|A}return new a(k,k[k.length-1]&-2147483648?-1:0)};function E(S,w){return S.add(O(w))}t.j=function(S){if(N(this)||N(S))return m;if(C(this))return C(S)?O(this).j(O(S)):O(O(this).j(S));if(C(S))return O(this.j(O(S)));if(0>this.l(_)&&0>S.l(_))return c(this.m()*S.m());for(var w=this.g.length+S.g.length,k=[],T=0;T<2*w;T++)k[T]=0;for(T=0;T<this.g.length;T++)for(var P=0;P<S.g.length;P++){var A=this.i(T)>>>16,b=this.i(T)&65535,ke=S.i(P)>>>16,Ue=S.i(P)&65535;k[2*T+2*P]+=b*Ue,v(k,2*T+2*P),k[2*T+2*P+1]+=A*Ue,v(k,2*T+2*P+1),k[2*T+2*P+1]+=b*ke,v(k,2*T+2*P+1),k[2*T+2*P+2]+=A*ke,v(k,2*T+2*P+2)}for(T=0;T<w;T++)k[T]=k[2*T+1]<<16|k[2*T];for(T=w;T<2*w;T++)k[T]=0;return new a(k,0)};function v(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function x(S,w){this.g=S,this.h=w}function j(S,w){if(N(w))throw Error("division by zero");if(N(S))return new x(m,m);if(C(S))return w=j(O(S),w),new x(O(w.g),O(w.h));if(C(w))return w=j(S,O(w)),new x(O(w.g),w.h);if(30<S.g.length){if(C(S)||C(w))throw Error("slowDivide_ only works with positive integers.");for(var k=g,T=w;0>=T.l(S);)k=V(k),T=V(T);var P=$(k,1),A=$(T,1);for(T=$(T,2),k=$(k,2);!N(T);){var b=A.add(T);0>=b.l(S)&&(P=P.add(k),A=b),T=$(T,1),k=$(k,1)}return w=E(S,P.j(w)),new x(P,w)}for(P=m;0<=S.l(w);){for(k=Math.max(1,Math.floor(S.m()/w.m())),T=Math.ceil(Math.log(k)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=c(k),b=A.j(w);C(b)||0<b.l(S);)k-=T,A=c(k),b=A.j(w);N(A)&&(A=g),P=P.add(A),S=E(S,b)}return new x(P,S)}t.A=function(S){return j(this,S).h},t.and=function(S){for(var w=Math.max(this.g.length,S.g.length),k=[],T=0;T<w;T++)k[T]=this.i(T)&S.i(T);return new a(k,this.h&S.h)},t.or=function(S){for(var w=Math.max(this.g.length,S.g.length),k=[],T=0;T<w;T++)k[T]=this.i(T)|S.i(T);return new a(k,this.h|S.h)},t.xor=function(S){for(var w=Math.max(this.g.length,S.g.length),k=[],T=0;T<w;T++)k[T]=this.i(T)^S.i(T);return new a(k,this.h^S.h)};function V(S){for(var w=S.g.length+1,k=[],T=0;T<w;T++)k[T]=S.i(T)<<1|S.i(T-1)>>>31;return new a(k,S.h)}function $(S,w){var k=w>>5;w%=32;for(var T=S.g.length-k,P=[],A=0;A<T;A++)P[A]=0<w?S.i(A+k)>>>w|S.i(A+k+1)<<32-w:S.i(A+k);return new a(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ik=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,si=a}).apply(typeof jw<"u"?jw:typeof self<"u"?self:typeof window<"u"?window:{});var ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ak,No,ok,dc,xp,uk,lk,ck;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,p){return u==Array.prototype||u==Object.prototype||(u[d]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ql=="object"&&ql];for(var d=0;d<u.length;++d){var p=u[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(u,d){if(d)e:{var p=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var D=u[y];if(!(D in p))break e;p=p[D]}u=u[u.length-1],y=p[u],d=d(y),d!=y&&d!=null&&e(p,u,{configurable:!0,writable:!0,value:d})}}function i(u,d){u instanceof String&&(u+="");var p=0,y=!1,D={next:function(){if(!y&&p<u.length){var R=p++;return{value:d(R,u[R]),done:!1}}return y=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(u){return u||function(){return i(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function c(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,p){return u.call.apply(u.bind,arguments)}function m(u,d,p){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,y),u.apply(d,D)}}return function(){return u.apply(d,arguments)}}function g(u,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,g.apply(null,arguments)}function _(u,d){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function N(u,d){function p(){}p.prototype=d.prototype,u.aa=d.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(y,D,R){for(var H=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)H[Le-2]=arguments[Le];return d.prototype[D].apply(y,H)}}function C(u){const d=u.length;if(0<d){const p=Array(d);for(let y=0;y<d;y++)p[y]=u[y];return p}return[]}function O(u,d){for(let p=1;p<arguments.length;p++){const y=arguments[p];if(l(y)){const D=u.length||0,R=y.length||0;u.length=D+R;for(let H=0;H<R;H++)u[D+H]=y[H]}else u.push(y)}}class E{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function v(u){return/^[\s\xa0]*$/.test(u)}function x(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function j(u){return j[" "](u),u}j[" "]=function(){};var V=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function $(u,d,p){for(const y in u)d.call(p,u[y],y,u)}function S(u,d){for(const p in u)d.call(void 0,u[p],p,u)}function w(u){const d={};for(const p in u)d[p]=u[p];return d}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,d){let p,y;for(let D=1;D<arguments.length;D++){y=arguments[D];for(p in y)u[p]=y[p];for(let R=0;R<k.length;R++)p=k[R],Object.prototype.hasOwnProperty.call(y,p)&&(u[p]=y[p])}}function P(u){var d=1;u=u.split(":");const p=[];for(;0<d&&u.length;)p.push(u.shift()),d--;return u.length&&p.push(u.join(":")),p}function A(u){o.setTimeout(()=>{throw u},0)}function b(){var u=ie;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class ke{constructor(){this.h=this.g=null}add(d,p){const y=Ue.get();y.set(d,p),this.h?this.h.next=y:this.g=y,this.h=y}}var Ue=new E(()=>new wt,u=>u.reset());class wt{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Qe,Q=!1,ie=new ke,ce=()=>{const u=o.Promise.resolve(void 0);Qe=()=>{u.then(Oe)}};var Oe=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(p){A(p)}var d=Ue;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Q=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ze(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}ze.prototype.h=function(){this.defaultPrevented=!0};var pn=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};o.addEventListener("test",p,d),o.removeEventListener("test",p,d)}catch{}return u}();function Sn(u,d){if(ze.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(V){e:{try{j(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else p=="mouseover"?d=u.fromElement:p=="mouseout"&&(d=u.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:tn[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Sn.aa.h.call(this)}}N(Sn,ze);var tn={2:"touch",3:"pen",4:"mouse"};Sn.prototype.h=function(){Sn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var mn="closure_listenable_"+(1e6*Math.random()|0),Qa=0;function ll(u,d,p,y,D){this.listener=u,this.proxy=null,this.src=d,this.type=p,this.capture=!!y,this.ha=D,this.key=++Qa,this.da=this.fa=!1}function Ti(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zs(u){this.src=u,this.g={},this.h=0}zs.prototype.add=function(u,d,p,y,D){var R=u.toString();u=this.g[R],u||(u=this.g[R]=[],this.h++);var H=Ni(u,d,y,D);return-1<H?(d=u[H],p||(d.fa=!1)):(d=new ll(d,this.src,R,!!y,D),d.fa=p,u.push(d)),d};function Ga(u,d){var p=d.type;if(p in u.g){var y=u.g[p],D=Array.prototype.indexOf.call(y,d,void 0),R;(R=0<=D)&&Array.prototype.splice.call(y,D,1),R&&(Ti(d),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Ni(u,d,p,y){for(var D=0;D<u.length;++D){var R=u[D];if(!R.da&&R.listener==d&&R.capture==!!p&&R.ha==y)return D}return-1}var Ci="closure_lm_"+(1e6*Math.random()|0),I={};function L(u,d,p,y,D){if(Array.isArray(d)){for(var R=0;R<d.length;R++)L(u,d[R],p,y,D);return null}return p=Tn(p),u&&u[mn]?u.K(d,p,c(y)?!!y.capture:!1,D):F(u,d,p,!1,y,D)}function F(u,d,p,y,D,R){if(!d)throw Error("Invalid event type");var H=c(D)?!!D.capture:!!D,Le=Ge(u);if(Le||(u[Ci]=Le=new zs(u)),p=Le.add(d,p,y,H,R),p.proxy)return p;if(y=Z(),p.proxy=y,y.src=u,y.listener=p,u.addEventListener)pn||(D=H),D===void 0&&(D=!1),u.addEventListener(d.toString(),y,D);else if(u.attachEvent)u.attachEvent(se(d.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Z(){function u(p){return d.call(u.src,u.listener,p)}const d=pe;return u}function K(u,d,p,y,D){if(Array.isArray(d))for(var R=0;R<d.length;R++)K(u,d[R],p,y,D);else y=c(y)?!!y.capture:!!y,p=Tn(p),u&&u[mn]?(u=u.i,d=String(d).toString(),d in u.g&&(R=u.g[d],p=Ni(R,p,y,D),-1<p&&(Ti(R[p]),Array.prototype.splice.call(R,p,1),R.length==0&&(delete u.g[d],u.h--)))):u&&(u=Ge(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Ni(d,p,y,D)),(p=-1<u?d[u]:null)&&W(p))}function W(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[mn])Ga(d.i,u);else{var p=u.type,y=u.proxy;d.removeEventListener?d.removeEventListener(p,y,u.capture):d.detachEvent?d.detachEvent(se(p),y):d.addListener&&d.removeListener&&d.removeListener(y),(p=Ge(d))?(Ga(p,u),p.h==0&&(p.src=null,d[Ci]=null)):Ti(u)}}}function se(u){return u in I?I[u]:I[u]="on"+u}function pe(u,d){if(u.da)u=!0;else{d=new Sn(d,this);var p=u.listener,y=u.ha||u.src;u.fa&&W(u),u=p.call(y,d)}return u}function Ge(u){return u=u[Ci],u instanceof zs?u:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(u){return typeof u=="function"?u:(u[Ze]||(u[Ze]=function(d){return u.handleEvent(d)}),u[Ze])}function pt(){Se.call(this),this.i=new zs(this),this.M=this,this.F=null}N(pt,Se),pt.prototype[mn]=!0,pt.prototype.removeEventListener=function(u,d,p,y){K(this,u,d,p,y)};function lt(u,d){var p,y=u.F;if(y)for(p=[];y;y=y.F)p.push(y);if(u=u.M,y=d.type||d,typeof d=="string")d=new ze(d,u);else if(d instanceof ze)d.target=d.target||u;else{var D=d;d=new ze(y,u),T(d,D)}if(D=!0,p)for(var R=p.length-1;0<=R;R--){var H=d.g=p[R];D=Ur(H,y,!0,d)&&D}if(H=d.g=u,D=Ur(H,y,!0,d)&&D,D=Ur(H,y,!1,d)&&D,p)for(R=0;R<p.length;R++)H=d.g=p[R],D=Ur(H,y,!1,d)&&D}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var p=u.g[d],y=0;y<p.length;y++)Ti(p[y]);delete u.g[d],u.h--}}this.F=null},pt.prototype.K=function(u,d,p,y){return this.i.add(String(u),d,!1,p,y)},pt.prototype.L=function(u,d,p,y){return this.i.add(String(u),d,!0,p,y)};function Ur(u,d,p,y){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,R=0;R<d.length;++R){var H=d[R];if(H&&!H.da&&H.capture==p){var Le=H.listener,bt=H.ha||H.src;H.fa&&Ga(u.i,H),D=Le.call(bt,y)!==!1&&D}}return D&&!y.defaultPrevented}function cl(u,d,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:o.setTimeout(u,d||0)}function Za(u){u.g=cl(()=>{u.g=null,u.i&&(u.i=!1,Za(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class hh extends Se{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Za(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(u){Se.call(this),this.h=u,this.g={}}N(Vr,Se);var Kg=[];function Qg(u){$(u.g,function(d,p){this.g.hasOwnProperty(p)&&W(d)},u),u.g={}}Vr.prototype.N=function(){Vr.aa.N.call(this),Qg(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fh=o.JSON.stringify,r1=o.JSON.parse,s1=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function ph(){}ph.prototype.h=null;function Gg(u){return u.h||(u.h=u.i())}function Zg(){}var Ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mh(){ze.call(this,"d")}N(mh,ze);function gh(){ze.call(this,"c")}N(gh,ze);var Bs={},Yg=null;function dl(){return Yg=Yg||new pt}Bs.La="serverreachability";function Xg(u){ze.call(this,Bs.La,u)}N(Xg,ze);function Xa(u){const d=dl();lt(d,new Xg(d))}Bs.STAT_EVENT="statevent";function Jg(u,d){ze.call(this,Bs.STAT_EVENT,u),this.stat=d}N(Jg,ze);function Ft(u){const d=dl();lt(d,new Jg(d,u))}Bs.Ma="timingevent";function ey(u,d){ze.call(this,Bs.Ma,u),this.size=d}N(ey,ze);function Ja(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},d)}function eo(){this.g=!0}eo.prototype.xa=function(){this.g=!1};function i1(u,d,p,y,D,R){u.info(function(){if(u.g)if(R)for(var H="",Le=R.split("&"),bt=0;bt<Le.length;bt++){var Ne=Le[bt].split("=");if(1<Ne.length){var Ct=Ne[0];Ne=Ne[1];var Qt=Ct.split("_");H=2<=Qt.length&&Qt[1]=="type"?H+(Ct+"="+Ne+"&"):H+(Ct+"=redacted&")}}else H=null;else H=R;return"XMLHTTP REQ ("+y+") [attempt "+D+"]: "+d+`
`+p+`
`+H})}function a1(u,d,p,y,D,R,H){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+D+"]: "+d+`
`+p+`
`+R+" "+H})}function Ii(u,d,p,y){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+u1(u,p)+(y?" "+y:"")})}function o1(u,d){u.info(function(){return"TIMEOUT: "+d})}eo.prototype.info=function(){};function u1(u,d){if(!u.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var y=p[u];if(!(2>y.length)){var D=y[1];if(Array.isArray(D)&&!(1>D.length)){var R=D[0];if(R!="noop"&&R!="stop"&&R!="close")for(var H=1;H<D.length;H++)D[H]=""}}}}return fh(p)}catch{return d}}var hl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ty={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yh;function fl(){}N(fl,ph),fl.prototype.g=function(){return new XMLHttpRequest},fl.prototype.i=function(){return{}},yh=new fl;function zr(u,d,p,y){this.j=u,this.i=d,this.l=p,this.R=y||1,this.U=new Vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ny}function ny(){this.i=null,this.g="",this.h=!1}var ry={},vh={};function wh(u,d,p){u.L=1,u.v=yl(fr(d)),u.m=p,u.P=!0,sy(u,null)}function sy(u,d){u.F=Date.now(),pl(u),u.A=fr(u.v);var p=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),vy(p.i,"t",y),u.C=0,p=u.j.J,u.h=new ny,u.g=My(u.j,p?d:null,!u.m),0<u.O&&(u.M=new hh(g(u.Y,u,u.g),u.O)),d=u.U,p=u.g,y=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(Kg[0]=D.toString()),D=Kg);for(var R=0;R<D.length;R++){var H=L(p,D[R],y||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Xa(),i1(u.i,u.u,u.A,u.l,u.R,u.m)}zr.prototype.ca=function(u){u=u.target;const d=this.M;d&&pr(u)==3?d.j():this.Y(u)},zr.prototype.Y=function(u){try{if(u==this.g)e:{const Qt=pr(this.g);var d=this.g.Ba();const Oi=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Sy(this.g)))){this.J||Qt!=4||d==7||(d==8||0>=Oi?Xa(3):Xa(2)),bh(this);var p=this.g.Z();this.X=p;t:if(iy(this)){var y=Sy(this.g);u="";var D=y.length,R=pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$s(this),to(this);var H="";break t}this.h.i=new o.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,u+=this.h.i.decode(y[d],{stream:!(R&&d==D-1)});y.length=0,this.h.g+=u,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=p==200,a1(this.i,this.u,this.A,this.l,this.R,Qt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,bt=this.g;if((Le=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Le)){var Ne=Le;break t}}Ne=null}if(p=Ne)Ii(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xh(this,p);else{this.o=!1,this.s=3,Ft(12),$s(this),to(this);break e}}if(this.P){p=!0;let Nn;for(;!this.J&&this.C<H.length;)if(Nn=l1(this,H),Nn==vh){Qt==4&&(this.s=4,Ft(14),p=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==ry){this.s=4,Ft(15),Ii(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else Ii(this.i,this.l,Nn,null),xh(this,Nn);if(iy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||H.length!=0||this.h.h||(this.s=1,Ft(16),p=!1),this.o=this.o&&p,!p)Ii(this.i,this.l,H,"[Invalid Chunked Response]"),$s(this),to(this);else if(0<H.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Nh(Ct),Ct.M=!0,Ft(11))}}else Ii(this.i,this.l,H,null),xh(this,H);Qt==4&&$s(this),this.o&&!this.J&&(Qt==4?Oy(this.j,this):(this.o=!1,pl(this)))}else T1(this.g),p==400&&0<H.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),$s(this),to(this)}}}catch{}finally{}};function iy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function l1(u,d){var p=u.C,y=d.indexOf(`
`,p);return y==-1?vh:(p=Number(d.substring(p,y)),isNaN(p)?ry:(y+=1,y+p>d.length?vh:(d=d.slice(y,y+p),u.C=y+p,d)))}zr.prototype.cancel=function(){this.J=!0,$s(this)};function pl(u){u.S=Date.now()+u.I,ay(u,u.I)}function ay(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ja(g(u.ba,u),d)}function bh(u){u.B&&(o.clearTimeout(u.B),u.B=null)}zr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(o1(this.i,this.A),this.L!=2&&(Xa(),Ft(17)),$s(this),this.s=2,to(this)):ay(this,this.S-u)};function to(u){u.j.G==0||u.J||Oy(u.j,u)}function $s(u){bh(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Qg(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function xh(u,d){try{var p=u.j;if(p.G!=0&&(p.g==u||_h(p.h,u))){if(!u.K&&_h(p.h,u)&&p.G==3){try{var y=p.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var D=y;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)kl(p),xl(p);else break e;Th(p),Ft(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ja(g(p.Za,p),6e3));if(1>=ly(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ws(p,11)}else if((u.K||p.g==u)&&kl(p),!v(d))for(D=p.Da.g.parse(d),d=0;d<D.length;d++){let Ne=D[d];if(p.T=Ne[0],Ne=Ne[1],p.G==2)if(Ne[0]=="c"){p.K=Ne[1],p.ia=Ne[2];const Ct=Ne[3];Ct!=null&&(p.la=Ct,p.j.info("VER="+p.la));const Qt=Ne[4];Qt!=null&&(p.Aa=Qt,p.j.info("SVER="+p.Aa));const Oi=Ne[5];Oi!=null&&typeof Oi=="number"&&0<Oi&&(y=1.5*Oi,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const Nn=u.g;if(Nn){const Sl=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var R=y.h;R.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(kh(R,R.h),R.h=null))}if(y.D){const Ch=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ch&&(y.ya=Ch,je(y.I,y.D,Ch))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var H=u;if(y.qa=Ly(y,y.J?y.ia:null,y.W),H.K){cy(y.h,H);var Le=H,bt=y.L;bt&&(Le.I=bt),Le.B&&(bh(Le),pl(Le)),y.g=H}else Ay(y);0<p.i.length&&_l(p)}else Ne[0]!="stop"&&Ne[0]!="close"||Ws(p,7);else p.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Ws(p,7):Sh(p):Ne[0]!="noop"&&p.l&&p.l.ta(Ne),p.v=0)}}Xa(4)}catch{}}var c1=class{constructor(u,d){this.g=u,this.map=d}};function oy(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ly(u){return u.h?1:u.g?u.g.size:0}function _h(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function kh(u,d){u.g?u.g.add(d):u.h=d}function cy(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}oy.prototype.cancel=function(){if(this.i=dy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function dy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const p of u.g.values())d=d.concat(p.D);return d}return C(u.i)}function d1(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var d=[],p=u.length,y=0;y<p;y++)d.push(u[y]);return d}d=[],p=0;for(y in u)d[p++]=u[y];return d}function h1(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var d=[];u=u.length;for(var p=0;p<u;p++)d.push(p);return d}d=[],p=0;for(const y in u)d[p++]=y;return d}}}function hy(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var p=h1(u),y=d1(u),D=y.length,R=0;R<D;R++)d.call(void 0,y[R],p&&p[R],u)}var fy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function f1(u,d){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var y=u[p].indexOf("="),D=null;if(0<=y){var R=u[p].substring(0,y);D=u[p].substring(y+1)}else R=u[p];d(R,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function qs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof qs){this.h=u.h,ml(this,u.j),this.o=u.o,this.g=u.g,gl(this,u.s),this.l=u.l;var d=u.i,p=new so;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),py(this,p),this.m=u.m}else u&&(d=String(u).match(fy))?(this.h=!1,ml(this,d[1]||"",!0),this.o=no(d[2]||""),this.g=no(d[3]||"",!0),gl(this,d[4]),this.l=no(d[5]||"",!0),py(this,d[6]||"",!0),this.m=no(d[7]||"")):(this.h=!1,this.i=new so(null,this.h))}qs.prototype.toString=function(){var u=[],d=this.j;d&&u.push(ro(d,my,!0),":");var p=this.g;return(p||d=="file")&&(u.push("//"),(d=this.o)&&u.push(ro(d,my,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(ro(p,p.charAt(0)=="/"?g1:m1,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",ro(p,v1)),u.join("")};function fr(u){return new qs(u)}function ml(u,d,p){u.j=p?no(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function gl(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function py(u,d,p){d instanceof so?(u.i=d,w1(u.i,u.h)):(p||(d=ro(d,y1)),u.i=new so(d,u.h))}function je(u,d,p){u.i.set(d,p)}function yl(u){return je(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function no(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ro(u,d,p){return typeof u=="string"?(u=encodeURI(u).replace(d,p1),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function p1(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var my=/[#\/\?@]/g,m1=/[#\?:]/g,g1=/[#\?]/g,y1=/[#\?@]/g,v1=/#/g;function so(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Br(u){u.g||(u.g=new Map,u.h=0,u.i&&f1(u.i,function(d,p){u.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=so.prototype,t.add=function(u,d){Br(this),this.i=null,u=Ai(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(d),this.h+=1,this};function gy(u,d){Br(u),d=Ai(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function yy(u,d){return Br(u),d=Ai(u,d),u.g.has(d)}t.forEach=function(u,d){Br(this),this.g.forEach(function(p,y){p.forEach(function(D){u.call(d,D,y,this)},this)},this)},t.na=function(){Br(this);const u=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let y=0;y<d.length;y++){const D=u[y];for(let R=0;R<D.length;R++)p.push(d[y])}return p},t.V=function(u){Br(this);let d=[];if(typeof u=="string")yy(this,u)&&(d=d.concat(this.g.get(Ai(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)d=d.concat(u[p])}return d},t.set=function(u,d){return Br(this),this.i=null,u=Ai(this,u),yy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function vy(u,d,p){gy(u,d),0<p.length&&(u.i=null,u.g.set(Ai(u,d),C(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var y=d[p];const R=encodeURIComponent(String(y)),H=this.V(y);for(y=0;y<H.length;y++){var D=R;H[y]!==""&&(D+="="+encodeURIComponent(String(H[y]))),u.push(D)}}return this.i=u.join("&")};function Ai(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function w1(u,d){d&&!u.j&&(Br(u),u.i=null,u.g.forEach(function(p,y){var D=y.toLowerCase();y!=D&&(gy(this,y),vy(this,D,p))},u)),u.j=d}function b1(u,d){const p=new eo;if(o.Image){const y=new Image;y.onload=_($r,p,"TestLoadImage: loaded",!0,d,y),y.onerror=_($r,p,"TestLoadImage: error",!1,d,y),y.onabort=_($r,p,"TestLoadImage: abort",!1,d,y),y.ontimeout=_($r,p,"TestLoadImage: timeout",!1,d,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else d(!1)}function x1(u,d){const p=new eo,y=new AbortController,D=setTimeout(()=>{y.abort(),$r(p,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:y.signal}).then(R=>{clearTimeout(D),R.ok?$r(p,"TestPingServer: ok",!0,d):$r(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),$r(p,"TestPingServer: error",!1,d)})}function $r(u,d,p,y,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),y(p)}catch{}}function _1(){this.g=new s1}function k1(u,d,p){const y=p||"";try{hy(u,function(D,R){let H=D;c(D)&&(H=fh(D)),d.push(y+R+"="+encodeURIComponent(H))})}catch(D){throw d.push(y+"type="+encodeURIComponent("_badmap")),D}}function vl(u){this.l=u.Ub||null,this.j=u.eb||!1}N(vl,ph),vl.prototype.g=function(){return new wl(this.l,this.j)},vl.prototype.i=function(u){return function(){return u}}({});function wl(u,d){pt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(wl,pt),t=wl.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,ao(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||o).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,io(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function wy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?io(this):ao(this),this.readyState==3&&wy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,io(this))},t.Qa=function(u){this.g&&(this.response=u,io(this))},t.ga=function(){this.g&&io(this)};function io(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ao(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=d.next();return u.join(`\r
`)};function ao(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function by(u){let d="";return $(u,function(p,y){d+=y,d+=":",d+=p,d+=`\r
`}),d}function Eh(u,d,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=by(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):je(u,d,p))}function Ye(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ye,pt);var E1=/^https?$/i,S1=["POST","PUT"];t=Ye.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yh.g(),this.v=this.o?Gg(this.o):Gg(yh),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(R){xy(this,R);return}if(u=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var D in y)p.set(D,y[D]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const R of y.keys())p.set(R,y.get(R));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(R=>R.toLowerCase()=="content-type"),D=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(S1,d,void 0))||y||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,H]of p)this.g.setRequestHeader(R,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ey(this),this.u=!0,this.g.send(u),this.u=!1}catch(R){xy(this,R)}};function xy(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,_y(u),bl(u)}function _y(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,lt(this,"complete"),lt(this,"abort"),bl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bl(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ky(this):this.bb())},t.bb=function(){ky(this)};function ky(u){if(u.h&&typeof a<"u"&&(!u.v[1]||pr(u)!=4||u.Z()!=2)){if(u.u&&pr(u)==4)cl(u.Ea,0,u);else if(lt(u,"readystatechange"),pr(u)==4){u.h=!1;try{const H=u.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var y;if(y=H===0){var D=String(u.D).match(fy)[1]||null;!D&&o.self&&o.self.location&&(D=o.self.location.protocol.slice(0,-1)),y=!E1.test(D?D.toLowerCase():"")}p=y}if(p)lt(u,"complete"),lt(u,"success");else{u.m=6;try{var R=2<pr(u)?u.g.statusText:""}catch{R=""}u.l=R+" ["+u.Z()+"]",_y(u)}}finally{bl(u)}}}}function bl(u,d){if(u.g){Ey(u);const p=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||lt(u,"ready");try{p.onreadystatechange=y}catch{}}}function Ey(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function pr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<pr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),r1(d)}};function Sy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function T1(u){const d={};u=(u.g&&2<=pr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(v(u[y]))continue;var p=P(u[y]);const D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const R=d[D]||[];d[D]=R,R.push(p)}S(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oo(u,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||d}function Ty(u){this.Aa=0,this.i=[],this.j=new eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oo("baseRetryDelayMs",5e3,u),this.cb=oo("retryDelaySeedMs",1e4,u),this.Wa=oo("forwardChannelMaxRetries",2,u),this.wa=oo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new oy(u&&u.concurrentRequestLimit),this.Da=new _1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ty.prototype,t.la=8,t.G=1,t.connect=function(u,d,p,y){Ft(0),this.W=u,this.H=d||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=Ly(this,null,this.W),_l(this)};function Sh(u){if(Ny(u),u.G==3){var d=u.U++,p=fr(u.I);if(je(p,"SID",u.K),je(p,"RID",d),je(p,"TYPE","terminate"),uo(u,p),d=new zr(u,u.j,d),d.L=2,d.v=yl(fr(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&o.Image&&(new Image().src=d.v,p=!0),p||(d.g=My(d.j,null),d.g.ea(d.v)),d.F=Date.now(),pl(d)}jy(u)}function xl(u){u.g&&(Nh(u),u.g.cancel(),u.g=null)}function Ny(u){xl(u),u.u&&(o.clearTimeout(u.u),u.u=null),kl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function _l(u){if(!uy(u.h)&&!u.s){u.s=!0;var d=u.Ga;Qe||ce(),Q||(Qe(),Q=!0),ie.add(d,u),u.B=0}}function N1(u,d){return ly(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ja(g(u.Ga,u,d),Dy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const D=new zr(this,this.j,u);let R=this.o;if(this.S&&(R?(R=w(R),T(R,this.S)):R=this.S),this.m!==null||this.O||(D.H=R,R=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Iy(this,D,d),p=fr(this.I),je(p,"RID",u),je(p,"CVER",22),this.D&&je(p,"X-HTTP-Session-Id",this.D),uo(this,p),R&&(this.O?d="headers="+encodeURIComponent(String(by(R)))+"&"+d:this.m&&Eh(p,this.m,R)),kh(this.h,D),this.Ua&&je(p,"TYPE","init"),this.P?(je(p,"$req",d),je(p,"SID","null"),D.T=!0,wh(D,p,null)):wh(D,p,d),this.G=2}}else this.G==3&&(u?Cy(this,u):this.i.length==0||uy(this.h)||Cy(this))};function Cy(u,d){var p;d?p=d.l:p=u.U++;const y=fr(u.I);je(y,"SID",u.K),je(y,"RID",p),je(y,"AID",u.T),uo(u,y),u.m&&u.o&&Eh(y,u.m,u.o),p=new zr(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),d&&(u.i=d.D.concat(u.i)),d=Iy(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),kh(u.h,p),wh(p,y,d)}function uo(u,d){u.H&&$(u.H,function(p,y){je(d,y,p)}),u.l&&hy({},function(p,y){je(d,y,p)})}function Iy(u,d,p){p=Math.min(u.i.length,p);var y=u.l?g(u.l.Na,u.l,u):null;e:{var D=u.i;let R=-1;for(;;){const H=["count="+p];R==-1?0<p?(R=D[0].g,H.push("ofs="+R)):R=0:H.push("ofs="+R);let Le=!0;for(let bt=0;bt<p;bt++){let Ne=D[bt].g;const Ct=D[bt].map;if(Ne-=R,0>Ne)R=Math.max(0,D[bt].g-100),Le=!1;else try{k1(Ct,H,"req"+Ne+"_")}catch{y&&y(Ct)}}if(Le){y=H.join("&");break e}}}return u=u.i.splice(0,p),d.D=u,y}function Ay(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Qe||ce(),Q||(Qe(),Q=!0),ie.add(d,u),u.v=0}}function Th(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ja(g(u.Fa,u),Dy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Py(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ja(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),xl(this),Py(this))};function Nh(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function Py(u){u.g=new zr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=fr(u.qa);je(d,"RID","rpc"),je(d,"SID",u.K),je(d,"AID",u.T),je(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&je(d,"TO",u.ja),je(d,"TYPE","xmlhttp"),uo(u,d),u.m&&u.o&&Eh(d,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=yl(fr(d)),p.m=null,p.P=!0,sy(p,u)}t.Za=function(){this.C!=null&&(this.C=null,xl(this),Th(this),Ft(19))};function kl(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Oy(u,d){var p=null;if(u.g==d){kl(u),Nh(u),u.g=null;var y=2}else if(_h(u.h,d))p=d.D,cy(u.h,d),y=1;else return;if(u.G!=0){if(d.o)if(y==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var D=u.B;y=dl(),lt(y,new ey(y,p)),_l(u)}else Ay(u);else if(D=d.s,D==3||D==0&&0<d.X||!(y==1&&N1(u,d)||y==2&&Th(u)))switch(p&&0<p.length&&(d=u.h,d.i=d.i.concat(p)),D){case 1:Ws(u,5);break;case 4:Ws(u,10);break;case 3:Ws(u,6);break;default:Ws(u,2)}}}function Dy(u,d){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*d}function Ws(u,d){if(u.j.info("Error code "+d),d==2){var p=g(u.fb,u),y=u.Xa;const D=!y;y=new qs(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ml(y,"https"),yl(y),D?b1(y.toString(),p):x1(y.toString(),p)}else Ft(2);u.G=0,u.l&&u.l.sa(d),jy(u),Ny(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function jy(u){if(u.G=0,u.ka=[],u.l){const d=dy(u.h);(d.length!=0||u.i.length!=0)&&(O(u.ka,d),O(u.ka,u.i),u.h.i.length=0,C(u.i),u.i.length=0),u.l.ra()}}function Ly(u,d,p){var y=p instanceof qs?fr(p):new qs(p);if(y.g!="")d&&(y.g=d+"."+y.g),gl(y,y.s);else{var D=o.location;y=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var R=new qs(null);y&&ml(R,y),d&&(R.g=d),D&&gl(R,D),p&&(R.l=p),y=R}return p=u.D,d=u.ya,p&&d&&je(y,p,d),je(y,"VER",u.la),uo(u,y),y}function My(u,d,p){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ye(new vl({eb:p})):new Ye(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ry(){}t=Ry.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function El(){}El.prototype.g=function(u,d){return new nn(u,d)};function nn(u,d){pt.call(this),this.g=new Ty(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!v(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Pi(this)}N(nn,pt),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Sh(this.g)},nn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=fh(u),u=p);d.i.push(new c1(d.Ya++,u)),d.G==3&&_l(d)},nn.prototype.N=function(){this.g.l=null,delete this.j,Sh(this.g),delete this.g,nn.aa.N.call(this)};function Fy(u){mh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const p in d){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}N(Fy,mh);function Uy(){gh.call(this),this.status=1}N(Uy,gh);function Pi(u){this.g=u}N(Pi,Ry),Pi.prototype.ua=function(){lt(this.g,"a")},Pi.prototype.ta=function(u){lt(this.g,new Fy(u))},Pi.prototype.sa=function(u){lt(this.g,new Uy)},Pi.prototype.ra=function(){lt(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,ck=function(){return new El},lk=function(){return dl()},uk=Bs,xp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hl.NO_ERROR=0,hl.TIMEOUT=8,hl.HTTP_ERROR=6,dc=hl,ty.COMPLETE="complete",ok=ty,Zg.EventType=Ya,Ya.OPEN="a",Ya.CLOSE="b",Ya.ERROR="c",Ya.MESSAGE="d",pt.prototype.listen=pt.prototype.K,No=Zg,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,ak=Ye}).apply(typeof ql<"u"?ql:typeof self<"u"?self:typeof window<"u"?window:{});const Lw="@firebase/firestore";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ba="10.14.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pi=new Bm("@firebase/firestore");function vo(){return pi.logLevel}function te(t,...e){if(pi.logLevel<=ve.DEBUG){const n=e.map(eg);pi.debug(`Firestore (${Ba}): ${t}`,...n)}}function jr(t,...e){if(pi.logLevel<=ve.ERROR){const n=e.map(eg);pi.error(`Firestore (${Ba}): ${t}`,...n)}}function wa(t,...e){if(pi.logLevel<=ve.WARN){const n=e.map(eg);pi.warn(`Firestore (${Ba}): ${t}`,...n)}}function eg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ae(t="Unexpected state"){const e=`FIRESTORE (${Ba}) INTERNAL ASSERTION FAILED: `+t;throw jr(e),new Error(e)}function _e(t,e){t||ae()}function he(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class lP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cP{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new dk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new Ot(e)}}class dP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new dP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,te("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new fP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=mP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function ba(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Te{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Te.fromMillis(Date.now())}static fromDate(e){return Te.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Te(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new Te(0,0))}static max(){return new ue(new Te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gu{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pe extends gu{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const gP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends gu{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return gP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(r+=o,s++):(i(),s++)}if(i(),a)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class re{constructor(e){this.path=e}static fromPath(e){return new re(Pe.fromString(e))}static fromName(e){return new re(Pe.fromString(e).popFirst(5))}static empty(){return new re(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Pe(e.slice()))}}function yP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new Ss(s,re.empty(),e)}function vP(t){return new Ss(t.readTime,t.key,-1)}class Ss{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ss(ue.min(),re.empty(),-1)}static max(){return new Ss(ue.max(),re.empty(),-1)}}function wP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Qu(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==bP)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&n()},l=>r(l))}),a=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{a[c]=h,++o,o===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function _P(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gu(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tg.oe=-1;function Zu(t){return t==null}function Jc(t){return t===0&&1/t==-1/0}function kP(t){return typeof t=="number"&&Number.isInteger(t)&&!Jc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ei(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ke{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wl(this.root,e,this.comparator,!0)}}class Wl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??_t.RED,this.left=s??_t.EMPTY,this.right=i??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new _t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return _t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(t,e,n,r,s){return this}insert(t,e,n){return new _t(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class St{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rw(this.data.getIterator())}getIteratorFrom(e){return new Rw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class Rw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class an{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new an([])}unionWith(e){let n=new St(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pk("Invalid base64 string: "+s):s}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const EP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(t){if(_e(!!t),typeof t=="string"){let e=0;const n=EP.exec(t);if(_e(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mi(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ng(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rg(t){const e=t.mapValue.fields.__previous_value__;return ng(e)?rg(e):e}function yu(t){const e=Ts(t.mapValue.fields.__local_write_time__.timestampValue);return new Te(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SP{constructor(e,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class vu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new vu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Hl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ng(t)?4:NP(t)?9007199254740991:TP(t)?10:11:ae()}function or(t,e){if(t===e)return!0;const n=gi(t);if(n!==gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yu(t).isEqual(yu(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=Ts(r.timestampValue),a=Ts(s.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return mi(r.bytesValue).isEqual(mi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return et(r.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return et(r.integerValue)===et(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=et(r.doubleValue),a=et(s.doubleValue);return i===a?Jc(i)===Jc(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return ba(t.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return function(r,s){const i=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Mw(i)!==Mw(a))return!1;for(const o in i)if(i.hasOwnProperty(o)&&(a[o]===void 0||!or(i[o],a[o])))return!1;return!0}(t,e);default:return ae()}}function wu(t,e){return(t.values||[]).find(n=>or(n,e))!==void 0}function xa(t,e){if(t===e)return 0;const n=gi(t),r=gi(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(s,i){const a=et(s.integerValue||s.doubleValue),o=et(i.integerValue||i.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return Fw(t.timestampValue,e.timestampValue);case 4:return Fw(yu(t),yu(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(s,i){const a=mi(s),o=mi(i);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const a=s.split("/"),o=i.split("/");for(let l=0;l<a.length&&l<o.length;l++){const c=Ee(a[l],o[l]);if(c!==0)return c}return Ee(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const a=Ee(et(s.latitude),et(i.latitude));return a!==0?a:Ee(et(s.longitude),et(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Uw(t.arrayValue,e.arrayValue);case 10:return function(s,i){var a,o,l,c;const h=s.fields||{},m=i.fields||{},g=(a=h.value)===null||a===void 0?void 0:a.arrayValue,_=(o=m.value)===null||o===void 0?void 0:o.arrayValue,N=Ee(((l=g==null?void 0:g.values)===null||l===void 0?void 0:l.length)||0,((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0);return N!==0?N:Uw(g,_)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===Hl.mapValue&&i===Hl.mapValue)return 0;if(s===Hl.mapValue)return 1;if(i===Hl.mapValue)return-1;const a=s.fields||{},o=Object.keys(a),l=i.fields||{},c=Object.keys(l);o.sort(),c.sort();for(let h=0;h<o.length&&h<c.length;++h){const m=Ee(o[h],c[h]);if(m!==0)return m;const g=xa(a[o[h]],l[c[h]]);if(g!==0)return g}return Ee(o.length,c.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Fw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Ts(t),r=Ts(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function Uw(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=xa(n[s],r[s]);if(i)return i}return Ee(n.length,r.length)}function _a(t){return _p(t)}function _p(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=Ts(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return mi(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return re.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",r=!0;for(const s of e.values||[])r?r=!1:n+=",",n+=_p(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const i of n)s?s=!1:r+=",",r+=`${i}:${_p(e.fields[i])}`;return r+"}"}(t.mapValue):ae()}function Vw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kp(t){return!!t&&"integerValue"in t}function sg(t){return!!t&&"arrayValue"in t}function zw(t){return!!t&&"nullValue"in t}function Bw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hc(t){return!!t&&"mapValue"in t}function TP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Bo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ei(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bo(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=o.popLast()}a?r[o.lastSegment()]=Bo(a):s.push(o.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());hc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];hc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ei(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Bt(Bo(this.value))}}function mk(t){const e=[];return Ei(t.fields,(n,r)=>{const s=new kt([n]);if(hc(r)){const i=mk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new an(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yt{constructor(e,n,r,s,i,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new yt(e,0,ue.min(),ue.min(),ue.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,s){return new yt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new yt(e,2,n,ue.min(),ue.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,ue.min(),ue.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ed{constructor(e,n){this.position=e,this.inclusive=n}}function $w(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=re.comparator(re.fromName(a.referenceValue),n.key):r=xa(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function qw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!or(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class td{constructor(e,n="asc"){this.field=e,this.dir=n}}function CP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gk{}class ot extends gk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AP(e,n,r):n==="array-contains"?new DP(e,r):n==="in"?new jP(e,r):n==="not-in"?new LP(e,r):n==="array-contains-any"?new MP(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new PP(e,r):new OP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xa(n,this.value)):n!==null&&gi(this.value)===gi(n)&&this.matchesComparison(xa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends gk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Vn(e,n)}matches(e){return yk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yk(t){return t.op==="and"}function vk(t){return IP(t)&&yk(t)}function IP(t){for(const e of t.filters)if(e instanceof Vn)return!1;return!0}function Ep(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+_a(t.value);if(vk(t))return t.filters.map(e=>Ep(e)).join(",");{const e=t.filters.map(n=>Ep(n)).join(",");return`${t.op}(${e})`}}function wk(t,e){return t instanceof ot?function(n,r){return r instanceof ot&&n.op===r.op&&n.field.isEqual(r.field)&&or(n.value,r.value)}(t,e):t instanceof Vn?function(n,r){return r instanceof Vn&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,a)=>s&&wk(i,r.filters[a]),!0):!1}(t,e):void ae()}function bk(t){return t instanceof ot?function(e){return`${e.field.canonicalString()} ${e.op} ${_a(e.value)}`}(t):t instanceof Vn?function(e){return e.op.toString()+" {"+e.getFilters().map(bk).join(" ,")+"}"}(t):"Filter"}class AP extends ot{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class PP extends ot{constructor(e,n){super(e,"in",n),this.keys=xk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OP extends ot{constructor(e,n){super(e,"not-in",n),this.keys=xk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class DP extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sg(n)&&wu(n.arrayValue,this.value)}}class jP extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wu(this.value.arrayValue,n)}}class LP extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wu(this.value.arrayValue,n)}}class MP extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wu(this.value.arrayValue,r))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RP{constructor(e,n=null,r=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function Ww(t,e=null,n=[],r=[],s=null,i=null,a=null){return new RP(t,e,n,r,s,i,a)}function ig(t){const e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ep(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Zu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_a(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_a(r)).join(",")),e.ue=n}return e.ue}function ag(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qw(t.startAt,e.startAt)&&qw(t.endAt,e.endAt)}function Sp(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yu{constructor(e,n=null,r=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FP(t,e,n,r,s,i,a,o){return new Yu(t,e,n,r,s,i,a,o)}function og(t){return new Yu(t)}function Hw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _k(t){return t.collectionGroup!==null}function $o(t){const e=he(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let i=new St(kt.comparator);return s.filters.forEach(a=>{a.getFlattenedFilters().forEach(o=>{o.isInequality()&&(i=i.add(o.field))})}),i})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new td(s,r))}),n.has(kt.keyField().canonicalString())||e.ce.push(new td(kt.keyField(),r))}return e.ce}function ir(t){const e=he(t);return e.le||(e.le=UP(e,$o(t))),e.le}function UP(t,e){if(t.limitType==="F")return Ww(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new td(s.field,i)});const n=t.endAt?new ed(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ed(t.startAt.position,t.startAt.inclusive):null;return Ww(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Tp(t,e){const n=t.filters.concat([e]);return new Yu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Np(t,e,n){return new Yu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kd(t,e){return ag(ir(t),ir(e))&&t.limitType===e.limitType}function kk(t){return`${ig(ir(t))}|lt:${t.limitType}`}function Mi(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>bk(r)).join(", ")}]`),Zu(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_a(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_a(r)).join(",")),`Target(${n})`}(ir(t))}; limitType=${t.limitType})`}function Qd(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):re.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of $o(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,a){const o=$w(s,i,a);return s.inclusive?o<=0:o<0}(n.startAt,$o(n),r)||n.endAt&&!function(s,i,a){const o=$w(s,i,a);return s.inclusive?o>=0:o>0}(n.endAt,$o(n),r))}(t,e)}function VP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ek(t){return(e,n)=>{let r=!1;for(const s of $o(t)){const i=zP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zP(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(s,i,a){const o=i.data.field(s),l=a.data.field(s);return o!==null&&l!==null?xa(o,l):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $a{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return fk(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const BP=new Ke(re.comparator);function Lr(){return BP}const Sk=new Ke(re.comparator);function Co(...t){let e=Sk;for(const n of t)e=e.insert(n.key,n);return e}function Tk(t){let e=Sk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ei(){return qo()}function Nk(){return qo()}function qo(){return new $a(t=>t.toString(),(t,e)=>t.isEqual(e))}const $P=new Ke(re.comparator),qP=new St(re.comparator);function ye(...t){let e=qP;for(const n of t)e=e.add(n);return e}const WP=new St(Ee);function HP(){return WP}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ug(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function Ck(t){return{integerValue:""+t}}function KP(t,e){return kP(e)?Ck(e):ug(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gd{constructor(){this._=void 0}}function QP(t,e,n){return t instanceof nd?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ng(s)&&(s=rg(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof bu?Ak(t,e):t instanceof xu?Pk(t,e):function(r,s){const i=Ik(r,s),a=Kw(i)+Kw(r.Pe);return kp(i)&&kp(r.Pe)?Ck(a):ug(r.serializer,a)}(t,e)}function GP(t,e,n){return t instanceof bu?Ak(t,e):t instanceof xu?Pk(t,e):n}function Ik(t,e){return t instanceof rd?function(n){return kp(n)||function(r){return!!r&&"doubleValue"in r}(n)}(e)?e:{integerValue:0}:null}class nd extends Gd{}class bu extends Gd{constructor(e){super(),this.elements=e}}function Ak(t,e){const n=Ok(e);for(const r of t.elements)n.some(s=>or(s,r))||n.push(r);return{arrayValue:{values:n}}}class xu extends Gd{constructor(e){super(),this.elements=e}}function Pk(t,e){let n=Ok(e);for(const r of t.elements)n=n.filter(s=>!or(s,r));return{arrayValue:{values:n}}}class rd extends Gd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Kw(t){return et(t.integerValue||t.doubleValue)}function Ok(t){return sg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ZP(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof bu&&r instanceof bu||n instanceof xu&&r instanceof xu?ba(n.elements,r.elements,or):n instanceof rd&&r instanceof rd?or(n.Pe,r.Pe):n instanceof nd&&r instanceof nd}(t.transform,e.transform)}class YP{constructor(e,n){this.version=e,this.transformResults=n}}class ut{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ut}static exists(e){return new ut(void 0,e)}static updateTime(e){return new ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zd{}function Dk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ju(t.key,ut.none()):new Xu(t.key,t.data,ut.none());{const n=t.data,r=Bt.empty();let s=new St(kt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Vs(t.key,r,new an(s.toArray()),ut.none())}}function XP(t,e,n){t instanceof Xu?function(r,s,i){const a=r.value.clone(),o=Gw(r.fieldTransforms,s,i.transformResults);a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Vs?function(r,s,i){if(!fc(r.precondition,s))return void s.convertToUnknownDocument(i.version);const a=Gw(r.fieldTransforms,s,i.transformResults),o=s.data;o.setAll(jk(r)),o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Wo(t,e,n,r){return t instanceof Xu?function(s,i,a,o){if(!fc(s.precondition,i))return a;const l=s.value.clone(),c=Zw(s.fieldTransforms,o,i);return l.setAll(c),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vs?function(s,i,a,o){if(!fc(s.precondition,i))return a;const l=Zw(s.fieldTransforms,o,i),c=i.data;return c.setAll(jk(s)),c.setAll(l),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,i,a){return fc(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,n)}function JP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ik(r.transform,s||null);i!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,i))}return n||null}function Qw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ba(n,r,(s,i)=>ZP(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xu extends Zd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vs extends Zd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function jk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Gw(t,e,n){const r=new Map;_e(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);r.set(i.field,GP(a,o,n[s]))}return r}function Zw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,QP(i,a,e))}return r}class Ju extends Zd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lk extends Zd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eO{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&XP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Nk();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(s.key)?null:o;const l=Dk(a,o);l!==null&&r.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,(n,r)=>Qw(n,r))&&ba(this.baseMutations,e.baseMutations,(n,r)=>Qw(n,r))}}class lg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length);let s=function(){return $P}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new lg(e,n,r,s)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var st,we;function Mk(t){switch(t){default:return ae();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function Rk(t){if(t===void 0)return jr("GRPC error has no .code"),U.UNKNOWN;switch(t){case st.OK:return U.OK;case st.CANCELLED:return U.CANCELLED;case st.UNKNOWN:return U.UNKNOWN;case st.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case st.INTERNAL:return U.INTERNAL;case st.UNAVAILABLE:return U.UNAVAILABLE;case st.UNAUTHENTICATED:return U.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case st.NOT_FOUND:return U.NOT_FOUND;case st.ALREADY_EXISTS:return U.ALREADY_EXISTS;case st.PERMISSION_DENIED:return U.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case st.ABORTED:return U.ABORTED;case st.OUT_OF_RANGE:return U.OUT_OF_RANGE;case st.UNIMPLEMENTED:return U.UNIMPLEMENTED;case st.DATA_LOSS:return U.DATA_LOSS;default:return ae()}}(we=st||(st={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rO(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sO=new si([4294967295,4294967295],0);function Yw(t){const e=rO().encode(t),n=new ik;return n.update(e),new Uint8Array(n.digest())}function Xw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new si([n,r],0),new si([s,i],0)]}class cg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Io(`Invalid padding: ${n}`);if(r<0)throw new Io(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Io(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Io(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=si.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(si.fromNumber(r)));return s.compare(sO)===1&&(s=new si([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Yw(e),[r,s]=Xw(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new cg(i,s,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const n=Yw(e),[r,s]=Xw(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,el.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yd(ue.min(),s,new Ke(Ee),Lr(),ye())}}class el{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new el(r,n,ye(),ye(),ye())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Fk{constructor(e,n){this.targetId=e,this.me=n}}class Uk{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Jw{constructor(){this.fe=0,this.ge=tb(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ae()}}),new el(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=tb()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class iO{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lr(),this.qe=eb(),this.Qe=new Ke(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Sp(i))if(r===0){const a=new re(i.path);this.Ue(n,a,yt.newNoDocument(a,ue.min()))}else _e(r===1);else{const a=this.Ye(n);if(a!==r){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,o;try{a=mi(r).toUint8Array()}catch(l){if(l instanceof pk)return wa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new cg(a,s,i)}catch(l){return wa(l instanceof Io?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Sp(o.target)){const l=new re(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,yt.newNoDocument(l,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ye();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Yd(e,n,this.Qe,this.ke,r);return this.ke=Lr(),this.qe=eb(),this.Qe=new Ke(Ee),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Jw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Jw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function eb(){return new Ke(re.comparator)}function tb(){return new Ke(re.comparator)}const aO={asc:"ASCENDING",desc:"DESCENDING"},oO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uO={and:"AND",or:"OR"};class lO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cp(t,e){return t.useProto3Json||Zu(e)?e:{value:e}}function sd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cO(t,e){return sd(t,e.toTimestamp())}function un(t){return _e(!!t),ue.fromTimestamp(function(e){const n=Ts(e);return new Te(n.seconds,n.nanos)}(t))}function dg(t,e){return Ip(t,e).canonicalString()}function Ip(t,e){const n=function(r){return new Pe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zk(t){const e=Pe.fromString(t);return _e(Kk(e)),e}function id(t,e){return dg(t.databaseId,e.path)}function Ho(t,e){const n=zk(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re($k(n))}function Bk(t,e){return dg(t.databaseId,e)}function dO(t){const e=zk(t);return e.length===4?Pe.emptyPath():$k(e)}function Ap(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $k(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function nb(t,e,n){return{name:id(t,e),fields:n.value.mapValue.fields}}function hO(t,e){return"found"in e?function(n,r){_e(!!r.found),r.found.name,r.found.updateTime;const s=Ho(n,r.found.name),i=un(r.found.updateTime),a=r.found.createTime?un(r.found.createTime):ue.min(),o=new Bt({mapValue:{fields:r.found.fields}});return yt.newFoundDocument(s,i,a,o)}(t,e):"missing"in e?function(n,r){_e(!!r.missing),_e(!!r.readTime);const s=Ho(n,r.missing),i=un(r.readTime);return yt.newNoDocument(s,i)}(t,e):ae()}function fO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,c){return l.useProto3Json?(_e(c===void 0||typeof c=="string"),Nt.fromBase64String(c||"")):(_e(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Nt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(l){const c=l.code===void 0?U.UNKNOWN:Rk(l.code);return new Y(c,l.message||"")}(a);n=new Uk(r,s,i,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ho(t,r.document.name),i=un(r.document.updateTime),a=r.document.createTime?un(r.document.createTime):ue.min(),o=new Bt({mapValue:{fields:r.document.fields}}),l=yt.newFoundDocument(s,i,a,o),c=r.targetIds||[],h=r.removedTargetIds||[];n=new pc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ho(t,r.document),i=r.readTime?un(r.readTime):ue.min(),a=yt.newNoDocument(s,i),o=r.removedTargetIds||[];n=new pc([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ho(t,r.document),i=r.removedTargetIds||[];n=new pc([],i,s,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new nO(s,i),o=r.targetId;n=new Fk(o,a)}}return n}function qk(t,e){let n;if(e instanceof Xu)n={update:nb(t,e.key,e.value)};else if(e instanceof Ju)n={delete:id(t,e.key)};else if(e instanceof Vs)n={update:nb(t,e.key,e.data),updateMask:_O(e.fieldMask)};else{if(!(e instanceof Lk))return ae();n={verify:id(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const a=i.transform;if(a instanceof nd)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bu)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xu)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rd)return{fieldPath:i.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:cO(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function pO(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?un(r.updateTime):un(s);return i.isEqual(ue.min())&&(i=un(s)),new YP(i,r.transformResults||[])}(n,e))):[]}function mO(t,e){return{documents:[Bk(t,e.path)]}}function gO(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bk(t,s);const i=function(l){if(l.length!==0)return Hk(Vn.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:Ri(h.field),direction:wO(h.dir)}}(c))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Cp(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:s}}function yO(t){let e=dO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(h){const m=Wk(h);return m instanceof Vn&&vk(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(h){return h.map(m=>function(g){return new td(Fi(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(m))}(n.orderBy));let o=null;n.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,Zu(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,g=h.values||[];return new ed(g,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,g=h.values||[];return new ed(g,m)}(n.endAt)),FP(e,s,a,i,o,"F",l,c)}function vO(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wk(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Fi(e.unaryFilter.field);return ot.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Fi(e.unaryFilter.field);return ot.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Fi(e.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Fi(e.unaryFilter.field);return ot.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(e){return ot.create(Fi(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Vn.create(e.compositeFilter.filters.map(n=>Wk(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ae()}}(e.compositeFilter.op))}(t):ae()}function wO(t){return aO[t]}function bO(t){return oO[t]}function xO(t){return uO[t]}function Ri(t){return{fieldPath:t.canonicalString()}}function Fi(t){return kt.fromServerFormat(t.fieldPath)}function Hk(t){return t instanceof ot?function(e){if(e.op==="=="){if(Bw(e.value))return{unaryFilter:{field:Ri(e.field),op:"IS_NAN"}};if(zw(e.value))return{unaryFilter:{field:Ri(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Bw(e.value))return{unaryFilter:{field:Ri(e.field),op:"IS_NOT_NAN"}};if(zw(e.value))return{unaryFilter:{field:Ri(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ri(e.field),op:bO(e.op),value:e.value}}}(t):t instanceof Vn?function(e){const n=e.getFilters().map(r=>Hk(r));return n.length===1?n[0]:{compositeFilter:{op:xO(e.op),filters:n}}}(t):ae()}function _O(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Kk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class us{constructor(e,n,r,s,i=ue.min(),a=ue.min(),o=Nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kO{constructor(e){this.ct=e}}function EO(t){const e=yO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Np(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SO{constructor(){this.un=new TO}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Ss.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class TO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new St(Pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new St(Pe.comparator)).toArray()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ka{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ka(0)}static kn(){return new ka(-1)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NO{constructor(){this.changes=new $a(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class CO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class IO{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Wo(r.mutation,s,an.empty(),Te.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const s=ei();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Co();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,s){let i=Lr();const a=qo(),o=function(){return qo()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Vs)?i=i.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),Wo(h.mutation,c,h.mutation.getFieldMask(),Te.now())):a.set(c.key,an.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>a.set(c,h)),n.forEach((c,h)=>{var m;return o.set(c,new CO(h,(m=a.get(c))!==null&&m!==void 0?m:null))}),o))}recalculateAndSaveOverlays(e,n){const r=qo();let s=new Ke((a,o)=>a-o),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||an.empty();h=o.applyToLocalView(c,h),r.set(l,h);const m=(s.get(o.batchId)||ye()).add(l);s=s.insert(o.batchId,m)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,h=l.value,m=Nk();h.forEach(g=>{if(!i.has(g)){const _=Dk(n.get(g),r.get(g));_!==null&&m.set(g,_),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,m))}return z.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return re.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_k(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(ei());let o=-1,l=i;return a.next(c=>z.forEach(c,(h,m)=>(o<m.largestBatchId&&(o=m.largestBatchId),i.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ye())).next(h=>({batchId:o,changes:Tk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let s=Co();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Co();return this.indexManager.getCollectionParents(e,i).next(o=>z.forEach(o,l=>{const c=function(h,m){return new Yu(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((l,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,yt.newInvalidDocument(h)))});let o=Co();return a.forEach((l,c)=>{const h=i.get(l);h!==void 0&&Wo(h.mutation,c,an.empty(),Te.now()),Qd(n,c)&&(o=o.insert(l,c))}),o})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:un(r.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:EO(r.bundledQuery),readTime:un(r.readTime)}}(n)),z.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class PO{constructor(){this.overlays=new Ke(re.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ei();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=ei(),i=n.length+1,a=new re(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ke((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=ei(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=ei(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=s)););return z.resolve(o)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new tO(n,r));let i=this.Ir.get(n);i===void 0&&(i=ye(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OO{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hg{constructor(){this.Tr=new St(mt.Er),this.dr=new St(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new re(new Pe([])),r=new mt(n,e),s=new mt(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new re(new Pe([])),r=new mt(n,e),s=new mt(n,e+1);let i=ye();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return re.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||re.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new St(mt.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new eO(i,n,r,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new mt(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),s=new mt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const o=this.Dr(a.wr);i.push(o)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(Ee);return n.forEach(s=>{const i=new mt(s,0),a=new mt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{r=r.add(o.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;re.isDocumentKey(i)||(i=i.child(""));const a=new mt(new re(i),0);let o=new St(Ee);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),z.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new mt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new mt(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jO{constructor(e){this.Mr=e,this.docs=function(){return new Ke(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=Lr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Lr();const a=n.path,o=new re(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||wP(vP(h),r)<=0||(s.has(h.key)||Qd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ae()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LO(this)}getSize(e){return z.resolve(this.size)}}class LO extends NO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class MO{constructor(e){this.persistence=e,this.Nr=new $a(n=>ig(n),ag),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hg,this.targetCount=0,this.kr=ka.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ka(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tg(0),this.Kr=!1,this.Kr=!0,this.$r=new OO,this.referenceDelegate=e(this),this.Ur=new MO(this),this.indexManager=new SO,this.remoteDocumentCache=function(r){return new jO(r)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new kO(n),this.Gr=new AO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new DO(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const s=new FO(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class FO extends xP{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Jr=new hg,this.Yr=null}static Zr(e){return new fg(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=re.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ye(),s=ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new pg(e,n.fromCache,r,s)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class UO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class VO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return PC()?8:_P(Mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new UO;return this.Xi(e,n,a).next(o=>{if(i.result=o,this.zi)return this.es(e,n,a,o.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(vo()<=ve.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Mi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(vo()<=ve.DEBUG&&te("QueryEngine","Query:",Mi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(vo()<=ve.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Mi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ir(n))):z.resolve())}Yi(e,n){if(Hw(n))return z.resolve(null);let r=ir(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Np(n,null,"F"),r=ir(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ye(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,o);return this.ns(n,c,a,l.readTime)?this.Yi(e,Np(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return Hw(n)||s.isEqual(ue.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?z.resolve(null):(vo()<=ve.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Mi(n)),this.rs(e,a,n,yP(s,-1)).next(o=>o))})}ts(e,n){let r=new St(Ek(e));return n.forEach((s,i)=>{Qd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return vo()<=ve.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Mi(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ss.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zO{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ke(Ee),this._s=new $a(i=>ig(i),ag),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function BO(t,e,n,r){return new zO(t,e,n,r)}async function Qk(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],o=[];let l=ye();for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function $O(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,o,l,c){const h=l.batch,m=h.keys();let g=z.resolve();return m.forEach(_=>{g=g.next(()=>c.getEntry(o,_)).next(N=>{const C=l.docVersions.get(_);_e(C!==null),N.version.compareTo(C)<0&&(h.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),c.addEntry(N)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(o,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let o=ye();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(o=o.add(a.batch.mutations[l].key));return o}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Gk(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function qO(t,e){const n=he(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const o=[];e.targetChanges.forEach((h,m)=>{const g=s.get(m);if(!g)return;o.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,m)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(Nt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),s=s.insert(m,_),function(N,C,O){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,_,h)&&o.push(n.Ur.updateTargetData(i,_))});let l=Lr(),c=ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),o.push(WO(i,a,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ue.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));o.push(h)}return z.waitFor(o).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function WO(t,e,n){let r=ye(),s=ye();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Lr();return n.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):te("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function HO(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KO(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new us(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Pp(t,e,n){const r=he(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Gu(a))throw a;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function rb(t,e,n){const r=he(t);let s=ue.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",a=>function(o,l,c){const h=he(o),m=h._s.get(c);return m!==void 0?z.resolve(h.os.get(m)):h.Ur.getTargetData(l,c)}(r,a,ir(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:ue.min(),n?i:ye())).next(o=>(QO(r,VP(e),o),{documents:o,Ts:i})))}function QO(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class sb{constructor(){this.activeTargetIds=HP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GO{constructor(){this.so=new sb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new sb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ZO{_o(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ib{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Kl=null;function cf(){return Kl===null?Kl=function(){return 268435456+Math.round(2147483648*Math.random())}():Kl++,"0x"+Kl.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const YO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class XO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Pt="WebChannelConnection";class JO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+e.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(e,n,r,s,i){const a=cf(),o=this.xo(e,n.toUriEncodedString());te("RestConnection",`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,i),this.No(e,o,l,r).then(c=>(te("RestConnection",`Received RPC '${e}' ${a}: `,c),c),c=>{throw wa("RestConnection",`RPC '${e}' ${a} failed with error: `,c,"url: ",o,"request:",r),c})}Lo(e,n,r,s,i,a){return this.Mo(e,n,r,s,i)}Oo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ba}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}xo(e,n){const r=YO[e];return`${this.Do}/v1/${n}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=cf();return new Promise((a,o)=>{const l=new ak;l.setWithCredentials(!0),l.listenOnce(ok.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case dc.NO_ERROR:const h=l.getResponseJson();te(Pt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),a(h);break;case dc.TIMEOUT:te(Pt,`RPC '${e}' ${i} timed out`),o(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case dc.HTTP_ERROR:const m=l.getStatus();if(te(Pt,`RPC '${e}' ${i} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const N=function(C){const O=C.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(O)>=0?O:U.UNKNOWN}(_.status);o(new Y(N,_.message))}else o(new Y(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Y(U.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{te(Pt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);te(Pt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=cf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ck(),o=lk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");te(Pt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const m=a.createWebChannel(h,l);let g=!1,_=!1;const N=new XO({Io:O=>{_?te(Pt,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(g||(te(Pt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),te(Pt,`RPC '${e}' stream ${s} sending:`,O),m.send(O))},To:()=>m.close()}),C=(O,E,v)=>{O.listen(E,x=>{try{v(x)}catch(j){setTimeout(()=>{throw j},0)}})};return C(m,No.EventType.OPEN,()=>{_||(te(Pt,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),C(m,No.EventType.CLOSE,()=>{_||(_=!0,te(Pt,`RPC '${e}' stream ${s} transport closed`),N.So())}),C(m,No.EventType.ERROR,O=>{_||(_=!0,wa(Pt,`RPC '${e}' stream ${s} transport errored:`,O),N.So(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),C(m,No.EventType.MESSAGE,O=>{var E;if(!_){const v=O.data[0];_e(!!v);const x=v,j=x.error||((E=x[0])===null||E===void 0?void 0:E.error);if(j){te(Pt,`RPC '${e}' stream ${s} received error:`,j);const V=j.status;let $=function(w){const k=st[w];if(k!==void 0)return Rk(k)}(V),S=j.message;$===void 0&&($=U.INTERNAL,S="Unknown error status: "+V+" with message "+j.message),_=!0,N.So(new Y($,S)),m.close()}else te(Pt,`RPC '${e}' stream ${s} received:`,v),N.bo(v)}}),C(o,uk.STAT_EVENT,O=>{O.stat===xp.PROXY?te(Pt,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===xp.NOPROXY&&te(Pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function df(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Xd(t){return new lO(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mg{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zk{constructor(e,n,r,s,i,a,o,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new mg(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(jr(n.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Y(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eD extends Zk{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=fO(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?ue.min():i.readTime?un(i.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ap(this.serializer),n.addTarget=function(s,i){let a;const o=i.target;if(a=Sp(o)?{documents:mO(s,o)}:{query:gO(s,o)._t},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=Vk(s,i.resumeToken);const l=Cp(s,i.expectedCount);l!==null&&(a.expectedCount=l)}else if(i.snapshotVersion.compareTo(ue.min())>0){a.readTime=sd(s,i.snapshotVersion.toTimestamp());const l=Cp(s,i.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=vO(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ap(this.serializer),n.removeTarget=e,this.a_(n)}}class tD extends Zk{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=pO(e.writeResults,e.commitTime),r=un(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ap(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>qk(this.serializer,r))};this.a_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Ip(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,Ip(n,r),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(U.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class rD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(jr(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Si(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(o){const l=he(o);l.L_.add(4),await tl(l),l.q_.set("Unknown"),l.L_.delete(4),await Jd(l)}(this))})}),this.q_=new rD(r,s)}}async function Jd(t){if(Si(t))for(const e of t.B_)await e(!0)}async function tl(t){for(const e of t.B_)await e(!1)}function Yk(t,e){const n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wg(n)?vg(n):qa(n).r_()&&yg(n,e))}function gg(t,e){const n=he(t),r=qa(n);n.N_.delete(e),r.r_()&&Xk(n,e),n.N_.size===0&&(r.r_()?r.o_():Si(n)&&n.q_.set("Unknown"))}function yg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qa(t).A_(e)}function Xk(t,e){t.Q_.xe(e),qa(t).R_(e)}function vg(t){t.Q_=new iO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qa(t).start(),t.q_.v_()}function wg(t){return Si(t)&&!qa(t).n_()&&t.N_.size>0}function Si(t){return he(t).L_.size===0}function Jk(t){t.Q_=void 0}async function iD(t){t.q_.set("Online")}async function aD(t){t.N_.forEach((e,n)=>{yg(t,e)})}async function oD(t,e){Jk(t),wg(t)?(t.q_.M_(e),vg(t)):t.q_.set("Unknown")}async function uD(t,e,n){if(t.q_.set("Online"),e instanceof Uk&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,i),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ad(t,r)}else if(e instanceof pc?t.Q_.Ke(e):e instanceof Fk?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await Gk(t.localStore);n.compareTo(r)>=0&&await function(s,i){const a=s.Q_.rt(i);return a.targetChanges.forEach((o,l)=>{if(o.resumeToken.approximateByteSize()>0){const c=s.N_.get(l);c&&s.N_.set(l,c.withResumeToken(o.resumeToken,i))}}),a.targetMismatches.forEach((o,l)=>{const c=s.N_.get(o);if(!c)return;s.N_.set(o,c.withResumeToken(Nt.EMPTY_BYTE_STRING,c.snapshotVersion)),Xk(s,o);const h=new us(c.target,o,l,c.sequenceNumber);yg(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await ad(t,r)}}async function ad(t,e,n){if(!Gu(e))throw e;t.L_.add(1),await tl(t),t.q_.set("Offline"),n||(n=()=>Gk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Jd(t)})}function eE(t,e){return e().catch(n=>ad(t,n,e))}async function eh(t){const e=he(t),n=Ns(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lD(e);)try{const s=await HO(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,cD(e,s)}catch(s){await ad(e,s)}tE(e)&&nE(e)}function lD(t){return Si(t)&&t.O_.length<10}function cD(t,e){t.O_.push(e);const n=Ns(t);n.r_()&&n.V_&&n.m_(e.mutations)}function tE(t){return Si(t)&&!Ns(t).n_()&&t.O_.length>0}function nE(t){Ns(t).start()}async function dD(t){Ns(t).p_()}async function hD(t){const e=Ns(t);for(const n of t.O_)e.m_(n.mutations)}async function fD(t,e,n){const r=t.O_.shift(),s=lg.from(r,e,n);await eE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await eh(t)}async function pD(t,e){e&&Ns(t).V_&&await async function(n,r){if(function(s){return Mk(s)&&s!==U.ABORTED}(r.code)){const s=n.O_.shift();Ns(n).s_(),await eE(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await eh(n)}}(t,e),tE(t)&&nE(t)}async function ab(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=Si(n);n.L_.add(3),await tl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Jd(n)}async function mD(t,e){const n=he(t);e?(n.L_.delete(2),await Jd(n)):e||(n.L_.add(2),await tl(n),n.q_.set("Unknown"))}function qa(t){return t.K_||(t.K_=function(e,n,r){const s=he(e);return s.w_(),new eD(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:iD.bind(null,t),Ro:aD.bind(null,t),mo:oD.bind(null,t),d_:uD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wg(t)?vg(t):t.q_.set("Unknown")):(await t.K_.stop(),Jk(t))})),t.K_}function Ns(t){return t.U_||(t.U_=function(e,n,r){const s=he(e);return s.w_(),new tD(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dD.bind(null,t),mo:pD.bind(null,t),f_:hD.bind(null,t),g_:fD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await eh(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,o=new bg(e,n,a,s,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(t,e){if(jr("AsyncQueue",`${e}: ${t}`),Gu(t))return new Y(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class la{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=Co(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new la(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof la)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new la;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ob{constructor(){this.W_=new Ke(re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ea{constructor(e,n,r,s,i,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Ea(e,n,la.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class yD{constructor(){this.queries=ub(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,n){const r=he(e),s=r.queries;r.queries=ub(),s.forEach((i,a)=>{for(const o of a.j_)o.onError(n)})})(this,new Y(U.ABORTED,"Firestore shutting down"))}}function ub(){return new $a(t=>kk(t),Kd)}async function rE(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new gD,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const o=xg(a,`Initialization of query '${Mi(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&_g(n)}async function sE(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vD(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(r=!0);a.z_=s}}r&&_g(n)}function wD(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function _g(t){t.Y_.forEach(e=>{e.next()})}var Op,lb;(lb=Op||(Op={})).ea="default",lb.Cache="cache";class iE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ea(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Op.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aE{constructor(e){this.key=e}}class oE{constructor(e){this.key=e}}class bD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=Ek(e),this.Ra=new la(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new ob,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const g=s.get(h),_=Qd(this.query,m)?m:null,N=!!g&&this.mutatedKeys.has(g.key),C=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let O=!1;g&&_?g.data.isEqual(_.data)?N!==C&&(r.track({type:3,doc:_}),O=!0):this.ga(g,_)||(r.track({type:2,doc:_}),O=!0,(l&&this.Aa(_,l)>0||c&&this.Aa(_,c)<0)&&(o=!0)):!g&&_?(r.track({type:0,doc:_}),O=!0):g&&!_&&(r.track({type:1,doc:g}),O=!0,(l||c)&&(o=!0)),O&&(_?(a=a.add(_),i=C?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:a,fa:r,ns:o,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((h,m)=>function(g,_){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return N(g)-N(_)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),s=s!=null&&s;const o=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new Ea(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ob,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new oE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new aE(r))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ea.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class xD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class _D{constructor(e){this.key=e,this.va=!1}}class kD{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new $a(o=>kk(o),Kd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(re.comparator),this.Na=new Map,this.La=new hg,this.Ba={},this.ka=new Map,this.qa=ka.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ED(t,e,n=!0){const r=fE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await uE(r,e,n,!0),s}async function SD(t,e){const n=fE(t);await uE(n,e,!0,!1)}async function uE(t,e,n,r){const s=await KO(t.localStore,ir(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await TD(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Yk(t.remoteStore,s),o}async function TD(t,e,n,r,s){t.Ka=(m,g,_)=>async function(N,C,O,E){let v=C.view.ma(O);v.ns&&(v=await rb(N.localStore,C.query,!1).then(({documents:$})=>C.view.ma($,v)));const x=E&&E.targetChanges.get(C.targetId),j=E&&E.targetMismatches.get(C.targetId)!=null,V=C.view.applyChanges(v,N.isPrimaryClient,x,j);return db(N,C.targetId,V.wa),V.snapshot}(t,m,g,_);const i=await rb(t.localStore,e,!0),a=new bD(e,i.Ts),o=a.ma(i.documents),l=el.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);db(t,n,c.wa);const h=new xD(e,n,a);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function ND(t,e,n){const r=he(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!Kd(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Pp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gg(r.remoteStore,s.targetId),Dp(r,s.targetId)}).catch(Qu)):(Dp(r,s.targetId),await Pp(r.localStore,s.targetId,!0))}async function CD(t,e){const n=he(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gg(n.remoteStore,r.targetId))}async function ID(t,e,n){const r=MD(t);try{const s=await function(i,a){const o=he(i),l=Te.now(),c=a.reduce((g,_)=>g.add(_.key),ye());let h,m;return o.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=Lr(),N=ye();return o.cs.getEntries(g,c).next(C=>{_=C,_.forEach((O,E)=>{E.isValidDocument()||(N=N.add(O))})}).next(()=>o.localDocuments.getOverlayedDocuments(g,_)).next(C=>{h=C;const O=[];for(const E of a){const v=JP(E,h.get(E.key).overlayedDocument);v!=null&&O.push(new Vs(E.key,v,mk(v.value.mapValue),ut.exists(!0)))}return o.mutationQueue.addMutationBatch(g,l,O,a)}).next(C=>{m=C;const O=C.applyToLocalDocumentSet(h,N);return o.documentOverlayCache.saveOverlays(g,C.batchId,O)})}).then(()=>({batchId:m.batchId,changes:Tk(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,a,o){let l=i.Ba[i.currentUser.toKey()];l||(l=new Ke(Ee)),l=l.insert(a,o),i.Ba[i.currentUser.toKey()]=l}(r,s.batchId,n),await nl(r,s.changes),await eh(r.remoteStore)}catch(s){const i=xg(s,"Failed to persist write");n.reject(i)}}async function lE(t,e){const n=he(t);try{const r=await qO(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?_e(a.va):s.removedDocuments.size>0&&(_e(a.va),a.va=!1))}),await nl(n,r,e)}catch(r){await Qu(r)}}function cb(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(i,a){const o=he(i);o.onlineState=a;let l=!1;o.queries.forEach((c,h)=>{for(const m of h.j_)m.Z_(a)&&(l=!0)}),l&&_g(o)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AD(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Ke(re.comparator);a=a.insert(i,yt.newNoDocument(i,ue.min()));const o=ye().add(i),l=new Yd(ue.min(),new Map,new Ke(Ee),a,o);await lE(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),kg(r)}else await Pp(r.localStore,e,!1).then(()=>Dp(r,e,n)).catch(Qu)}async function PD(t,e){const n=he(t),r=e.batch.batchId;try{const s=await $O(n.localStore,e);dE(n,r,null),cE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nl(n,s)}catch(s){await Qu(s)}}async function OD(t,e,n){const r=he(t);try{const s=await function(i,a){const o=he(i);return o.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return o.mutationQueue.lookupMutationBatch(l,a).next(h=>(_e(h!==null),c=h.keys(),o.mutationQueue.removeMutationBatch(l,h))).next(()=>o.mutationQueue.performConsistencyCheck(l)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>o.localDocuments.getDocuments(l,c))})}(r.localStore,e);dE(r,e,n),cE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nl(r,s)}catch(s){await Qu(s)}}function cE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function dE(t,e,n){const r=he(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Dp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||hE(t,r)})}function hE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),kg(t))}function db(t,e,n){for(const r of n)r instanceof aE?(t.La.addReference(r.key,e),DD(t,r)):r instanceof oE?(te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||hE(t,r.key)):ae()}function DD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(te("SyncEngine","New document in limbo: "+n),t.xa.add(r),kg(t))}function kg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new re(Pe.fromString(e)),r=t.qa.next();t.Na.set(r,new _D(n)),t.Oa=t.Oa.insert(n,r),Yk(t.remoteStore,new us(ir(og(n.path)),r,"TargetPurposeLimboResolution",tg.oe))}}async function nl(t,e,n){const r=he(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,l)=>{a.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(c){s.push(c);const m=pg.Wi(l.targetId,c);i.push(m)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(o,l){const c=he(o);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(l,m=>z.forEach(m.$i,g=>c.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>z.forEach(m.Ui,g=>c.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!Gu(h))throw h;te("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const m=h.targetId;if(!h.fromCache){const g=c.os.get(m),_=g.snapshotVersion,N=g.withLastLimboFreeSnapshotVersion(_);c.os=c.os.insert(m,N)}}}(r.localStore,i))}async function jD(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await Qk(n.localStore,e);n.currentUser=e,function(s,i){s.ka.forEach(a=>{a.forEach(o=>{o.reject(new Y(U.CANCELLED,i))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nl(n,r.hs)}}function LD(t,e){const n=he(t),r=n.Na.get(e);if(r&&r.va)return ye().add(r.key);{let s=ye();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const o=n.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function fE(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AD.bind(null,e),e.Ca.d_=vD.bind(null,e.eventManager),e.Ca.$a=wD.bind(null,e.eventManager),e}function MD(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OD.bind(null,e),e}class od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return BO(this.persistence,new VO,e.initialUser,this.serializer)}Ga(e){return new RO(fg.Zr,this.serializer)}Wa(e){return new GO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}od.provider={build:()=>new od};class jp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jD.bind(null,this.syncEngine),await mD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yD}()}createDatastore(e){const n=Xd(e.databaseInfo.databaseId),r=function(s){return new JO(s)}(e.databaseInfo);return function(s,i,a,o){return new nD(s,i,a,o)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(n,r,s,i,a){return new sD(n,r,s,i,a)}(this.localStore,this.datastore,e.asyncQueue,n=>cb(this.syncEngine,n,0),function(){return ib.D()?new ib:new ZO}())}createSyncEngine(e,n){return function(r,s,i,a,o,l,c){const h=new kD(r,s,i,a,o,l);return c&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=he(r);te("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await tl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jp.provider={build:()=>new jp};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const i=he(r),a={documents:s.map(h=>id(i.serializer,h))},o=await i.Lo("BatchGetDocuments",i.serializer.databaseId,Pe.emptyPath(),a,s.length),l=new Map;o.forEach(h=>{const m=hO(i.serializer,h);l.set(m.key.toString(),m)});const c=[];return s.forEach(h=>{const m=l.get(h.toString());_e(!!m),c.push(m)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ju(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=re.fromPath(r);this.mutations.push(new Lk(s,this.precondition(s)))}),await async function(n,r){const s=he(n),i={writes:r.map(a=>qk(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,Pe.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ae();n=ue.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Y(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ue.min())?ut.exists(!1):ut.updateTime(n):ut.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ue.min()))throw new Y(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(n)}return ut.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FD{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new mg(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new RD(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Zu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Mk(n)}return!1}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class UD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ot.UNAUTHENTICATED,this.clientId=hk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{te("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(te("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hf(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Qk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function hb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VD(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ab(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>ab(e.remoteStore,s)),t._onlineComponents=e}async function VD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await hf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;wa("Error using user provided cache. Falling back to memory cache: "+n),await hf(t,new od)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await hf(t,new od);return t._offlineComponents}async function Eg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await hb(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await hb(t,new jp))),t._onlineComponents}function zD(t){return Eg(t).then(e=>e.syncEngine)}function BD(t){return Eg(t).then(e=>e.datastore)}async function mE(t){const e=await Eg(t),n=e.eventManager;return n.onListen=ED.bind(null,e.syncEngine),n.onUnlisten=ND.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CD.bind(null,e.syncEngine),n}function $D(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,o,l){const c=new pE({next:m=>{c.Za(),i.enqueueAndForget(()=>sE(s,h));const g=m.docs.has(a);!g&&m.fromCache?l.reject(new Y(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&o&&o.source==="server"?l.reject(new Y(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),h=new iE(og(a.path),c,{includeMetadataChanges:!0,_a:!0});return rE(s,h)}(await mE(t),t.asyncQueue,e,n,r)),r.promise}function qD(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,o,l){const c=new pE({next:m=>{c.Za(),i.enqueueAndForget(()=>sE(s,h)),m.fromCache&&o.source==="server"?l.reject(new Y(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),h=new iE(a,c,{includeMetadataChanges:!0,_a:!0});return rE(s,h)}(await mE(t),t.asyncQueue,e,n,r)),r.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fb=new Map;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yE(t,e,n){if(!n)throw new Y(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WD(t,e,n,r){if(e===!0&&r===!0)throw new Y(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pb(t){if(!re.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mb(t){if(re.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function th(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=th(t);throw new Y(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gb(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new uP;switch(n.type){case"firstParty":return new hP(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Y(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=fb.get(e);n&&(te("ComponentProvider","Removing Datastore"),fb.delete(e),n.terminate())}(this),Promise.resolve()}}function HD(t,e,n,r={}){var s;const i=(t=dn(t,nh))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let o,l;if(typeof r.mockUserToken=="string")o=r.mockUserToken,l=Ot.MOCK_USER;else{o=EC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ot(c)}t._authCredentials=new lP(new dk(o,l))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wa(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class bs extends Wa{constructor(e,n,r){super(e,n,og(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new re(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function Mn(t,e,...n){if(t=Je(t),yE("collection","path",e),t instanceof nh){const r=Pe.fromString(e,...n);return mb(r),new bs(t,null,r)}{if(!(t instanceof jt||t instanceof bs))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return mb(r),new bs(t.firestore,null,r)}}function kn(t,e,...n){if(t=Je(t),arguments.length===1&&(e=hk.newId()),yE("doc","path",e),t instanceof nh){const r=Pe.fromString(e,...n);return pb(r),new jt(t,null,new re(r))}{if(!(t instanceof jt||t instanceof bs))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return pb(r),new jt(t.firestore,t instanceof bs?t.converter:null,new re(r))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new mg(this,"async_queue_retry"),this.Vu=()=>{const r=df();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=df();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=df();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new sr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Gu(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(r);throw jr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=bg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Fr extends nh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new yb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yb(e),this._firestoreClient=void 0,await e}}}function KD(t,e){const n=typeof t=="object"?t:qm(),r=typeof t=="string"?t:"(default)",s=$d(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=y_("firestore");i&&HD(s,...i)}return s}function rl(t){if(t._terminated)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||QD(t),t._firestoreClient}function QD(t){var e,n,r;const s=t._freezeSettings(),i=function(a,o,l,c){return new SP(a,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,gE(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new UD(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const o=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(o),_online:o}}(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yi(Nt.fromBase64String(e))}catch(n){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yi(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ha{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sg{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ng{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const GD=/^__.*__$/;class ZD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xu(e,this.data,n,this.fieldTransforms)}}class vE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Cg{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ud(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(wE(this.Cu)&&GD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class YD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xd(e)}Qu(e,n,r,s=!1){return new Cg({Cu:e,methodName:n,qu:r,path:kt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ka(t){const e=t._freezeSettings(),n=Xd(t._databaseId);return new YD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rh(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Pg("Data must be an object, but it was:",a,r);const o=bE(r,a);let l,c;if(i.merge)l=new an(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const g=Lp(e,m,n);if(!a.contains(g))throw new Y(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);_E(h,g)||h.push(g)}l=new an(h),c=a.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=a.fieldTransforms;return new ZD(new Bt(o),l,c)}class sh extends Sg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sh}}function Ig(t,e,n,r){const s=t.Qu(1,e,n);Pg("Data must be an object, but it was:",s,r);const i=[],a=Bt.empty();Ei(r,(l,c)=>{const h=Og(e,l,n);c=Je(c);const m=s.Nu(h);if(c instanceof sh)i.push(h);else{const g=sl(c,m);g!=null&&(i.push(h),a.set(h,g))}});const o=new an(i);return new vE(a,o,s.fieldTransforms)}function Ag(t,e,n,r,s,i){const a=t.Qu(1,e,n),o=[Lp(e,r,n)],l=[s];if(i.length%2!=0)throw new Y(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)o.push(Lp(e,i[g])),l.push(i[g+1]);const c=[],h=Bt.empty();for(let g=o.length-1;g>=0;--g)if(!_E(c,o[g])){const _=o[g];let N=l[g];N=Je(N);const C=a.Nu(_);if(N instanceof sh)c.push(_);else{const O=sl(N,C);O!=null&&(c.push(_),h.set(_,O))}}const m=new an(c);return new vE(h,m,a.fieldTransforms)}function XD(t,e,n,r=!1){return sl(n,t.Qu(r?4:3,e))}function sl(t,e){if(xE(t=Je(t)))return Pg("Unsupported field value:",e,t),bE(t,e);if(t instanceof Sg)return function(n,r){if(!wE(r.Cu))throw r.Bu(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const a of n){let o=sl(a,r.Lu(i));o==null&&(o={nullValue:"NULL_VALUE"}),s.push(o),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=Je(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return KP(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Te.fromDate(n);return{timestampValue:sd(r.serializer,s)}}if(n instanceof Te){const s=new Te(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:sd(r.serializer,s)}}if(n instanceof Tg)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof yi)return{bytesValue:Vk(r.serializer,n._byteString)};if(n instanceof jt){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dg(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Ng)return function(s,i){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(a=>{if(typeof a!="number")throw i.Bu("VectorValues must only contain numeric values.");return ug(i.serializer,a)})}}}}}}(n,r);throw r.Bu(`Unsupported field value: ${th(n)}`)}(t,e)}function bE(t,e){const n={};return fk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(t,(r,s)=>{const i=sl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function xE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof Tg||t instanceof yi||t instanceof jt||t instanceof Sg||t instanceof Ng)}function Pg(t,e,n){if(!xE(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=th(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Lp(t,e,n){if((e=Je(e))instanceof Ha)return e._internalPath;if(typeof e=="string")return Og(t,e);throw ud("Field path arguments must be of type string or ",t,!1,void 0,n)}const JD=new RegExp("[~\\*/\\[\\]]");function Og(t,e,n){if(e.search(JD)>=0)throw ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ha(...e.split("."))._internalPath}catch{throw ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ud(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new Y(U.INVALID_ARGUMENT,o+t+l)}function _E(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ld{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ej(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ej extends ld{data(){return super.data()}}function Dg(t,e){return typeof e=="string"?Og(t,e):e instanceof Ha?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jg{}class nj extends jg{}function Sa(t,e,...n){let r=[];e instanceof jg&&r.push(e),r=r.concat(n),function(s){const i=s.filter(o=>o instanceof Lg).length,a=s.filter(o=>o instanceof ih).length;if(i>1||i>0&&a>0)throw new Y(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ih extends nj{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ih(e,n,r)}_apply(e){const n=this._parse(e);return kE(e._query,n),new Wa(e.firestore,e.converter,Tp(e._query,n))}_parse(e){const n=Ka(e.firestore);return function(r,s,i,a,o,l,c){let h;if(o.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new Y(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){wb(c,l);const m=[];for(const g of c)m.push(vb(a,r,g));h={arrayValue:{values:m}}}else h=vb(a,r,c)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||wb(c,l),h=XD(i,s,c,l==="in"||l==="not-in");return ot.create(o,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xs(t,e,n){const r=e,s=Dg("where",t);return ih._create(s,r,n)}class Lg extends jg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let i=r;const a=s.getFlattenedFilters();for(const o of a)kE(i,o),i=Tp(i,o)}(e._query,n),new Wa(e.firestore,e.converter,Tp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function vb(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_k(e)&&n.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pe.fromString(n));if(!re.isDocumentKey(r))throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vw(t,new re(r))}if(n instanceof jt)return Vw(t,n._key);throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${th(n)}.`)}function wb(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kE(t,e){const n=function(r,s){for(const i of r)for(const a of i.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EE{convertValue(e,n="none"){switch(gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ei(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>et(a.doubleValue));return new Ng(i)}convertGeoPoint(e){return new Tg(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const n=Ts(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);_e(Kk(r));const s=new vu(r.get(1),r.get(3)),i=new re(r.popFirst(5));return s.isEqual(n)||jr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ah(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class rj extends EE{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ji{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mg extends ld{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Dg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class mc extends Mg{data(e={}){return super.data(e)}}class sj{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ji(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new mc(this._firestore,this._userDataWriter,r.key,r,new Ji(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(a=>{const o=new mc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ji(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const o=new mc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ji(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return a.type!==0&&(l=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),c=i.indexOf(a.doc.key)),{type:ij(a.type),doc:o,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ij(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aj(t){t=dn(t,jt);const e=dn(t.firestore,Fr);return $D(rl(e),t._key).then(n=>lj(e,t,n))}class Rg extends EE{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function Ta(t){t=dn(t,Wa);const e=dn(t.firestore,Fr),n=rl(e),r=new Rg(e);return tj(t._query),qD(n,t._query).then(s=>new sj(e,r,t,s))}function oj(t,e,n){t=dn(t,jt);const r=dn(t.firestore,Fr),s=ah(t.converter,e,n);return al(r,[rh(Ka(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ut.none())])}function Fg(t,e,n,...r){t=dn(t,jt);const s=dn(t.firestore,Fr),i=Ka(s);let a;return a=typeof(e=Je(e))=="string"||e instanceof Ha?Ag(i,"updateDoc",t._key,e,n,r):Ig(i,"updateDoc",t._key,e),al(s,[a.toMutation(t._key,ut.exists(!0))])}function uj(t){return al(dn(t.firestore,Fr),[new Ju(t._key,ut.none())])}function il(t,e){const n=dn(t.firestore,Fr),r=kn(t),s=ah(t.converter,e);return al(n,[rh(Ka(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ut.exists(!1))]).then(()=>r)}function al(t,e){return function(n,r){const s=new sr;return n.asyncQueue.enqueueAndForget(async()=>ID(await zD(n),r,s)),s.promise}(rl(t),e)}function lj(t,e,n){const r=n.docs.get(e._key),s=new Rg(t);return new Mg(t,s,e._key,r,new Ji(n.hasPendingWrites,n.fromCache),e.converter)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cj={maxAttempts:5};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ka(e)}set(e,n,r){this._verifyNotCommitted();const s=rs(e,this._firestore),i=ah(s.converter,n,r),a=rh(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,ut.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=rs(e,this._firestore);let a;return a=typeof(n=Je(n))=="string"||n instanceof Ha?Ag(this._dataReader,"WriteBatch.update",i._key,n,r,s):Ig(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,ut.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=rs(e,this._firestore);return this._mutations=this._mutations.concat(new Ju(n._key,ut.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rs(t,e){if((t=Je(t)).firestore!==e)throw new Y(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hj extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ka(e)}get(e){const n=rs(e,this._firestore),r=new rj(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return ae();const i=s[0];if(i.isFoundDocument())return new ld(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ld(this._firestore,r,n._key,null,n.converter);throw ae()})}set(e,n,r){const s=rs(e,this._firestore),i=ah(s.converter,n,r),a=rh(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(e,n,r,...s){const i=rs(e,this._firestore);let a;return a=typeof(n=Je(n))=="string"||n instanceof Ha?Ag(this._dataReader,"Transaction.update",i._key,n,r,s):Ig(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,a),this}delete(e){const n=rs(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=rs(e,this._firestore),r=new Rg(this._firestore);return super.get(e).then(s=>new Mg(this._firestore,r,n._key,s._document,new Ji(!1,!1),n.converter))}}function SE(t,e,n){t=dn(t,Fr);const r=Object.assign(Object.assign({},cj),n);return function(s){if(s.maxAttempts<1)throw new Y(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,i,a){const o=new sr;return s.asyncQueue.enqueueAndForget(async()=>{const l=await BD(s);new FD(s.asyncQueue,l,a,i,o).au()}),o.promise}(rl(t),s=>e(new hj(t,s)),r)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fj(t){return rl(t=dn(t,Fr)),new dj(t,e=>al(t,e))}(function(t,e=!0){(function(n){Ba=n})(Va),di(new Es("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),a=new Fr(new cP(n.getProvider("auth-internal")),new pP(n.getProvider("app-check-internal")),function(o,l){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(o.options.projectId,l)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),tr(Lw,"4.7.3",t),tr(Lw,"4.7.3","esm2017")})();/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const TE="functions";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pj{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Mp="us-central1";class mj{constructor(e,n,r,s,i=Mp,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new pj(n,r,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(i);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Mp}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function gj(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const bb="@firebase/functions",xb="0.11.8";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yj="auth-internal",vj="app-check-internal",wj="messaging-internal";function bj(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),a=r.getProvider(yj),o=r.getProvider(wj),l=r.getProvider(vj);return new mj(i,a,o,l,s,t)};di(new Es(TE,n,"PUBLIC").setMultipleInstances(!0)),tr(bb,xb,e),tr(bb,xb,"esm2017")}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xj(t=qm(),e=Mp){const n=$d(Je(t),TE).getImmediate({identifier:e}),r=y_("functions");return r&&_j(n,...r),n}function _j(t,e,n){gj(Je(t),e,n)}bj(fetch.bind(self));const kj={apiKey:"AIzaSyCUVNvXtXyS73aX0VU8EP0M47QIhOoJi8k",authDomain:"timebank-122bc.firebaseapp.com",projectId:"timebank-122bc",storageBucket:"timebank-122bc.firebasestorage.app",messagingSenderId:"331743621517",appId:"1:331743621517:web:8d8a6174b14d4fe852cdc4",measurementId:"G-0VQDE01RZ5"},Ug=__(kj),oh=aP(Ug),Re=KD(Ug);xj(Ug);class Ej{constructor(){Xn(this,"COLLECTION","users"),Xn(this,"cache",new Map),Xn(this,"CACHE_TTL",5*60*1e3)}async getUserProfile(e){if(!e)return null;try{const n=this.cache.get(e);if(n&&Date.now()-n.timestamp<this.CACHE_TTL)return n.data;const r=kn(Re,this.COLLECTION,e),s=await aj(r);if(s.exists()){const i={id:s.id,...s.data()};return this.cache.set(e,{data:i,timestamp:Date.now()}),i}return null}catch(n){throw console.error("Error getting user profile:",n),n}}async createInitialUserProfile(e,n){if(!e||!n.email)throw new Error("UserId and email are required");try{const r=kn(Re,this.COLLECTION,e),s={email:n.email,firstName:n.firstName,lastName:n.lastName,timeBalance:3,rating:5,ratingCount:1,exchangedHours:0,exchangesCount:0,skills:[],createdAt:new Date().toISOString()};await oj(r,s),this.cache.set(e,{data:{id:e,...s},timestamp:Date.now()})}catch(r){throw console.error("Error creating user profile:",r),r}}clearCache(e){e?this.cache.delete(e):this.cache.clear()}}const Na=new Ej;function En(){const[t,e]=M.useState(null),[n,r]=M.useState(null),[s,i]=M.useState(!0),[a,o]=M.useState(null);return M.useEffect(()=>{const l=oh.onAuthStateChanged(async c=>{e(c);try{if(c){const h=await Na.getUserProfile(c.uid);r(h),o(null)}else r(null)}catch(h){console.error("Error loading user profile:",h),o("Unable to load user profile")}finally{i(!1)}});return()=>l()},[]),{user:t,userProfile:n,loading:s,error:a}}class Sj extends Error{constructor(e){super(e),this.name="AuthError"}}class Tj{constructor(){Xn(this,"auth"),this.auth=oh}async register(e,n,r){try{const s=await WA(this.auth,e,n);return await Na.createInitialUserProfile(s.user.uid,{email:e,firstName:r.firstName,lastName:r.lastName}),s}catch(s){throw console.error("Registration error:",s),this.handleAuthError(s)}}async login(e,n){try{return await HA(this.auth,e,n)}catch(r){throw console.error("Login error:",r),this.handleAuthError(r)}}async logout(){try{await GA(this.auth),Na.clearCache()}catch(e){throw console.error("Logout error:",e),this.handleAuthError(e)}}getCurrentUser(){return this.auth.currentUser}handleAuthError(e){const n=e==null?void 0:e.code,r={"auth/email-already-in-use":"Cette adresse email est déjà utilisée","auth/invalid-email":"Adresse email invalide","auth/operation-not-allowed":"Opération non autorisée","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractères","auth/user-disabled":"Ce compte a été désactivé","auth/user-not-found":"Aucun compte ne correspond à cette adresse email","auth/wrong-password":"Mot de passe incorrect","auth/too-many-requests":"Trop de tentatives. Veuillez réessayer plus tard","auth/network-request-failed":"Erreur de connexion. Vérifiez votre connexion internet"}[n]||"Une erreur est survenue lors de l'authentification";return new Sj(r)}}const Rp=new Tj,Nj=()=>{const{user:t,userProfile:e}=En(),n=Ua(),r=async()=>{try{await Rp.logout(),n("/login")}catch(s){console.error("Logout error:",s)}};return f.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-sm border-b border-gray-200",children:f.jsx("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between items-center h-16",children:[f.jsxs(vr,{to:"/",className:"flex items-center group",children:[f.jsx(cr,{className:"w-8 h-8 text-black group-hover:text-gray-700"}),f.jsx("span",{className:"ml-2 text-xl font-bold",children:"TimeBank"})]}),f.jsx("div",{className:"flex items-center space-x-6",children:t?f.jsxs(f.Fragment,{children:[f.jsxs(vr,{to:"/dashboard",className:"text-gray-600 hover:text-black transition-colors",children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),f.jsx(vr,{to:"/availability",className:"text-gray-600 hover:text-black transition-colors"}),f.jsx(vr,{to:"/experiences",className:"text-gray-600 hover:text-black transition-colors",children:f.jsx(d_,{className:"w-5 h-5"})}),f.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-black rounded-full hover:bg-gray-900 transition-colors",children:"Déconnexion"})]}):f.jsxs(f.Fragment,{children:[f.jsx(vr,{to:"/login",className:"text-gray-600 hover:text-black transition-colors",children:"Connexion"}),f.jsx(vr,{to:"/register",className:"px-4 py-2 text-sm font-medium text-white bg-black rounded-full hover:bg-gray-900 transition-colors",children:"S'inscrire"})]})})]})})})},Cj=()=>f.jsx("section",{id:"features",className:"py-24 bg-white",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-16",children:[f.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Comment ça marche ?"}),f.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Découvrez une nouvelle façon de valoriser votre temps et vos compétences"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-purple-50 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto",children:f.jsx(cr,{className:"w-8 h-8 text-purple-600"})}),f.jsx("h3",{className:"text-2xl font-bold text-center",children:"Gagnez du temps"}),f.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Transformez votre temps en opportunité. Démarrez avec 3 heures de crédit offerts et proposez vos compétences uniques à la communauté. Chaque heure que vous partagez est une heure gagnée pour découvrir, apprendre ou bénéficier des talents d'autres utilisateurs."})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-blue-50 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto",children:f.jsx(hC,{className:"w-8 h-8 text-blue-600"})}),f.jsx("h3",{className:"text-2xl font-bold text-center",children:"Échangez vos talents"}),f.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Valorisez ce que vous savez faire. Réservez des expériences enrichissantes ou échangez vos compétences avec d'autres membres grâce à un système transparent et équitable. Avec TimeBank, chaque échange est une opportunité de créer du lien et d'accéder à de nouvelles passions."})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-pink-50 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto",children:f.jsx(h_,{className:"w-8 h-8 text-pink-600"})}),f.jsx("h3",{className:"text-2xl font-bold text-center",children:"Développez votre potentiel"}),f.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Apprenez, partagez, évoluez. Enrichissez vos connaissances, explorez vos passions et bâtissez des relations fortes au sein d'une communauté collaborative. Avec TimeBank, le savoir et l'entraide deviennent vos nouvelles monnaies."})]})]}),f.jsx("div",{className:"mt-16 text-center",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Transformez chaque minute en apprentissage.",f.jsx("br",{}),"Transformez chaque échange en expérience."]}),f.jsx(vr,{to:"/register",className:"inline-block px-8 py-3 text-lg font-medium text-white bg-black rounded-full hover:bg-gray-900 transition-all duration-200",children:"Rejoignez TimeBank"})]})})]})}),Ij=()=>{const{user:t}=En();return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 via-white to-gray-100"}),f.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[f.jsx("div",{className:"absolute w-[500px] h-[500px] -top-48 -left-48 bg-gray-200/50 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),f.jsx("div",{className:"absolute w-[500px] h-[500px] -bottom-48 -right-48 bg-gray-300/50 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),f.jsx("div",{className:"absolute w-[500px] h-[500px] top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gray-100/50 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"})]}),f.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"inline-flex items-center space-x-2 bg-white/90 backdrop-blur-sm px-6 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 floating",children:[f.jsx(h_,{className:"w-5 h-5 text-gray-700"}),f.jsx("span",{className:"text-sm font-medium bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent",children:"Redéfinissez la valeur de votre temps"})]}),f.jsxs("h1",{className:"text-6xl sm:text-7xl font-bold tracking-tight",children:[f.jsx("span",{className:"block mb-2",children:"Le Temps est"}),f.jsx("span",{className:"block bg-gradient-to-r from-gray-700 via-gray-800 to-gray-900 bg-clip-text text-transparent",children:"Votre Nouvelle Monnaie"})]}),f.jsx("p",{className:"mt-6 text-xl text-gray-600 max-w-3xl mx-auto",children:"Échangez vos compétences et services dans une économie collaborative basée sur le temps. Découvrez un nouveau mode d'échange où chaque minute compte."}),f.jsx("section",{id:"timebank-alpha",className:"timebank-message",children:f.jsxs("div",{className:"container",children:[f.jsx("h2",{children:"Bienvenue sur TimeBank!"}),f.jsx("p",{children:"Nous sommes ravis de vous accueillir sur notre plateforme d'échange de temps en version alpha. Vous pouvez dès à présent ajouter les expériences que vous proposez."}),f.jsxs("p",{children:["Pour toute réservation, modification, pour donner vos disponibilités concernant une expérience, ou pour toute autre question, n'hésitez pas à nous contacter à l'adresse suivante : ",f.jsx("br",{}),f.jsx("a",{href:"mailto:timebank.contact@gmail.com",children:"timebank.contact@gmail.com"}),"."]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Note importante :"})," Il n'est pas nécessaire de fournir vos disponibilités lors de la création d'une expérience. Nous vous enverrons un Doodle en cas de réservation à l'adresse mai ci-dessus."]}),f.jsx("p",{children:"Merci de votre participation à cette aventure !"})]})}),f.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-center gap-4",children:[f.jsxs(vr,{to:t?"/dashboard":"/register",className:"group relative inline-flex items-center justify-center px-8 py-3 text-lg font-medium text-white bg-gradient-to-r from-gray-700 to-gray-900 rounded-full hover:from-gray-800 hover:to-black transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[t?"Accéder au tableau de bord":"Commencer maintenant",f.jsx(lC,{className:"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),f.jsx(vr,{to:"/experiences",className:"inline-flex items-center justify-center px-8 py-3 text-lg font-medium text-gray-900 bg-white/90 backdrop-blur-sm rounded-full hover:bg-white transition-all duration-300 shadow-md hover:shadow-lg",children:"Découvrir les expériences proposées"})]})]}),f.jsx("div",{className:"mt-20 grid grid-cols-1 sm:grid-cols-3 gap-8",children:[{value:"Version Alpha",label:""},{value:"50",label:"Heures échangées"},{value:"100",label:"Compétences partagées"}].map(({value:e,label:n})=>f.jsxs("div",{className:"glass-card p-8 hover:scale-105 transition-transform duration-300",children:[f.jsx("p",{className:"text-4xl font-bold bg-gradient-to-r from-gray-700 to-gray-900 bg-clip-text text-transparent",children:e}),f.jsx("p",{className:"mt-2 text-gray-600",children:n})]},n))})]})]}),f.jsx(Cj,{})]})};var ol=t=>t.type==="checkbox",ti=t=>t instanceof Date,zt=t=>t==null;const NE=t=>typeof t=="object";var rt=t=>!zt(t)&&!Array.isArray(t)&&NE(t)&&!ti(t),Aj=t=>rt(t)&&t.target?ol(t.target)?t.target.checked:t.target.value:t,Pj=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Oj=(t,e)=>t.has(Pj(e)),Dj=t=>{const e=t.constructor&&t.constructor.prototype;return rt(e)&&e.hasOwnProperty("isPrototypeOf")},Vg=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function gn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Vg&&(t instanceof Blob||r))&&(n||rt(t)))if(e=n?[]:{},!n&&!Dj(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=gn(t[s]));else return t;return e}var uh=t=>Array.isArray(t)?t.filter(Boolean):[],it=t=>t===void 0,J=(t,e,n)=>{if(!e||!rt(t))return n;const r=uh(e.split(/[,[\].]+?/)).reduce((s,i)=>zt(s)?s:s[i],t);return it(r)||r===t?it(t[e])?n:t[e]:r},Wn=t=>typeof t=="boolean",zg=t=>/^\w*$/.test(t),CE=t=>uh(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ae=(t,e,n)=>{let r=-1;const s=zg(e)?[e]:CE(e),i=s.length,a=i-1;for(;++r<i;){const o=s[r];let l=n;if(r!==a){const c=t[o];l=rt(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=l,t=t[o]}return t};const _b={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},On={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},mr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Ut.createContext(null);var jj=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const a=i;return e._proxyFormState[a]!==On.all&&(e._proxyFormState[a]=!r||On.all),t[a]}});return s},Gt=t=>rt(t)&&!Object.keys(t).length,Lj=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return Gt(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(a=>e[a]===On.all)},gc=t=>Array.isArray(t)?t:[t];function Mj(t){const e=Ut.useRef(t);e.current=t,Ut.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var Yn=t=>typeof t=="string",Rj=(t,e,n,r,s)=>Yn(t)?(r&&e.watch.add(t),J(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),J(n,i))):(r&&(e.watchAll=!0),n),IE=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},kb=t=>({isOnSubmit:!t||t===On.onSubmit,isOnBlur:t===On.onBlur,isOnChange:t===On.onChange,isOnAll:t===On.all,isOnTouch:t===On.onTouched}),Eb=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Ko=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=J(t,s);if(i){const{_f:a,...o}=i;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],s)&&!r||a.ref&&e(a.ref,a.name)&&!r)return!0;if(Ko(o,e))break}else if(rt(o)&&Ko(o,e))break}}};var Fj=(t,e,n)=>{const r=gc(J(t,n));return Ae(r,"root",e[n]),Ae(t,n,r),t},Bg=t=>t.type==="file",Kn=t=>typeof t=="function",cd=t=>{if(!Vg)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},yc=t=>Yn(t),$g=t=>t.type==="radio",dd=t=>t instanceof RegExp;const Sb={value:!1,isValid:!1},Tb={value:!0,isValid:!0};var AE=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!it(t[0].attributes.value)?it(t[0].value)||t[0].value===""?Tb:{value:t[0].value,isValid:!0}:Tb:Sb}return Sb};const Nb={isValid:!1,value:null};var PE=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Nb):Nb;function Cb(t,e,n="validate"){if(yc(t)||Array.isArray(t)&&t.every(yc)||Wn(t)&&!t)return{type:n,message:yc(t)?t:"",ref:e}}var ji=t=>rt(t)&&!dd(t)?t:{value:t,message:""},Ib=async(t,e,n,r,s,i)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:h,min:m,max:g,pattern:_,validate:N,name:C,valueAsNumber:O,mount:E}=t._f,v=J(n,C);if(!E||e.has(C))return{};const x=o?o[0]:a,j=A=>{s&&x.reportValidity&&(x.setCustomValidity(Wn(A)?"":A||""),x.reportValidity())},V={},$=$g(a),S=ol(a),w=$||S,k=(O||Bg(a))&&it(a.value)&&it(v)||cd(a)&&a.value===""||v===""||Array.isArray(v)&&!v.length,T=IE.bind(null,C,r,V),P=(A,b,ke,Ue=mr.maxLength,wt=mr.minLength)=>{const Qe=A?b:ke;V[C]={type:A?Ue:wt,message:Qe,ref:a,...T(A?Ue:wt,Qe)}};if(i?!Array.isArray(v)||!v.length:l&&(!w&&(k||zt(v))||Wn(v)&&!v||S&&!AE(o).isValid||$&&!PE(o).isValid)){const{value:A,message:b}=yc(l)?{value:!!l,message:l}:ji(l);if(A&&(V[C]={type:mr.required,message:b,ref:x,...T(mr.required,b)},!r))return j(b),V}if(!k&&(!zt(m)||!zt(g))){let A,b;const ke=ji(g),Ue=ji(m);if(!zt(v)&&!isNaN(v)){const wt=a.valueAsNumber||v&&+v;zt(ke.value)||(A=wt>ke.value),zt(Ue.value)||(b=wt<Ue.value)}else{const wt=a.valueAsDate||new Date(v),Qe=ce=>new Date(new Date().toDateString()+" "+ce),Q=a.type=="time",ie=a.type=="week";Yn(ke.value)&&v&&(A=Q?Qe(v)>Qe(ke.value):ie?v>ke.value:wt>new Date(ke.value)),Yn(Ue.value)&&v&&(b=Q?Qe(v)<Qe(Ue.value):ie?v<Ue.value:wt<new Date(Ue.value))}if((A||b)&&(P(!!A,ke.message,Ue.message,mr.max,mr.min),!r))return j(V[C].message),V}if((c||h)&&!k&&(Yn(v)||i&&Array.isArray(v))){const A=ji(c),b=ji(h),ke=!zt(A.value)&&v.length>+A.value,Ue=!zt(b.value)&&v.length<+b.value;if((ke||Ue)&&(P(ke,A.message,b.message),!r))return j(V[C].message),V}if(_&&!k&&Yn(v)){const{value:A,message:b}=ji(_);if(dd(A)&&!v.match(A)&&(V[C]={type:mr.pattern,message:b,ref:a,...T(mr.pattern,b)},!r))return j(b),V}if(N){if(Kn(N)){const A=await N(v,n),b=Cb(A,x);if(b&&(V[C]={...b,...T(mr.validate,b.message)},!r))return j(b.message),V}else if(rt(N)){let A={};for(const b in N){if(!Gt(A)&&!r)break;const ke=Cb(await N[b](v,n),x,b);ke&&(A={...ke,...T(b,ke.message)},j(ke.message),r&&(V[C]=A))}if(!Gt(A)&&(V[C]={ref:x,...A},!r))return V}}return j(!0),V};function Uj(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=it(t)?r++:t[e[r++]];return t}function Vj(t){for(const e in t)if(t.hasOwnProperty(e)&&!it(t[e]))return!1;return!0}function ct(t,e){const n=Array.isArray(e)?e:zg(e)?[e]:CE(e),r=n.length===1?t:Uj(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(rt(r)&&Gt(r)||Array.isArray(r)&&Vj(r))&&ct(t,n.slice(0,-1)),t}var ff=()=>{let t=[];return{get observers(){return t},next:e=>{for(const n of t)n.next&&n.next(e)},subscribe:e=>(t.push(e),{unsubscribe:()=>{t=t.filter(n=>n!==e)}}),unsubscribe:()=>{t=[]}}},Fp=t=>zt(t)||!NE(t);function ss(t,e){if(Fp(t)||Fp(e))return t===e;if(ti(t)&&ti(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const a=e[s];if(ti(i)&&ti(a)||rt(i)&&rt(a)||Array.isArray(i)&&Array.isArray(a)?!ss(i,a):i!==a)return!1}}return!0}var OE=t=>t.type==="select-multiple",zj=t=>$g(t)||ol(t),pf=t=>cd(t)&&t.isConnected,DE=t=>{for(const e in t)if(Kn(t[e]))return!0;return!1};function hd(t,e={}){const n=Array.isArray(t);if(rt(t)||n)for(const r in t)Array.isArray(t[r])||rt(t[r])&&!DE(t[r])?(e[r]=Array.isArray(t[r])?[]:{},hd(t[r],e[r])):zt(t[r])||(e[r]=!0);return e}function jE(t,e,n){const r=Array.isArray(t);if(rt(t)||r)for(const s in t)Array.isArray(t[s])||rt(t[s])&&!DE(t[s])?it(e)||Fp(n[s])?n[s]=Array.isArray(t[s])?hd(t[s],[]):{...hd(t[s])}:jE(t[s],zt(e)?{}:e[s],n[s]):n[s]=!ss(t[s],e[s]);return n}var wo=(t,e)=>jE(t,e,hd(e)),LE=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>it(t)?t:e?t===""?NaN:t&&+t:n&&Yn(t)?new Date(t):r?r(t):t;function mf(t){const e=t.ref;return Bg(e)?e.files:$g(e)?PE(t.refs).value:OE(e)?[...e.selectedOptions].map(({value:n})=>n):ol(e)?AE(t.refs).value:LE(it(e.value)?t.ref.value:e.value,t)}var Bj=(t,e,n,r)=>{const s={};for(const i of t){const a=J(e,i);a&&Ae(s,i,a._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},bo=t=>it(t)?t:dd(t)?t.source:rt(t)?dd(t.value)?t.value.source:t.value:t;const Ab="AsyncFunction";var $j=t=>!!t&&!!t.validate&&!!(Kn(t.validate)&&t.validate.constructor.name===Ab||rt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Ab)),qj=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function Pb(t,e,n){const r=J(t,n);if(r||zg(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),a=J(e,i),o=J(t,i);if(a&&!Array.isArray(a)&&n!==i)return{name:n};if(o&&o.type)return{name:i,error:o};s.pop()}return{name:n}}var Wj=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,Hj=(t,e)=>!uh(J(t,e)).length&&ct(t,e);const Kj={mode:On.onSubmit,reValidateMode:On.onChange,shouldFocusError:!0};function Qj(t={}){let e={...Kj,...t},n={submitCount:0,isDirty:!1,isLoading:Kn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=rt(e.defaultValues)||rt(e.values)?gn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:gn(s),a={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={values:ff(),array:ff(),state:ff()},g=kb(e.mode),_=kb(e.reValidateMode),N=e.criteriaMode===On.all,C=I=>L=>{clearTimeout(c),c=setTimeout(I,L)},O=async I=>{if(!e.disabled&&(h.isValid||I)){const L=e.resolver?Gt((await w()).errors):await T(r,!0);L!==n.isValid&&m.state.next({isValid:L})}},E=(I,L)=>{!e.disabled&&(h.isValidating||h.validatingFields)&&((I||Array.from(o.mount)).forEach(F=>{F&&(L?Ae(n.validatingFields,F,L):ct(n.validatingFields,F))}),m.state.next({validatingFields:n.validatingFields,isValidating:!Gt(n.validatingFields)}))},v=(I,L=[],F,Z,K=!0,W=!0)=>{if(Z&&F&&!e.disabled){if(a.action=!0,W&&Array.isArray(J(r,I))){const se=F(J(r,I),Z.argA,Z.argB);K&&Ae(r,I,se)}if(W&&Array.isArray(J(n.errors,I))){const se=F(J(n.errors,I),Z.argA,Z.argB);K&&Ae(n.errors,I,se),Hj(n.errors,I)}if(h.touchedFields&&W&&Array.isArray(J(n.touchedFields,I))){const se=F(J(n.touchedFields,I),Z.argA,Z.argB);K&&Ae(n.touchedFields,I,se)}h.dirtyFields&&(n.dirtyFields=wo(s,i)),m.state.next({name:I,isDirty:A(I,L),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ae(i,I,L)},x=(I,L)=>{Ae(n.errors,I,L),m.state.next({errors:n.errors})},j=I=>{n.errors=I,m.state.next({errors:n.errors,isValid:!1})},V=(I,L,F,Z)=>{const K=J(r,I);if(K){const W=J(i,I,it(F)?J(s,I):F);it(W)||Z&&Z.defaultChecked||L?Ae(i,I,L?W:mf(K._f)):Ue(I,W),a.mount&&O()}},$=(I,L,F,Z,K)=>{let W=!1,se=!1;const pe={name:I};if(!e.disabled){const Ge=!!(J(r,I)&&J(r,I)._f&&J(r,I)._f.disabled);if(!F||Z){h.isDirty&&(se=n.isDirty,n.isDirty=pe.isDirty=A(),W=se!==pe.isDirty);const Ze=Ge||ss(J(s,I),L);se=!!(!Ge&&J(n.dirtyFields,I)),Ze||Ge?ct(n.dirtyFields,I):Ae(n.dirtyFields,I,!0),pe.dirtyFields=n.dirtyFields,W=W||h.dirtyFields&&se!==!Ze}if(F){const Ze=J(n.touchedFields,I);Ze||(Ae(n.touchedFields,I,F),pe.touchedFields=n.touchedFields,W=W||h.touchedFields&&Ze!==F)}W&&K&&m.state.next(pe)}return W?pe:{}},S=(I,L,F,Z)=>{const K=J(n.errors,I),W=h.isValid&&Wn(L)&&n.isValid!==L;if(e.delayError&&F?(l=C(()=>x(I,F)),l(e.delayError)):(clearTimeout(c),l=null,F?Ae(n.errors,I,F):ct(n.errors,I)),(F?!ss(K,F):K)||!Gt(Z)||W){const se={...Z,...W&&Wn(L)?{isValid:L}:{},errors:n.errors,name:I};n={...n,...se},m.state.next(se)}},w=async I=>{E(I,!0);const L=await e.resolver(i,e.context,Bj(I||o.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return E(I),L},k=async I=>{const{errors:L}=await w(I);if(I)for(const F of I){const Z=J(L,F);Z?Ae(n.errors,F,Z):ct(n.errors,F)}else n.errors=L;return L},T=async(I,L,F={valid:!0})=>{for(const Z in I){const K=I[Z];if(K){const{_f:W,...se}=K;if(W){const pe=o.array.has(W.name),Ge=K._f&&$j(K._f);Ge&&h.validatingFields&&E([Z],!0);const Ze=await Ib(K,o.disabled,i,N,e.shouldUseNativeValidation&&!L,pe);if(Ge&&h.validatingFields&&E([Z]),Ze[W.name]&&(F.valid=!1,L))break;!L&&(J(Ze,W.name)?pe?Fj(n.errors,Ze,W.name):Ae(n.errors,W.name,Ze[W.name]):ct(n.errors,W.name))}!Gt(se)&&await T(se,L,F)}}return F.valid},P=()=>{for(const I of o.unMount){const L=J(r,I);L&&(L._f.refs?L._f.refs.every(F=>!pf(F)):!pf(L._f.ref))&&tn(I)}o.unMount=new Set},A=(I,L)=>!e.disabled&&(I&&L&&Ae(i,I,L),!ss(Oe(),s)),b=(I,L,F)=>Rj(I,o,{...a.mount?i:it(L)?s:Yn(I)?{[I]:L}:L},F,L),ke=I=>uh(J(a.mount?i:s,I,e.shouldUnregister?J(s,I,[]):[])),Ue=(I,L,F={})=>{const Z=J(r,I);let K=L;if(Z){const W=Z._f;W&&(!W.disabled&&Ae(i,I,LE(L,W)),K=cd(W.ref)&&zt(L)?"":L,OE(W.ref)?[...W.ref.options].forEach(se=>se.selected=K.includes(se.value)):W.refs?ol(W.ref)?W.refs.length>1?W.refs.forEach(se=>(!se.defaultChecked||!se.disabled)&&(se.checked=Array.isArray(K)?!!K.find(pe=>pe===se.value):K===se.value)):W.refs[0]&&(W.refs[0].checked=!!K):W.refs.forEach(se=>se.checked=se.value===K):Bg(W.ref)?W.ref.value="":(W.ref.value=K,W.ref.type||m.values.next({name:I,values:{...i}})))}(F.shouldDirty||F.shouldTouch)&&$(I,K,F.shouldTouch,F.shouldDirty,!0),F.shouldValidate&&ce(I)},wt=(I,L,F)=>{for(const Z in L){const K=L[Z],W=`${I}.${Z}`,se=J(r,W);(o.array.has(I)||rt(K)||se&&!se._f)&&!ti(K)?wt(W,K,F):Ue(W,K,F)}},Qe=(I,L,F={})=>{const Z=J(r,I),K=o.array.has(I),W=gn(L);Ae(i,I,W),K?(m.array.next({name:I,values:{...i}}),(h.isDirty||h.dirtyFields)&&F.shouldDirty&&m.state.next({name:I,dirtyFields:wo(s,i),isDirty:A(I,W)})):Z&&!Z._f&&!zt(W)?wt(I,W,F):Ue(I,W,F),Eb(I,o)&&m.state.next({...n}),m.values.next({name:a.mount?I:void 0,values:{...i}})},Q=async I=>{a.mount=!0;const L=I.target;let F=L.name,Z=!0;const K=J(r,F),W=()=>L.type?mf(K._f):Aj(I),se=pe=>{Z=Number.isNaN(pe)||ti(pe)&&isNaN(pe.getTime())||ss(pe,J(i,F,pe))};if(K){let pe,Ge;const Ze=W(),Tn=I.type===_b.BLUR||I.type===_b.FOCUS_OUT,pt=!qj(K._f)&&!e.resolver&&!J(n.errors,F)&&!K._f.deps||Wj(Tn,J(n.touchedFields,F),n.isSubmitted,_,g),lt=Eb(F,o,Tn);Ae(i,F,Ze),Tn?(K._f.onBlur&&K._f.onBlur(I),l&&l(0)):K._f.onChange&&K._f.onChange(I);const Ur=$(F,Ze,Tn,!1),cl=!Gt(Ur)||lt;if(!Tn&&m.values.next({name:F,type:I.type,values:{...i}}),pt)return h.isValid&&(e.mode==="onBlur"&&Tn?O():Tn||O()),cl&&m.state.next({name:F,...lt?{}:Ur});if(!Tn&&lt&&m.state.next({...n}),e.resolver){const{errors:Za}=await w([F]);if(se(Ze),Z){const hh=Pb(n.errors,r,F),Vr=Pb(Za,r,hh.name||F);pe=Vr.error,F=Vr.name,Ge=Gt(Za)}}else E([F],!0),pe=(await Ib(K,o.disabled,i,N,e.shouldUseNativeValidation))[F],E([F]),se(Ze),Z&&(pe?Ge=!1:h.isValid&&(Ge=await T(r,!0)));Z&&(K._f.deps&&ce(K._f.deps),S(F,Ge,pe,Ur))}},ie=(I,L)=>{if(J(n.errors,L)&&I.focus)return I.focus(),1},ce=async(I,L={})=>{let F,Z;const K=gc(I);if(e.resolver){const W=await k(it(I)?I:K);F=Gt(W),Z=I?!K.some(se=>J(W,se)):F}else I?(Z=(await Promise.all(K.map(async W=>{const se=J(r,W);return await T(se&&se._f?{[W]:se}:se)}))).every(Boolean),!(!Z&&!n.isValid)&&O()):Z=F=await T(r);return m.state.next({...!Yn(I)||h.isValid&&F!==n.isValid?{}:{name:I},...e.resolver||!I?{isValid:F}:{},errors:n.errors}),L.shouldFocus&&!Z&&Ko(r,ie,I?K:o.mount),Z},Oe=I=>{const L={...a.mount?i:s};return it(I)?L:Yn(I)?J(L,I):I.map(F=>J(L,F))},Se=(I,L)=>({invalid:!!J((L||n).errors,I),isDirty:!!J((L||n).dirtyFields,I),error:J((L||n).errors,I),isValidating:!!J(n.validatingFields,I),isTouched:!!J((L||n).touchedFields,I)}),ze=I=>{I&&gc(I).forEach(L=>ct(n.errors,L)),m.state.next({errors:I?n.errors:{}})},pn=(I,L,F)=>{const Z=(J(r,I,{_f:{}})._f||{}).ref,K=J(n.errors,I)||{},{ref:W,message:se,type:pe,...Ge}=K;Ae(n.errors,I,{...Ge,...L,ref:Z}),m.state.next({name:I,errors:n.errors,isValid:!1}),F&&F.shouldFocus&&Z&&Z.focus&&Z.focus()},Sn=(I,L)=>Kn(I)?m.values.subscribe({next:F=>I(b(void 0,L),F)}):b(I,L,!0),tn=(I,L={})=>{for(const F of I?gc(I):o.mount)o.mount.delete(F),o.array.delete(F),L.keepValue||(ct(r,F),ct(i,F)),!L.keepError&&ct(n.errors,F),!L.keepDirty&&ct(n.dirtyFields,F),!L.keepTouched&&ct(n.touchedFields,F),!L.keepIsValidating&&ct(n.validatingFields,F),!e.shouldUnregister&&!L.keepDefaultValue&&ct(s,F);m.values.next({values:{...i}}),m.state.next({...n,...L.keepDirty?{isDirty:A()}:{}}),!L.keepIsValid&&O()},mn=({disabled:I,name:L,field:F,fields:Z})=>{(Wn(I)&&a.mount||I||o.disabled.has(L))&&(I?o.disabled.add(L):o.disabled.delete(L),$(L,mf(F?F._f:J(Z,L)._f),!1,!1,!0))},Qa=(I,L={})=>{let F=J(r,I);const Z=Wn(L.disabled)||Wn(e.disabled);return Ae(r,I,{...F||{},_f:{...F&&F._f?F._f:{ref:{name:I}},name:I,mount:!0,...L}}),o.mount.add(I),F?mn({field:F,disabled:Wn(L.disabled)?L.disabled:e.disabled,name:I}):V(I,!0,L.value),{...Z?{disabled:L.disabled||e.disabled}:{},...e.progressive?{required:!!L.required,min:bo(L.min),max:bo(L.max),minLength:bo(L.minLength),maxLength:bo(L.maxLength),pattern:bo(L.pattern)}:{},name:I,onChange:Q,onBlur:Q,ref:K=>{if(K){Qa(I,L),F=J(r,I);const W=it(K.value)&&K.querySelectorAll&&K.querySelectorAll("input,select,textarea")[0]||K,se=zj(W),pe=F._f.refs||[];if(se?pe.find(Ge=>Ge===W):W===F._f.ref)return;Ae(r,I,{_f:{...F._f,...se?{refs:[...pe.filter(pf),W,...Array.isArray(J(s,I))?[{}]:[]],ref:{type:W.type,name:I}}:{ref:W}}}),V(I,!1,void 0,W)}else F=J(r,I,{}),F._f&&(F._f.mount=!1),(e.shouldUnregister||L.shouldUnregister)&&!(Oj(o.array,I)&&a.action)&&o.unMount.add(I)}}},ll=()=>e.shouldFocusError&&Ko(r,ie,o.mount),Ti=I=>{Wn(I)&&(m.state.next({disabled:I}),Ko(r,(L,F)=>{const Z=J(r,F);Z&&(L.disabled=Z._f.disabled||I,Array.isArray(Z._f.refs)&&Z._f.refs.forEach(K=>{K.disabled=Z._f.disabled||I}))},0,!1))},zs=(I,L)=>async F=>{let Z;F&&(F.preventDefault&&F.preventDefault(),F.persist&&F.persist());let K=gn(i);if(o.disabled.size)for(const W of o.disabled)Ae(K,W,void 0);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:W,values:se}=await w();n.errors=W,K=se}else await T(r);if(ct(n.errors,"root"),Gt(n.errors)){m.state.next({errors:{}});try{await I(K,F)}catch(W){Z=W}}else L&&await L({...n.errors},F),ll(),setTimeout(ll);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Gt(n.errors)&&!Z,submitCount:n.submitCount+1,errors:n.errors}),Z)throw Z},Ga=(I,L={})=>{J(r,I)&&(it(L.defaultValue)?Qe(I,gn(J(s,I))):(Qe(I,L.defaultValue),Ae(s,I,gn(L.defaultValue))),L.keepTouched||ct(n.touchedFields,I),L.keepDirty||(ct(n.dirtyFields,I),n.isDirty=L.defaultValue?A(I,gn(J(s,I))):A()),L.keepError||(ct(n.errors,I),h.isValid&&O()),m.state.next({...n}))},Ni=(I,L={})=>{const F=I?gn(I):s,Z=gn(F),K=Gt(I),W=K?s:Z;if(L.keepDefaultValues||(s=F),!L.keepValues){if(L.keepDirtyValues){const se=new Set([...o.mount,...Object.keys(wo(s,i))]);for(const pe of Array.from(se))J(n.dirtyFields,pe)?Ae(W,pe,J(i,pe)):Qe(pe,J(W,pe))}else{if(Vg&&it(I))for(const se of o.mount){const pe=J(r,se);if(pe&&pe._f){const Ge=Array.isArray(pe._f.refs)?pe._f.refs[0]:pe._f.ref;if(cd(Ge)){const Ze=Ge.closest("form");if(Ze){Ze.reset();break}}}}r={}}i=e.shouldUnregister?L.keepDefaultValues?gn(s):{}:gn(W),m.array.next({values:{...W}}),m.values.next({values:{...W}})}o={mount:L.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!h.isValid||!!L.keepIsValid||!!L.keepDirtyValues,a.watch=!!e.shouldUnregister,m.state.next({submitCount:L.keepSubmitCount?n.submitCount:0,isDirty:K?!1:L.keepDirty?n.isDirty:!!(L.keepDefaultValues&&!ss(I,s)),isSubmitted:L.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:K?{}:L.keepDirtyValues?L.keepDefaultValues&&i?wo(s,i):n.dirtyFields:L.keepDefaultValues&&I?wo(s,I):L.keepDirty?n.dirtyFields:{},touchedFields:L.keepTouched?n.touchedFields:{},errors:L.keepErrors?n.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ci=(I,L)=>Ni(Kn(I)?I(i):I,L);return{control:{register:Qa,unregister:tn,getFieldState:Se,handleSubmit:zs,setError:pn,_executeSchema:w,_getWatch:b,_getDirty:A,_updateValid:O,_removeUnmounted:P,_updateFieldArray:v,_updateDisabledField:mn,_getFieldArray:ke,_reset:Ni,_resetDefaultValues:()=>Kn(e.defaultValues)&&e.defaultValues().then(I=>{Ci(I,e.resetOptions),m.state.next({isLoading:!1})}),_updateFormState:I=>{n={...n,...I}},_disableForm:Ti,_subjects:m,_proxyFormState:h,_setErrors:j,get _fields(){return r},get _formValues(){return i},get _state(){return a},set _state(I){a=I},get _defaultValues(){return s},get _names(){return o},set _names(I){o=I},get _formState(){return n},set _formState(I){n=I},get _options(){return e},set _options(I){e={...e,...I}}},trigger:ce,register:Qa,handleSubmit:zs,watch:Sn,setValue:Qe,getValues:Oe,reset:Ci,resetField:Ga,clearErrors:ze,unregister:tn,setError:pn,setFocus:(I,L={})=>{const F=J(r,I),Z=F&&F._f;if(Z){const K=Z.refs?Z.refs[0]:Z.ref;K.focus&&(K.focus(),L.shouldSelect&&Kn(K.select)&&K.select())}},getFieldState:Se}}function qg(t={}){const e=Ut.useRef(void 0),n=Ut.useRef(void 0),[r,s]=Ut.useState({isDirty:!1,isValidating:!1,isLoading:Kn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Kn(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Qj(t),formState:r});const i=e.current.control;return i._options=t,Mj({subject:i._subjects.state,next:a=>{Lj(a,i._proxyFormState,i._updateFormState)&&s({...i._formState})}}),Ut.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Ut.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==r.isDirty&&i._subjects.state.next({isDirty:a})}},[i,r.isDirty]),Ut.useEffect(()=>{t.values&&!ss(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(a=>({...a}))):i._resetDefaultValues()},[t.values,i]),Ut.useEffect(()=>{t.errors&&i._setErrors(t.errors)},[t.errors,i]),Ut.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),Ut.useEffect(()=>{t.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[t.shouldUnregister,i]),e.current.formState=jj(r,i),e.current}const Ob=(t,e,n)=>{if(t&&"reportValidity"in t){const r=J(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},ME=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?Ob(r.ref,n,t):r.refs&&r.refs.forEach(s=>Ob(s,n,t))}},Gj=(t,e)=>{e.shouldUseNativeValidation&&ME(t,e);const n={};for(const r in t){const s=J(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(Zj(e.names||Object.keys(t),r)){const a=Object.assign({},J(n,r));Ae(a,"root",i),Ae(n,r,a)}else Ae(n,r,i)}return n},Zj=(t,e)=>t.some(n=>n.startsWith(e+"."));var Yj=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,a=r.path.join(".");if(!n[a])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];n[a]={message:o.message,type:o.code}}else n[a]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(m){return t.push(m)})}),e){var l=n[a].types,c=l&&l[r.code];n[a]=IE(a,e,n,s,c?[].concat(c,r.message):r.message)}t.shift()}return n},Wg=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(a,o){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&ME({},i),{errors:{},values:n.raw?r:c}})}catch(c){return o(c)}return l&&l.then?l.then(void 0,o):l}(0,function(a){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(a))return{values:{},errors:Gj(Yj(a.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw a}))}catch(a){return Promise.reject(a)}}},be;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(be||(be={}));var Up;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Up||(Up={}));const X=be.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wr=t=>{switch(typeof t){case"undefined":return X.undefined;case"string":return X.string;case"number":return isNaN(t)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(t)?X.array:t===null?X.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?X.promise:typeof Map<"u"&&t instanceof Map?X.map:typeof Set<"u"&&t instanceof Set?X.set:typeof Date<"u"&&t instanceof Date?X.date:X.object;default:return X.unknown}},B=be.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Xj=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ln extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof ln))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,be.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ln.create=t=>new ln(t);const Ca=(t,e)=>{let n;switch(t.code){case B.invalid_type:t.received===X.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case B.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,be.jsonStringifyReplacer)}`;break;case B.unrecognized_keys:n=`Unrecognized key(s) in object: ${be.joinValues(t.keys,", ")}`;break;case B.invalid_union:n="Invalid input";break;case B.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${be.joinValues(t.options)}`;break;case B.invalid_enum_value:n=`Invalid enum value. Expected ${be.joinValues(t.options)}, received '${t.received}'`;break;case B.invalid_arguments:n="Invalid function arguments";break;case B.invalid_return_type:n="Invalid function return type";break;case B.invalid_date:n="Invalid date";break;case B.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:be.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case B.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case B.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case B.custom:n="Invalid input";break;case B.invalid_intersection_types:n="Intersection results could not be merged";break;case B.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case B.not_finite:n="Number must be finite";break;default:n=e.defaultError,be.assertNever(t)}return{message:n}};let RE=Ca;function Jj(t){RE=t}function fd(){return RE}const pd=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:e,defaultError:o}).message;return{...s,path:i,message:o}},eL=[];function G(t,e){const n=fd(),r=pd({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ca?void 0:Ca].filter(s=>!!s)});t.common.issues.push(r)}class Rt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return de;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,a=await s.value;r.push({key:i,value:a})}return Rt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return de;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:e.value,value:r}}}const de=Object.freeze({status:"aborted"}),md=t=>({status:"dirty",value:t}),qt=t=>({status:"valid",value:t}),Vp=t=>t.status==="aborted",zp=t=>t.status==="dirty",vi=t=>t.status==="valid",_u=t=>typeof Promise<"u"&&t instanceof Promise;function gd(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function FE(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var ne;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ne||(ne={}));var Ao,Po;class ur{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Db=(t,e)=>{if(vi(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ln(t.common.issues);return this._error=n,this._error}}};function fe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,a)=>{var o,l;const{message:c}=t;return i.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:(o=c??r)!==null&&o!==void 0?o:a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:(l=c??n)!==null&&l!==void 0?l:a.defaultError}},description:s}}class me{get description(){return this._def.description}_getType(e){return wr(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:wr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Rt,ctx:{common:e.parent.common,data:e.data,parsedType:wr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(_u(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wr(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Db(s,i)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wr(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return vi(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>vi(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wr(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(_u(s)?s:Promise.resolve(s));return Db(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const a=e(s),o=()=>i.addIssue({code:B.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new zn({schema:this,typeName:oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ar.create(this,this._def)}nullable(){return Ps.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Rn.create(this)}promise(){return Aa.create(this,this._def)}or(e){return Tu.create([this,e],this._def)}and(e){return Nu.create(this,e,this._def)}transform(e){return new zn({...fe(this._def),schema:this,typeName:oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Ou({...fe(this._def),innerType:this,defaultValue:n,typeName:oe.ZodDefault})}brand(){return new Hg({typeName:oe.ZodBranded,type:this,...fe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Du({...fe(this._def),innerType:this,catchValue:n,typeName:oe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ul.create(this,e)}readonly(){return ju.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const tL=/^c[^\s-]{8,}$/i,nL=/^[0-9a-z]+$/,rL=/^[0-9A-HJKMNP-TV-Z]{26}$/i,sL=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,iL=/^[a-z0-9_-]{21}$/i,aL=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,oL=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,uL=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let gf;const cL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,dL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,hL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,fL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,pL=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,mL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,UE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",gL=new RegExp(`^${UE}$`);function VE(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function yL(t){return new RegExp(`^${VE(t)}$`)}function zE(t){let e=`${UE}T${VE(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function vL(t,e){return!!((e==="v4"||!e)&&cL.test(t)||(e==="v6"||!e)&&hL.test(t))}function wL(t,e){if(!aL.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function bL(t,e){return!!((e==="v4"||!e)&&dL.test(t)||(e==="v6"||!e)&&fL.test(t))}class Dn extends me{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==X.string){const s=this._getOrReturnCtx(e);return G(s,{code:B.invalid_type,expected:X.string,received:s.parsedType}),de}const n=new Rt;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),G(r,{code:B.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),G(r,{code:B.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const i=e.data.length>s.value,a=e.data.length<s.value;(i||a)&&(r=this._getOrReturnCtx(e,r),i?G(r,{code:B.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&G(r,{code:B.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")uL.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"email",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")gf||(gf=new RegExp(lL,"u")),gf.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"emoji",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")sL.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"uuid",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")iL.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"nanoid",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")tL.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"cuid",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")nL.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"cuid2",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")rL.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"ulid",code:B.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),G(r,{validation:"url",code:B.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"regex",code:B.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),G(r,{code:B.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),G(r,{code:B.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),G(r,{code:B.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?zE(s).test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{code:B.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?gL.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{code:B.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?yL(s).test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{code:B.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?oL.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"duration",code:B.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?vL(e.data,s.version)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"ip",code:B.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?wL(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"jwt",code:B.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?bL(e.data,s.version)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"cidr",code:B.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?pL.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"base64",code:B.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?mL.test(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{validation:"base64url",code:B.invalid_string,message:s.message}),n.dirty()):be.assertNever(s);return{status:n.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:B.invalid_string,...ne.errToObj(r)})}_addCheck(e){return new Dn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ne.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ne.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ne.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ne.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ne.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ne.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ne.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ne.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ne.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ne.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ne.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ne.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ne.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ne.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ne.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ne.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ne.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ne.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ne.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ne.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ne.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ne.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ne.errToObj(n)})}nonempty(e){return this.min(1,ne.errToObj(e))}trim(){return new Dn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Dn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Dn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Dn.create=t=>{var e;return new Dn({checks:[],typeName:oe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...fe(t)})};function xL(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class Cs extends me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==X.number){const s=this._getOrReturnCtx(e);return G(s,{code:B.invalid_type,expected:X.number,received:s.parsedType}),de}let n;const r=new Rt;for(const s of this._def.checks)s.kind==="int"?be.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{code:B.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?xL(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{code:B.not_finite,message:s.message}),r.dirty()):be.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ne.toString(n))}setLimit(e,n,r,s){return new Cs({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ne.toString(s)}]})}_addCheck(e){return new Cs({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ne.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ne.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ne.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ne.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ne.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&be.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Cs.create=t=>new Cs({checks:[],typeName:oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...fe(t)});class Is extends me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==X.bigint)return this._getInvalidInput(e);let n;const r=new Rt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),G(n,{code:B.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):be.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:X.bigint,received:n.parsedType}),de}gte(e,n){return this.setLimit("min",e,!0,ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ne.toString(n))}setLimit(e,n,r,s){return new Is({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ne.toString(s)}]})}_addCheck(e){return new Is({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ne.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Is.create=t=>{var e;return new Is({checks:[],typeName:oe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...fe(t)})};class ku extends me{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==X.boolean){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:X.boolean,received:n.parsedType}),de}return qt(e.data)}}ku.create=t=>new ku({typeName:oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...fe(t)});class wi extends me{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==X.date){const s=this._getOrReturnCtx(e);return G(s,{code:B.invalid_type,expected:X.date,received:s.parsedType}),de}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return G(s,{code:B.invalid_date}),de}const n=new Rt;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),G(r,{code:B.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),G(r,{code:B.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):be.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new wi({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ne.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ne.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}wi.create=t=>new wi({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:oe.ZodDate,...fe(t)});class yd extends me{_parse(e){if(this._getType(e)!==X.symbol){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:X.symbol,received:n.parsedType}),de}return qt(e.data)}}yd.create=t=>new yd({typeName:oe.ZodSymbol,...fe(t)});class Eu extends me{_parse(e){if(this._getType(e)!==X.undefined){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:X.undefined,received:n.parsedType}),de}return qt(e.data)}}Eu.create=t=>new Eu({typeName:oe.ZodUndefined,...fe(t)});class Su extends me{_parse(e){if(this._getType(e)!==X.null){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:X.null,received:n.parsedType}),de}return qt(e.data)}}Su.create=t=>new Su({typeName:oe.ZodNull,...fe(t)});class Ia extends me{constructor(){super(...arguments),this._any=!0}_parse(e){return qt(e.data)}}Ia.create=t=>new Ia({typeName:oe.ZodAny,...fe(t)});class ii extends me{constructor(){super(...arguments),this._unknown=!0}_parse(e){return qt(e.data)}}ii.create=t=>new ii({typeName:oe.ZodUnknown,...fe(t)});class Mr extends me{_parse(e){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:X.never,received:n.parsedType}),de}}Mr.create=t=>new Mr({typeName:oe.ZodNever,...fe(t)});class vd extends me{_parse(e){if(this._getType(e)!==X.undefined){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:X.void,received:n.parsedType}),de}return qt(e.data)}}vd.create=t=>new vd({typeName:oe.ZodVoid,...fe(t)});class Rn extends me{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==X.array)return G(n,{code:B.invalid_type,expected:X.array,received:n.parsedType}),de;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(a||o)&&(G(n,{code:a?B.too_big:B.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(G(n,{code:B.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(G(n,{code:B.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>s.type._parseAsync(new ur(n,a,n.path,o)))).then(a=>Rt.mergeArray(r,a));const i=[...n.data].map((a,o)=>s.type._parseSync(new ur(n,a,n.path,o)));return Rt.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Rn({...this._def,minLength:{value:e,message:ne.toString(n)}})}max(e,n){return new Rn({...this._def,maxLength:{value:e,message:ne.toString(n)}})}length(e,n){return new Rn({...this._def,exactLength:{value:e,message:ne.toString(n)}})}nonempty(e){return this.min(1,e)}}Rn.create=(t,e)=>new Rn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:oe.ZodArray,...fe(e)});function Ui(t){if(t instanceof Be){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ar.create(Ui(r))}return new Be({...t._def,shape:()=>e})}else return t instanceof Rn?new Rn({...t._def,type:Ui(t.element)}):t instanceof ar?ar.create(Ui(t.unwrap())):t instanceof Ps?Ps.create(Ui(t.unwrap())):t instanceof lr?lr.create(t.items.map(e=>Ui(e))):t}class Be extends me{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=be.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==X.object){const l=this._getOrReturnCtx(e);return G(l,{code:B.invalid_type,expected:X.object,received:l.parsedType}),de}const{status:n,ctx:r}=this._processInputParams(e),{shape:s,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof Mr&&this._def.unknownKeys==="strip"))for(const l in r.data)i.includes(l)||a.push(l);const o=[];for(const l of i){const c=s[l],h=r.data[l];o.push({key:{status:"valid",value:l},value:c._parse(new ur(r,h,r.path,l)),alwaysSet:l in r.data})}if(this._def.catchall instanceof Mr){const l=this._def.unknownKeys;if(l==="passthrough")for(const c of a)o.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(l==="strict")a.length>0&&(G(r,{code:B.unrecognized_keys,keys:a}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const c of a){const h=r.data[c];o.push({key:{status:"valid",value:c},value:l._parse(new ur(r,h,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const l=[];for(const c of o){const h=await c.key,m=await c.value;l.push({key:h,value:m,alwaysSet:c.alwaysSet})}return l}).then(l=>Rt.mergeObjectSync(n,l)):Rt.mergeObjectSync(n,o)}get shape(){return this._def.shape()}strict(e){return ne.errToObj,new Be({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,a,o;const l=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=ne.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Be({...this._def,unknownKeys:"strip"})}passthrough(){return new Be({...this._def,unknownKeys:"passthrough"})}extend(e){return new Be({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Be({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:oe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Be({...this._def,catchall:e})}pick(e){const n={};return be.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Be({...this._def,shape:()=>n})}omit(e){const n={};return be.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Be({...this._def,shape:()=>n})}deepPartial(){return Ui(this)}partial(e){const n={};return be.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Be({...this._def,shape:()=>n})}required(e){const n={};return be.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ar;)s=s._def.innerType;n[r]=s}}),new Be({...this._def,shape:()=>n})}keyof(){return BE(be.objectKeys(this.shape))}}Be.create=(t,e)=>new Be({shape:()=>t,unknownKeys:"strip",catchall:Mr.create(),typeName:oe.ZodObject,...fe(e)});Be.strictCreate=(t,e)=>new Be({shape:()=>t,unknownKeys:"strict",catchall:Mr.create(),typeName:oe.ZodObject,...fe(e)});Be.lazycreate=(t,e)=>new Be({shape:t,unknownKeys:"strip",catchall:Mr.create(),typeName:oe.ZodObject,...fe(e)});class Tu extends me{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new ln(o.ctx.common.issues));return G(n,{code:B.invalid_union,unionErrors:a}),de}if(n.common.async)return Promise.all(r.map(async i=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},h=l._parseSync({data:n.data,path:n.path,parent:c});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(l=>new ln(l));return G(n,{code:B.invalid_union,unionErrors:o}),de}}get options(){return this._def.options}}Tu.create=(t,e)=>new Tu({options:t,typeName:oe.ZodUnion,...fe(e)});const Qr=t=>t instanceof Iu?Qr(t.schema):t instanceof zn?Qr(t.innerType()):t instanceof Au?[t.value]:t instanceof As?t.options:t instanceof Pu?be.objectValues(t.enum):t instanceof Ou?Qr(t._def.innerType):t instanceof Eu?[void 0]:t instanceof Su?[null]:t instanceof ar?[void 0,...Qr(t.unwrap())]:t instanceof Ps?[null,...Qr(t.unwrap())]:t instanceof Hg||t instanceof ju?Qr(t.unwrap()):t instanceof Du?Qr(t._def.innerType):[];class lh extends me{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==X.object)return G(n,{code:B.invalid_type,expected:X.object,received:n.parsedType}),de;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(G(n,{code:B.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),de)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const a=Qr(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,i)}}return new lh({typeName:oe.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...fe(r)})}}function Bp(t,e){const n=wr(t),r=wr(e);if(t===e)return{valid:!0,data:t};if(n===X.object&&r===X.object){const s=be.objectKeys(e),i=be.objectKeys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(const o of i){const l=Bp(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===X.array&&r===X.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],o=e[i],l=Bp(a,o);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===X.date&&r===X.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Nu extends me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,a)=>{if(Vp(i)||Vp(a))return de;const o=Bp(i.value,a.value);return o.valid?((zp(i)||zp(a))&&n.dirty(),{status:n.value,value:o.data}):(G(r,{code:B.invalid_intersection_types}),de)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Nu.create=(t,e,n)=>new Nu({left:t,right:e,typeName:oe.ZodIntersection,...fe(n)});class lr extends me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==X.array)return G(r,{code:B.invalid_type,expected:X.array,received:r.parsedType}),de;if(r.data.length<this._def.items.length)return G(r,{code:B.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),de;!this._def.rest&&r.data.length>this._def.items.length&&(G(r,{code:B.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((i,a)=>{const o=this._def.items[a]||this._def.rest;return o?o._parse(new ur(r,i,r.path,a)):null}).filter(i=>!!i);return r.common.async?Promise.all(s).then(i=>Rt.mergeArray(n,i)):Rt.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new lr({...this._def,rest:e})}}lr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new lr({items:t,typeName:oe.ZodTuple,rest:null,...fe(e)})};class Cu extends me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==X.object)return G(r,{code:B.invalid_type,expected:X.object,received:r.parsedType}),de;const s=[],i=this._def.keyType,a=this._def.valueType;for(const o in r.data)s.push({key:i._parse(new ur(r,o,r.path,o)),value:a._parse(new ur(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?Rt.mergeObjectAsync(n,s):Rt.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof me?new Cu({keyType:e,valueType:n,typeName:oe.ZodRecord,...fe(r)}):new Cu({keyType:Dn.create(),valueType:e,typeName:oe.ZodRecord,...fe(n)})}}class wd extends me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==X.map)return G(r,{code:B.invalid_type,expected:X.map,received:r.parsedType}),de;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([o,l],c)=>({key:s._parse(new ur(r,o,r.path,[c,"key"])),value:i._parse(new ur(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,h=await l.value;if(c.status==="aborted"||h.status==="aborted")return de;(c.status==="dirty"||h.status==="dirty")&&n.dirty(),o.set(c.value,h.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,h=l.value;if(c.status==="aborted"||h.status==="aborted")return de;(c.status==="dirty"||h.status==="dirty")&&n.dirty(),o.set(c.value,h.value)}return{status:n.value,value:o}}}}wd.create=(t,e,n)=>new wd({valueType:e,keyType:t,typeName:oe.ZodMap,...fe(n)});class bi extends me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==X.set)return G(r,{code:B.invalid_type,expected:X.set,received:r.parsedType}),de;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(G(r,{code:B.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(G(r,{code:B.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function a(l){const c=new Set;for(const h of l){if(h.status==="aborted")return de;h.status==="dirty"&&n.dirty(),c.add(h.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((l,c)=>i._parse(new ur(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,n){return new bi({...this._def,minSize:{value:e,message:ne.toString(n)}})}max(e,n){return new bi({...this._def,maxSize:{value:e,message:ne.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}bi.create=(t,e)=>new bi({valueType:t,minSize:null,maxSize:null,typeName:oe.ZodSet,...fe(e)});class ca extends me{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==X.function)return G(n,{code:B.invalid_type,expected:X.function,received:n.parsedType}),de;function r(o,l){return pd({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,fd(),Ca].filter(c=>!!c),issueData:{code:B.invalid_arguments,argumentsError:l}})}function s(o,l){return pd({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,fd(),Ca].filter(c=>!!c),issueData:{code:B.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof Aa){const o=this;return qt(async function(...l){const c=new ln([]),h=await o._def.args.parseAsync(l,i).catch(g=>{throw c.addIssue(r(l,g)),c}),m=await Reflect.apply(a,this,h);return await o._def.returns._def.type.parseAsync(m,i).catch(g=>{throw c.addIssue(s(m,g)),c})})}else{const o=this;return qt(function(...l){const c=o._def.args.safeParse(l,i);if(!c.success)throw new ln([r(l,c.error)]);const h=Reflect.apply(a,this,c.data),m=o._def.returns.safeParse(h,i);if(!m.success)throw new ln([s(h,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ca({...this._def,args:lr.create(e).rest(ii.create())})}returns(e){return new ca({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new ca({args:e||lr.create([]).rest(ii.create()),returns:n||ii.create(),typeName:oe.ZodFunction,...fe(r)})}}class Iu extends me{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Iu.create=(t,e)=>new Iu({getter:t,typeName:oe.ZodLazy,...fe(e)});class Au extends me{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return G(n,{received:n.data,code:B.invalid_literal,expected:this._def.value}),de}return{status:"valid",value:e.data}}get value(){return this._def.value}}Au.create=(t,e)=>new Au({value:t,typeName:oe.ZodLiteral,...fe(e)});function BE(t,e){return new As({values:t,typeName:oe.ZodEnum,...fe(e)})}class As extends me{constructor(){super(...arguments),Ao.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return G(n,{expected:be.joinValues(r),received:n.parsedType,code:B.invalid_type}),de}if(gd(this,Ao)||FE(this,Ao,new Set(this._def.values)),!gd(this,Ao).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return G(n,{received:n.data,code:B.invalid_enum_value,options:r}),de}return qt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return As.create(e,{...this._def,...n})}exclude(e,n=this._def){return As.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Ao=new WeakMap;As.create=BE;class Pu extends me{constructor(){super(...arguments),Po.set(this,void 0)}_parse(e){const n=be.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==X.string&&r.parsedType!==X.number){const s=be.objectValues(n);return G(r,{expected:be.joinValues(s),received:r.parsedType,code:B.invalid_type}),de}if(gd(this,Po)||FE(this,Po,new Set(be.getValidEnumValues(this._def.values))),!gd(this,Po).has(e.data)){const s=be.objectValues(n);return G(r,{received:r.data,code:B.invalid_enum_value,options:s}),de}return qt(e.data)}get enum(){return this._def.values}}Po=new WeakMap;Pu.create=(t,e)=>new Pu({values:t,typeName:oe.ZodNativeEnum,...fe(e)});class Aa extends me{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==X.promise&&n.common.async===!1)return G(n,{code:B.invalid_type,expected:X.promise,received:n.parsedType}),de;const r=n.parsedType===X.promise?n.data:Promise.resolve(n.data);return qt(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Aa.create=(t,e)=>new Aa({type:t,typeName:oe.ZodPromise,...fe(e)});class zn extends me{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{G(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return de;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?de:l.status==="dirty"||n.value==="dirty"?md(l.value):l});{if(n.value==="aborted")return de;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?de:o.status==="dirty"||n.value==="dirty"?md(o.value):o}}if(s.type==="refinement"){const a=o=>{const l=s.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?de:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?de:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!vi(a))return a;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>vi(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:n.value,value:o})):a);be.assertNever(s)}}zn.create=(t,e,n)=>new zn({schema:t,typeName:oe.ZodEffects,effect:e,...fe(n)});zn.createWithPreprocess=(t,e,n)=>new zn({schema:e,effect:{type:"preprocess",transform:t},typeName:oe.ZodEffects,...fe(n)});class ar extends me{_parse(e){return this._getType(e)===X.undefined?qt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ar.create=(t,e)=>new ar({innerType:t,typeName:oe.ZodOptional,...fe(e)});class Ps extends me{_parse(e){return this._getType(e)===X.null?qt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ps.create=(t,e)=>new Ps({innerType:t,typeName:oe.ZodNullable,...fe(e)});class Ou extends me{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===X.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Ou.create=(t,e)=>new Ou({innerType:t,typeName:oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fe(e)});class Du extends me{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _u(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ln(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ln(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Du.create=(t,e)=>new Du({innerType:t,typeName:oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fe(e)});class bd extends me{_parse(e){if(this._getType(e)!==X.nan){const n=this._getOrReturnCtx(e);return G(n,{code:B.invalid_type,expected:X.nan,received:n.parsedType}),de}return{status:"valid",value:e.data}}}bd.create=t=>new bd({typeName:oe.ZodNaN,...fe(t)});const _L=Symbol("zod_brand");class Hg extends me{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ul extends me{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?de:s.status==="dirty"?(n.dirty(),md(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?de:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new ul({in:e,out:n,typeName:oe.ZodPipeline})}}class ju extends me{_parse(e){const n=this._def.innerType._parse(e),r=s=>(vi(s)&&(s.value=Object.freeze(s.value)),s);return _u(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}ju.create=(t,e)=>new ju({innerType:t,typeName:oe.ZodReadonly,...fe(e)});function $E(t,e={},n){return t?Ia.create().superRefine((r,s)=>{var i,a;if(!t(r)){const o=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(a=(i=o.fatal)!==null&&i!==void 0?i:n)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...c,fatal:l})}}):Ia.create()}const kL={object:Be.lazycreate};var oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(oe||(oe={}));const EL=(t,e={message:`Input not instance of ${t.name}`})=>$E(n=>n instanceof t,e),qE=Dn.create,WE=Cs.create,SL=bd.create,TL=Is.create,HE=ku.create,NL=wi.create,CL=yd.create,IL=Eu.create,AL=Su.create,PL=Ia.create,OL=ii.create,DL=Mr.create,jL=vd.create,LL=Rn.create,ML=Be.create,RL=Be.strictCreate,FL=Tu.create,UL=lh.create,VL=Nu.create,zL=lr.create,BL=Cu.create,$L=wd.create,qL=bi.create,WL=ca.create,HL=Iu.create,KL=Au.create,QL=As.create,GL=Pu.create,ZL=Aa.create,jb=zn.create,YL=ar.create,XL=Ps.create,JL=zn.createWithPreprocess,eM=ul.create,tM=()=>qE().optional(),nM=()=>WE().optional(),rM=()=>HE().optional(),sM={string:t=>Dn.create({...t,coerce:!0}),number:t=>Cs.create({...t,coerce:!0}),boolean:t=>ku.create({...t,coerce:!0}),bigint:t=>Is.create({...t,coerce:!0}),date:t=>wi.create({...t,coerce:!0})},iM=de;var $e=Object.freeze({__proto__:null,defaultErrorMap:Ca,setErrorMap:Jj,getErrorMap:fd,makeIssue:pd,EMPTY_PATH:eL,addIssueToContext:G,ParseStatus:Rt,INVALID:de,DIRTY:md,OK:qt,isAborted:Vp,isDirty:zp,isValid:vi,isAsync:_u,get util(){return be},get objectUtil(){return Up},ZodParsedType:X,getParsedType:wr,ZodType:me,datetimeRegex:zE,ZodString:Dn,ZodNumber:Cs,ZodBigInt:Is,ZodBoolean:ku,ZodDate:wi,ZodSymbol:yd,ZodUndefined:Eu,ZodNull:Su,ZodAny:Ia,ZodUnknown:ii,ZodNever:Mr,ZodVoid:vd,ZodArray:Rn,ZodObject:Be,ZodUnion:Tu,ZodDiscriminatedUnion:lh,ZodIntersection:Nu,ZodTuple:lr,ZodRecord:Cu,ZodMap:wd,ZodSet:bi,ZodFunction:ca,ZodLazy:Iu,ZodLiteral:Au,ZodEnum:As,ZodNativeEnum:Pu,ZodPromise:Aa,ZodEffects:zn,ZodTransformer:zn,ZodOptional:ar,ZodNullable:Ps,ZodDefault:Ou,ZodCatch:Du,ZodNaN:bd,BRAND:_L,ZodBranded:Hg,ZodPipeline:ul,ZodReadonly:ju,custom:$E,Schema:me,ZodSchema:me,late:kL,get ZodFirstPartyTypeKind(){return oe},coerce:sM,any:PL,array:LL,bigint:TL,boolean:HE,date:NL,discriminatedUnion:UL,effect:jb,enum:QL,function:WL,instanceof:EL,intersection:VL,lazy:HL,literal:KL,map:$L,nan:SL,nativeEnum:GL,never:DL,null:AL,nullable:XL,number:WE,object:ML,oboolean:rM,onumber:nM,optional:YL,ostring:tM,pipeline:eM,preprocess:JL,promise:ZL,record:BL,set:qL,strictObject:RL,string:qE,symbol:CL,transformer:jb,tuple:zL,undefined:IL,union:FL,unknown:OL,void:jL,NEVER:iM,ZodIssueCode:B,quotelessJson:Xj,ZodError:ln});const Bn=({message:t})=>f.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 my-4",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx(uC,{className:"h-5 w-5 text-red-400 mr-2"}),f.jsx("p",{className:"text-sm text-red-700",children:t})]})}),aM=$e.object({firstName:$e.string().min(2,"Le prénom doit contenir au moins 2 caractères").optional(),lastName:$e.string().min(2,"Le nom doit contenir au moins 2 caractères").optional(),email:$e.string().email("Email invalide"),password:$e.string().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),KE=({mode:t,onSuccess:e})=>{const[n,r]=M.useState(null),{register:s,handleSubmit:i,formState:{errors:a,isSubmitting:o}}=qg({resolver:Wg(aM)}),l=async c=>{try{r(null),t==="register"?await Rp.register(c.email,c.password,{firstName:c.firstName||"",lastName:c.lastName||""}):await Rp.login(c.email,c.password),e==null||e()}catch(h){console.error("Auth error:",h),r(h instanceof Error?h.message:"Une erreur est survenue")}};return f.jsxs("form",{onSubmit:i(l),className:"space-y-6",children:[n&&f.jsx(Bn,{message:n}),t==="register"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"Prénom"}),f.jsx("input",{...s("firstName"),type:"text",id:"firstName",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),a.firstName&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.firstName.message})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Nom"}),f.jsx("input",{...s("lastName"),type:"text",id:"lastName",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),a.lastName&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.lastName.message})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),f.jsx("input",{...s("email"),type:"email",id:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),a.email&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email.message})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),f.jsx("input",{...s("password"),type:"password",id:"password",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),a.password&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password.message})]}),f.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-black hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black disabled:bg-gray-400",children:o?"Chargement...":t==="login"?"Se connecter":"S'inscrire"})]})},oM=()=>{const t=Ua();return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connexion à votre compte"}),f.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",f.jsx("button",{onClick:()=>t("/register"),className:"font-medium text-black hover:text-gray-900",children:"créez un compte"})]})]}),f.jsx(KE,{mode:"login",onSuccess:()=>t("/dashboard")})]})})},uM=()=>{const t=Ua();return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Créer un compte"}),f.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",f.jsx("button",{onClick:()=>t("/login"),className:"font-medium text-black hover:text-gray-900",children:"connectez-vous à votre compte"})]})]}),f.jsx(KE,{mode:"register",onSuccess:()=>t("/dashboard")})]})})},hr=()=>f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black"})}),lM=()=>{const{user:t}=En(),[e,n]=M.useState(null),[r,s]=M.useState(!0),[i,a]=M.useState(null);return M.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{s(!0),a(null);const o=await Na.getUserProfile(t.uid);n((o==null?void 0:o.timeBalance)??0)}catch(o){console.error("Error loading time balance:",o),a("Unable to load time balance")}finally{s(!1)}})()},[t==null?void 0:t.uid]),r?f.jsx(hr,{}):i?f.jsx(Bn,{message:i}):e===null?null:f.jsxs("div",{className:"bg-gradient-to-br from-black to-gray-800 text-white rounded-2xl p-8 shadow-lg",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-xl font-medium",children:"Votre solde de temps"}),f.jsx(cr,{className:"w-6 h-6 opacity-80"})]}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("p",{className:"text-6xl font-bold",children:[e,"h"]}),f.jsx("p",{className:"text-lg opacity-80 mt-2",children:"disponibles"})]})]})},cM=()=>{const{user:t}=En(),[e,n]=M.useState(null),[r,s]=M.useState(!0),[i,a]=M.useState(null);return M.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{s(!0),a(null);const o=await Na.getUserProfile(t.uid);o&&n({exchangesCount:o.exchangesCount??0,totalHours:o.exchangedHours??0,rating:o.rating??5})}catch(o){console.error("Error loading stats:",o),a("Unable to load statistics")}finally{s(!1)}})()},[t==null?void 0:t.uid]),r?f.jsx(hr,{}):i?f.jsx(Bn,{message:i}):e?f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Échanges"}),f.jsx(mC,{className:"w-5 h-5 text-gray-400"})]}),f.jsx("p",{className:"text-2xl font-bold",children:e.exchangesCount})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Heures échangées"}),f.jsx(zm,{className:"w-5 h-5 text-gray-400"})]}),f.jsxs("p",{className:"text-2xl font-bold",children:[e.totalHours,"h"]})]}),f.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Note moyenne"}),f.jsx(fC,{className:"w-5 h-5 text-gray-400"})]}),f.jsxs("p",{className:"text-2xl font-bold",children:[e.rating.toFixed(1),"/5"]})]})]}):null};class ch{async requireAuth(){const e=oh.currentUser;if(!e)throw new Error("Authentication required");return e.uid}handleError(e){if(console.error("Service error:",e),e instanceof dr)switch(e.code){case"permission-denied":throw new Error("You do not have permission to perform this action");case"not-found":throw new Error("The requested resource was not found");case"unauthenticated":throw new Error("Please sign in to continue");case"unavailable":throw new Error("Service temporarily unavailable. Please try again later");case"resource-exhausted":throw new Error("Too many requests. Please try again later");default:throw new Error("An error occurred. Please try again")}throw new Error("An unexpected error occurred")}async withAuth(e){try{return await this.requireAuth(),await e()}catch(n){throw this.handleError(n)}}}class dM extends ch{constructor(){super(...arguments),Xn(this,"COLLECTION","transactions"),Xn(this,"USERS_COLLECTION","users")}async transferTime({fromUserId:e,toUserId:n,amount:r,bookingId:s,experienceId:i}){if(!r||r<=0)throw new Error("Invalid amount for time transfer");return this.withAuth(async()=>{try{const a=new Date,o=await il(Mn(Re,this.COLLECTION),{fromUserId:e,toUserId:n,amount:r,bookingId:s,experienceId:i,type:"booking",status:"pending",createdAt:a,updatedAt:a});return await SE(Re,async l=>{const c=kn(Re,this.USERS_COLLECTION,e),h=kn(Re,this.USERS_COLLECTION,n),[m,g]=await Promise.all([l.get(c),l.get(h)]);if(!m.exists()||!g.exists())throw new Error("One or both users not found");const _=m.data(),N=g.data(),C=_.timeBalance||0,O=N.timeBalance||0;if(C<r)throw new Error(`Not enough balance: ${C}h available, ${r}h needed`);l.update(c,{timeBalance:C-r,exchangedHours:(_.exchangedHours||0)+r,exchangesCount:(_.exchangesCount||0)+1,updatedAt:a}),l.update(h,{timeBalance:O+r,exchangedHours:(N.exchangedHours||0)+r,exchangesCount:(N.exchangesCount||0)+1,updatedAt:a}),l.update(o,{status:"completed",updatedAt:a})}),o.id}catch(a){throw console.error("Transaction error:",a),a instanceof Error?a:new Error("Failed to transfer time")}})}}const hM=new dM;class fM extends ch{constructor(){super(...arguments),Xn(this,"COLLECTION","bookings")}async createBooking(e){return this.withAuth(async()=>{try{const n=new Date;return(await il(Mn(Re,this.COLLECTION),{...e,status:"pending",createdAt:n,updatedAt:n,timeSlot:{startTime:Te.fromDate(e.timeSlot.startTime),endTime:Te.fromDate(e.timeSlot.endTime)}})).id}catch(n){throw console.error("Error creating booking:",n),n instanceof Error?n:new Error("Failed to create booking")}})}async confirmBooking(e){return this.withAuth(async()=>{try{await SE(Re,async n=>{const r=kn(Re,this.COLLECTION,e),s=await n.get(r);if(!s.exists())throw new Error("Booking not found");const i=s.data();if(i.status!=="pending")throw new Error("This booking cannot be confirmed");await hM.transferTime({fromUserId:i.guestUserId,toUserId:i.hostUserId,amount:i.duration,bookingId:e,experienceId:i.experienceId}),n.update(r,{status:"confirmed",updatedAt:Te.fromDate(new Date)})})}catch(n){throw console.error("Error confirming booking:",n),n instanceof Error?n:new Error("Failed to confirm booking")}})}async cancelBooking(e){return this.withAuth(async()=>{try{const n=kn(Re,this.COLLECTION,e);await Fg(n,{status:"cancelled",updatedAt:Te.fromDate(new Date)})}catch(n){throw console.error("Error cancelling booking:",n),n instanceof Error?n:new Error("Failed to cancel booking")}})}async getUserBookings(e){return this.withAuth(async()=>{try{const[n,r]=await Promise.all([this.getBookingsByRole(e,"guestUserId"),this.getBookingsByRole(e,"hostUserId")]);return[...n,...r].sort((s,i)=>i.timeSlot.startTime.getTime()-s.timeSlot.startTime.getTime())}catch(n){throw console.error("Error loading bookings:",n),new Error("Unable to load bookings")}})}async getBookingsByRole(e,n){const r=Sa(Mn(Re,this.COLLECTION),xs(n,"==",e));return(await Ta(r)).docs.map(s=>({id:s.id,...s.data(),timeSlot:{startTime:s.data().timeSlot.startTime.toDate(),endTime:s.data().timeSlot.endTime.toDate()},createdAt:s.data().createdAt.toDate(),updatedAt:s.data().updatedAt.toDate()}))}}const vc=new fM;function ft(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Os(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const QE=6048e5,pM=864e5;let mM={};function dh(){return mM}function Pa(t,e){var n,r,s,i;const a=dh(),o=(e==null?void 0:e.weekStartsOn)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.weekStartsOn)??a.weekStartsOn??((i=(s=a.locale)==null?void 0:s.options)==null?void 0:i.weekStartsOn)??0,l=ft(t),c=l.getDay(),h=(c<o?7:0)+c-o;return l.setDate(l.getDate()-h),l.setHours(0,0,0,0),l}function xd(t){return Pa(t,{weekStartsOn:1})}function GE(t){const e=ft(t),n=e.getFullYear(),r=Os(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=xd(r),i=Os(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=xd(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function _d(t){const e=ft(t);return e.setHours(0,0,0,0),e}function Lb(t){const e=ft(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function gM(t,e){const n=_d(t),r=_d(e),s=+n-Lb(n),i=+r-Lb(r);return Math.round((s-i)/pM)}function yM(t){const e=GE(t),n=Os(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),xd(n)}function vM(t){return Os(t,Date.now())}function kd(t,e){const n=_d(t),r=_d(e);return+n==+r}function wM(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function bM(t){if(!wM(t)&&typeof t!="number")return!1;const e=ft(t);return!isNaN(Number(e))}function xM(t){const e=ft(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function _M(t,e){const n=ft(t.start),r=ft(t.end);let s=+n>+r;const i=s?+n:+r,a=s?r:n;a.setHours(0,0,0,0);let o=1;const l=[];for(;+a<=i;)l.push(ft(a)),a.setDate(a.getDate()+o),a.setHours(0,0,0,0);return s?l.reverse():l}function kM(t){const e=ft(t);return e.setDate(1),e.setHours(0,0,0,0),e}function EM(t){const e=ft(t),n=Os(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function SM(t,e){const n=e==null?void 0:e.weekStartsOn,r=ft(t),s=r.getDay(),i=(s<n?-7:0)+6-(s-n);return r.setDate(r.getDate()+i),r.setHours(23,59,59,999),r}const TM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},NM=(t,e,n)=>{let r;const s=TM[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function da(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const CM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},IM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},AM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},PM={date:da({formats:CM,defaultWidth:"full"}),time:da({formats:IM,defaultWidth:"full"}),dateTime:da({formats:AM,defaultWidth:"full"})},OM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},DM=(t,e,n,r)=>OM[t];function Qn(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const jM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},LM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},MM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},RM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},FM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},UM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},VM=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},zM={ordinalNumber:VM,era:Qn({values:jM,defaultWidth:"wide"}),quarter:Qn({values:LM,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Qn({values:MM,defaultWidth:"wide"}),day:Qn({values:RM,defaultWidth:"wide"}),dayPeriod:Qn({values:FM,defaultWidth:"wide",formattingValues:UM,defaultFormattingWidth:"wide"})};function Gn(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?$M(o,m=>m.test(a)):BM(o,m=>m.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const h=e.slice(a.length);return{value:c,rest:h}}}function BM(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function $M(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function ZE(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const qM=/^(\d+)(th|st|nd|rd)?/i,WM=/\d+/i,HM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},KM={any:[/^b/i,/^(a|c)/i]},QM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},GM={any:[/1/i,/2/i,/3/i,/4/i]},ZM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},YM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},XM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},JM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nR={ordinalNumber:ZE({matchPattern:qM,parsePattern:WM,valueCallback:t=>parseInt(t,10)}),era:Gn({matchPatterns:HM,defaultMatchWidth:"wide",parsePatterns:KM,defaultParseWidth:"any"}),quarter:Gn({matchPatterns:QM,defaultMatchWidth:"wide",parsePatterns:GM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gn({matchPatterns:ZM,defaultMatchWidth:"wide",parsePatterns:YM,defaultParseWidth:"any"}),day:Gn({matchPatterns:XM,defaultMatchWidth:"wide",parsePatterns:JM,defaultParseWidth:"any"}),dayPeriod:Gn({matchPatterns:eR,defaultMatchWidth:"any",parsePatterns:tR,defaultParseWidth:"any"})},rR={code:"en-US",formatDistance:NM,formatLong:PM,formatRelative:DM,localize:zM,match:nR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sR(t){const e=ft(t);return gM(e,EM(e))+1}function iR(t){const e=ft(t),n=+xd(e)-+yM(e);return Math.round(n/QE)+1}function YE(t,e){var n,r,s,i;const a=ft(t),o=a.getFullYear(),l=dh(),c=(e==null?void 0:e.firstWeekContainsDate)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.firstWeekContainsDate)??l.firstWeekContainsDate??((i=(s=l.locale)==null?void 0:s.options)==null?void 0:i.firstWeekContainsDate)??1,h=Os(t,0);h.setFullYear(o+1,0,c),h.setHours(0,0,0,0);const m=Pa(h,e),g=Os(t,0);g.setFullYear(o,0,c),g.setHours(0,0,0,0);const _=Pa(g,e);return a.getTime()>=m.getTime()?o+1:a.getTime()>=_.getTime()?o:o-1}function aR(t,e){var n,r,s,i;const a=dh(),o=(e==null?void 0:e.firstWeekContainsDate)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.firstWeekContainsDate)??a.firstWeekContainsDate??((i=(s=a.locale)==null?void 0:s.options)==null?void 0:i.firstWeekContainsDate)??1,l=YE(t,e),c=Os(t,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),Pa(c,e)}function oR(t,e){const n=ft(t),r=+Pa(n,e)-+aR(n,e);return Math.round(r/QE)+1}function Ce(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Hr={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ce(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ce(n+1,2)},d(t,e){return Ce(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ce(t.getHours()%12||12,e.length)},H(t,e){return Ce(t.getHours(),e.length)},m(t,e){return Ce(t.getMinutes(),e.length)},s(t,e){return Ce(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ce(s,e.length)}},Li={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Mb={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Hr.y(t,e)},Y:function(t,e,n,r){const s=YE(t,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Ce(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Ce(i,e.length)},R:function(t,e){const n=GE(t);return Ce(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ce(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ce(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ce(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Hr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ce(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=oR(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Ce(s,e.length)},I:function(t,e,n){const r=iR(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ce(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Hr.d(t,e)},D:function(t,e,n){const r=sR(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ce(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Ce(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Ce(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Ce(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Li.noon:r===0?s=Li.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Li.evening:r>=12?s=Li.afternoon:r>=4?s=Li.morning:s=Li.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Hr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Hr.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ce(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ce(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Hr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Hr.s(t,e)},S:function(t,e){return Hr.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Fb(r);case"XXXX":case"XX":return Zs(r);case"XXXXX":case"XXX":default:return Zs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Fb(r);case"xxxx":case"xx":return Zs(r);case"xxxxx":case"xxx":default:return Zs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Rb(r,":");case"OOOO":default:return"GMT"+Zs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Rb(r,":");case"zzzz":default:return"GMT"+Zs(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Ce(r,e.length)},T:function(t,e,n){const r=t.getTime();return Ce(r,e.length)}};function Rb(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Ce(i,2)}function Fb(t,e){return t%60===0?(t>0?"-":"+")+Ce(Math.abs(t)/60,2):Zs(t,e)}function Zs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Ce(Math.trunc(r/60),2),i=Ce(r%60,2);return n+s+e+i}const Ub=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},XE=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},uR=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Ub(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Ub(r,e)).replace("{{time}}",XE(s,e))},lR={p:XE,P:uR},cR=/^D+$/,dR=/^Y+$/,hR=["D","DD","YY","YYYY"];function fR(t){return cR.test(t)}function pR(t){return dR.test(t)}function mR(t,e,n){const r=gR(t,e,n);if(console.warn(r),hR.includes(t))throw new RangeError(r)}function gR(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,wR=/^'([^]*?)'?$/,bR=/''/g,xR=/[a-zA-Z]/;function Sr(t,e,n){var r,s,i,a,o,l,c,h;const m=dh(),g=(n==null?void 0:n.locale)??m.locale??rR,_=(n==null?void 0:n.firstWeekContainsDate)??((s=(r=n==null?void 0:n.locale)==null?void 0:r.options)==null?void 0:s.firstWeekContainsDate)??m.firstWeekContainsDate??((a=(i=m.locale)==null?void 0:i.options)==null?void 0:a.firstWeekContainsDate)??1,N=(n==null?void 0:n.weekStartsOn)??((l=(o=n==null?void 0:n.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??m.weekStartsOn??((h=(c=m.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,C=ft(t);if(!bM(C))throw new RangeError("Invalid time value");let O=e.match(vR).map(v=>{const x=v[0];if(x==="p"||x==="P"){const j=lR[x];return j(v,g.formatLong)}return v}).join("").match(yR).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const x=v[0];if(x==="'")return{isToken:!1,value:_R(v)};if(Mb[x])return{isToken:!0,value:v};if(x.match(xR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:v}});g.localize.preprocessor&&(O=g.localize.preprocessor(C,O));const E={firstWeekContainsDate:_,weekStartsOn:N,locale:g};return O.map(v=>{if(!v.isToken)return v.value;const x=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&pR(x)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&fR(x))&&mR(x,e,String(t));const j=Mb[x[0]];return j(C,x,g.localize,E)}).join("")}function _R(t){const e=t.match(wR);return e?e[1].replace(bR,"'"):t}function Vb(t,e){const n=ft(t),r=ft(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function kR(t){return kd(t,vM(t))}const ER={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},SR=(t,e,n)=>{let r;const s=ER[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},TR={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},NR={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},CR={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},IR={date:da({formats:TR,defaultWidth:"full"}),time:da({formats:NR,defaultWidth:"full"}),dateTime:da({formats:CR,defaultWidth:"full"})},AR={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},PR=(t,e,n,r)=>AR[t],OR={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},DR={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},jR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},LR={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},MR={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},RR=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let i;return n===1?i=r&&s.includes(r)?"ère":"er":i="ème",n+i},FR=["MMM","MMMM"],UR={preprocessor:(t,e)=>t.getDate()===1||!e.some(n=>n.isToken&&FR.includes(n.value))?e:e.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:RR,era:Qn({values:OR,defaultWidth:"wide"}),quarter:Qn({values:DR,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Qn({values:jR,defaultWidth:"wide"}),day:Qn({values:LR,defaultWidth:"wide"}),dayPeriod:Qn({values:MR,defaultWidth:"wide"})},VR=/^(\d+)(ième|ère|ème|er|e)?/i,zR=/\d+/i,BR={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},$R={any:[/^av/i,/^ap/i]},qR={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},WR={any:[/1/i,/2/i,/3/i,/4/i]},HR={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},KR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},QR={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},GR={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},ZR={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},YR={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},XR={ordinalNumber:ZE({matchPattern:VR,parsePattern:zR,valueCallback:t=>parseInt(t)}),era:Gn({matchPatterns:BR,defaultMatchWidth:"wide",parsePatterns:$R,defaultParseWidth:"any"}),quarter:Gn({matchPatterns:qR,defaultMatchWidth:"wide",parsePatterns:WR,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gn({matchPatterns:HR,defaultMatchWidth:"wide",parsePatterns:KR,defaultParseWidth:"any"}),day:Gn({matchPatterns:QR,defaultMatchWidth:"wide",parsePatterns:GR,defaultParseWidth:"any"}),dayPeriod:Gn({matchPatterns:ZR,defaultMatchWidth:"any",parsePatterns:YR,defaultParseWidth:"any"})},Oa={code:"fr",formatDistance:SR,formatLong:IR,formatRelative:PR,localize:UR,match:XR,options:{weekStartsOn:1,firstWeekContainsDate:4}},JR=({booking:t,onStatusUpdate:e,isProcessing:n,isHost:r})=>{const s=a=>{switch(a){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},i=a=>{switch(a){case"confirmed":return"Confirmé";case"pending":return"En attente";case"cancelled":return"Annulé";default:return a}};return f.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium",children:t.experienceTitle}),f.jsxs("div",{className:"mt-1 space-y-1",children:[f.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[f.jsx(cr,{className:"w-4 h-4 mr-1"}),Sr(t.timeSlot.startTime,"EEEE d MMMM à HH:mm",{locale:Oa})]}),!r&&t.hostUser&&f.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[f.jsx(sw,{className:"w-4 h-4 mr-1"}),"Animé par ",t.hostUser.firstName," ",t.hostUser.lastName]}),r&&t.guestUser&&f.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[f.jsx(sw,{className:"w-4 h-4 mr-1"}),"Réservé par ",t.guestUser.firstName," ",t.guestUser.lastName]})]})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[t.status==="pending"&&r&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>e==null?void 0:e(t.id,"confirm"),disabled:n,className:"text-green-600 hover:text-green-800 disabled:opacity-50",title:"Confirmer",children:f.jsx(cC,{className:"w-5 h-5"})}),f.jsx("button",{onClick:()=>e==null?void 0:e(t.id,"cancel"),disabled:n,className:"text-red-600 hover:text-red-800 disabled:opacity-50",title:"Refuser",children:f.jsx(zd,{className:"w-5 h-5"})})]}),f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s(t.status)}`,children:i(t.status)})]})]})})},Ql=({bookings:t,title:e,listType:n,onStatusUpdate:r,isProcessing:s,isHost:i})=>t.length===0?null:f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium mb-4",children:e}),f.jsx("div",{className:"space-y-4",children:t.map(a=>f.jsx(JR,{booking:a,onStatusUpdate:r,isProcessing:s,isHost:i},`${a.id}-${a.status}-${n}`))})]}),e4=()=>{const{user:t}=En(),[e,n]=M.useState([]),[r,s]=M.useState(!0),[i,a]=M.useState(null),[o,l]=M.useState(null),c=async()=>{if(t!=null&&t.uid)try{s(!0),a(null);const N=await vc.getUserBookings(t.uid);n(N)}catch{a("Unable to load your bookings")}finally{s(!1)}};M.useEffect(()=>{t!=null&&t.uid&&c()},[t==null?void 0:t.uid]);const h=async(N,C)=>{try{l(N),a(null);const O=e.find(E=>E.id===N);if(!O)throw new Error("Booking not found");if(O.hostUserId!==(t==null?void 0:t.uid))throw new Error("Only the host can update booking status");C==="confirm"?await vc.confirmBooking(N,O.experienceId,O.duration):await vc.cancelBooking(N),await c()}catch(O){console.error("Status update error:",O),a(O instanceof Error?O.message:`Failed to ${C} booking`)}finally{l(null)}};if(r)return f.jsx(hr,{});if(i)return f.jsx(Bn,{message:i});const m=new Date,g=e.filter(N=>N.hostUserId===(t==null?void 0:t.uid)),_=e.filter(N=>N.guestUserId===(t==null?void 0:t.uid));return f.jsxs("div",{className:"space-y-8",children:[g.length>0&&f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Sessions que vous animez"}),f.jsx(Ql,{bookings:g.filter(N=>N.timeSlot.startTime>m&&N.status!=="cancelled"),title:"À venir",listType:"upcoming",onStatusUpdate:h,isProcessing:!!o,isHost:!0}),f.jsx(Ql,{bookings:g.filter(N=>N.timeSlot.startTime<=m||N.status==="cancelled"),title:"Passées",listType:"past",isHost:!0})]}),_.length>0&&f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Sessions auxquelles vous participez"}),f.jsx(Ql,{bookings:_.filter(N=>N.timeSlot.startTime>m&&N.status!=="cancelled"),title:"À venir",listType:"upcoming",isHost:!1}),f.jsx(Ql,{bookings:_.filter(N=>N.timeSlot.startTime<=m||N.status==="cancelled"),title:"Passées",listType:"past",isHost:!1})]}),e.length===0&&f.jsx("div",{className:"text-center py-8 bg-white rounded-lg",children:f.jsx("p",{className:"text-gray-500",children:"Aucune réservation trouvée"})})]})};class Kr extends Error{constructor(e){super(e),this.name="ExperienceValidationError"}}function t4(t){var e,n,r,s;if(!((e=t.title)!=null&&e.trim()))throw new Kr("Title is required");if(!((n=t.description)!=null&&n.trim()))throw new Kr("Description is required");if(t.duration<=0||t.duration>8)throw new Kr("Duration must be between 0 and 8 hours");if(!((r=t.category)!=null&&r.trim()))throw new Kr("Category is required");if(t.minParticipants<1)throw new Kr("Minimum participants must be at least 1");if(t.maxParticipants<t.minParticipants)throw new Kr("Maximum participants must be greater than or equal to minimum participants");if(!((s=t.location)!=null&&s.trim()))throw new Kr("Location is required");try{new URL(t.imageUrl)}catch{throw new Kr("Valid image URL is required")}}class n4{constructor(){Xn(this,"COLLECTION","disponibilites")}async getExperienceAvailabilities(e){const n=await fetch(`/api/availabilities?experienceId=${e}`);if(!n.ok)throw new Error("Erreur lors de la récupération des disponibilités.");return n.json()}async createAvailability(e){try{const{userId:n,experienceId:r,date:s,startTime:i,endTime:a}=e,o={userId:n,experienceId:r,date:Te.fromDate(s),startTime:i,endTime:a,status:"active",createdAt:Te.fromDate(new Date)};await il(Mn(Re,this.COLLECTION),o),console.log("✅ Disponibilité créée avec succès")}catch(n){throw console.error("❌ Erreur lors de la création de la disponibilité:",n),new Error("Impossible de créer la disponibilité")}}async deleteAvailability(e){try{const n=kn(Re,this.COLLECTION,e);await uj(n),console.log("✅ Disponibilité supprimée avec succès")}catch(n){throw console.error("❌ Erreur lors de la suppression:",n),new Error("Impossible de supprimer la disponibilité")}}async updateAvailabilityStatus(e,n){try{const r=kn(Re,this.COLLECTION,e);await Fg(r,{status:n,updatedAt:Te.fromDate(new Date)}),console.log("✅ Statut de la disponibilité mis à jour avec succès")}catch(r){throw console.error("❌ Erreur lors de la mise à jour du statut:",r),new Error("Impossible de mettre à jour le statut de la disponibilité")}}async getUserAvailabilities(e){try{const n=Sa(Mn(Re,this.COLLECTION),xs("userId","==",e)),r=await Ta(n),s=[];return r.forEach(i=>{const a=i.data();s.push({id:i.id,userId:a.userId,experienceId:a.experienceId,date:a.date.toDate(),startTime:a.startTime,endTime:a.endTime,status:a.status,createdAt:a.createdAt.toDate()})}),console.log("✅ Disponibilités récupérées avec succès"),s}catch(n){throw console.error("❌ Erreur lors de la récupération des disponibilités:",n),new Error("Impossible de récupérer les disponibilités")}}}const Da=new n4;let r4=class extends ch{constructor(){super(...arguments),Xn(this,"COLLECTION","experiences")}async createExperience(t){return this.withAuth(async()=>{try{t4(t);const e=await this.requireAuth(),n={...t,userId:e,status:"active",createdAt:new Date};return(await il(Mn(Re,this.COLLECTION),n)).id}catch(e){throw this.handleError(e)}})}async getAllExperiences(){return this.withAuth(async()=>{try{const t=await this.requireAuth(),e=Sa(Mn(Re,this.COLLECTION),xs("status","==","active"));return(await Ta(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt instanceof Te?n.data().createdAt.toDate():new Date(n.data().createdAt)})).filter(n=>n.userId!==t)}catch(t){throw this.handleError(t)}})}async getUserExperiences(t){return this.withAuth(async()=>{try{const e=Sa(Mn(Re,this.COLLECTION),xs("userId","==",t),xs("status","==","active"));return(await Ta(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt instanceof Te?n.data().createdAt.toDate():new Date(n.data().createdAt)}))}catch(e){throw this.handleError(e)}})}async deleteExperience(t){return this.withAuth(async()=>{try{const e=fj(Re),n=kn(Re,this.COLLECTION,t);e.update(n,{status:"deleted",updatedAt:Te.fromDate(new Date)}),(await Da.getExperienceAvailabilities(t)).forEach(r=>{const s=kn(Re,"disponibilites",r.id);e.update(s,{status:"cancelled",updatedAt:Te.fromDate(new Date)})}),await e.commit()}catch(e){throw this.handleError(e)}})}};const Lu=new r4,s4=$e.object({title:$e.string().min(3,"Le titre doit contenir au moins 3 caractères"),description:$e.string().min(10,"La description doit contenir au moins 10 caractères"),duration:$e.number().min(.5,"La durée minimum est de 30 minutes").max(8,"La durée maximum est de 8 heures"),category:$e.string().min(1,"Veuillez sélectionner une catégorie"),minParticipants:$e.number().min(1,"Minimum 1 participant"),maxParticipants:$e.number().min(1,"Minimum 1 participant"),location:$e.string().min(1,"Veuillez indiquer un lieu"),imageUrl:$e.string().url("Veuillez fournir une URL d'image valide")}),i4=["Sport","Music","Cooking","Art & Creativity","Technology","Languages","Wellness","Business","Education","Travel","Other"],a4=({onSuccess:t,onClose:e})=>{const{user:n}=En(),[r,s]=M.useState(!1),[i,a]=M.useState(null),{register:o,handleSubmit:l,formState:{errors:c}}=qg({resolver:Wg(s4),defaultValues:{minParticipants:1,maxParticipants:5,duration:1}}),h=async m=>{if(!n){a("You must be logged in to create an experience");return}s(!0),a(null);try{await Lu.createExperience(m),t==null||t(),e()}catch(g){a(g instanceof Error?g.message:"Failed to create experience")}finally{s(!1)}};return f.jsxs("form",{onSubmit:l(h),className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),f.jsx("input",{type:"text",...o("title"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.title&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.title.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),f.jsx("textarea",{...o("description"),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.description&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.description.message})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Duration (hours)"}),f.jsx("input",{type:"number",step:"0.5",...o("duration",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.duration&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.duration.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),f.jsxs("select",{...o("category"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",children:[f.jsx("option",{value:"",children:"Select a category"}),i4.map(m=>f.jsx("option",{value:m,children:m},m))]}),c.category&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.category.message})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Min participants"}),f.jsx("input",{type:"number",...o("minParticipants",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.minParticipants&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.minParticipants.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Max participants"}),f.jsx("input",{type:"number",...o("maxParticipants",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.maxParticipants&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.maxParticipants.message})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),f.jsx("input",{type:"text",...o("location"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),c.location&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.location.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image URL"}),f.jsx("input",{type:"url",...o("imageUrl"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",placeholder:"https://example.com/image.jpg"}),c.imageUrl&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.imageUrl.message})]}),i&&f.jsx(Bn,{message:i}),f.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[f.jsx("button",{type:"submit",disabled:r,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:ml-3 sm:w-auto sm:text-sm disabled:bg-gray-400",children:r?"Creating...":"Create Experience"}),f.jsx("button",{type:"button",onClick:e,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})},o4=({isOpen:t,onClose:e,onSuccess:n})=>t?f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:f.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:f.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[f.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:f.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:f.jsx(zd,{className:"h-6 w-6"})})}),f.jsx("div",{className:"sm:flex sm:items-start",children:f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Create New Experience"}),f.jsx(a4,{onSuccess:n,onClose:e})]})})]})]})}):null;class u4 extends ch{constructor(){super(...arguments),Xn(this,"COLLECTION","experiences")}async createExperience(e){return this.withAuth(async()=>(await il(Mn(Re,this.COLLECTION),{...e,createdAt:new Date,status:"active"})).id)}async getUserExperiences(e){return this.withAuth(async()=>{try{const n=Sa(Mn(Re,this.COLLECTION),xs("userId","==",e),xs("status","==","active"));return(await Ta(n)).docs.map(r=>({id:r.id,...r.data()}))}catch(n){throw console.error("❌ Error fetching user experiences:",n),new Error("Failed to fetch user experiences. Please try again later.")}})}async getAllExperiences(){return this.withAuth(async()=>{const e=Sa(Mn(Re,this.COLLECTION),xs("status","==","active"));return(await Ta(e)).docs.map(n=>({id:n.id,...n.data()}))})}async deleteExperience(e){return this.withAuth(async()=>{const n=kn(Re,this.COLLECTION,e);await Fg(n,{status:"deleted",updatedAt:new Date})})}}const l4=new u4,c4=$e.object({title:$e.string().min(3,"Le titre doit contenir au moins 3 caractères"),description:$e.string().min(10,"La description doit contenir au moins 10 caractères"),duration:$e.number().min(.5,"La durée minimum est de 30 minutes").max(8,"La durée maximum est de 8 heures"),category:$e.string().min(1,"Veuillez sélectionner une catégorie"),minParticipants:$e.number().min(1,"Minimum 1 participant"),maxParticipants:$e.number().min(1,"Minimum 1 participant"),location:$e.string().min(1,"Veuillez indiquer un lieu"),imageUrl:$e.string().url("Veuillez fournir une URL d'image valide")}),d4=["Sport","Musique","Cuisine","Art & Créativité","Technologie","Langues","Bien-être","Business","Éducation","Voyage","Autre"],h4=({experience:t,isOpen:e,onClose:n,onUpdate:r})=>{const[s,i]=M.useState(!1),{register:a,handleSubmit:o,formState:{errors:l}}=qg({resolver:Wg(c4),defaultValues:{title:t.title,description:t.description,duration:t.duration,category:t.category,minParticipants:t.minParticipants,maxParticipants:t.maxParticipants,location:t.location,imageUrl:t.imageUrl}}),c=async h=>{i(!0);try{await l4.updateExperience(t.id,h),r(),n()}catch(m){console.error("Erreur lors de la mise à jour de l'expérience:",m)}finally{i(!1)}};return e?f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:f.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:f.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[f.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:f.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-500",children:f.jsx(zd,{className:"h-6 w-6"})})}),f.jsx("div",{className:"sm:flex sm:items-start",children:f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Modifier l'expérience"}),f.jsxs("form",{onSubmit:o(c),className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Titre"}),f.jsx("input",{type:"text",...a("title"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),l.title&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.title.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),f.jsx("textarea",{...a("description"),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),l.description&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.description.message})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Durée (heures)"}),f.jsx("input",{type:"number",step:"0.5",...a("duration",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),l.duration&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.duration.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),f.jsxs("select",{...a("category"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",children:[f.jsx("option",{value:"",children:"Sélectionner une catégorie"}),d4.map(h=>f.jsx("option",{value:h,children:h},h))]}),l.category&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.category.message})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Min. participants"}),f.jsx("input",{type:"number",...a("minParticipants",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),l.minParticipants&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.minParticipants.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Max. participants"}),f.jsx("input",{type:"number",...a("maxParticipants",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),l.maxParticipants&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.maxParticipants.message})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lieu"}),f.jsx("input",{type:"text",...a("location"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),l.location&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.location.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"URL de l'image"}),f.jsx("input",{type:"url",...a("imageUrl"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black"}),l.imageUrl&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.imageUrl.message})]}),f.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[f.jsx("button",{type:"submit",disabled:s,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:ml-3 sm:w-auto sm:text-sm disabled:bg-gray-400",children:s?"Mise à jour...":"Mettre à jour"}),f.jsx("button",{type:"button",onClick:n,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:mt-0 sm:w-auto sm:text-sm",children:"Annuler"})]})]})]})})]})]})}):null},f4=({experience:t,onEdit:e,onDelete:n,isDeleting:r})=>{const s=async()=>{window.confirm("Are you sure you want to delete this experience?")&&await n(t.id)};return f.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("h3",{className:"font-medium",children:t.title}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:e,className:"text-gray-600 hover:text-black"}),f.jsx("button",{onClick:s,disabled:r,className:`text-gray-600 hover:text-red-600 transition-colors ${r?"opacity-50 cursor-not-allowed":""}`})]})]}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.description}),f.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[f.jsxs("span",{className:"text-sm font-medium",children:[t.duration,"h"]}),f.jsx("span",{className:"text-sm text-gray-500",children:t.category})]})]})},p4=()=>{const{user:t}=En(),[e,n]=M.useState([]),[r,s]=M.useState(!0),[i,a]=M.useState(null),[o,l]=M.useState(null),[c,h]=M.useState(!1),[m,g]=M.useState(null),_=async()=>{if(t!=null&&t.uid)try{s(!0),a(null);const C=await Lu.getUserExperiences(t.uid);n(C)}catch{a("Unable to load your experiences. Please try again.")}finally{s(!1)}};M.useEffect(()=>{t!=null&&t.uid&&_()},[t==null?void 0:t.uid]);const N=async C=>{try{l(C),a(null),await Lu.deleteExperience(C),n(O=>O.filter(E=>E.id!==C))}catch{a("Unable to delete the experience. Please try again.")}finally{l(null)}};return r?f.jsx(hr,{}):f.jsxs("div",{children:[i&&f.jsx(Bn,{message:i}),f.jsx("div",{className:"flex justify-end mb-4",children:f.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center px-4 py-2 bg-black text-white rounded-full hover:bg-gray-900",children:[f.jsx(dC,{className:"w-5 h-5 mr-2"}),"Add Experience"]})}),e.length===0?f.jsx("div",{className:"text-center py-8 bg-white rounded-lg",children:f.jsx("p",{className:"text-gray-500",children:"You haven't created any experiences yet"})}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(C=>f.jsx(f4,{experience:C,onEdit:()=>g(C),onDelete:N,isDeleting:o===C.id},C.id))}),f.jsx(o4,{isOpen:c,onClose:()=>h(!1),onSuccess:()=>{h(!1),_()}}),m&&f.jsx(h4,{experience:m,isOpen:!0,onClose:()=>g(null),onUpdate:()=>{g(null),_()}})]})};function JE(t="/login"){const{user:e,loading:n}=En(),r=Ua();return M.useEffect(()=>{!n&&!e&&r(t)},[e,n,r,t]),{user:e,loading:n}}const m4=()=>{const{loading:t}=JE();return t?f.jsx(hr,{}):f.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx("div",{className:"mb-8",children:f.jsx(lM,{})}),f.jsx("div",{className:"mb-8",children:f.jsx(cM,{})}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Mes réservations à venir"}),f.jsx(e4,{})]}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Mes expériences proposées"}),f.jsx(p4,{})]})]})})},e1=({selectedDate:t,onDateSelect:e,availableTimeSlots:n=[]})=>{const[r,s]=Ut.useState(new Date),i=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],a=kM(r),o=xM(a),l=Pa(a,{weekStartsOn:1}),c=SM(o,{weekStartsOn:1}),h=_M({start:l,end:c}),m=_=>n.some(N=>kd(N.date,_)),g=_=>{e&&Vb(_,r)&&e(_)};return f.jsxs("div",{className:"w-full max-w-md mx-auto bg-white rounded-lg shadow",children:[f.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[f.jsx("button",{onClick:()=>s(_=>new Date(_.getFullYear(),_.getMonth()-1)),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:"←"}),f.jsx("h2",{className:"text-lg font-semibold",children:Sr(r,"MMMM yyyy",{locale:Oa})}),f.jsx("button",{onClick:()=>s(_=>new Date(_.getFullYear(),_.getMonth()+1)),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:"→"})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:i.map(_=>f.jsx("div",{className:"text-center text-sm font-medium text-gray-600",children:_},_))}),f.jsx("div",{className:"grid grid-cols-7 gap-2",children:h.map((_,N)=>{const C=t&&kd(_,t),O=Vb(_,r),E=_<new Date(new Date().setHours(0,0,0,0)),v=m(_);return f.jsxs("div",{onClick:()=>!E&&O&&g(_),className:`
                  relative aspect-square flex flex-col items-center justify-center rounded-lg
                  ${O&&!E?"cursor-pointer hover:bg-gray-50":"cursor-not-allowed"}
                  ${C?"ring-2 ring-black":""}
                  ${E?"text-gray-300":""}
                  ${O?"":"text-gray-300"}
                `,children:[f.jsx("span",{className:`
                  text-sm font-medium
                  ${kR(_)?"bg-black text-white w-7 h-7 flex items-center justify-center rounded-full":""}
                `,children:Sr(_,"d")}),v&&O&&!E&&f.jsx("div",{className:"mt-1",children:f.jsx(cr,{className:"w-4 h-4 text-green-500"})})]},N)})})]})]})},g4=({experience:t,isOwner:e,onTimeSlotSelect:n})=>{const[r,s]=M.useState(null),[i,a]=M.useState([]),[o,l]=M.useState(null),[c,h]=M.useState(!0);M.useEffect(()=>{t.id&&m()},[t.id]);const m=async()=>{try{h(!0),l(null);const C=await Da.getExperienceAvailabilities(t.id);a(C)}catch{}finally{h(!1)}},g=C=>{n&&n({date:C.date,startTime:C.startTime,endTime:C.endTime})};if(c)return f.jsx(hr,{});if(o)return f.jsx(Bn,{message:o});const _=i.map(C=>({date:C.date,slots:[`${C.startTime}-${C.endTime}`]})),N=i.filter(C=>r&&kd(C.date,r));return f.jsxs("div",{className:"space-y-6",children:[f.jsx(e1,{selectedDate:r,onDateSelect:s,availableTimeSlots:_}),r&&N.length>0&&f.jsxs("div",{className:"mt-4",children:[f.jsxs("h3",{className:"text-lg font-medium mb-4",children:["Available slots for ",Sr(r,"EEEE d MMMM yyyy",{locale:Oa})]}),f.jsx("div",{className:"space-y-2",children:N.map(C=>f.jsxs("button",{onClick:()=>g(C),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(cr,{className:"w-5 h-5 text-gray-400 mr-2"}),f.jsxs("span",{className:"font-medium",children:[C.startTime," - ",C.endTime]})]}),f.jsx("span",{className:"text-sm text-gray-500",children:"Select"})]},C.id))})]}),r&&N.length===0&&f.jsx("div",{className:"text-center py-4 text-gray-500",children:"Merci de contacter le support à l'adresse suivante pour réserver timebank.contact@gmail.com"})]})},t1=({experience:t,isOpen:e,onClose:n})=>{const{user:r,userProfile:s}=En(),[i,a]=M.useState(!1),[o,l]=M.useState(null),[c,h]=M.useState(null),[m,g]=M.useState(null),_=O=>{l(null),h(O)},N=!!(c&&!i&&(r==null?void 0:r.uid)!==t.userId&&(s==null?void 0:s.timeBalance)>=t.duration),C=async()=>{if(!(!r||!s||!c))try{a(!0),l(null);const O=new Date(`${c.date.toISOString().split("T")[0]}T${c.startTime}`),E=new Date(`${c.date.toISOString().split("T")[0]}T${c.endTime}`);await vc.createBooking({experienceId:t.id,experienceTitle:t.title,hostUserId:t.userId,guestUserId:r.uid,timeSlot:{startTime:O,endTime:E},duration:t.duration,status:"pending"}),g("Réservation effectuée avec succès !"),setTimeout(()=>{n()},2e3)}catch(O){console.error("Create booking error:",O),l(O instanceof Error?O.message:"Impossible de finaliser la réservation")}finally{a(!1)}};return e?f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:f.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:f.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[f.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:f.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-500",children:f.jsx(zd,{className:"h-6 w-6"})})}),f.jsx("div",{className:"sm:flex sm:items-start",children:f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[f.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:["Réserver ",t.title]}),f.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(cr,{className:"w-5 h-5 text-gray-400 mr-2"}),f.jsxs("span",{className:"text-sm font-medium",children:["Durée : ",t.duration,"h"]})]}),f.jsxs("div",{className:"text-sm text-gray-500",children:["Votre solde : ",(s==null?void 0:s.timeBalance)||0,"h"]})]}),f.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(zm,{className:"w-4 h-4 mr-1"}),t.minParticipants,"-",t.maxParticipants," pers."]}),t.location&&f.jsxs("div",{className:"flex items-center",children:[f.jsx(c_,{className:"w-4 h-4 mr-1"}),t.location]})]})]}),o&&f.jsx(Bn,{message:o}),m&&f.jsx("div",{className:"mb-4 p-4 bg-green-50 text-green-700 rounded-lg",children:m}),f.jsx("div",{className:"mb-6",children:f.jsx(g4,{experience:t,isOwner:(r==null?void 0:r.uid)===t.userId,onTimeSlotSelect:_})}),f.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[f.jsx("button",{type:"button",onClick:C,disabled:!N||i,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:ml-3 sm:w-auto sm:text-sm disabled:bg-gray-400",children:i?"Réservation...":"Confirmer la réservation"}),f.jsx("button",{type:"button",onClick:n,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:mt-0 sm:w-auto sm:text-sm",children:"Annuler"})]})]})})]})]})}):null},y4=({experience:t})=>{const[e,n]=M.useState(!1),r=()=>{n(!0)};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[f.jsxs("div",{className:"relative h-48 w-full",children:[f.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute top-2 right-2",children:f.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-white/90 text-gray-800",children:t.category})})]}),f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.title}),f.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:t.description}),f.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-4",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(cr,{className:"w-4 h-4 mr-1"}),t.duration,"h"]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx(zm,{className:"w-4 h-4 mr-1"}),t.minParticipants,"-",t.maxParticipants," pers."]}),t.location&&f.jsxs("div",{className:"flex items-center",children:[f.jsx(c_,{className:"w-4 h-4 mr-1"}),t.location]})]}),f.jsx("button",{onClick:r,className:"w-full px-4 py-2 text-sm font-medium text-white bg-black rounded-full hover:bg-gray-900 transition-colors cursor-pointer",children:"Réserver"})]})]}),e&&f.jsx(t1,{experience:t,isOpen:e,onClose:()=>n(!1)})]})},v4=({experiences:t})=>{const[e,n]=M.useState(null);return t.length===0?f.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune expérience trouvée"}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>f.jsx(y4,{experience:r,onBook:()=>n(r)},r.id))}),e&&f.jsx(t1,{experience:e,isOpen:!!e,onClose:()=>n(null)})]})},w4=({searchTerm:t,onSearchChange:e,selectedCategory:n,onCategoryChange:r,categories:s})=>f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"relative",children:[f.jsx(d_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),f.jsx("input",{type:"text",placeholder:"Rechercher une expérience...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-black",value:t,onChange:i=>e(i.target.value)})]})}),f.jsxs("select",{className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-black",value:n,onChange:i=>r(i.target.value),children:[f.jsx("option",{value:"",children:"Toutes les catégories"}),s.map(i=>f.jsx("option",{value:i,children:i},i))]})]}),b4=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(""),[s,i]=M.useState([]),[a,o]=M.useState(!0),[l,c]=M.useState(null),h=async()=>{try{o(!0),c(null);const _=await Lu.getAllExperiences();i(_)}catch(_){c(_ instanceof Error?_.message:"Failed to load experiences")}finally{o(!1)}};M.useEffect(()=>{h()},[]);const m=Array.from(new Set(s.map(_=>_.category))),g=s.filter(_=>{const N=_.title.toLowerCase().includes(t.toLowerCase())||_.description.toLowerCase().includes(t.toLowerCase()),C=!n||_.category===n;return N&&C});return a?f.jsx(hr,{}):l?f.jsx(Bn,{message:l}):f.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Découvrir les expériences"}),f.jsx(w4,{searchTerm:t,onSearchChange:e,selectedCategory:n,onCategoryChange:r,categories:m}),f.jsx(v4,{experiences:g})]})})},x4=({selectedDate:t,onTimeSelect:e})=>{const[n,r]=M.useState("09:00"),[s,i]=M.useState("10:00"),[a,o]=M.useState(null),l=Array.from({length:24},(h,m)=>`${m.toString().padStart(2,"0")}:00`),c=h=>{if(h.preventDefault(),o(null),n>=s){o("End time must be after start time");return}e({startTime:n,endTime:s})};return t?f.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx(cr,{className:"w-5 h-5 text-gray-400 mr-2"}),f.jsx("h3",{className:"text-lg font-medium",children:"Choisir un créneau"})]}),f.jsxs("form",{onSubmit:c,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Début"}),f.jsx("select",{value:n,onChange:h=>{r(h.target.value),o(null)},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",children:l.map(h=>f.jsx("option",{value:h,children:h},h))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fin"}),f.jsx("select",{value:s,onChange:h=>{i(h.target.value),o(null)},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",children:l.map(h=>f.jsx("option",{value:h,disabled:h<=n,children:h},h))})]})]}),a&&f.jsx("p",{className:"text-sm text-red-600",children:a}),f.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-black text-white rounded-full hover:bg-gray-900",children:"Ajouter la disponibilité"})]})]}):null},_4=()=>{const{user:t}=En(),[e,n]=M.useState(null),[r,s]=M.useState([]),[i,a]=M.useState(!0),[o,l]=M.useState([]),[c,h]=M.useState(""),[m,g]=M.useState(null),[_,N]=M.useState(!1),[C,O]=M.useState(null);M.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{const x=await Lu.getUserExperiences(t.uid);l(x)}catch{g("Impossible de charger vos expériences")}finally{a(!1)}})()},[t==null?void 0:t.uid]);const E=async x=>{if(!e||!(t!=null&&t.uid)||!c){g("Veuillez sélectionner une expérience et une date");return}try{g(null),await Da.createAvailability({userId:t.uid,experienceId:c,date:e,startTime:x.startTime,endTime:x.endTime}),s(j=>{const V=j.findIndex($=>Sr($.date,"yyyy-MM-dd")===Sr(e,"yyyy-MM-dd"));if(V>=0){const $=[...j];return $[V]={date:e,slots:[...j[V].slots,`${x.startTime}-${x.endTime}`]},$}return[...j,{date:e,slots:[`${x.startTime}-${x.endTime}`]}]}),O("Créneau ajouté avec succès"),setTimeout(()=>O(null),3e3)}catch(j){g(j instanceof Error?j.message:"Failed to add time slot")}},v=async()=>{if(!(t!=null&&t.uid)||!c||r.length===0){g("Veuillez sélectionner une expérience et ajouter au moins un créneau");return}try{N(!0),g(null);const x=r.flatMap(({date:j,slots:V})=>V.map($=>{const[S,w]=$.split("-");return{userId:t.uid,experienceId:c,date:j,startTime:S,endTime:w}}));await Promise.all(x.map(j=>Da.createAvailability(j))),O("Vos disponibilités ont été enregistrées avec succès"),setTimeout(()=>O(null),3e3),n(null),s([])}catch(x){g(x instanceof Error?x.message:"Failed to save availabilities")}finally{N(!1)}};return i?f.jsx(hr,{}):f.jsx("div",{className:"space-y-8",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sélectionnez une expérience"}),f.jsxs("select",{value:c,onChange:x=>h(x.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black",children:[f.jsx("option",{value:"",children:"Choisir une expérience"}),o.map(x=>f.jsx("option",{value:x.id,children:x.title},x.id))]})]}),f.jsx(e1,{selectedDate:e,onDateSelect:n,availableTimeSlots:r})]}),f.jsxs("div",{className:"space-y-6",children:[m&&f.jsx(Bn,{message:m}),C&&f.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:f.jsx("p",{className:"text-sm text-green-700",children:C})}),f.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[f.jsx("h3",{className:"text-lg font-medium mb-4",children:e?`Créneaux pour le ${Sr(e,"dd MMMM yyyy",{locale:Oa})}`:"Sélectionnez une date"}),e&&c&&f.jsx(x4,{selectedDate:e,onTimeSelect:E}),e&&!c&&f.jsx("p",{className:"text-sm text-gray-500",children:"Veuillez d'abord sélectionner une expérience"})]}),r.length>0&&f.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[f.jsx("h3",{className:"text-lg font-medium mb-4",children:"Créneaux sélectionnés"}),f.jsx("div",{className:"space-y-2",children:r.map(({date:x,slots:j})=>f.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[f.jsx("p",{className:"font-medium",children:Sr(x,"EEEE d MMMM",{locale:Oa})}),f.jsx("div",{className:"mt-2 space-y-1",children:j.map((V,$)=>f.jsx("p",{className:"text-sm text-gray-600",children:V.replace("-"," à ")},$))})]},x.toISOString()))}),f.jsx("button",{onClick:v,disabled:_,className:"mt-4 w-full px-4 py-2 bg-black text-white rounded-full hover:bg-gray-900 disabled:bg-gray-400 transition-colors",children:_?"Enregistrement...":"Valider mes disponibilités"})]})]})]})})},k4=()=>{const{user:t}=En(),[e,n]=M.useState([]),[r,s]=M.useState(!0),[i,a]=M.useState(null),[o,l]=M.useState(null),c=async()=>{if(t!=null&&t.uid)try{s(!0),a(null);const m=await Da.getUserAvailabilities(t.uid);n(m.sort((g,_)=>g.date.getTime()-_.date.getTime()))}catch(m){console.error("Error loading availabilities:",m),a("Unable to load your availabilities. Please try again.")}finally{s(!1)}};M.useEffect(()=>(c(),window.addEventListener("availability-updated",c),()=>window.removeEventListener("availability-updated",c)),[t==null?void 0:t.uid]);const h=async m=>{try{l(m),a(null),await Da.deleteAvailability(m),n(g=>g.filter(_=>_.id!==m))}catch(g){console.error("Error deleting availability:",g),a("Unable to delete the availability. Please try again.")}finally{l(null)}};return r?f.jsx(hr,{}):i?f.jsx(Bn,{message:i}):f.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[f.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Créneaux disponibles"}),f.jsx("div",{className:"space-y-4",children:e.length===0?f.jsx("p",{className:"text-center text-gray-500 py-4",children:"Aucun créneau disponible"}):e.map(m=>f.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx(cr,{className:"w-5 h-5 text-gray-400"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:Sr(m.date,"EEEE d MMMM",{locale:Oa})}),f.jsxs("p",{className:"text-sm text-gray-500",children:[m.startTime," - ",m.endTime]})]})]}),f.jsx("button",{onClick:()=>h(m.id),disabled:o===m.id,className:`text-gray-400 hover:text-red-600 transition-colors ${o===m.id?"opacity-50 cursor-not-allowed":""}`,children:f.jsx(pC,{className:"w-5 h-5"})})]},m.id))})]})},E4=()=>{const{loading:t}=JE();return t?f.jsx(hr,{}):f.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Mes disponibilités"}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsx(_4,{}),f.jsx(k4,{})]})]})})},yf=({children:t})=>{const{user:e,loading:n}=En();return n?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black"})}):e?f.jsx(f.Fragment,{children:t}):f.jsx(KN,{to:"/login",replace:!0})},S4=()=>f.jsx(nC,{children:f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx(Nj,{}),f.jsx("main",{className:"pt-16",children:f.jsxs(GN,{children:[f.jsx(Qs,{path:"/",element:f.jsx(Ij,{})}),f.jsx(Qs,{path:"/login",element:f.jsx(oM,{})}),f.jsx(Qs,{path:"/register",element:f.jsx(uM,{})}),f.jsx(Qs,{path:"/dashboard",element:f.jsx(yf,{children:f.jsx(m4,{})})}),f.jsx(Qs,{path:"/experiences",element:f.jsx(yf,{children:f.jsx(b4,{})})}),f.jsx(Qs,{path:"/availability",element:f.jsx(yf,{children:f.jsx(E4,{})})})]})})]})}),T4=M.createContext({user:null,userProfile:null,loading:!0,error:null}),N4=({children:t})=>{const[e,n]=M.useState(null),[r,s]=M.useState(null),[i,a]=M.useState(!0),[o,l]=M.useState(null);M.useEffect(()=>{const h=oh.onAuthStateChanged(async m=>{n(m),a(!0);try{if(m){const g=await Na.getUserProfile(m.uid);s(g),l(null)}else s(null)}catch(g){console.error("Error loading profile:",g),l("Unable to load user profile")}finally{a(!1)}});return()=>h()},[]);const c={user:e,userProfile:r,loading:i,error:o};return f.jsx(T4.Provider,{value:c,children:t})},n1=document.getElementById("root");if(!n1)throw new Error("Failed to find the root element");const C4=e_(n1);C4.render(f.jsx(Ut.StrictMode,{children:f.jsxs(N4,{children:[" ",f.jsx(S4,{})]})}));
